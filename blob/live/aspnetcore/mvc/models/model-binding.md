---
title: "Привязка модели"
author: rick-anderson
description: 
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/models/model-binding
ms.openlocfilehash: 84b9c5dc3a87b739affaeaecaa180d1b01f49b8e
ms.sourcegitcommit: 3e303620a125325bb9abd4b2d315c106fb8c47fd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="model-binding"></a><span data-ttu-id="586ec-102">Привязка модели</span><span class="sxs-lookup"><span data-stu-id="586ec-102">Model Binding</span></span>

<span data-ttu-id="586ec-103">По [Рэйчел Аппель](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="586ec-103">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-binding"></a><span data-ttu-id="586ec-104">Общие сведения о привязки модели</span><span class="sxs-lookup"><span data-stu-id="586ec-104">Introduction to model binding</span></span>

<span data-ttu-id="586ec-105">Привязка модели в ASP.NET Core MVC сопоставляет данные из HTTP-запросы с параметрами метода действия.</span><span class="sxs-lookup"><span data-stu-id="586ec-105">Model binding in ASP.NET Core MVC maps data from HTTP requests to action method parameters.</span></span> <span data-ttu-id="586ec-106">Параметры могут быть простые типы, такие как строки, целые числа или значений с плавающей запятой, или они могут быть сложные типы.</span><span class="sxs-lookup"><span data-stu-id="586ec-106">The parameters may be simple types such as strings, integers, or floats, or they may be complex types.</span></span> <span data-ttu-id="586ec-107">Это прекрасная возможность MVC, так как сопоставление входящих данных аналога часто повторяющихся сценарий, независимо от размера и сложности данных.</span><span class="sxs-lookup"><span data-stu-id="586ec-107">This is a great feature of MVC because mapping incoming data to a counterpart is an often repeated scenario, regardless of size or complexity of the data.</span></span> <span data-ttu-id="586ec-108">MVC решает эту проблему, Воспринимая привязки, поэтому разработчикам не нужно сохранять перезаписи другая версия этого же кода в каждом приложении.</span><span class="sxs-lookup"><span data-stu-id="586ec-108">MVC solves this problem by abstracting binding away so developers don't have to keep rewriting a slightly different version of that same code in every app.</span></span> <span data-ttu-id="586ec-109">Запись текста в тип преобразователя кода сложным и подвержены ошибкам.</span><span class="sxs-lookup"><span data-stu-id="586ec-109">Writing your own text to type converter code is tedious, and error prone.</span></span>

## <a name="how-model-binding-works"></a><span data-ttu-id="586ec-110">Как работает привязка модели</span><span class="sxs-lookup"><span data-stu-id="586ec-110">How model binding works</span></span>

<span data-ttu-id="586ec-111">Когда MVC получает запрос HTTP, он направляет его в метод определенного действия контроллера.</span><span class="sxs-lookup"><span data-stu-id="586ec-111">When MVC receives an HTTP request, it routes it to a specific action method of a controller.</span></span> <span data-ttu-id="586ec-112">Он определяет, какой метод действия, необходимо запускать на основании возможности маршрутизации данных, а затем привязывает значения из HTTP-запроса с параметрами метода действия.</span><span class="sxs-lookup"><span data-stu-id="586ec-112">It determines which action method to run based on what is in the route data, then it binds values from the HTTP request to that action method's parameters.</span></span> <span data-ttu-id="586ec-113">Например рассмотрим следующий URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="586ec-113">For example, consider the following URL:</span></span>

`http://contoso.com/movies/edit/2`

<span data-ttu-id="586ec-114">Поскольку шаблон маршрута выглядит следующим образом, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` направляет `Movies` контроллера и его `Edit` метода действия.</span><span class="sxs-lookup"><span data-stu-id="586ec-114">Since the route template looks like this, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` routes to the `Movies` controller, and its `Edit` action method.</span></span> <span data-ttu-id="586ec-115">Он также принимает необязательный параметр с именем `id`.</span><span class="sxs-lookup"><span data-stu-id="586ec-115">It also accepts an optional parameter called `id`.</span></span> <span data-ttu-id="586ec-116">Код для метода действия должен выглядеть примерно следующим образом:</span><span class="sxs-lookup"><span data-stu-id="586ec-116">The code for the action method should look something like this:</span></span>

```csharp
public IActionResult Edit(int? id)
   ```

<span data-ttu-id="586ec-117">Примечание: Строк в URL-адрес маршрута не учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="586ec-117">Note: The strings in the URL route are not case sensitive.</span></span>

<span data-ttu-id="586ec-118">MVC пытается привязать данные запроса с параметрами действия по имени.</span><span class="sxs-lookup"><span data-stu-id="586ec-118">MVC will try to bind request data to the action parameters by name.</span></span> <span data-ttu-id="586ec-119">MVC будет искать значения для каждого параметра, используя имя параметра и имена его открытые устанавливаемые свойства.</span><span class="sxs-lookup"><span data-stu-id="586ec-119">MVC will look for values for each parameter using the parameter name and the names of its public settable properties.</span></span> <span data-ttu-id="586ec-120">В приведенном выше примере параметр единственным действием называется `id`, которое MVC привязывает значение с тем же именем в значения маршрута.</span><span class="sxs-lookup"><span data-stu-id="586ec-120">In the above example, the only action parameter is named `id`, which MVC binds to the value with the same name in the route values.</span></span> <span data-ttu-id="586ec-121">Помимо значений маршрута MVC будет привязывать данные из различных частей запроса, и она делает это в заданном порядке.</span><span class="sxs-lookup"><span data-stu-id="586ec-121">In addition to route values MVC will bind data from various parts of the request and it does so in a set order.</span></span> <span data-ttu-id="586ec-122">Ниже приведен список источников данных в порядке, в котором их просматривает привязки модели.</span><span class="sxs-lookup"><span data-stu-id="586ec-122">Below is a list of the data sources in the order that model binding looks through them:</span></span>

1. <span data-ttu-id="586ec-123">`Form values`: Это значений формы, перейдите в HTTP-запроса, с помощью метода POST.</span><span class="sxs-lookup"><span data-stu-id="586ec-123">`Form values`: These are form values that go in the HTTP request using the POST method.</span></span> <span data-ttu-id="586ec-124">(включая запросы POST jQuery).</span><span class="sxs-lookup"><span data-stu-id="586ec-124">(including jQuery POST requests).</span></span>

2. <span data-ttu-id="586ec-125">`Route values`: Набор значений маршрута, предоставляемые [маршрутизации](../../fundamentals/routing.md)</span><span class="sxs-lookup"><span data-stu-id="586ec-125">`Route values`: The set of route values provided by [Routing](../../fundamentals/routing.md)</span></span>

3. <span data-ttu-id="586ec-126">`Query strings`: Часть URI, строка запроса.</span><span class="sxs-lookup"><span data-stu-id="586ec-126">`Query strings`: The query string part of the URI.</span></span>

<!-- DocFX BUG
The link works but generates an error when building with DocFX
@fundamentals/routing
[Routing](xref:fundamentals/routing)
-->

<span data-ttu-id="586ec-127">Примечание: Формы, значения, данные о маршруте и запросов строки хранятся как пары "имя значение".</span><span class="sxs-lookup"><span data-stu-id="586ec-127">Note: Form values, route data, and query strings are all stored as name-value pairs.</span></span>

<span data-ttu-id="586ec-128">Так как привязки модели и ответы для ключа с именем `id` и нет ничего с именем `id` значений формы, он перемещен в поиске разделу значения маршрута.</span><span class="sxs-lookup"><span data-stu-id="586ec-128">Since model binding asked for a key named `id` and there is nothing named `id` in the form values, it moved on to the route values looking for that key.</span></span> <span data-ttu-id="586ec-129">В нашем примере это совпадение.</span><span class="sxs-lookup"><span data-stu-id="586ec-129">In our example, it's a match.</span></span> <span data-ttu-id="586ec-130">Привязки, а значение преобразуется в целочисленное значение 2.</span><span class="sxs-lookup"><span data-stu-id="586ec-130">Binding happens, and the value is converted to the integer 2.</span></span> <span data-ttu-id="586ec-131">Тот же запрос, с помощью редактирования (идентификатор строки) будет преобразовать в строку «2».</span><span class="sxs-lookup"><span data-stu-id="586ec-131">The same request using Edit(string id) would convert to the string "2".</span></span>

<span data-ttu-id="586ec-132">До сих в примере простых типов.</span><span class="sxs-lookup"><span data-stu-id="586ec-132">So far the example uses simple types.</span></span> <span data-ttu-id="586ec-133">В MVC простые типы являются любого .NET примитивного типа или типа с преобразователь строкового типа.</span><span class="sxs-lookup"><span data-stu-id="586ec-133">In MVC simple types are any .NET primitive type or type with a string type converter.</span></span> <span data-ttu-id="586ec-134">Если параметр метода действия были класса, такие как `Movie` тип, который содержит простые и сложные типы, как свойства, будет привязка модели MVC по-прежнему обрабатываются он хорошо.</span><span class="sxs-lookup"><span data-stu-id="586ec-134">If the action method's parameter were a class such as the `Movie` type, which contains both simple and complex types as properties, MVC's model binding will still handle it nicely.</span></span> <span data-ttu-id="586ec-135">Она использует отражение и рекурсии для обхода свойств сложных типов, поиск совпадения.</span><span class="sxs-lookup"><span data-stu-id="586ec-135">It uses reflection and recursion to traverse the properties of complex types looking for matches.</span></span> <span data-ttu-id="586ec-136">Привязка модели ищет шаблон *parameter_name.property_name* для привязки значений к свойствам.</span><span class="sxs-lookup"><span data-stu-id="586ec-136">Model binding looks for the pattern *parameter_name.property_name* to bind values to properties.</span></span> <span data-ttu-id="586ec-137">Если он не находит совпадающие значения этой формы, будет пытаться осуществить привязку с помощью имени свойства.</span><span class="sxs-lookup"><span data-stu-id="586ec-137">If it doesn't find matching values of this form, it will attempt to bind using just the property name.</span></span> <span data-ttu-id="586ec-138">Для этих типов, таких как `Collection` типов привязки модели ищет совпадения с *parameter_name [index]* или просто *[index]*.</span><span class="sxs-lookup"><span data-stu-id="586ec-138">For those types such as `Collection` types, model binding looks for matches to *parameter_name[index]* or just *[index]*.</span></span> <span data-ttu-id="586ec-139">Модель рассматривает привязки `Dictionary` аналогичным образом, типы, запрашивая *parameter_name [key]* или просто *[key]*, при условии, что ключи являются простыми типами.</span><span class="sxs-lookup"><span data-stu-id="586ec-139">Model binding treats  `Dictionary` types similarly, asking for *parameter_name[key]* or just *[key]*, as long as the keys are simple types.</span></span> <span data-ttu-id="586ec-140">Ключи, которые поддерживаются совпадать с именами полей HTML и вспомогательных функций тегов, созданных для того же типа модели.</span><span class="sxs-lookup"><span data-stu-id="586ec-140">Keys that are supported match the field names HTML and tag helpers generated for the same model type.</span></span> <span data-ttu-id="586ec-141">Это позволяет значения кругового пути, чтобы поля формы быть заполнено с входными данными пользователя для их удобства, например, при связанных данных из Создание или изменение не прошел проверку.</span><span class="sxs-lookup"><span data-stu-id="586ec-141">This enables round-tripping values so that the form fields remain filled with the user's input for their convenience, for example, when bound data from a create or edit did not pass validation.</span></span>

<span data-ttu-id="586ec-142">Для привязки к класса должен иметь открытый конструктор по умолчанию и элемент для привязки должны быть открытыми свойствами для записи.</span><span class="sxs-lookup"><span data-stu-id="586ec-142">In order for binding to happen the class must have a public default constructor and member to be bound must be public writable properties.</span></span> <span data-ttu-id="586ec-143">Когда происходит привязка модели класс только создать экземпляр с помощью открытый конструктор по умолчанию, можно задать свойства.</span><span class="sxs-lookup"><span data-stu-id="586ec-143">When model binding happens the class will only be instantiated using the public default constructor, then the properties can be set.</span></span>

<span data-ttu-id="586ec-144">При привязке параметра привязки модели прекращает поиск значений с таким именем, и он переходит к привязать следующего параметра.</span><span class="sxs-lookup"><span data-stu-id="586ec-144">When a parameter is bound, model binding stops looking for values with that name and it moves on to bind the next parameter.</span></span> <span data-ttu-id="586ec-145">В противном случае поведение привязки модели по умолчанию задает параметры к значениям по умолчанию, в зависимости от их типа:</span><span class="sxs-lookup"><span data-stu-id="586ec-145">Otherwise, the default model binding behavior sets parameters to their default values depending on their type:</span></span>

* <span data-ttu-id="586ec-146">`T[]`: За исключением элемента массивы типа `byte[]`, привязка задает параметры типа `T[]` для `Array.Empty<T>()`.</span><span class="sxs-lookup"><span data-stu-id="586ec-146">`T[]`: With the exception of arrays of type `byte[]`, binding sets parameters of type `T[]` to `Array.Empty<T>()`.</span></span> <span data-ttu-id="586ec-147">Массивы типа `byte[]` присваиваются `null`.</span><span class="sxs-lookup"><span data-stu-id="586ec-147">Arrays of type `byte[]` are set to `null`.</span></span>

* <span data-ttu-id="586ec-148">Ссылочные типы: Привязки создает экземпляр класса с помощью конструктора по умолчанию без задания свойств.</span><span class="sxs-lookup"><span data-stu-id="586ec-148">Reference Types: Binding creates an instance of a class with the default constructor without setting properties.</span></span> <span data-ttu-id="586ec-149">Однако модели привязки наборов `string` параметры `null`.</span><span class="sxs-lookup"><span data-stu-id="586ec-149">However, model binding sets `string` parameters to `null`.</span></span>

* <span data-ttu-id="586ec-150">Типы, допускающие значение NULL: Типы, допускающие значение NULL, присваивается `null`.</span><span class="sxs-lookup"><span data-stu-id="586ec-150">Nullable Types: Nullable types are set to `null`.</span></span> <span data-ttu-id="586ec-151">В приведенном выше примере модель привязки наборов `id` для `null` , так как он имеет тип `int?`.</span><span class="sxs-lookup"><span data-stu-id="586ec-151">In the above example, model binding sets `id` to `null` since it is of type `int?`.</span></span>

* <span data-ttu-id="586ec-152">Типы значений: Запретом типы значений типа `T` присваиваются `default(T)`.</span><span class="sxs-lookup"><span data-stu-id="586ec-152">Value Types: Non-nullable value types of type `T` are set to `default(T)`.</span></span> <span data-ttu-id="586ec-153">Например, привязка модели параметру `int id` значение 0.</span><span class="sxs-lookup"><span data-stu-id="586ec-153">For example, model binding will set a parameter `int id` to 0.</span></span> <span data-ttu-id="586ec-154">Можно с помощью проверки модели или типы, допускающие значение NULL, не полагаясь на значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="586ec-154">Consider using model validation or nullable types rather than relying on default values.</span></span>

<span data-ttu-id="586ec-155">Если привязка не выполняется, MVC не вызывают ошибку.</span><span class="sxs-lookup"><span data-stu-id="586ec-155">If binding fails, MVC does not throw an error.</span></span> <span data-ttu-id="586ec-156">Каждое действие, который принимающее вводимые пользователем данные следует проверять `ModelState.IsValid` свойство.</span><span class="sxs-lookup"><span data-stu-id="586ec-156">Every action which accepts user input should check the `ModelState.IsValid` property.</span></span>

<span data-ttu-id="586ec-157">Примечание: Каждая запись на контроллере `ModelState` свойство `ModelStateEntry` содержащий `Errors` свойство.</span><span class="sxs-lookup"><span data-stu-id="586ec-157">Note: Each entry in the controller's `ModelState` property is a `ModelStateEntry` containing an `Errors` property.</span></span> <span data-ttu-id="586ec-158">Редко бывает необходимо самостоятельно запроса этой коллекции.</span><span class="sxs-lookup"><span data-stu-id="586ec-158">It's rarely necessary to query this collection yourself.</span></span> <span data-ttu-id="586ec-159">Взамен рекомендуется использовать `ModelState.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="586ec-159">Use `ModelState.IsValid` instead.</span></span>

<span data-ttu-id="586ec-160">Кроме того существуют некоторые особые типы данных, MVC необходимо учитывать при выполнении привязки модели:</span><span class="sxs-lookup"><span data-stu-id="586ec-160">Additionally, there are some special data types that MVC must consider when performing model binding:</span></span>

* <span data-ttu-id="586ec-161">`IFormFile`, `IEnumerable<IFormFile>`: Один или несколько переданные файлы, которые являются частью HTTP-запроса.</span><span class="sxs-lookup"><span data-stu-id="586ec-161">`IFormFile`, `IEnumerable<IFormFile>`: One or more uploaded files that are part of the HTTP request.</span></span>

* <span data-ttu-id="586ec-162">`CancellationToken`: Используется для отмены действия в асинхронных контроллеров.</span><span class="sxs-lookup"><span data-stu-id="586ec-162">`CancellationToken`: Used to cancel activity in asynchronous controllers.</span></span>

<span data-ttu-id="586ec-163">Эти типы можно привязать к параметрам действия или к свойствам типа класса.</span><span class="sxs-lookup"><span data-stu-id="586ec-163">These types can be bound to action parameters or to properties on a class type.</span></span>

<span data-ttu-id="586ec-164">После привязки модели [проверки](validation.md) происходит.</span><span class="sxs-lookup"><span data-stu-id="586ec-164">Once model binding is complete, [Validation](validation.md) occurs.</span></span> <span data-ttu-id="586ec-165">Привязка модели по умолчанию отлично подходит для большинства сценариев разработки.</span><span class="sxs-lookup"><span data-stu-id="586ec-165">Default model binding works great for the vast majority of development scenarios.</span></span> <span data-ttu-id="586ec-166">Он также является расширяемым, если у вас есть потребности можно настроить встроенное поведение.</span><span class="sxs-lookup"><span data-stu-id="586ec-166">It is also extensible so if you have unique needs you can customize the built-in behavior.</span></span>

## <a name="customize-model-binding-behavior-with-attributes"></a><span data-ttu-id="586ec-167">Настройка поведения привязки модели с атрибутами</span><span class="sxs-lookup"><span data-stu-id="586ec-167">Customize model binding behavior with attributes</span></span>

<span data-ttu-id="586ec-168">MVC содержит несколько атрибутов, которые можно использовать для направления поведения привязки модели по умолчанию для другого источника.</span><span class="sxs-lookup"><span data-stu-id="586ec-168">MVC contains several attributes that you can use to direct its default model binding behavior to a different source.</span></span> <span data-ttu-id="586ec-169">Например, можно указать будет ли привязка обязательна для свойства или вообще его не случится с помощью `[BindRequired]` или `[BindNever]` атрибуты.</span><span class="sxs-lookup"><span data-stu-id="586ec-169">For example, you can specify whether binding is required for a property, or if it should never happen at all by using the `[BindRequired]` or `[BindNever]` attributes.</span></span> <span data-ttu-id="586ec-170">Кроме того можно переопределить источник данных по умолчанию и укажите источник данных связывателя модели.</span><span class="sxs-lookup"><span data-stu-id="586ec-170">Alternatively, you can override the default data source, and specify the model binder's data source.</span></span> <span data-ttu-id="586ec-171">Ниже приведен список атрибутов привязки модели.</span><span class="sxs-lookup"><span data-stu-id="586ec-171">Below is a list of model binding attributes:</span></span>

* <span data-ttu-id="586ec-172">`[BindRequired]`: Этот атрибут добавляет ошибку модели состояние, если невозможно выполнить привязку.</span><span class="sxs-lookup"><span data-stu-id="586ec-172">`[BindRequired]`: This attribute adds a model state error if binding cannot occur.</span></span>

* <span data-ttu-id="586ec-173">`[BindNever]`: Указывает связывателя модели, никогда не связано с этим параметром.</span><span class="sxs-lookup"><span data-stu-id="586ec-173">`[BindNever]`: Tells the model binder to never bind to this parameter.</span></span>

* <span data-ttu-id="586ec-174">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Используются для указания точного привязки источника, необходимо применить.</span><span class="sxs-lookup"><span data-stu-id="586ec-174">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Use these to specify the exact binding source you want to apply.</span></span>

* <span data-ttu-id="586ec-175">`[FromServices]`: Этот атрибут содержит [внедрения зависимостей](../../fundamentals/dependency-injection.md) для привязки параметров из служб.</span><span class="sxs-lookup"><span data-stu-id="586ec-175">`[FromServices]`: This attribute uses [dependency injection](../../fundamentals/dependency-injection.md) to bind parameters from services.</span></span>

* <span data-ttu-id="586ec-176">`[FromBody]`: Используется настроенный модули форматирования для привязки данных в тексте запроса.</span><span class="sxs-lookup"><span data-stu-id="586ec-176">`[FromBody]`: Use the configured formatters to bind data from the request body.</span></span> <span data-ttu-id="586ec-177">Модуль форматирования выбирается в зависимости от типа содержимого запроса.</span><span class="sxs-lookup"><span data-stu-id="586ec-177">The formatter is selected based on content type of the request.</span></span>

* <span data-ttu-id="586ec-178">`[ModelBinder]`: Используется для переопределения связыватель модели по умолчанию, источник привязки и имя.</span><span class="sxs-lookup"><span data-stu-id="586ec-178">`[ModelBinder]`: Used to override the default model binder, binding source and name.</span></span>

<span data-ttu-id="586ec-179">Атрибуты имеют очень полезных инструментов, когда необходимо переопределить поведение по умолчанию привязки модели.</span><span class="sxs-lookup"><span data-stu-id="586ec-179">Attributes are very helpful tools when you need to override the default behavior of model binding.</span></span>

## <a name="binding-formatted-data-from-the-request-body"></a><span data-ttu-id="586ec-180">Привязка форматированные данные из текста запроса</span><span class="sxs-lookup"><span data-stu-id="586ec-180">Binding formatted data from the request body</span></span>

<span data-ttu-id="586ec-181">Запрос данные могут поступать в различных форматах, включая JSON, XML и многие другие.</span><span class="sxs-lookup"><span data-stu-id="586ec-181">Request data can come in a variety of formats including JSON, XML and many others.</span></span> <span data-ttu-id="586ec-182">При использовании атрибута [FromBody] для указания, что нужно привязать параметр к данным в тексте запроса, MVC использует настроенный набор модулей форматирования для обработки данных запрос на основе типа содержимого.</span><span class="sxs-lookup"><span data-stu-id="586ec-182">When you use the [FromBody] attribute to indicate that you want to bind a parameter to data in the request body, MVC uses a configured set of formatters to handle the request data based on its content type.</span></span> <span data-ttu-id="586ec-183">По умолчанию MVC включает `JsonInputFormatter` класса для обработки данных JSON, но можно добавить дополнительные модули форматирования для обработки XML и других пользовательских форматов.</span><span class="sxs-lookup"><span data-stu-id="586ec-183">By default MVC includes a `JsonInputFormatter` class for handling JSON data, but you can add additional formatters for handling XML and other custom formats.</span></span>

> [!NOTE]
> <span data-ttu-id="586ec-184">Может существовать не более одного параметра каждого действия с `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="586ec-184">There can be at most one parameter per action decorated with `[FromBody]`.</span></span> <span data-ttu-id="586ec-185">Времени выполнения ASP.NET Core MVC делегирует ответственность за чтения в поток запроса модуль форматирования.</span><span class="sxs-lookup"><span data-stu-id="586ec-185">The ASP.NET Core MVC run-time delegates the responsibility of reading the request stream to the formatter.</span></span> <span data-ttu-id="586ec-186">Когда для параметра прочитать поток запроса, это обычно невозможно прочитать поток запроса для привязки других `[FromBody]` параметров.</span><span class="sxs-lookup"><span data-stu-id="586ec-186">Once the request stream is read for a parameter, it's generally not possible to read the request stream again for binding other `[FromBody]` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="586ec-187">`JsonInputFormatter` Форматирования по умолчанию и основанное на [Json.NET](https://www.newtonsoft.com/json).</span><span class="sxs-lookup"><span data-stu-id="586ec-187">The `JsonInputFormatter` is the default formatter and is based on [Json.NET](https://www.newtonsoft.com/json).</span></span>

<span data-ttu-id="586ec-188">ASP.NET выбирает входной модули форматирования на основе [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) заголовок и тип параметра, при отсутствии атрибута, примененного к нему задание, в противном случае.</span><span class="sxs-lookup"><span data-stu-id="586ec-188">ASP.NET selects input formatters based on the [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) header and the type of the parameter, unless there is an attribute applied to it specifying otherwise.</span></span> <span data-ttu-id="586ec-189">Если вы хотите использовать XML или другой формат необходимо настроить его в *файла Startup.cs* файл, но возможно, сначала нужно получить ссылку на `Microsoft.AspNetCore.Mvc.Formatters.Xml` с помощью NuGet.</span><span class="sxs-lookup"><span data-stu-id="586ec-189">If you'd like to use XML or another format you must configure it in the *Startup.cs* file, but you may first have to obtain a reference to `Microsoft.AspNetCore.Mvc.Formatters.Xml` using NuGet.</span></span> <span data-ttu-id="586ec-190">Код запуска должен выглядеть примерно следующим образом:</span><span class="sxs-lookup"><span data-stu-id="586ec-190">Your startup code should look something like this:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddXmlSerializerFormatters();
   }
```

<span data-ttu-id="586ec-191">Код в *файла Startup.cs* файл содержит `ConfigureServices` метод с `services` аргумента можно использовать для построения служб для приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="586ec-191">Code in the *Startup.cs* file contains a `ConfigureServices` method with a `services` argument you can use to build up services for your ASP.NET app.</span></span> <span data-ttu-id="586ec-192">В этом примере мы добавляем модуль форматирования XML как служба, которая будет предоставлять MVC для этого приложения.</span><span class="sxs-lookup"><span data-stu-id="586ec-192">In the sample, we are adding an XML formatter as a service that MVC will provide for this app.</span></span> <span data-ttu-id="586ec-193">`options` Аргумент, переданный в `AddMvc` метод позволяет добавлять и управлять фильтры, форматирования и другие системные параметры из MVC при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="586ec-193">The `options` argument passed into the `AddMvc` method allows you to add and manage filters, formatters, and other system options from MVC upon app startup.</span></span> <span data-ttu-id="586ec-194">Затем примените `Consumes` контроллера классы или методы действий для работы с необходимый формат.</span><span class="sxs-lookup"><span data-stu-id="586ec-194">Then apply the `Consumes` attribute to controller classes or action methods to work with the format you want.</span></span>

### <a name="custom-model-binding"></a><span data-ttu-id="586ec-195">Привязка пользовательских модели</span><span class="sxs-lookup"><span data-stu-id="586ec-195">Custom Model Binding</span></span>

<span data-ttu-id="586ec-196">Привязка модели можно расширить, добавив собственные пользовательские связыватели.</span><span class="sxs-lookup"><span data-stu-id="586ec-196">You can extend model binding by writing your own custom model binders.</span></span> <span data-ttu-id="586ec-197">Дополнительные сведения о [пользовательскую модель привязки](../advanced/custom-model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="586ec-197">Learn more about [custom model binding](../advanced/custom-model-binding.md).</span></span>
