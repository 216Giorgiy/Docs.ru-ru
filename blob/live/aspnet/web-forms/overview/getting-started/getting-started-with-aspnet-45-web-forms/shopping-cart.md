---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
title: "Корзина для покупок | Документы Microsoft"
author: Erikre
description: "Этот учебник ряд описываются основы построения приложения веб-форм ASP.NET с помощью ASP.NET 4.5 и Microsoft Visual Studio Express 2013 для мы..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 6898c601-6c31-432f-8388-e6843f8a17cb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/shopping-cart
msc.type: authoredcontent
ms.openlocfilehash: 5c0e16df7d60b944c96f8d5510225fff321124d1
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="shopping-cart"></a><span data-ttu-id="ba8f4-103">Корзина для покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-103">Shopping Cart</span></span>
====================
<span data-ttu-id="ba8f4-104">По [Эрик Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="ba8f4-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="ba8f4-105">[Загрузите образец проекта Wingtip Toys (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) или [загрузить электронную (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="ba8f4-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="ba8f4-106">Этот учебник ряд описываются основы построения с помощью ASP.NET 4.5 и Microsoft Visual Studio Express 2013 для веб-приложения веб-форм ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="ba8f4-107">Visual Studio 2013 [проект с исходным кодом C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) доступен по следующему этого учебника ряда.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="ba8f4-108">В данном учебнике бизнес-логики, которые требуется добавить в корзину Wingtip Toys примера приложения веб-форм ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-108">This tutorial describes the business logic required to add a shopping cart to the Wingtip Toys sample ASP.NET Web Forms application.</span></span> <span data-ttu-id="ba8f4-109">Этот учебник основана на работу с предыдущим учебником «Отобразить данные элементов и сведения о» и является частью учебника по магазину игрушек Wingtip ряда.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-109">This tutorial builds on the previous tutorial "Display Data Items and Details" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="ba8f4-110">После завершения этого учебника, пользователи образец приложения смогут добавлять, удалять и изменять продуктов в его корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-110">When you've completed this tutorial, the users of your sample app will be able to add, remove, and modify the products in their shopping cart.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="ba8f4-111">Что вы узнаете следующее.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-111">What you'll learn:</span></span>

1. <span data-ttu-id="ba8f4-112">Инструкции по созданию корзины для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-112">How to create a shopping cart for the web application.</span></span>
2. <span data-ttu-id="ba8f4-113">Как предоставить пользователям возможность добавлять элементы в корзину.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-113">How to enable users to add items to the shopping cart.</span></span>
3. <span data-ttu-id="ba8f4-114">Добавление [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) элемента управления для отображения сведений о корзине для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-114">How to add a [GridView](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview(v=vs.110).aspx#introduction) control to display shopping cart details.</span></span>
4. <span data-ttu-id="ba8f4-115">Порядок вычисления и отображения итоговой суммы заказа.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-115">How to calculate and display the order total.</span></span>
5. <span data-ttu-id="ba8f4-116">Удаление и обновление элементов в корзину.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-116">How to remove and update items in the shopping cart.</span></span>
6. <span data-ttu-id="ba8f4-117">Как включить корзину покупок счетчика.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-117">How to include a shopping cart counter.</span></span>

## <a name="code-features-in-this-tutorial"></a><span data-ttu-id="ba8f4-118">Код функции в этом учебнике:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-118">Code features in this tutorial:</span></span>

1. <span data-ttu-id="ba8f4-119">Платформа Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="ba8f4-119">Entity Framework Code First</span></span>
2. <span data-ttu-id="ba8f4-120">Заметки к данным</span><span class="sxs-lookup"><span data-stu-id="ba8f4-120">Data Annotations</span></span>
3. <span data-ttu-id="ba8f4-121">Строго типизированные элементы управления данными</span><span class="sxs-lookup"><span data-stu-id="ba8f4-121">Strongly typed data controls</span></span>
4. <span data-ttu-id="ba8f4-122">Привязка модели</span><span class="sxs-lookup"><span data-stu-id="ba8f4-122">Model binding</span></span>

## <a name="creating-a-shopping-cart"></a><span data-ttu-id="ba8f4-123">Создание корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-123">Creating a Shopping Cart</span></span>

<span data-ttu-id="ba8f4-124">Ранее в этой серии учебника вы добавили страниц и код для просмотра сведений о продуктах из базы данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-124">Earlier in this tutorial series, you added pages and code to view product data from a database.</span></span> <span data-ttu-id="ba8f4-125">В этом учебнике вы создадите корзины для управления продуктами, пользователи заинтересованные в покупке.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-125">In this tutorial, you'll create a shopping cart to manage the products that users are interested in buying.</span></span> <span data-ttu-id="ba8f4-126">Пользователи смогут просматривать и добавлять элементы в корзину покупок, даже если они не зарегистрированы или не вошел в систему.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-126">Users will be able to browse and add items to the shopping cart even if they are not registered or logged in.</span></span> <span data-ttu-id="ba8f4-127">Для управления доступом к покупательской корзины, будет назначить пользователей уникальный `ID` с помощью глобальный уникальный идентификатор (GUID), когда пользователь обращается к покупок корзину в первый раз.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-127">To manage shopping cart access, you will assign users a unique `ID` using a globally unique identifier (GUID) when the user accesses the shopping cart for the first time.</span></span> <span data-ttu-id="ba8f4-128">Это будут храниться `ID` использования состояния сеанса ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-128">You'll store this `ID` using the ASP.NET Session state.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ba8f4-129">Состояние сеанса ASP.NET — удобное место для хранения сведений о пользователе которого истекает после пользователь покидает сайт.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-129">The ASP.NET Session state is a convenient place to store user-specific information which will expire after the user leaves the site.</span></span> <span data-ttu-id="ba8f4-130">Во время использования состояния сеанса влияют на производительность для больших сайтов, светло-использование работает состояния сеанса для демонстрационных целей.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-130">While misuse of session state can have performance implications on larger sites, light use of session state works well for demonstration purposes.</span></span> <span data-ttu-id="ba8f4-131">Пример проекта Wingtip Toys демонстрируется использование состояния сеанса без внешнего поставщика состояния сеанса где хранимые в процессе на веб-сервере сайта.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-131">The Wingtip Toys sample project shows how to use session state without an external provider, where session state is stored in-process on the web server hosting the site.</span></span> <span data-ttu-id="ba8f4-132">Для больших сайтов, которые предоставляют несколько экземпляров приложения или на сайтах, работающих на разных серверах несколько экземпляров приложения рассмотрите возможность использования **службы кэша Windows Azure**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-132">For larger sites that provide multiple instances of an application or for sites that run multiple instances of an application on different servers, consider using **Windows Azure Cache Service**.</span></span> <span data-ttu-id="ba8f4-133">Эта служба кэша предоставляет службы распределенного кэширования, внешних по отношению к веб-сайта и позволяет решить проблему с помощью состояния сеанса в процессе.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-133">This Cache Service provides a distributed caching service that is external to the web site and solves the problem of using in-process session state.</span></span> <span data-ttu-id="ba8f4-134">Дополнительные сведения см. в разделе [как использовать состояние сеанса ASP.NET с Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-134">For more information see, [How to Use ASP.NET Session State with Windows Azure Web Sites](https://docs.microsoft.com/azure/redis-cache/cache-aspnet-session-state-provider).</span></span>


### <a name="add-cartitem-as-a-model-class"></a><span data-ttu-id="ba8f4-135">Добавить CartItem в качестве класса модели</span><span class="sxs-lookup"><span data-stu-id="ba8f4-135">Add CartItem as a Model Class</span></span>

<span data-ttu-id="ba8f4-136">Ранее в данной серии учебных курсов определенные схемы для категорий и продуктов данных путем создания `Category` и `Product` классы в *моделей* папки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-136">Earlier in this tutorial series, you defined the schema for the category and product data by creating the `Category` and `Product` classes in the *Models* folder.</span></span> <span data-ttu-id="ba8f4-137">Теперь добавьте новый класс для определения схемы для корзины для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-137">Now, add a new class to define the schema for the shopping cart.</span></span> <span data-ttu-id="ba8f4-138">Далее в этом руководстве вы добавите класс осуществлять доступ к данным `CartItem` таблицы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-138">Later in this tutorial, you will add a class to handle data access to the `CartItem` table.</span></span> <span data-ttu-id="ba8f4-139">Этот класс предоставит бизнес-логики, чтобы добавлять, удалять и обновлять элементы в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-139">This class will provide the business logic to add, remove, and update items in the shopping cart.</span></span>

1. <span data-ttu-id="ba8f4-140">Щелкните правой кнопкой мыши *моделей* папку и выберите **добавить**  - &gt; **новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-140">Right-click the *Models* folder and select **Add** -&gt; **New Item**.</span></span> 

    ![Корзина для покупок - новый элемент](shopping-cart/_static/image1.png)
2. <span data-ttu-id="ba8f4-142">Откроется диалоговое окно **Добавление нового элемента**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-142">The **Add New Item** dialog box is displayed.</span></span> <span data-ttu-id="ba8f4-143">Выберите **кода**, а затем выберите **класса**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-143">Select **Code**, and then select **Class**.</span></span> 

    ![Корзина для покупок - новое диалоговое окно добавления элемента](shopping-cart/_static/image2.png)
3. <span data-ttu-id="ba8f4-145">Назовите этот новый класс *CartItem.cs*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-145">Name this new class *CartItem.cs*.</span></span>
4. <span data-ttu-id="ba8f4-146">Нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-146">Click **Add**.</span></span>  
 <span data-ttu-id="ba8f4-147">В редакторе отображается новый файл класса.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-147">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="ba8f4-148">Замените код по умолчанию следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-148">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample1.cs)]

<span data-ttu-id="ba8f4-149">`CartItem` Класс содержит схему, которая будет определен каждый продукт, пользователь добавляет в корзину.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-149">The `CartItem` class contains the schema that will define each product a user adds to the shopping cart.</span></span> <span data-ttu-id="ba8f4-150">Этот класс похоже на другие классы схемы, созданный ранее в этой серии учебника.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-150">This class is similar to the other schema classes you created earlier in this tutorial series.</span></span> <span data-ttu-id="ba8f4-151">По соглашению Entity Framework Code First ожидает, первичный ключ для `CartItem` таблица будет либо `CartItemId` или `ID`.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-151">By convention, Entity Framework Code First expects that the primary key for the `CartItem` table will be either `CartItemId` or `ID`.</span></span> <span data-ttu-id="ba8f4-152">Однако код переопределяет поведение по умолчанию с помощью заметки данных `[Key]` атрибута.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-152">However, the code overrides the default behavior by using the data annotation `[Key]` attribute.</span></span> <span data-ttu-id="ba8f4-153">`Key` Указывает, что атрибут свойства ItemId `ItemID` свойство является первичным ключом.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-153">The `Key` attribute of the ItemId property specifies that the `ItemID` property is the primary key.</span></span>

<span data-ttu-id="ba8f4-154">`CartId` Свойство указывает `ID` пользователя, связанный с элементом на покупку.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-154">The `CartId` property specifies the `ID` of the user that is associated with the item to purchase.</span></span> <span data-ttu-id="ba8f4-155">Вы добавите код для создания этого пользователя `ID` когда пользователь обращается к покупательской корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-155">You'll add code to create this user `ID` when the user accesses the shopping cart.</span></span> <span data-ttu-id="ba8f4-156">Это `ID` также будут храниться в виде переменной сеанса ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-156">This `ID` will also be stored as an ASP.NET Session variable.</span></span>

### <a name="update-the-product-context"></a><span data-ttu-id="ba8f4-157">Обновление контекста продукта</span><span class="sxs-lookup"><span data-stu-id="ba8f4-157">Update the Product Context</span></span>

<span data-ttu-id="ba8f4-158">Помимо добавления `CartItem` класса, будет необходимо обновить класс контекста базы данных, управляющий классы сущностей и предоставляющий доступ к базе данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-158">In addition to adding the `CartItem` class, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="ba8f4-159">Чтобы сделать это, мы добавим вновь созданный `CartItem` класс для модели `ProductContext` класса.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-159">To do this, you will add the newly created `CartItem` model class to the `ProductContext` class.</span></span>

1. <span data-ttu-id="ba8f4-160">В **обозревателе решений**, найдите и откройте *ProductContext.cs* файла в *моделей* папки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-160">In **Solution Explorer**, find and open the *ProductContext.cs* file in the *Models* folder.</span></span>
2. <span data-ttu-id="ba8f4-161">Добавьте код, выделенный для *ProductContext.cs* следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-161">Add the highlighted code to the *ProductContext.cs* file as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample2.cs?highlight=14)]

<span data-ttu-id="ba8f4-162">Как упоминалось ранее в данной серии учебных курсов, код в *ProductContext.cs* добавляет файл `System.Data.Entity` пространства имен, чтобы получить доступ к основным функциям платформы Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-162">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="ba8f4-163">Эта функция включает в себя возможность запроса, вставки, обновления и удаления данных при работе со строго типизированных объектов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-163">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="ba8f4-164">`ProductContext` Класс добавляет доступа к недавно добавленному `CartItem` класс модели.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-164">The `ProductContext` class adds access to the newly added `CartItem` model class.</span></span>

### <a name="managing-the-shopping-cart-business-logic"></a><span data-ttu-id="ba8f4-165">Управление бизнес-логики покупательской корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-165">Managing the Shopping Cart Business Logic</span></span>

<span data-ttu-id="ba8f4-166">Затем вы создадите `ShoppingCart` класса в новом *логику* папки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-166">Next, you'll create the `ShoppingCart` class in a new *Logic* folder.</span></span> <span data-ttu-id="ba8f4-167">`ShoppingCart` Класс обрабатывает доступ к данным `CartItem` таблицы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-167">The `ShoppingCart` class handles data access to the `CartItem` table.</span></span> <span data-ttu-id="ba8f4-168">Класс также входят бизнес-логики, чтобы добавлять, удалять и обновлять элементы в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-168">The class will also include the business logic to add, remove, and update items in the shopping cart.</span></span>

<span data-ttu-id="ba8f4-169">Корзина покупок логики, который будет добавлен будет содержать функциональные возможности управления следующие действия:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-169">The shopping cart logic that you will add will contain the functionality to manage the following actions:</span></span>

1. <span data-ttu-id="ba8f4-170">Добавление элементов в корзину покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-170">Adding items to the shopping cart</span></span>
2. <span data-ttu-id="ba8f4-171">Удаление элементов из корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-171">Removing items from the shopping cart</span></span>
3. <span data-ttu-id="ba8f4-172">Для получения идентификатора покупательской корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-172">Getting the shopping cart ID</span></span>
4. <span data-ttu-id="ba8f4-173">Получение элементов из корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-173">Retrieving items from the shopping cart</span></span>
5. <span data-ttu-id="ba8f4-174">Группировка сумму всех покупок Корзина</span><span class="sxs-lookup"><span data-stu-id="ba8f4-174">Totaling the amount of all the shopping cart items</span></span>
6. <span data-ttu-id="ba8f4-175">Обновление данных корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-175">Updating the shopping cart data</span></span>

<span data-ttu-id="ba8f4-176">Корзина покупок страницы (*ShoppingCart.aspx*) и класс покупательской корзины будет совместно использоваться для доступа к данных корзины.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-176">A shopping cart page (*ShoppingCart.aspx*) and the shopping cart class will be used together to access shopping cart data.</span></span> <span data-ttu-id="ba8f4-177">Страница покупательской корзины для покупок отобразит все элементы, которые пользователь добавляет в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-177">The shopping cart page will display all the items the user adds to the shopping cart.</span></span> <span data-ttu-id="ba8f4-178">Помимо корзины страницы и класса, вы создадите страницы (*AddToCart.aspx*) для добавления продукты в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-178">Besides the shopping cart page and class, you'll create a page (*AddToCart.aspx*) to add products to the shopping cart.</span></span> <span data-ttu-id="ba8f4-179">Добавим код к *ProductList.aspx* страницы и *ProductDetails.aspx* страницу, которая будет указана ссылка на *AddToCart.aspx* страницы, чтобы добавить пользователя продукты в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-179">You will also add code to the *ProductList.aspx* page and the *ProductDetails.aspx* page that will provide a link to the *AddToCart.aspx* page, so that the user can add products to the shopping cart.</span></span>

<span data-ttu-id="ba8f4-180">В примере ниже показан базовый процесс, когда пользователь добавляет продукт в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-180">The following diagram shows the basic process that occurs when the user adds a product to the shopping cart.</span></span>

![Корзина для покупок - Добавление в список покупок](shopping-cart/_static/image3.png)

<span data-ttu-id="ba8f4-182">Когда пользователь щелкает **Add To Cart** ссылку на одном *ProductList.aspx* страницы или *ProductDetails.aspx* страницы, приложение будет переходить к *AddToCart.aspx* страницы и затем автоматически как *ShoppingCart.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-182">When the user clicks the **Add To Cart** link on either the *ProductList.aspx* page or the *ProductDetails.aspx* page, the application will navigate to the *AddToCart.aspx* page and then automatically to the *ShoppingCart.aspx* page.</span></span> <span data-ttu-id="ba8f4-183">*AddToCart.aspx* страницы добавьте Выбор продукта в корзину покупок посредством вызова метода в классе ShoppingCart.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-183">The *AddToCart.aspx* page will add the select product to the shopping cart by calling a method in the ShoppingCart class.</span></span> <span data-ttu-id="ba8f4-184">*ShoppingCart.aspx* странице отобразятся продукты, которые были добавлены в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-184">The *ShoppingCart.aspx* page will display the products that have been added to the shopping cart.</span></span>

#### <a name="creating-the-shopping-cart-class"></a><span data-ttu-id="ba8f4-185">Создание класс покупательской корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-185">Creating the Shopping Cart Class</span></span>

<span data-ttu-id="ba8f4-186">`ShoppingCart` Класс будет добавлен в отдельную папку, в приложении, таким образом, будет четкое разделение между модели (модели, папки), страницах (корневая папка) и логику (папка логикой).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-186">The `ShoppingCart` class will be added to a separate folder in the application so that there will be a clear distinction between the model (Models folder), the pages (root folder) and the logic (Logic folder).</span></span>

1. <span data-ttu-id="ba8f4-187">В **обозревателе решений**, щелкните правой кнопкой мыши **WingtipToys**проект и выберите **добавить**-&gt;**новую папку**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-187">In **Solution Explorer**, right-click the **WingtipToys**project and select **Add**-&gt;**New Folder**.</span></span> <span data-ttu-id="ba8f4-188">Имя новой папки *логику*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-188">Name the new folder *Logic*.</span></span>
2. <span data-ttu-id="ba8f4-189">Щелкните правой кнопкой мыши *логику* папки, а затем выберите **добавить**  - &gt; **новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-189">Right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>
3. <span data-ttu-id="ba8f4-190">Добавьте новый файл класса с именем *ShoppingCartActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-190">Add a new class file named *ShoppingCartActions.cs*.</span></span>
4. <span data-ttu-id="ba8f4-191">Замените код по умолчанию следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-191">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample3.cs)]

<span data-ttu-id="ba8f4-192">`AddToCart` Метод, который позволяет отдельные продукты, которые будут включены в зависимости от продукта в корзину для покупок `ID`.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-192">The `AddToCart` method enables individual products to be included in the shopping cart based on the product `ID`.</span></span> <span data-ttu-id="ba8f4-193">Добавления продукта в корзину, или если покупок уже содержит элемент для этого продукта, количество увеличивается.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-193">The product is added to the cart, or if the cart already contains an item for that product, the quantity is incremented.</span></span>

<span data-ttu-id="ba8f4-194">`GetCartId` Метод возвращает покупок `ID` для пользователя.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-194">The `GetCartId` method returns the cart `ID` for the user.</span></span> <span data-ttu-id="ba8f4-195">Корзина `ID` используется для отслеживания элементов, которые пользователь имеет в его корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-195">The cart `ID` is used to track the items that a user has in their shopping cart.</span></span> <span data-ttu-id="ba8f4-196">Если пользователь не имеет существующих покупок `ID`, новый покупок `ID` созданные для них.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-196">If the user does not have an existing cart `ID`, a new cart `ID` is created for them.</span></span> <span data-ttu-id="ba8f4-197">Если пользователь выполнил качестве зарегистрированного пользователя для покупок `ID` равным имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-197">If the user is signed in as a registered user, the cart `ID` is set to their user name.</span></span> <span data-ttu-id="ba8f4-198">Тем не менее если пользователь не вошел в корзине `ID` задано уникальное значение (GUID).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-198">However, if the user is not signed in, the cart `ID` is set to a unique value (a GUID).</span></span> <span data-ttu-id="ba8f4-199">Идентификатор GUID гарантирует, что для каждого пользователя на основе сеанса создается, только один покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-199">A GUID ensures that only one cart is created for each user, based on session.</span></span>

<span data-ttu-id="ba8f4-200">`GetCartItems` Метод возвращает список покупок элементы корзины для покупок для пользователя.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-200">The `GetCartItems` method returns a list of shopping cart items for the user.</span></span> <span data-ttu-id="ba8f4-201">Далее в этом учебнике вы увидите, что привязка модели используется для отображения элементов покупок в корзину для покупок с помощью `GetCartItems` метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-201">Later in this tutorial, you will see that model binding is used to display the cart items in the shopping cart using the `GetCartItems` method.</span></span>

### <a name="creating-the-add-to-cart-functionality"></a><span data-ttu-id="ba8f4-202">Создание функции Add To Cart</span><span class="sxs-lookup"><span data-stu-id="ba8f4-202">Creating the Add-To-Cart Functionality</span></span>

<span data-ttu-id="ba8f4-203">Как упоминалось ранее, вы создадите обработки страницу с именем *AddToCart.aspx* будет использоваться для добавления новых продуктов в корзине пользователя.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-203">As mentioned earlier, you will create a processing page named *AddToCart.aspx* that will be used to add new products to the shopping cart of the user.</span></span> <span data-ttu-id="ba8f4-204">Эта страница будет вызывать `AddToCart` метод в `ShoppingCart` класс, который вы только что создали.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-204">This page will call the `AddToCart` method in the `ShoppingCart` class that you just created.</span></span> <span data-ttu-id="ba8f4-205">*AddToCart.aspx* страницы будет ожидать, что продукт `ID` передается в него.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-205">The *AddToCart.aspx* page will expect that a product `ID` is passed to it.</span></span> <span data-ttu-id="ba8f4-206">Этот продукт `ID` будет использоваться при вызове `AddToCart` метод `ShoppingCart` класса.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-206">This product `ID` will be used when calling the `AddToCart` method in the `ShoppingCart` class.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ba8f4-207">Изменение кода (*AddToCart.aspx.cs*) для этой страницы не страницы пользовательского интерфейса (*AddToCart.aspx*).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-207">You will be modifying the code-behind (*AddToCart.aspx.cs*) for this page, not the page UI (*AddToCart.aspx*).</span></span>


#### <a name="to-create-the-add-to-cart-functionality"></a><span data-ttu-id="ba8f4-208">Для создания Add-To-Cart функциональные возможности:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-208">To create the Add-To-Cart functionality:</span></span>

1. <span data-ttu-id="ba8f4-209">В **обозревателе решений**, щелкните правой кнопкой мыши **WingtipToys**проекта, нажмите кнопку **добавить**  - &gt; **новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-209">In **Solution Explorer**, right-click the **WingtipToys**project, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="ba8f4-210">Откроется диалоговое окно **Добавление нового элемента**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-210">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="ba8f4-211">Добавление новой стандартной страницы (веб-формы) в приложение с именем *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-211">Add a standard new page (Web Form) to the application named *AddToCart.aspx*.</span></span> 

    ![Корзина для покупок - добавить веб-форму](shopping-cart/_static/image4.png)
3. <span data-ttu-id="ba8f4-213">В **обозревателе решений**, щелкните правой кнопкой мыши *AddToCart.aspx* и нажмите кнопку **Просмотр кода**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-213">In **Solution Explorer**, right-click the *AddToCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="ba8f4-214">*AddToCart.aspx.cs* файл кода открывается в редакторе.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-214">The *AddToCart.aspx.cs* code-behind file is opened in the editor.</span></span>
4. <span data-ttu-id="ba8f4-215">Замените существующий код в *AddToCart.aspx.cs* кода следующим:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-215">Replace the existing code in the *AddToCart.aspx.cs* code-behind with the following:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample4.cs)]

<span data-ttu-id="ba8f4-216">Когда *AddToCart.aspx* загрузить страницу, продукт `ID` извлекается из строки запроса.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-216">When the *AddToCart.aspx* page is loaded, the product `ID` is retrieved from the query string.</span></span> <span data-ttu-id="ba8f4-217">Далее создается и используется для вызова экземпляра класс покупательской корзины `AddToCart` метод, который был добавлен ранее в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-217">Next, an instance of the shopping cart class is created and used to call the `AddToCart` method that you added earlier in this tutorial.</span></span> <span data-ttu-id="ba8f4-218">`AddToCart` Метод, содержащихся в *ShoppingCartActions.cs* файла, включает логику для добавления выбранного продукта в корзину покупок или увеличить количество продукта выбранного продукта.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-218">The `AddToCart` method, contained in the *ShoppingCartActions.cs* file, includes the logic to add the selected product to the shopping cart or increment the product quantity of the selected product.</span></span> <span data-ttu-id="ba8f4-219">Если продукт не была добавлена в список покупок, добавляется продукта `CartItem` таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-219">If the product hasn't been added to the shopping cart, the product is added to the `CartItem` table of the database.</span></span> <span data-ttu-id="ba8f4-220">Если продукт уже был добавлен в корзину и пользователь добавляет еще один элемент того же продукта, количество продукта увеличивается в `CartItem` таблицы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-220">If the product has already been added to the shopping cart and the user adds an additional item of the same product, the product quantity is incremented in the `CartItem` table.</span></span> <span data-ttu-id="ba8f4-221">Наконец, страница перенаправляет *ShoppingCart.aspx* страницы, которую вы добавите в следующем шаге, где пользователь видит обновленный список элементов в корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-221">Finally, the page redirects back to the *ShoppingCart.aspx* page that you'll add in the next step, where the user sees an updated list of items in the cart.</span></span>

<span data-ttu-id="ba8f4-222">Как упоминалось ранее, пользователь `ID` используется для определения продуктов, которые связаны с конкретным пользователем.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-222">As previously mentioned, a user `ID` is used to identify the products that are associated with a specific user.</span></span> <span data-ttu-id="ba8f4-223">Это `ID` добавляется в строку в `CartItem` таблицы при каждом добавлении продукта в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-223">This `ID` is added to a row in the `CartItem` table each time the user adds a product to the shopping cart.</span></span>

### <a name="creating-the-shopping-cart-ui"></a><span data-ttu-id="ba8f4-224">Создание пользовательского интерфейса в корзину</span><span class="sxs-lookup"><span data-stu-id="ba8f4-224">Creating the Shopping Cart UI</span></span>

<span data-ttu-id="ba8f4-225">*ShoppingCart.aspx* странице отобразятся продукты, которые пользователь добавил в его корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-225">The *ShoppingCart.aspx* page will display the products that the user has added to their shopping cart.</span></span> <span data-ttu-id="ba8f4-226">Кроме того, он предоставляет возможность добавлять, удалять и обновлять элементы в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-226">It will also provide the ability to add, remove and update items in the shopping cart.</span></span>

1. <span data-ttu-id="ba8f4-227">В **обозревателе решений**, щелкните правой кнопкой мыши **WingtipToys**, нажмите кнопку **добавить**  - &gt; **новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-227">In **Solution Explorer**, right-click **WingtipToys**, click **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="ba8f4-228">Откроется диалоговое окно **Добавление нового элемента**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-228">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="ba8f4-229">Добавление новой страницы (веб-формы), включающий главную страницу, выбрав **веб-форма, использующая главную страницу**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-229">Add a new page (Web Form) that includes a master page by selecting **Web Form using Master Page**.</span></span> <span data-ttu-id="ba8f4-230">Имя новой страницы *ShoppingCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-230">Name the new page *ShoppingCart.aspx*.</span></span>
3. <span data-ttu-id="ba8f4-231">Выберите **Site.Master** для присоединения главной страницы в только что созданный *.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-231">Select **Site.Master** to attach the master page to the newly created *.aspx* page.</span></span>
4. <span data-ttu-id="ba8f4-232">В *ShoppingCart.aspx* страницы, замените существующую разметку следующей разметкой:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-232">In the *ShoppingCart.aspx* page, replace the existing markup with the following markup:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample5.aspx)]

<span data-ttu-id="ba8f4-233">*ShoppingCart.aspx* страница содержит **GridView** управления с именем `CartList`.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-233">The *ShoppingCart.aspx* page includes a **GridView** control named `CartList`.</span></span> <span data-ttu-id="ba8f4-234">Этот элемент управления используется привязка модели для привязки данных корзины из базы данных для **GridView** элемента управления.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-234">This control uses model binding to bind the shopping cart data from the database to the **GridView** control.</span></span> <span data-ttu-id="ba8f4-235">При задании `ItemType` свойство **GridView** управления выражение привязки данных `Item` доступен в разметку элемента управления и элемент управления становится со строго типизированными.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-235">When you set the `ItemType` property of the **GridView** control, the data-binding expression `Item` is available in the markup of the control and the control becomes strongly typed.</span></span> <span data-ttu-id="ba8f4-236">Как упоминалось ранее в этой серии учебника, можно выбрать сведения о `Item` с помощью IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-236">As mentioned earlier in this tutorial series, you can select details of the `Item` object using IntelliSense.</span></span> <span data-ttu-id="ba8f4-237">Чтобы настроить элемент управления данных, используемый для выбора данных привязки модели, необходимо задать `SelectMethod` свойства элемента управления.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-237">To configure a data control to use model binding to select data, you set the `SelectMethod` property of the control.</span></span> <span data-ttu-id="ba8f4-238">В разметке выше задайте `SelectMethod` использовать метод GetShoppingCartItems, который возвращает список `CartItem` объектов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-238">In the markup above, you set the `SelectMethod` to use the GetShoppingCartItems method which returns a list of `CartItem` objects.</span></span> <span data-ttu-id="ba8f4-239">**GridView** управления данных вызывает метод в соответствующее время жизненного цикла страницы и автоматически связывает возвращаемых данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-239">The **GridView** data control calls the method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="ba8f4-240">`GetShoppingCartItems` По-прежнему необходимо добавить метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-240">The `GetShoppingCartItems` method must still be added.</span></span>

#### <a name="retrieving-the-shopping-cart-items"></a><span data-ttu-id="ba8f4-241">Получение покупательской корзины элементов</span><span class="sxs-lookup"><span data-stu-id="ba8f4-241">Retrieving the Shopping Cart Items</span></span>

<span data-ttu-id="ba8f4-242">Затем добавьте код, чтобы *ShoppingCart.aspx.cs* кода для получения и заполнения пользовательский Интерфейс корзины покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-242">Next, you add code to the *ShoppingCart.aspx.cs* code-behind to retrieve and populate the Shopping Cart UI.</span></span>

1. <span data-ttu-id="ba8f4-243">В **обозревателе решений**, щелкните правой кнопкой мыши *ShoppingCart.aspx* и нажмите кнопку **Просмотр кода**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-243">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and then click **View Code**.</span></span> <span data-ttu-id="ba8f4-244">*ShoppingCart.aspx.cs* файл кода открывается в редакторе.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-244">The *ShoppingCart.aspx.cs* code-behind file is opened in the editor.</span></span>
2. <span data-ttu-id="ba8f4-245">Замените существующий код следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-245">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample6.cs)]

<span data-ttu-id="ba8f4-246">Как было сказано выше, `GridView` вызывает элемент управления данными `GetShoppingCartItems` метод в соответствующее время жизни страницы цикла и автоматически связывает возвращаемых данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-246">As mentioned above, the `GridView` data control calls the `GetShoppingCartItems` method at the appropriate time in the page life cycle and automatically binds the returned data.</span></span> <span data-ttu-id="ba8f4-247">`GetShoppingCartItems` Метод создает экземпляр `ShoppingCartActions` объекта.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-247">The `GetShoppingCartItems` method creates an instance of the `ShoppingCartActions` object.</span></span> <span data-ttu-id="ba8f4-248">Затем код использует этот экземпляр, чтобы вернуть элементы в корзине, вызвав `GetCartItems` метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-248">Then, the code uses that instance to return the items in the cart by calling the `GetCartItems` method.</span></span>

### <a name="adding-products-to-the-shopping-cart"></a><span data-ttu-id="ba8f4-249">Добавление продукты в корзину покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-249">Adding Products to the Shopping Cart</span></span>

<span data-ttu-id="ba8f4-250">При любом *ProductList.aspx* или *ProductDetails.aspx* страница отображается, пользователь сможет добавить в корзину для покупок с помощью ссылки продукт.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-250">When either the *ProductList.aspx* or the *ProductDetails.aspx* page is displayed, the user will be able to add the product to the shopping cart using a link.</span></span> <span data-ttu-id="ba8f4-251">При щелчке по ссылке приложение переходит к странице обработки с именем *AddToCart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-251">When they click the link, the application navigates to the processing page named *AddToCart.aspx*.</span></span> <span data-ttu-id="ba8f4-252">*AddToCart.aspx* страницы будет вызывать `AddToCart` метод `ShoppingCart` класса, который был добавлен ранее в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-252">The *AddToCart.aspx* page will call the `AddToCart` method in the `ShoppingCart` class that you added earlier in this tutorial.</span></span>

<span data-ttu-id="ba8f4-253">Теперь вы добавите **добавить в тележку для закупок** ссылку, чтобы оба *ProductList.aspx* страницы и *ProductDetails.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-253">Now, you'll add an **Add to Cart** link to both the *ProductList.aspx* page and the *ProductDetails.aspx* page.</span></span> <span data-ttu-id="ba8f4-254">Эта ссылка будет включать продукта `ID` , извлекается из базы данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-254">This link will include the product `ID` that is retrieved from the database.</span></span>

1. <span data-ttu-id="ba8f4-255">В **обозревателе решений**, найдите и откройте страницу с именем *ProductList.aspx*.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-255">In **Solution Explorer**, find and open the page named *ProductList.aspx*.</span></span>
2. <span data-ttu-id="ba8f4-256">Добавьте разметку, выделены желтым цветом, позволяя *ProductList.aspx* страницы отображения всей страницы следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-256">Add the markup highlighted in yellow to the *ProductList.aspx* page so that the entire page appears as follows:</span></span>  

    [!code-aspx[Main](shopping-cart/samples/sample7.aspx?highlight=50-54)]

### <a name="testing-the-shopping-cart"></a><span data-ttu-id="ba8f4-257">Тестирование в корзину для покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-257">Testing the Shopping Cart</span></span>

<span data-ttu-id="ba8f4-258">Запустите приложение, чтобы увидеть, как добавить продукты в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-258">Run the application to see how you add products to the shopping cart.</span></span>

1. <span data-ttu-id="ba8f4-259">Нажмите клавишу **F5** для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-259">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="ba8f4-260">После проекта повторно создает базу данных, обозреватель и Показать *Default.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-260">After the project recreates the database, the browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="ba8f4-261">Выберите **автомобилей** меню навигации категории.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-261">Select **Cars** from the category navigation menu.</span></span>  
 <span data-ttu-id="ba8f4-262">*ProductList.aspx* страница отображается только продуктами, включенных в категорию «Автомобили».</span><span class="sxs-lookup"><span data-stu-id="ba8f4-262">The *ProductList.aspx* page is displayed showing only products included in the "Cars" category.</span></span> 

    ![Корзина для покупок - автомобили](shopping-cart/_static/image5.png)
3. <span data-ttu-id="ba8f4-264">Нажмите кнопку **добавить в тележку для закупок** ссылку рядом с первым продуктом в списке (преобразовать класс car).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-264">Click the **Add to Cart** link next to the first product listed (the convertible car).</span></span>   
 <span data-ttu-id="ba8f4-265">*ShoppingCart.aspx* отображается страница, показывающая выделение в корзине для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-265">The *ShoppingCart.aspx* page is displayed, showing the selection in your shopping cart.</span></span> 

    ![Корзина для покупок - покупок](shopping-cart/_static/image6.png)
4. <span data-ttu-id="ba8f4-267">Просмотр дополнительных продуктов, выбрав **плоскости** меню навигации категории.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-267">View additional products by selecting **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="ba8f4-268">Нажмите кнопку **добавить в тележку для закупок** ссылку рядом с первым продуктом в списке.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-268">Click the **Add to Cart** link next to the first product listed.</span></span>  
 <span data-ttu-id="ba8f4-269">*ShoppingCart.aspx* страницы отображается дополнительный элемент.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-269">The *ShoppingCart.aspx* page is displayed with the additional item.</span></span>
6. <span data-ttu-id="ba8f4-270">Закройте браузер.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-270">Close the browser.</span></span>

### <a name="calculating-and-displaying-the-order-total"></a><span data-ttu-id="ba8f4-271">Вычисление и отображение итог заказа</span><span class="sxs-lookup"><span data-stu-id="ba8f4-271">Calculating and Displaying the Order Total</span></span>

<span data-ttu-id="ba8f4-272">Помимо добавления продукты в корзину покупок, мы добавим `GetTotal` метод `ShoppingCart` класса и отображение Общая сумма заказа в странице корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-272">In addition to adding products to the shopping cart, you will add a `GetTotal` method to the `ShoppingCart` class and display the total order amount in the shopping cart page.</span></span>

1. <span data-ttu-id="ba8f4-273">В **обозревателе решений**откройте *ShoppingCartActions.cs* файла в *логику* папки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-273">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="ba8f4-274">Добавьте следующие `GetTotal` выделены желтым цветом, позволяя метод `ShoppingCart` класса, чтобы класс имеет следующий вид:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-274">Add the following `GetTotal` method highlighted in yellow to the `ShoppingCart` class, so that the class appears as follows:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample8.cs?highlight=85-97)]

<span data-ttu-id="ba8f4-275">Во-первых, `GetTotal` метод получает идентификатор корзины для покупок для пользователя.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-275">First, the `GetTotal` method gets the ID of the shopping cart for the user.</span></span> <span data-ttu-id="ba8f4-276">Затем метод возвращает покупок общее путем умножения цена товара на количество продуктов для каждого продукта, перечисленного в корзине.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-276">Then the method gets the cart total by multiplying the product price by the product quantity for each product listed in the cart.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ba8f4-277">Приведенный выше код использует допускающий значение NULL тип "`int?`«.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-277">The above code uses the nullable type "`int?`".</span></span> <span data-ttu-id="ba8f4-278">Типы, допускающие значение NULL может представлять все значения базового типа, а также как значение null.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-278">Nullable types can represent all the values of an underlying type, and also as a null value.</span></span> <span data-ttu-id="ba8f4-279">Дополнительные сведения см. в разделе [Использование допускающих значение NULL типов](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-279">For more information see, [Using Nullable Types](https://msdn.microsoft.com/library/2cf62fcy(v=vs.110).aspx).</span></span>


### <a name="modify-the-shopping-cart-display"></a><span data-ttu-id="ba8f4-280">Изменение отображения покупательской корзины для покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-280">Modify the Shopping Cart Display</span></span>

<span data-ttu-id="ba8f4-281">Далее предстоит изменить код для *ShoppingCart.aspx* странице вызывать `GetTotal` метод и отображения эту сумму на *ShoppingCart.aspx* страницы при загрузке страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-281">Next you'll modify the code for the *ShoppingCart.aspx* page to call the `GetTotal` method and display that total on the *ShoppingCart.aspx* page when the page loads.</span></span>

1. <span data-ttu-id="ba8f4-282">В **обозревателе решений**, щелкните правой кнопкой мыши *ShoppingCart.aspx* и выберите **Просмотр кода**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-282">In **Solution Explorer**, right-click the *ShoppingCart.aspx* page and select **View Code**.</span></span>
2. <span data-ttu-id="ba8f4-283">В *ShoppingCart.aspx.cs* файла, обновить `Page_Load` обработчика, добавив следующий код, выделены желтым цветом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-283">In the *ShoppingCart.aspx.cs* file, update the `Page_Load` handler by adding the following code highlighted in yellow:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample9.cs?highlight=16-31)]

<span data-ttu-id="ba8f4-284">Когда *ShoppingCart.aspx* загрузки страницы, он загружает объект покупательской корзины, а затем извлекает покупательской корзины всего путем вызова `GetTotal` метод `ShoppingCart` класса.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-284">When the *ShoppingCart.aspx* page loads, it loads the shopping cart object and then retrieves the shopping cart total by calling the `GetTotal` method of the `ShoppingCart` class.</span></span> <span data-ttu-id="ba8f4-285">Если Корзина пуста, сообщение об ошибке отображается.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-285">If the shopping cart is empty, a message to that effect is displayed.</span></span>

### <a name="testing-the-shopping-cart-total"></a><span data-ttu-id="ba8f4-286">Тестирование общее покупательской корзины для покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-286">Testing the Shopping Cart Total</span></span>

<span data-ttu-id="ba8f4-287">Запустите приложение теперь, чтобы увидеть, как можно не только добавить продукт в корзину для покупок, но можно увидеть общее покупательской корзины для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-287">Run the application now to see how you can not only add a product to the shopping cart, but you can see the shopping cart total.</span></span>

1. <span data-ttu-id="ba8f4-288">Нажмите клавишу **F5** для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-288">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="ba8f4-289">Обозреватель и Показать *Default.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-289">The browser will open and show the *Default.aspx* page.</span></span>
2. <span data-ttu-id="ba8f4-290">Выберите **автомобилей** меню навигации категории.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-290">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="ba8f4-291">Нажмите кнопку **Add To Cart** ссылку рядом с первым продуктом.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-291">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="ba8f4-292">*ShoppingCart.aspx* откроется страница с итоговой суммы заказа.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-292">The *ShoppingCart.aspx* page is displayed with the order total.</span></span> 

    ![Корзина для покупок - всего покупок](shopping-cart/_static/image7.png)
4. <span data-ttu-id="ba8f4-294">Добавьте в корзину некоторыми другими продуктами (например, плоскости).</span><span class="sxs-lookup"><span data-stu-id="ba8f4-294">Add some other products (for example, a plane) to the cart.</span></span>
5. <span data-ttu-id="ba8f4-295">*ShoppingCart.aspx* откроется страница с обновленной общей для всех продуктов, которые были добавлены.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-295">The *ShoppingCart.aspx* page is displayed with an updated total for all the products you've added.</span></span> 

    ![Корзина для покупок - несколько продуктов](shopping-cart/_static/image8.png)
6. <span data-ttu-id="ba8f4-297">Остановите выполняющееся приложение, закрыв окно браузера.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-297">Stop the running app by closing the browser window.</span></span>

### <a name="adding-update-and-checkout-buttons-to-the-shopping-cart"></a><span data-ttu-id="ba8f4-298">Добавление обновления и извлечения кнопок в корзину покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-298">Adding Update and Checkout Buttons to the Shopping Cart</span></span>

<span data-ttu-id="ba8f4-299">Чтобы разрешить пользователям изменять покупательской корзины, мы добавим **обновление** кнопки и **извлечение** кнопку на страницу корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-299">To allow the users to modify the shopping cart, you'll add an **Update** button and a **Checkout** button to the shopping cart page.</span></span> <span data-ttu-id="ba8f4-300">**Извлечение** кнопка не используется заранее, до этого учебника ряда.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-300">The **Checkout** button is not used until later in this tutorial series.</span></span>

1. <span data-ttu-id="ba8f4-301">В **обозревателе решений**откройте *ShoppingCart.aspx* страницы в корне проекта веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-301">In **Solution Explorer**, open the *ShoppingCart.aspx* page in the root of the web application project.</span></span>
2. <span data-ttu-id="ba8f4-302">Чтобы добавить **обновления** кнопки и **извлечения** кнопки *ShoppingCart.aspx* добавьте разметку, выделены желтым цветом, позволяя существующую разметку, как показано в Следующий код:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-302">To add the **Update** button and the **Checkout** button to the *ShoppingCart.aspx* page, add the markup highlighted in yellow to the existing markup, as shown in the following code:</span></span>   

    [!code-aspx[Main](shopping-cart/samples/sample10.aspx?highlight=36-45)]

<span data-ttu-id="ba8f4-303">Когда пользователь щелкает **обновление** кнопки `UpdateBtn_Click` будет вызван обработчик событий.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-303">When the user clicks the **Update** button, the `UpdateBtn_Click` event handler will be called.</span></span> <span data-ttu-id="ba8f4-304">Этот обработчик событий вызывает код, который вы добавите в следующем шаге.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-304">This event handler will call the code that you'll add in the next step.</span></span>

<span data-ttu-id="ba8f4-305">Затем можно обновить код, содержащийся в *ShoppingCart.aspx.cs* файл перебор элементов покупок и вызовите `RemoveItem` и `UpdateItem` методы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-305">Next, you can update the code contained in the *ShoppingCart.aspx.cs* file to loop through the cart items and call the `RemoveItem` and `UpdateItem` methods.</span></span>

1. <span data-ttu-id="ba8f4-306">В **обозревателе решений**откройте *ShoppingCart.aspx.cs* файл в корне проекта веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-306">In **Solution Explorer**, open the *ShoppingCart.aspx.cs* file in the root of the web application project.</span></span>
2. <span data-ttu-id="ba8f4-307">Добавьте следующие разделы кода, выделяются желтым цветом, позволяя *ShoppingCart.aspx.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-307">Add the following code sections highlighted in yellow to the *ShoppingCart.aspx.cs* file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample11.cs?highlight=9-11,33,44-89)]

<span data-ttu-id="ba8f4-308">Когда пользователь щелкает **обновление** кнопку *ShoppingCart.aspx* страницы, вызывается метод UpdateCartItems.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-308">When the user clicks the **Update** button on the *ShoppingCart.aspx* page, the UpdateCartItems method is called.</span></span> <span data-ttu-id="ba8f4-309">Метод UpdateCartItems получает обновленные значения для каждого элемента в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-309">The UpdateCartItems method gets the updated values for each item in the shopping cart.</span></span> <span data-ttu-id="ba8f4-310">Затем вызывает метод UpdateCartItems `UpdateShoppingCartDatabase` метод (добавлены и описано в следующем шаге) для добавления или удаления элементов из корзины.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-310">Then, the UpdateCartItems method calls the `UpdateShoppingCartDatabase` method (added and explained in the next step) to either add or remove items from the shopping cart.</span></span> <span data-ttu-id="ba8f4-311">После обновления базы данных для отражения обновления в корзину покупок **GridView** обновлен элемент управления на странице покупательской корзины, вызвав `DataBind` метод **GridView**.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-311">Once the database has been updated to reflect the updates to the shopping cart, the **GridView** control is updated on the shopping cart page by calling the `DataBind` method for the **GridView**.</span></span> <span data-ttu-id="ba8f4-312">Кроме того Общая сумма заказа на странице покупательской корзине обновляется для отражения обновленного списка элементов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-312">Also, the total order amount on the shopping cart page is updated to reflect the updated list of items.</span></span>

### <a name="updating-and-removing-shopping-cart-items"></a><span data-ttu-id="ba8f4-313">Обновление и удаление элементов корзину покупок</span><span class="sxs-lookup"><span data-stu-id="ba8f4-313">Updating and Removing Shopping Cart Items</span></span>

<span data-ttu-id="ba8f4-314">На *ShoppingCart.aspx* страницы, можно увидеть, были добавлены элементы управления для обновления количества товара и удалении элементов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-314">On the *ShoppingCart.aspx* page, you can see controls have been added for updating the quantity of an item and removing an item.</span></span> <span data-ttu-id="ba8f4-315">Теперь можно добавьте код, который сделает эти элементы управления работают.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-315">Now, add the code that will make these controls work.</span></span>

1. <span data-ttu-id="ba8f4-316">В **обозревателе решений**откройте *ShoppingCartActions.cs* файла в *логику* папки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-316">In **Solution Explorer**, open the *ShoppingCartActions.cs* file in the *Logic* folder.</span></span>
2. <span data-ttu-id="ba8f4-317">Добавьте следующий код, выделены желтым цветом, позволяя *ShoppingCartActions.cs* файл класса:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-317">Add the following code highlighted in yellow to the *ShoppingCartActions.cs* class file:</span></span>   

    [!code-csharp[Main](shopping-cart/samples/sample12.cs?highlight=99-213)]

<span data-ttu-id="ba8f4-318">`UpdateShoppingCartDatabase` Метод с именем из `UpdateCartItems` метод *ShoppingCart.aspx.cs* страницы, содержит логику для обновления или удаления элементов из корзины.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-318">The `UpdateShoppingCartDatabase` method, called from the `UpdateCartItems` method on the *ShoppingCart.aspx.cs* page, contains the logic to either update or remove items from the shopping cart.</span></span> <span data-ttu-id="ba8f4-319">`UpdateShoppingCartDatabase` Метод выполняет итерацию всех строк в списке корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-319">The `UpdateShoppingCartDatabase` method iterates through all the rows within the shopping cart list.</span></span> <span data-ttu-id="ba8f4-320">Если в корзину покупок элемент был помечен для удаления, или количество меньше единицы `RemoveItem` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-320">If a shopping cart item has been marked to be removed, or the quantity is less than one, the `RemoveItem` method is called.</span></span> <span data-ttu-id="ba8f4-321">В противном случае — элемент покупательской корзины проверяется для обновлений при `UpdateItem` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-321">Otherwise, the shopping cart item is checked for updates when the `UpdateItem` method is called.</span></span> <span data-ttu-id="ba8f4-322">После удаления или обновления элемента корзину покупок сохраняются изменения базы данных.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-322">After the shopping cart item has been removed or updated, the database changes are saved.</span></span>

<span data-ttu-id="ba8f4-323">`ShoppingCartUpdates` Структура используется для хранения покупательской корзины элементов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-323">The `ShoppingCartUpdates` structure is used to hold all the shopping cart items.</span></span> <span data-ttu-id="ba8f4-324">`UpdateShoppingCartDatabase` Использует метод `ShoppingCartUpdates` структуру, чтобы определить, какие-либо элементы требуется обновить или удалить.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-324">The `UpdateShoppingCartDatabase` method uses the `ShoppingCartUpdates` structure to determine if any of the items need to be updated or removed.</span></span>

<span data-ttu-id="ba8f4-325">В следующем уроке будет использовать `EmptyCart` метод, чтобы удалить покупок корзину после приобретения продуктов.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-325">In the next tutorial, you will use the `EmptyCart` method to clear the shopping cart after purchasing products.</span></span> <span data-ttu-id="ba8f4-326">Но теперь будут использовать `GetCount` метод, который только что добавленные *ShoppingCartActions.cs* файл, чтобы определить, сколько элементов в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-326">But for now, you will use the `GetCount` method that you just added to the *ShoppingCartActions.cs* file to determine how many items are in the shopping cart.</span></span>

### <a name="adding-a-shopping-cart-counter"></a><span data-ttu-id="ba8f4-327">Добавление счетчика покупательской корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-327">Adding a Shopping Cart Counter</span></span>

<span data-ttu-id="ba8f4-328">Чтобы разрешить пользователю просмотр общее число элементов в список покупок, мы добавим счетчик для *Site.Master* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-328">To allow the user to view the total number of items in the shopping cart, you will add a counter to the *Site.Master* page.</span></span> <span data-ttu-id="ba8f4-329">Значение этого счетчика будет действовать как ссылку в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-329">This counter will also act as a link to the shopping cart.</span></span>

1. <span data-ttu-id="ba8f4-330">В **обозревателе решений**откройте *Site.Master* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-330">In **Solution Explorer**, open the *Site.Master* page.</span></span>
2. <span data-ttu-id="ba8f4-331">Измените разметку, добавив ссылку на корзину покупок счетчиков, как показано желтым в раздел перехода, так выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-331">Modify the markup by adding the shopping cart counter link as shown in yellow to the navigation section so it appears as follows:</span></span>  

    [!code-html[Main](shopping-cart/samples/sample13.html?highlight=6)]
3. <span data-ttu-id="ba8f4-332">Затем обновите код программной части *Site.Master.cs* файла путем добавления кода, выделены желтым цветом следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ba8f4-332">Next, update the code-behind of the *Site.Master.cs* file by adding the code highlighted in yellow as follows:</span></span>  

    [!code-csharp[Main](shopping-cart/samples/sample14.cs?highlight=11,77-84)]

<span data-ttu-id="ba8f4-333">Прежде чем страницы подготавливается к просмотру как HTML, `Page_PreRender` событие.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-333">Before the page is rendered as HTML, the `Page_PreRender` event is raised.</span></span> <span data-ttu-id="ba8f4-334">В `Page_PreRender` обработчик, общее число покупательской корзине определяется путем вызова `GetCount` метод.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-334">In the `Page_PreRender` handler, the total count of the shopping cart is determined by calling the `GetCount` method.</span></span> <span data-ttu-id="ba8f4-335">Возвращаемое значение добавляется к `cartCount` области, включенные в разметке *Site.Master* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-335">The returned value is added to the `cartCount` span included in the markup of the *Site.Master* page.</span></span> <span data-ttu-id="ba8f4-336">`<span>` Теги позволяет внутренних элементов должен быть правильно подготовлен к просмотру.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-336">The `<span>` tags enables the inner elements to be properly rendered.</span></span> <span data-ttu-id="ba8f4-337">При отображении страницы сайта будет отображаться общее покупательской корзины для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-337">When any page of the site is displayed, the shopping cart total will be displayed.</span></span> <span data-ttu-id="ba8f4-338">Пользователь также может щелкнуть общее покупательской корзины для покупок для отображения в корзину для покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-338">The user can also click the shopping cart total to display the shopping cart.</span></span>

## <a name="testing-the-completed-shopping-cart"></a><span data-ttu-id="ba8f4-339">Тестирование завершенного корзины</span><span class="sxs-lookup"><span data-stu-id="ba8f4-339">Testing the Completed Shopping Cart</span></span>

<span data-ttu-id="ba8f4-340">Можно запустить приложение теперь, чтобы увидеть, как можно добавить, удаления и обновления элементов в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-340">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="ba8f4-341">Покупательской корзины всего будет отражать стоимость всех элементов в список покупок.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-341">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="ba8f4-342">Нажмите клавишу **F5** для запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-342">Press **F5** to run the application.</span></span>  
 <span data-ttu-id="ba8f4-343">Браузер откроется со *Default.aspx* страницы.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-343">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="ba8f4-344">Выберите **автомобилей** меню навигации категории.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-344">Select **Cars** from the category navigation menu.</span></span>
3. <span data-ttu-id="ba8f4-345">Нажмите кнопку **Add To Cart** ссылку рядом с первым продуктом.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-345">Click the **Add To Cart** link next to the first product.</span></span>   
 <span data-ttu-id="ba8f4-346">*ShoppingCart.aspx* откроется страница с итоговой суммы заказа.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-346">The *ShoppingCart.aspx* page is displayed with the order total.</span></span>
4. <span data-ttu-id="ba8f4-347">Выберите **плоскости** меню навигации категории.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-347">Select **Planes** from the category navigation menu.</span></span>
5. <span data-ttu-id="ba8f4-348">Нажмите кнопку **Add To Cart** ссылку рядом с первым продуктом.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-348">Click the **Add To Cart** link next to the first product.</span></span>
6. <span data-ttu-id="ba8f4-349">Укажите количество первого элемента в корзине для 3 и выберите **удалить элемент** флажок второго элемента.<a id="a"></a></span><span class="sxs-lookup"><span data-stu-id="ba8f4-349">Set the quantity of the first item in the shopping cart to 3 and select the **Remove Item** check box of the second item.<a id="a"></a></span></span>
7. <span data-ttu-id="ba8f4-350">Нажмите кнопку **обновление** кнопку, чтобы обновить страницу в корзину покупок и отображения новых итоговой суммы заказа.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-350">Click the **Update** button to update the shopping cart page and display the new order total.</span></span> 

    ![Список покупок - обновление покупок](shopping-cart/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="ba8f4-352">Сводка</span><span class="sxs-lookup"><span data-stu-id="ba8f4-352">Summary</span></span>

<span data-ttu-id="ba8f4-353">В этом учебнике вы создали корзины для образца приложения Wingtip Toys веб-форм.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-353">In this tutorial, you have created a shopping cart for the Wingtip Toys Web Forms sample application.</span></span> <span data-ttu-id="ba8f4-354">В данном руководстве используется Entity Framework Code First, заметок к данным, элементы управления строго типизированных данных и привязки модели.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-354">During this tutorial you have used Entity Framework Code First, data annotations, strongly typed data controls, and model binding.</span></span>

<span data-ttu-id="ba8f4-355">Список покупок поддерживает добавление, удаление и обновление элементов, которые пользователь выбрал для покупки.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-355">The shopping cart supports adding, deleting, and updating items that the user has selected for purchase.</span></span> <span data-ttu-id="ba8f4-356">Помимо реализации покупательской корзины функциональность, вы изучили отображения корзины покупок в **GridView** управления и вычисления суммы заказа.</span><span class="sxs-lookup"><span data-stu-id="ba8f4-356">In addition to implementing the shopping cart functionality, you have learned how to display shopping cart items in a **GridView** control and calculate the order total.</span></span>

## <a name="addition-information"></a><span data-ttu-id="ba8f4-357">Дополнительную информацию</span><span class="sxs-lookup"><span data-stu-id="ba8f4-357">Addition Information</span></span>

[<span data-ttu-id="ba8f4-358">Общие сведения о состоянии сеанса ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ba8f4-358">ASP.NET Session State Overview</span></span>](https://msdn.microsoft.com/en-us/library/ms178581.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="ba8f4-359">[Назад](display_data_items_and_details.md)
[Вперед](checkout-and-payment-with-paypal.md)</span><span class="sxs-lookup"><span data-stu-id="ba8f4-359">[Previous](display_data_items_and_details.md)
[Next](checkout-and-payment-with-paypal.md)</span></span>
