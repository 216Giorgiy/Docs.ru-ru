---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: "Введение в ASP.NET Identity | Документы Microsoft"
author: jongalloway
description: "Система членства ASP.NET впервые появилась в ASP.NET 2.0 обратно в 2005 г. и, поскольку затем были много изменений в typicall приложения web способов..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/17/2013
ms.topic: article
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: a66e2a80668dbf291b9cc34f205b546b72d92bcc
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="introduction-to-aspnet-identity"></a><span data-ttu-id="34a98-103">Введение в ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="34a98-103">Introduction to ASP.NET Identity</span></span>
====================
<span data-ttu-id="34a98-104">по [Джон Гэллоуэй](https://github.com/jongalloway), [Pranav Rastogi](https://github.com/rustd), [Рик Андерсон](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="34a98-104">by [Jon Galloway](https://github.com/jongalloway), [Pranav Rastogi](https://github.com/rustd), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="34a98-105">Система членства ASP.NET впервые появилась в ASP.NET 2.0 обратно в 2005 г. и, поскольку то одним из способов проверки подлинности и авторизации веб-приложения обычно обрабатывают произошли изменения многих.</span><span class="sxs-lookup"><span data-stu-id="34a98-105">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="34a98-106">ASP.NET Identity рассматривается новую систему членства выполняемые при построении современных приложений для web, телефон или планшет.</span><span class="sxs-lookup"><span data-stu-id="34a98-106">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>
> 
> <span data-ttu-id="34a98-107">В этой статье было написано с Pranav Rastogi ([@rustd](https://twitter.com/rustd)), Джон Гэллоуэй ([@jongalloway](https://twitter.com/jongalloway)), Tom Dykstra и Рик Андерсон ([ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) ).</span><span class="sxs-lookup"><span data-stu-id="34a98-107">This article was written by Pranav Rastogi ([@rustd](https://twitter.com/rustd)), Jon Galloway ([@jongalloway](https://twitter.com/jongalloway)), Tom Dykstra, and Rick Anderson ([@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) ).</span></span>


## <a name="background-membership-in-aspnet"></a><span data-ttu-id="34a98-108">Фон: Членства в ASP.NET</span><span class="sxs-lookup"><span data-stu-id="34a98-108">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="34a98-109">Членства в ASP.NET</span><span class="sxs-lookup"><span data-stu-id="34a98-109">ASP.NET Membership</span></span>

<span data-ttu-id="34a98-110">[Членства в ASP.NET](https://msdn.microsoft.com/en-us/library/yh26yfzy(v=VS.100).aspx) предназначена для решения требования членства сайта, которые были распространены в 2005, в которой участвует форм проверки подлинности и базу данных SQL Server для имен пользователей, пароли и данные профиля.</span><span class="sxs-lookup"><span data-stu-id="34a98-110">[ASP.NET Membership](https://msdn.microsoft.com/en-us/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="34a98-111">Сегодня — гораздо более широкие массив параметров хранилища данных для веб-приложений, и большинство разработчиков нужно разрешить их сайтов использовать Поставщики удостоверений из социальных сетей для функций, аутентификации и авторизации.</span><span class="sxs-lookup"><span data-stu-id="34a98-111">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="34a98-112">Ограничения схемы членства ASP.NET затруднить этот переход:</span><span class="sxs-lookup"><span data-stu-id="34a98-112">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="34a98-113">Схема базы данных было разработано для SQL Server и его невозможно изменить.</span><span class="sxs-lookup"><span data-stu-id="34a98-113">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="34a98-114">Можно добавить данные профиля, но дополнительные данные, упакована в другую таблицу, что затрудняет для доступа к любым способом, кроме через API-Интерфейс поставщика профиля.</span><span class="sxs-lookup"><span data-stu-id="34a98-114">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="34a98-115">В системе поставщика можно изменить хранилище данных, но система созданная на основе предположения для реляционной базы данных.</span><span class="sxs-lookup"><span data-stu-id="34a98-115">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="34a98-116">Можно написать поставщика для хранения сведений о членстве в механизм хранения нереляционных данных, таких как таблицы хранилища Azure, но вам придется решить реляционного конструктора путем написания большого объема кода и большой объем `System.NotImplementedException` исключения для методов, которые не применяются к базам данных NoSQL.</span><span class="sxs-lookup"><span data-stu-id="34a98-116">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing a lot of code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="34a98-117">Поскольку функция журнала или журнала вышел основана на аутентификации с помощью форм, не может использовать систему членства [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="34a98-117">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="34a98-118">OWIN включает в себя компоненты по промежуточного слоя для проверки подлинности, включая поддержку для журнала модулей с помощью внешних поставщиков (например, учетные записи Microsoft, Facebook, Google, Twitter) и журнала модули с учетными записями организации из локальной Active Directory или Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="34a98-118">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="34a98-119">OWIN также поддерживает OAuth 2.0, JWT и CORS.</span><span class="sxs-lookup"><span data-stu-id="34a98-119">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="34a98-120">Членство ASP.NET Simple</span><span class="sxs-lookup"><span data-stu-id="34a98-120">ASP.NET Simple Membership</span></span>

<span data-ttu-id="34a98-121">[Простого членства ASP.NET](../../../web-pages/overview/security/16-adding-security-and-membership.md) разработано как система членства в ASP.NET Web Pages.</span><span class="sxs-lookup"><span data-stu-id="34a98-121">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="34a98-122">Он был выпущен с WebMatrix и Visual Studio 2010 с пакетом обновления 1.</span><span class="sxs-lookup"><span data-stu-id="34a98-122">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="34a98-123">Цель простого членства заключалась в том, чтобы облегчить Добавление функции членства в веб-страницы приложения.</span><span class="sxs-lookup"><span data-stu-id="34a98-123">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="34a98-124">Простого членства упрощают для настройки сведения о профиле пользователя, но она по-прежнему имеет другие проблемы с помощью членства ASP.NET, и он имеет некоторые ограничения:</span><span class="sxs-lookup"><span data-stu-id="34a98-124">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="34a98-125">Было трудно сохранять данные системы членства в-реляционного хранилища.</span><span class="sxs-lookup"><span data-stu-id="34a98-125">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="34a98-126">Его нельзя использовать с OWIN.</span><span class="sxs-lookup"><span data-stu-id="34a98-126">You can't use it with OWIN.</span></span>
- <span data-ttu-id="34a98-127">Оно плохо работает с существующие поставщики членства ASP.NET, а не расширяется.</span><span class="sxs-lookup"><span data-stu-id="34a98-127">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="34a98-128">Универсальные поставщики ASP.NET</span><span class="sxs-lookup"><span data-stu-id="34a98-128">ASP.NET Universal Providers</span></span>

<span data-ttu-id="34a98-129">[Универсальные поставщики ASP.NET](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) были разработаны, чтобы обеспечить возможность сохранения данных членства в Microsoft, база данных SQL Azure и они также работают с SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="34a98-129">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="34a98-130">Универсальные поставщики были построены в Entity Framework Code First, это означает, что универсальные поставщики может использоваться для сохранения данных в любом магазине, поддерживаемых EF.</span><span class="sxs-lookup"><span data-stu-id="34a98-130">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="34a98-131">С универсальные поставщики схемы базы данных была очищена много также.</span><span class="sxs-lookup"><span data-stu-id="34a98-131">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="34a98-132">Универсальные поставщики встроены в инфраструктуре членства ASP.NET, и они по-прежнему содержат те же ограничения, как поставщик SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="34a98-132">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="34a98-133">То есть они предназначались для реляционных баз данных и будет сложно настроить профиль и сведения о пользователях.</span><span class="sxs-lookup"><span data-stu-id="34a98-133">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="34a98-134">Эти поставщики по-прежнему использовать проверку подлинности форм журнала и журнала.</span><span class="sxs-lookup"><span data-stu-id="34a98-134">These providers also still use Forms Authentication for log-in and log-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="34a98-135">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="34a98-135">ASP.NET Identity</span></span>

<span data-ttu-id="34a98-136">Как членство истории в ASP.NET имел годы, команда ASP.NET научились из отзывов от клиентов.</span><span class="sxs-lookup"><span data-stu-id="34a98-136">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="34a98-137">Предполагается, что пользователи будут входить в систему, указав имя пользователя и пароль, которые они зарегистрированы в приложении больше не является допустимым.</span><span class="sxs-lookup"><span data-stu-id="34a98-137">The assumption that users will log in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="34a98-138">Веб-сайте стала более социальных сетей.</span><span class="sxs-lookup"><span data-stu-id="34a98-138">The web has become more social.</span></span> <span data-ttu-id="34a98-139">Пользователи взаимодействуют друг с другом в режиме реального времени через социальных каналов, например Facebook, Twitter и других социальных веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="34a98-139">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="34a98-140">Разработчики предоставляют пользователям зарегистрироваться с использованием удостоверения социальных сетей, чтобы они могут иметь более удобной на своих веб-сайтах.</span><span class="sxs-lookup"><span data-stu-id="34a98-140">Developers want users to be able to log in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="34a98-141">Система современных членства необходимо включить перенаправление журнала систему на основе для поставщиков проверки подлинности Facebook, Twitter и другие.</span><span class="sxs-lookup"><span data-stu-id="34a98-141">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="34a98-142">Как развитие веб-разработки, поэтому не шаблонов разработки веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="34a98-142">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="34a98-143">Модульных тестов для кода приложения стала ключевое соображение для разработчиков приложений.</span><span class="sxs-lookup"><span data-stu-id="34a98-143">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="34a98-144">2008 в ASP.NET добавлена новая платформа на основе шаблона Model-View-Controller (MVC), частично, чтобы помочь разработчикам создавать модульные тестируемых приложений ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="34a98-144">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="34a98-145">Разработчики, желающие модульного тестирования логики своих приложений, также необходимо иметь возможность сделать с помощью системы членства.</span><span class="sxs-lookup"><span data-stu-id="34a98-145">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="34a98-146">Учитывая эти изменения в разработке веб-приложений ASP.NET Identity был разработан для следующих целей:</span><span class="sxs-lookup"><span data-stu-id="34a98-146">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="34a98-147">**Одной системы ASP.NET Identity**</span><span class="sxs-lookup"><span data-stu-id="34a98-147">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="34a98-148">ASP.NET Identity можно использовать со всеми платформы ASP.NET, такие как ASP.NET MVC, веб-форм, веб-страницы, веб-API и SignalR.</span><span class="sxs-lookup"><span data-stu-id="34a98-148">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="34a98-149">При построении телефона, хранилища, гибридное или веб-приложениях можно использовать ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-149">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="34a98-150">**Простота подключения профиля данные о пользователе**</span><span class="sxs-lookup"><span data-stu-id="34a98-150">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="34a98-151">Вы можете контролировать схемы пользователя и сведения о профиле.</span><span class="sxs-lookup"><span data-stu-id="34a98-151">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="34a98-152">Например можно легко включить системой для хранения даты рождения, вводимые пользователем при регистрации учетной записи в приложении.</span><span class="sxs-lookup"><span data-stu-id="34a98-152">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="34a98-153">**Сохранение состояния элемента управления**</span><span class="sxs-lookup"><span data-stu-id="34a98-153">**Persistence control**</span></span>

    - <span data-ttu-id="34a98-154">По умолчанию система ASP.NET Identity сохраняет все сведения о пользователе в базе данных.</span><span class="sxs-lookup"><span data-stu-id="34a98-154">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="34a98-155">ASP.NET Identity используется Entity Framework Code First для реализации всех механизма сохраняемости.</span><span class="sxs-lookup"><span data-stu-id="34a98-155">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="34a98-156">Так как вы управляете схемы базы данных, общие задачи, такие как изменение имен таблиц или тип данных первичные ключи несложно.</span><span class="sxs-lookup"><span data-stu-id="34a98-156">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="34a98-157">Легко подключать в другое хранилище механизмы, такие как SharePoint, таблицы хранилища Azure, базах данных NoSQL, т. д., без необходимости создавать `System.NotImplementedExceptions` исключения.</span><span class="sxs-lookup"><span data-stu-id="34a98-157">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="34a98-158">**Возможности модульного тестирования**</span><span class="sxs-lookup"><span data-stu-id="34a98-158">**Unit testability**</span></span>

    - <span data-ttu-id="34a98-159">ASP.NET Identity делает веб-приложения больше единицы тестируемых.</span><span class="sxs-lookup"><span data-stu-id="34a98-159">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="34a98-160">Можно создавать модульные тесты для части приложения, использующие ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-160">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="34a98-161">**Поставщик ролей**</span><span class="sxs-lookup"><span data-stu-id="34a98-161">**Role provider**</span></span>

    - <span data-ttu-id="34a98-162">Нет поставщика ролей, который позволяет ограничить доступ к части приложения с помощью ролей.</span><span class="sxs-lookup"><span data-stu-id="34a98-162">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="34a98-163">Можно легко создавать роли, например «Admin» и добавьте пользователей в роли.</span><span class="sxs-lookup"><span data-stu-id="34a98-163">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="34a98-164">**На основе утверждений**</span><span class="sxs-lookup"><span data-stu-id="34a98-164">**Claims Based**</span></span>

    - <span data-ttu-id="34a98-165">ASP.NET Identity поддерживает аутентификацию, на основе утверждений, где удостоверение пользователя представляется как набор утверждений.</span><span class="sxs-lookup"><span data-stu-id="34a98-165">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="34a98-166">Утверждения позволяют разработчикам быть намного более выразительным при описании идентификатора пользователя, чем разрешено ролей.</span><span class="sxs-lookup"><span data-stu-id="34a98-166">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="34a98-167">Членство в роли имеет только логическое значение (члена или члена, не являющегося), утверждение может включать подробные сведения об удостоверении пользователя и членства.</span><span class="sxs-lookup"><span data-stu-id="34a98-167">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="34a98-168">**Поставщиков социальных сетей входа**</span><span class="sxs-lookup"><span data-stu-id="34a98-168">**Social Login Providers**</span></span>

    - <span data-ttu-id="34a98-169">Можно легко добавить в приложение социальных модули журнала учетной записи Microsoft, Facebook, Twitter, Google и другие и хранения пользовательских данных в приложении.</span><span class="sxs-lookup"><span data-stu-id="34a98-169">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>
- <span data-ttu-id="34a98-170">**Azure Active Directory**</span><span class="sxs-lookup"><span data-stu-id="34a98-170">**Azure Active Directory**</span></span>

    - <span data-ttu-id="34a98-171">Также можно добавить функциональность в журнал с помощью Azure Active Directory и хранения пользовательских данных в приложении.</span><span class="sxs-lookup"><span data-stu-id="34a98-171">You can also add log-in functionality using Azure Active Directory, and store the user-specific data in your application.</span></span> <span data-ttu-id="34a98-172">Дополнительные сведения см. в разделе [учетные записи организации](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauth) в создание веб-проектов ASP.NET в Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="34a98-172">For more information, see [Organizational Accounts](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauth) in Creating ASP.NET Web Projects in Visual Studio 2013</span></span>
- <span data-ttu-id="34a98-173">**Интеграция OWIN**</span><span class="sxs-lookup"><span data-stu-id="34a98-173">**OWIN Integration**</span></span>

    - <span data-ttu-id="34a98-174">Проверка подлинности ASP.NET теперь основан на по промежуточного слоя OWIN, который можно использовать на любом узле на основе OWIN.</span><span class="sxs-lookup"><span data-stu-id="34a98-174">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="34a98-175">ASP.NET Identity нет какой-либо зависимостью System.Web.</span><span class="sxs-lookup"><span data-stu-id="34a98-175">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="34a98-176">Он представляет собой полностью соответствует OWIN и может использоваться в любом приложении размещенных OWIN.</span><span class="sxs-lookup"><span data-stu-id="34a98-176">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="34a98-177">ASP.NET Identity OWIN проверки подлинности использует для журнала или журнала вышел пользователей на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="34a98-177">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="34a98-178">Это означает, что вместо использования FormsAuthentication для создания файла cookie, приложение использует OWIN CookieAuthentication для этого.</span><span class="sxs-lookup"><span data-stu-id="34a98-178">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="34a98-179">**Пакет NuGet**</span><span class="sxs-lookup"><span data-stu-id="34a98-179">**NuGet package**</span></span>

    - <span data-ttu-id="34a98-180">ASP.NET Identity перераспределяется как пакет NuGet, который устанавливается в шаблонах ASP.NET MVC, веб-форм и веб-API, которые поставляются вместе с Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="34a98-180">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2013.</span></span> <span data-ttu-id="34a98-181">Этот пакет NuGet можно загрузить из галереи NuGet.</span><span class="sxs-lookup"><span data-stu-id="34a98-181">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="34a98-182">Освобождение ASP.NET Identity как NuGet пакета упрощает для ASP.NET командой итерацию в новые функции и исправления ошибок и поставлять эти разработчикам самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="34a98-182">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="getting-started-with-aspnet-identity"></a><span data-ttu-id="34a98-183">Приступая к работе с ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="34a98-183">Getting started with ASP.NET Identity</span></span>

<span data-ttu-id="34a98-184">ASP.NET Identity используется в шаблонах проектов Visual Studio 2013 для ASP.NET MVC, веб-форм, веб-API и SPA.</span><span class="sxs-lookup"><span data-stu-id="34a98-184">ASP.NET Identity is used in the Visual Studio 2013 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="34a98-185">В этом пошаговом руководстве мы будет иллюстрируют использование ASP.NET Identity шаблоны проектов для расширения функциональности для регистрации, вход и выход пользователя.</span><span class="sxs-lookup"><span data-stu-id="34a98-185">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, log in and log out a user.</span></span>

<span data-ttu-id="34a98-186">ASP.NET Identity реализуется с помощью следующей процедуры.</span><span class="sxs-lookup"><span data-stu-id="34a98-186">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="34a98-187">Цель этой статьи — предоставить общий обзор ASP.NET Identity; можно, выполните его шаг за шагом или просто просмотра подробных сведений.</span><span class="sxs-lookup"><span data-stu-id="34a98-187">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="34a98-188">Более подробные инструкции по созданию приложений с помощью ASP.NET Identity, в том числе с помощью нового API для добавления пользователей роли и сведения профиля, в разделе далее действия в конце этой статьи.</span><span class="sxs-lookup"><span data-stu-id="34a98-188">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="34a98-189">Создание приложения ASP.NET MVC с отдельным учетным записям.</span><span class="sxs-lookup"><span data-stu-id="34a98-189">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="34a98-190">Можно использовать ASP.NET Identity в ASP.NET MVC, веб-форм, веб-API, SignalR и т. д. В этой статье мы начнем с приложением ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="34a98-190">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="34a98-191">Созданный проект содержит следующие три пакета для ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-191">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
 <span data-ttu-id="34a98-192">Этот пакет содержит реализацию платформы Entity Framework удостоверения ASP.NET, который будет сохраняться данные ASP.NET Identity и схему для SQL Server.</span><span class="sxs-lookup"><span data-stu-id="34a98-192">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
 <span data-ttu-id="34a98-193">Этот пакет имеет базовых интерфейсов для ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-193">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="34a98-194">Этот пакет можно использовать для записи реализацию для ASP.NET Identity, сохраняемости на разных целевых объектов хранит Azure таблицы, например хранилище NoSQL баз данных и т. д.</span><span class="sxs-lookup"><span data-stu-id="34a98-194">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
 <span data-ttu-id="34a98-195">Этот пакет содержит функции, используемое для подключения в OWIN проверки подлинности с использованием удостоверения ASP.NET в приложениях ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="34a98-195">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="34a98-196">Это используется при добавлении журнала функциональных возможностей приложения и вызов для создания файла cookie проверки подлинности файла Cookie OWIN по промежуточного слоя.</span><span class="sxs-lookup"><span data-stu-id="34a98-196">This is used when you add log in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="34a98-197">Создание пользователя.</span><span class="sxs-lookup"><span data-stu-id="34a98-197">Creating a user.</span></span>  
 <span data-ttu-id="34a98-198">Запустите приложение и щелкните на **зарегистрировать** ссылку, чтобы создать пользователя.</span><span class="sxs-lookup"><span data-stu-id="34a98-198">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="34a98-199">Ниже приведен на страницу регистрации, которая собирает имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="34a98-199">The following image shows the Register page which collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
 <span data-ttu-id="34a98-200">Когда пользователь щелкает **зарегистрировать** кнопки `Register` контроллера учетных записей создается пользователь, вызвав API ASP.NET удостоверения, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="34a98-200">When the user clicks the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="34a98-201">Войти.</span><span class="sxs-lookup"><span data-stu-id="34a98-201">Log in.</span></span>  
 <span data-ttu-id="34a98-202">Если пользователь успешно создан, она регистрирует `SignInAsync` метод.</span><span class="sxs-lookup"><span data-stu-id="34a98-202">If the user was successfully created, she is logged in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample2.cs?highlight=12)]

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample3.cs?highlight=5-6)]

 <span data-ttu-id="34a98-203">Выделенный код выше в `SignInAsync` метод создает [ClaimsIdentity](https://msdn.microsoft.com/en-us/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="34a98-203">The highlighted code above in the `SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/en-us/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="34a98-204">Поскольку ASP.NET Identity и проверки подлинности файла Cookie OWIN системы на основе утверждений, платформа требует приложение для создания ClaimsIdentity для пользователя.</span><span class="sxs-lookup"><span data-stu-id="34a98-204">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="34a98-205">ClaimsIdentity приводятся сведения о всех утверждений для пользователя, такие как пользователь принадлежит к роли.</span><span class="sxs-lookup"><span data-stu-id="34a98-205">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span> <span data-ttu-id="34a98-206">На этом этапе также можно добавить дополнительные утверждения для пользователя.</span><span class="sxs-lookup"><span data-stu-id="34a98-206">You can also add more claims for the user at this stage.</span></span>  
  
 <span data-ttu-id="34a98-207">Выделенный код ниже в `SignInAsync` метод входит в пользователя с помощью AuthenticationManager из OWIN и вызывая метод `SignIn` и передавая ClaimsIdentity.</span><span class="sxs-lookup"><span data-stu-id="34a98-207">The highlighted code below in the `SignInAsync` method signs in the user by using the AuthenticationManager from OWIN and calling `SignIn` and passing in the ClaimsIdentity.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample4.cs?highlight=8-11)]
5. <span data-ttu-id="34a98-208">Выйдите из системы.</span><span class="sxs-lookup"><span data-stu-id="34a98-208">Log off.</span></span>  
 <span data-ttu-id="34a98-209">Щелкнув **выйти** ссылку вызывает действие выхода в контроллера учетных записей.</span><span class="sxs-lookup"><span data-stu-id="34a98-209">Clicking the **Log off** link calls the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

 <span data-ttu-id="34a98-210">Выделенный код выше OWIN `AuthenticationManager.SignOut` метод.</span><span class="sxs-lookup"><span data-stu-id="34a98-210">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="34a98-211">Это аналогично [FormsAuthentication.SignOut](https://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx) метод, используемый для [FormsAuthentication](https://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationmodule.aspx) модуля в веб-форм.</span><span class="sxs-lookup"><span data-stu-id="34a98-211">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/en-us/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="34a98-212">Компоненты ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="34a98-212">Components of ASP.NET Identity</span></span>

<span data-ttu-id="34a98-213">На приведенной ниже схеме показаны компоненты системы ASP.NET Identity (щелкните [это](introduction-to-aspnet-identity/_static/image3.png) или на диаграмме, чтобы увеличить его).</span><span class="sxs-lookup"><span data-stu-id="34a98-213">The diagram below shows the components of the ASP.NET Identity system (click on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="34a98-214">Пакеты зеленым цветом составляют системы ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-214">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="34a98-215">Другие пакеты, зависимости, необходимые для использования системы удостоверений ASP.NET в приложениях ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="34a98-215">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="34a98-216">Вот краткое описание пакетов NuGet, не упомянутые ранее:</span><span class="sxs-lookup"><span data-stu-id="34a98-216">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="34a98-217">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="34a98-217">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="34a98-218">По промежуточного слоя, который позволяет приложению использовать куки-файл на основе проверки подлинности, аналогично ASP. NET проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="34a98-218">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="34a98-219">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="34a98-219">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="34a98-220">Платформа Entity Framework — технология доступа к данных, рекомендуемые корпорации Майкрософт для реляционных баз данных.</span><span class="sxs-lookup"><span data-stu-id="34a98-220">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="34a98-221">Миграция из членства в ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="34a98-221">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="34a98-222">Мы надеемся скоро представляют собой руководства по переносу существующих приложений, использующих членства в ASP.NET или простого членства в новую систему ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="34a98-222">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="34a98-223">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="34a98-223">Next Steps</span></span>

- [<span data-ttu-id="34a98-224">Создание приложения ASP.NET MVC 5 с Facebook и Google OAuth2 и входа OpenID</span><span class="sxs-lookup"><span data-stu-id="34a98-224">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="34a98-225">Учебник использует API удостоверения ASP.NET для добавления сведения профиля к пользовательской базе данных, а также для проверки подлинности в Google и Facebook.</span><span class="sxs-lookup"><span data-stu-id="34a98-225">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="34a98-226">Создать приложение ASP.NET MVC с помощью проверки подлинности и баз данных SQL Server и развернуть в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="34a98-226">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="34a98-227">Этого учебника показано, как использовать API удостоверения для добавления пользователей и ролей.</span><span class="sxs-lookup"><span data-stu-id="34a98-227">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- <span data-ttu-id="34a98-228">[Учетные записи отдельных пользователей](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#indauth) при создании проектов веб-ASP.NET в Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="34a98-228">[Individual User Accounts](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#indauth) in Creating ASP.NET Web Projects in Visual Studio 2013</span></span>
- <span data-ttu-id="34a98-229">[Учетные записи организации](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauth) при создании проектов веб-ASP.NET в Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="34a98-229">[Organizational Accounts](../../../visual-studio/overview/2013/creating-web-projects-in-visual-studio.md#orgauth) in Creating ASP.NET Web Projects in Visual Studio 2013</span></span>
- [<span data-ttu-id="34a98-230">Настройка данных профиля в ASP.NET Identity в шаблонах Visual STUDIO 2013</span><span class="sxs-lookup"><span data-stu-id="34a98-230">Customizing profile information in ASP.NET Identity in VS 2013 templates</span></span>](https://blogs.msdn.com/b/webdev/archive/2013/10/16/customizing-profile-information-in-asp-net-identity-in-vs-2013-templates.aspx)
- [<span data-ttu-id="34a98-231">Дополнительные сведения можно получить от поставщиков социальных сетей, используемых в шаблоны проектов Visual STUDIO 2013</span><span class="sxs-lookup"><span data-stu-id="34a98-231">Get more information from Social providers used in the VS 2013 project templates</span></span>](https://blogs.msdn.com/b/webdev/archive/2013/10/16/get-more-information-from-social-providers-used-in-the-vs-2013-project-templates.aspx)
- [<span data-ttu-id="34a98-232">https://github.com/rustd/AspnetIdentitySample</span><span class="sxs-lookup"><span data-stu-id="34a98-232">https://github.com/rustd/AspnetIdentitySample</span></span>](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="34a98-233">Образец приложения, которое показывает, как добавить основные роли и поддержка пользователей и как это делать, ролей и управление пользователями.</span><span class="sxs-lookup"><span data-stu-id="34a98-233">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>
