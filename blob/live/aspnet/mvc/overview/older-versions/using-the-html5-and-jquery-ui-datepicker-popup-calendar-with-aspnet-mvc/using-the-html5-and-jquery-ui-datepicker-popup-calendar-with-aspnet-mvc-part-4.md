---
uid: mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
title: "Использование HTML5 и раскрывающегося календаря с выбором дат jQuery с ASP.NET MVC — часть 4 | Документы Microsoft"
author: Rick-Anderson
description: "Этот учебник поможет узнать основные принципы работы с редактор шаблонов, шаблоны отображения и пользовательского интерфейса jQuery datepicker раскрывающегося календаря в MV ASP.NET..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/29/2011
ms.topic: article
ms.assetid: 57666c69-2b0f-423a-a61d-be49547fa585
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
msc.type: authoredcontent
ms.openlocfilehash: 2b76d2e449d491fd8d808343065b22ba267f1152
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc---part-4"></a><span data-ttu-id="7ec0d-103">Использование HTML5 и раскрывающегося календаря с выбором дат jQuery с ASP.NET MVC — часть 4</span><span class="sxs-lookup"><span data-stu-id="7ec0d-103">Using the HTML5 and jQuery UI Datepicker Popup Calendar with ASP.NET MVC - Part 4</span></span>
====================
<span data-ttu-id="7ec0d-104">По [Рик Андерсон](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="7ec0d-104">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="7ec0d-105">Этот учебник поможет узнать основные принципы работы с редактор шаблонов, шаблоны отображения и пользовательского интерфейса jQuery datepicker раскрывающегося календаря в приложении MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-105">This tutorial will teach you the basics of how to work with editor templates, display templates, and the jQuery UI datepicker popup calendar in an ASP.NET MVC Web application.</span></span>


### <a name="adding-a-template-for-editing-dates"></a><span data-ttu-id="7ec0d-106">Добавление шаблона для редактирования дат</span><span class="sxs-lookup"><span data-stu-id="7ec0d-106">Adding a Template for Editing Dates</span></span>

<span data-ttu-id="7ec0d-107">В этом разделе вы создадите шаблон для изменения дат, которые будут применяться, когда ASP.NET MVC отображает пользовательский Интерфейс для редактирования свойств модели, которые отмечены **даты** перечисление [DataType](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatype.aspx) атрибута.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-107">In this section you'll create a template for editing dates that will be applied when ASP.NET MVC displays UI for editing model properties that are marked with the **Date** enumeration of the [DataType](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatype.aspx) attibute.</span></span> <span data-ttu-id="7ec0d-108">Шаблон будет отображаться только дата; время не отображается.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-108">The template will render only the date; time will not be displayed.</span></span> <span data-ttu-id="7ec0d-109">В шаблоне используется [jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/) раскрывающегося календаря предоставляет способ для изменения дат.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-109">In the template you'll use the [jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to provide a way to edit dates.</span></span>

<span data-ttu-id="7ec0d-110">Чтобы начать, откройте *Movie.cs* и добавьте [DataType](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatypeattribute.aspx) атрибутом **даты** перечисления `ReleaseDate` свойства, как показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-110">To begin, open the *Movie.cs* file and add the [DataType](https://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.datatypeattribute.aspx) attribute with the **Date** enumeration to the `ReleaseDate` property, as shown in the following code:</span></span>

[!code-csharp[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample1.cs)]

<span data-ttu-id="7ec0d-111">Этот код вызывает `ReleaseDate` поле для отображения без времени, как отобразить шаблоны и редактирование шаблонов.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-111">This code causes the `ReleaseDate` field to be displayed without the time in both display templates and edit templates.</span></span> <span data-ttu-id="7ec0d-112">Если приложение содержит *date.cshtml* шаблона в *Views\Shared\EditorTemplates* папке или в *Views\Movies\EditorTemplates* папки, этот шаблон будет использоваться для отображения любого `DateTime` свойства во время редактирования.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-112">If your application contains a *date.cshtml* template in the *Views\Shared\EditorTemplates* folder or in the *Views\Movies\EditorTemplates* folder, that template will be used to render any `DateTime` property while editing.</span></span> <span data-ttu-id="7ec0d-113">В противном случае встроенную систему шаблонов ASP.NET будет отображать свойство как дата.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-113">Otherwise the built-in ASP.NET templating system will display the property as a date.</span></span>

<span data-ttu-id="7ec0d-114">Нажмите CTRL+F5, чтобы запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-114">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="7ec0d-115">Выберите ссылку правки, чтобы убедиться, что в поле ввода для даты выпуска отображается только дата.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-115">Select an edit link to verify that the input field for the release date is showing only the date.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image1.png)

<span data-ttu-id="7ec0d-116">В **обозревателе решений**, разверните *представления* папку, разверните *Shared* папку, а затем щелкните правой кнопкой мыши *Views\Shared\EditorTemplates* папки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-116">In **Solution Explorer**, expand the *Views* folder, expand the *Shared* folder, and then right-click the *Views\Shared\EditorTemplates* folder.</span></span>

<span data-ttu-id="7ec0d-117">Нажмите кнопку **добавить**, а затем нажмите кнопку **представление**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-117">Click **Add**, and then click **View**.</span></span> <span data-ttu-id="7ec0d-118">**Добавить представление** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-118">The **Add View** dialog box is displayed.</span></span>

<span data-ttu-id="7ec0d-119">В **имя представления** введите &quot;даты&quot;.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-119">In the **View name** box, type &quot;Date&quot;.</span></span>

<span data-ttu-id="7ec0d-120">Выберите **создать как частичное представление** флажок.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-120">Select the **Create as a partial view** check box.</span></span> <span data-ttu-id="7ec0d-121">Убедитесь, что **макета или главная страница** и **создать строго типизированное представление** не установлены флажки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-121">Make sure that the **Use a layout or master page** and **Create a strongly-typed view** check boxes are not selected.</span></span>

<span data-ttu-id="7ec0d-122">Нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-122">Click **Add**.</span></span> <span data-ttu-id="7ec0d-123">*Views\Shared\EditorTemplates\Date.cshtml* создания шаблона.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-123">The *Views\Shared\EditorTemplates\Date.cshtml* template is created.</span></span>

<span data-ttu-id="7ec0d-124">Добавьте следующий код в *Views\Shared\EditorTemplates\Date.cshtml* шаблона.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-124">Add the following code to the *Views\Shared\EditorTemplates\Date.cshtml* template.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample2.cshtml)]

<span data-ttu-id="7ec0d-125">Первая строка объявляет модели, чтобы быть `DateTime` типа.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-125">The first line declares the model to be a `DateTime` type.</span></span> <span data-ttu-id="7ec0d-126">Несмотря на то, что не требуется объявить тип модели в режиме изменения и отобразить шаблоны, он все же рекомендуется, чтобы получить во время компиляции проверки модели, передаваемые в представление.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-126">Although you don't need to declare the model type in edit and display templates, it's a best practice so that you get compile-time checking of the model being passed to the view.</span></span> <span data-ttu-id="7ec0d-127">(Еще одним преимуществом является затем получить доступ к IntelliSense для модели в представлении в Visual Studio.) Если не был объявлен тип модели, ASP.NET MVC рассматривает его [динамическое](https://msdn.microsoft.com/en-us/library/dd264741.aspx) введите и времени компиляции не проверку типов.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-127">(Another benefit is that you then get IntelliSense for the model in the view in Visual Studio.) If the model type is not declared, ASP.NET MVC considers it a [dynamic](https://msdn.microsoft.com/en-us/library/dd264741.aspx) type and there's no compile-time type checking.</span></span> <span data-ttu-id="7ec0d-128">При объявлении модели, чтобы быть `DateTime` тип, он становится со строго типизированными.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-128">If you declare the model to be a `DateTime` type, it becomes strongly typed.</span></span>

<span data-ttu-id="7ec0d-129">Вторая строка — только текстовое разметки HTML, который отображает &quot;с использованием шаблона даты&quot; перед поле даты.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-129">The second line is just literal HTML markup that displays &quot;Using Date Template&quot; before a date field.</span></span> <span data-ttu-id="7ec0d-130">Эта строка будет использоваться временно для убедитесь, что используется этот шаблон даты.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-130">You'll use this line temporarily to verify that this date template is being used.</span></span>

<span data-ttu-id="7ec0d-131">Следующая строка представляет [Html.TextBox](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textbox.aspx) поддержки, который выполняет визуализацию `input` поле, которое представляет собой текстовое поле.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-131">The next line is an [Html.TextBox](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textbox.aspx) helper that renders an `input` field that's a text box.</span></span> <span data-ttu-id="7ec0d-132">Третий параметр для вспомогательного метода использует анонимный тип для класс для текстового поля, чтобы установить `datefield` и тип `date`.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-132">The third parameter for the helper uses an anonymous type to set the class for the text box to `datefield` and the type to `date`.</span></span> <span data-ttu-id="7ec0d-133">(Поскольку `class` является зарезервированным в языке C# необходимо использовать `@` символ для экранирования `class` атрибута в анализатор C#.)</span><span class="sxs-lookup"><span data-stu-id="7ec0d-133">(Because `class` is a reserved in C#, you need to use the `@` character to escape the `class` attribute in the C# parser.)</span></span>

<span data-ttu-id="7ec0d-134">`date` Тип является типом ввода HTML5, позволяет браузерам поддержкой HTML5 для отображения элемента управления calendar HTML5.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-134">The `date` type is an HTML5 input type that enables HTML5-aware browsers to render a HTML5 calendar control.</span></span> <span data-ttu-id="7ec0d-135">Позднее вы добавите некоторые JavaScript, чтобы подключить datepicker jQuery для `Html.TextBox` элемента с помощью `datefield` класса.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-135">Later on you'll add some JavaScript to hook up the jQuery datepicker to the `Html.TextBox` element using the `datefield` class.</span></span>

<span data-ttu-id="7ec0d-136">Нажмите CTRL+F5, чтобы запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-136">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="7ec0d-137">Можно убедиться, что `ReleaseDate` свойства в представлении редактирования используется изменить шаблон, поскольку отображает шаблон &quot;с использованием шаблона даты&quot; непосредственно перед `ReleaseDate` текстовое поле, ввода, как показано на этом рисунке:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-137">You can verify that the `ReleaseDate` property in the edit view is using the edit template because the template displays &quot;Using Date Template&quot; just before the `ReleaseDate` text input box, as shown in this image:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image2.png)

<span data-ttu-id="7ec0d-138">Просмотрите исходный код страницы в браузере.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-138">In your browser, view the source of the page.</span></span> <span data-ttu-id="7ec0d-139">(Например, щелкните правой кнопкой мыши страницу и выберите **источник**.) Ниже примере показаны некоторые разметка страницы, демонстрирующая `class` и `type` атрибуты в HTML.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-139">(For example, right-click the page and select **View source**.) The following example shows some of the markup for the page, illustrating the `class` and `type` attributes in the rendered HTML.</span></span>

[!code-html[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample3.html)]

<span data-ttu-id="7ec0d-140">Вернитесь к *Views\Shared\EditorTemplates\Date.cshtml* шаблона и удаление &quot;с использованием шаблона даты&quot; разметки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-140">Return to the *Views\Shared\EditorTemplates\Date.cshtml* template and remove the &quot;Using Date Template&quot; markup.</span></span> <span data-ttu-id="7ec0d-141">Теперь завершенного шаблона выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-141">Now the completed template looks like this:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample4.cshtml)]

### <a name="adding-a-jquery-ui-datepicker-popup-calendar-using-nuget"></a><span data-ttu-id="7ec0d-142">Добавление раскрывающегося календаря с выбором дат jQuery с помощью NuGet</span><span class="sxs-lookup"><span data-stu-id="7ec0d-142">Adding a jQuery UI Datepicker Popup Calendar using NuGet</span></span>

<span data-ttu-id="7ec0d-143">В этом разделе вы добавите [datepicker пользовательского интерфейса jQuery](http://jqueryui.com/demos/datepicker/) раскрывающегося календаря в шаблон Дата изменения.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-143">In this section you'll add the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to the date-edit template.</span></span> <span data-ttu-id="7ec0d-144">[JQuery UI](http://jqueryui.com/) библиотека поддерживает дополнительные настраиваемые мини-приложений и эффектов анимации.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-144">The [jQuery UI](http://jqueryui.com/) library provides support for animation, advanced effects, and customizable widgets.</span></span> <span data-ttu-id="7ec0d-145">Она построена на основе библиотеки jQuery JavaScript.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-145">It's built on top of the jQuery JavaScript library.</span></span> <span data-ttu-id="7ec0d-146">Раскрывающегося календаря с выбором дат позволяет легко и естественным ввода даты с помощью календаря вместо ввода строки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-146">The datepicker popup calendar makes it easy and natural to enter dates using a calendar instead of entering a string.</span></span> <span data-ttu-id="7ec0d-147">Раскрывающегося календаря также ограничивает пользователей в юридических даты — запись обычный текст для даты, которые позволяют введите примерно `2/33/1999` (февраль 33rd, 1999 г.), но [datepicker пользовательского интерфейса jQuery](http://jqueryui.com/demos/datepicker/) раскрывающегося календаря, не позволит.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-147">The popup calendar also limits users to legal dates — ordinary text entry for a date would let you enter something like `2/33/1999` ( February 33rd, 1999), but the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar won't allow that.</span></span>

<span data-ttu-id="7ec0d-148">Во-первых необходимо установить библиотеки пользовательского интерфейса jQuery.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-148">First, you have to install the jQuery UI libraries.</span></span> <span data-ttu-id="7ec0d-149">Для этого потребуется использовать NuGet, представляющего диспетчера пакетов, которое включено в версии с пакетом обновления 1 Visual Studio 2010 и Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-149">To do that, you'll use NuGet, which is a package manager that's included in SP1 versions of Visual Studio 2010 and Visual Web Developer.</span></span>

<span data-ttu-id="7ec0d-150">В Visual Web Developer из **средства** последовательно выберите пункты **диспетчер пакетов библиотеки** , а затем выберите **управление пакетами NuGet**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-150">In Visual Web Developer, from the **Tools** menu, select **Library Package Manager** and then select **Manage NuGet Packages**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image3.png)

<span data-ttu-id="7ec0d-151">Примечание: Если **средства** не отображается меню **диспетчер пакетов библиотеки** команды, необходимо установить NuGet, следуя указаниям [Установка NuGet](http://docs.nuget.org/docs/start-here/installing-nuget) страницы веб-сайте NuGet.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-151">Note: If the **Tools** menu doesn't display the **Library Package Manager** command, you need to install NuGet by following the instructions on the [Installing NuGet](http://docs.nuget.org/docs/start-here/installing-nuget) page of the NuGet website.</span></span>   
  
<span data-ttu-id="7ec0d-152">Если вы используете Visual Studio, а не Visual Web Developer из **средства** последовательно выберите пункты **диспетчер пакетов библиотеки** , а затем выберите **добавьте ссылку на пакет библиотеки**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-152">If you're using Visual Studio instead of Visual Web Developer, from the **Tools** menu, select **Library Package Manager** and then select **Add Library Package Reference**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image4.png)

<span data-ttu-id="7ec0d-153">В **MVCMovie — управление пакетами NuGet** диалоговое окно, нажмите кнопку **Online** слева, а затем введите &quot;jQuery.UI&quot; в поле поиска.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-153">In the **MVCMovie - Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter &quot;jQuery.UI&quot; in the search box.</span></span> <span data-ttu-id="7ec0d-154">Выберите j **запроса пользовательского интерфейса мини-приложения: Datepicker**, а затем выберите **установить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-154">Select j **Query UI WIdgets:Datepicker**, then select the **Install** button.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image5.png)

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image6.png)

<span data-ttu-id="7ec0d-155">NuGet добавляет эти отладки и версии уменьшенный jQuery основных компонентов пользовательского интерфейса и выбора дат jQuery в проект:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-155">NuGet adds these debug versions and minified versions of jQuery UI Core and the jQuery UI date picker to your project:</span></span>

- <span data-ttu-id="7ec0d-156">*jQuery.UI.Core.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-156">*jquery.ui.core.js*</span></span>
- <span data-ttu-id="7ec0d-157">*jQuery.UI.Core.min.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-157">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="7ec0d-158">*jQuery.UI.DatePicker.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-158">*jquery.ui.datepicker.js*</span></span>
- <span data-ttu-id="7ec0d-159">*jQuery.UI.DatePicker.min.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-159">*jquery.ui.datepicker.min.js*</span></span>

<span data-ttu-id="7ec0d-160">Примечание: Отладочные версии (файлы без *. min.js* расширение) полезны для отладки, но в рабочего веб-сайта, следует включить только уменьшенный версии.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-160">Note: The debug versions (the files without the *.min.js* extension) are useful for debugging, but in a production site, you'd include only the minified versions.</span></span>

<span data-ttu-id="7ec0d-161">Действительно использовать средство выбора дат jQuery, необходимо создать сценарий jQuery, будет подключать мини-приложение календаря для редактирования шаблона.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-161">To actually use the jQuery date picker, you need to create a jQuery script that will hook up the calendar widget to the edit template.</span></span> <span data-ttu-id="7ec0d-162">В **обозревателе решений**, щелкните правой кнопкой мыши *сценариев* папку и выберите **добавить**, затем **новый элемент**, а затем **JScript Файл**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-162">In **Solution Explorer**, right-click the *Scripts* folder and select **Add**, then **New Item**, and then **JScript File**.</span></span> <span data-ttu-id="7ec0d-163">Назовите файл *DatePickerReady.js*.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-163">Name the file *DatePickerReady.js*.</span></span>

<span data-ttu-id="7ec0d-164">Добавьте следующий код в *DatePickerReady.js* файла:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-164">Add the following code to the *DatePickerReady.js* file:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample5.js)]

<span data-ttu-id="7ec0d-165">Если вы не знакомы с jQuery, Вот краткое объяснение при этом произойдет: первая строка &quot;jQuery готов&quot; функции, которая вызывается, когда все элементы модели DOM на странице загрузки.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-165">If you're not familiar with jQuery, here's a brief explanation of what this does: the first line is the &quot;jQuery ready&quot; function, which is called when all the DOM elements in a page have loaded.</span></span> <span data-ttu-id="7ec0d-166">Вторая строка выбирает все элементы модели DOM, с именем класса `datefield`, затем вызывает `datepicker` функции для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-166">The second line selects all DOM elements that have the class name `datefield`, then invokes the `datepicker` function for each of them.</span></span> <span data-ttu-id="7ec0d-167">(Помните, что вы добавили `datefield` класса *Views\Shared\EditorTemplates\Date.cshtml* шаблона ранее в этом учебнике.)</span><span class="sxs-lookup"><span data-stu-id="7ec0d-167">(Remember that you added the `datefield` class to the *Views\Shared\EditorTemplates\Date.cshtml* template earlier in the tutorial.)</span></span>

<span data-ttu-id="7ec0d-168">Затем откройте *представления\общие\\_Layout.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-168">Next, open the *Views\Shared\\_Layout.cshtml* file.</span></span> <span data-ttu-id="7ec0d-169">Необходимо добавить ссылки на следующие файлы, которые необходимы, чтобы можно было использовать Выбор даты:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-169">You need to add references to the following files, which are all required so that you can use the date picker:</span></span>

- <span data-ttu-id="7ec0d-170">*Content/Themes/Base/jQuery.UI.Core.CSS*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-170">*Content/themes/base/jquery.ui.core.css*</span></span>
- <span data-ttu-id="7ec0d-171">*Content/Themes/Base/jQuery.UI.DatePicker.CSS*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-171">*Content/themes/base/jquery.ui.datepicker.css*</span></span>
- <span data-ttu-id="7ec0d-172">*Content/Themes/Base/jQuery.UI.Theme.CSS*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-172">*Content/themes/base/jquery.ui.theme.css*</span></span>
- <span data-ttu-id="7ec0d-173">*jQuery.UI.Core.min.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-173">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="7ec0d-174">*jQuery.UI.DatePicker.min.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-174">*jquery.ui.datepicker.min.js*</span></span>
- <span data-ttu-id="7ec0d-175">*DatePickerReady.js*</span><span class="sxs-lookup"><span data-stu-id="7ec0d-175">*DatePickerReady.js*</span></span>

<span data-ttu-id="7ec0d-176">Следующий пример показывает фактический код, следует добавить в нижней части `head` элемент в *представления\общие\\_Layout.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-176">The following example shows the actual code that you should add at the bottom of the `head` element in the *Views\Shared\\_Layout.cshtml* file.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample6.cshtml)]

<span data-ttu-id="7ec0d-177">Полный `head` раздела приведен ниже:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-177">The complete `head` section is shown here:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample7.cshtml)]

<span data-ttu-id="7ec0d-178">[URL-адрес содержимого вспомогательный](https://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx) метод преобразует путь к ресурсу по абсолютному пути.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-178">The [URL content helper](https://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx) method converts the resource path to an absolute path.</span></span> <span data-ttu-id="7ec0d-179">Необходимо использовать `@URL.Content` правильно ссылаться на эти ресурсы при запуске приложения на IIS.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-179">You must use `@URL.Content` to correctly reference these resources when the application is running on IIS.</span></span>

<span data-ttu-id="7ec0d-180">Нажмите CTRL+F5, чтобы запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-180">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="7ec0d-181">Выберите ссылки редактирования, а затем поместить курсор в **ReleaseDate** поля.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-181">Select an edit link, then put the insertion point into the **ReleaseDate** field.</span></span> <span data-ttu-id="7ec0d-182">Отображается всплывающим календарем jQuery.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-182">The jQuery UI popup calendar is displayed.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image7.png)

<span data-ttu-id="7ec0d-183">Как и большинство элементов управления jQuery datepicker позволяет значительно изменять.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-183">Like most jQuery controls, the datepicker lets you customize it extensively.</span></span> <span data-ttu-id="7ec0d-184">Сведения см. в разделе [настройке Visual: проектирование пользовательского интерфейса jQuery темы](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme) на [jQuery UI](http://learn.jquery.com/jquery-ui/getting-started/) сайта.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-184">For information, see [Visual Customization: Designing a jQuery UI theme](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme) on the [jQuery UI](http://learn.jquery.com/jquery-ui/getting-started/) site.</span></span>

### <a name="supporting-the-html5-date-input-control"></a><span data-ttu-id="7ec0d-185">Поддержка HTML5 элемента управления вводом даты</span><span class="sxs-lookup"><span data-stu-id="7ec0d-185">Supporting the HTML5 Date Input Control</span></span>

<span data-ttu-id="7ec0d-186">Как дополнительные обозреватели поддерживают HTML5, может потребоваться использовать собственный HTML5, ввода, такие как `date` элементе ввода, а не использовать календарь пользовательского интерфейса jQuery.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-186">As more browsers support HTML5, you'll want to use the native HTML5 input, such as the `date` input element, and not use the jQuery UI calendar.</span></span> <span data-ttu-id="7ec0d-187">Можно добавить логику в приложение на автоматическое применение элементов управления HTML5, если браузер поддерживает их.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-187">You can add logic to your application to automatically use HTML5 controls if the browser supports them.</span></span> <span data-ttu-id="7ec0d-188">Для этого замените содержимое *DatePickerReady.js* файл со следующим:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-188">To do this, replace the contents of the *DatePickerReady.js* file with the following:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample8.js)]

<span data-ttu-id="7ec0d-189">В первой строке этого сценария используется Modernizr, чтобы убедиться, что поддерживается ввода даты в HTML5.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-189">The first line of this script uses Modernizr to verify that HTML5 date input is supported.</span></span> <span data-ttu-id="7ec0d-190">Если не поддерживается, выбора дат jQuery вместо подключен.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-190">If it's not supported, the jQuery UI date picker is hooked up instead.</span></span> <span data-ttu-id="7ec0d-191">([Modernizr](http://www.modernizr.com/docs/) — это библиотека JavaScript открытым исходным кодом, который определяет доступность собственные реализации HTML5 и CSS3.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-191">([Modernizr](http://www.modernizr.com/docs/) is an open-source JavaScript library that detects the availability of native implementations of HTML5 and CSS3.</span></span> <span data-ttu-id="7ec0d-192">Modernizr включен в любые создаваемые проекты ASP.NET MVC.)</span><span class="sxs-lookup"><span data-stu-id="7ec0d-192">Modernizr is included in any new ASP.NET MVC projects that you create.)</span></span>

<span data-ttu-id="7ec0d-193">После внесения этого изменения, можно проверить его с помощью браузера, поддерживающего HTML5, такие как Opera 11.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-193">After you've made this change, you can test it by using a browser that supports HTML5, such as Opera 11.</span></span> <span data-ttu-id="7ec0d-194">Запуск приложения с помощью браузера HTML5-совместимые и измените запись фильма.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-194">Run the application using an HTML5-compatible browser and edit a movie entry.</span></span> <span data-ttu-id="7ec0d-195">Вместо раскрывающегося календаря пользовательского интерфейса jQuery используется элемент управления HTML5 даты:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-195">The HTML5 date control is used instead of the jQuery UI popup calendar:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image8.png)

<span data-ttu-id="7ec0d-196">Поскольку новые версии браузеров постепенно реализации HTML5, теперь рекомендуется добавление кода в веб-сайт, который допустим для разнообразных поддержкой HTML5.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-196">Because new versions of browsers are implementing HTML5 incrementally, a good approach for now is to add code to your website that accommodates a wide variety of HTML5 support.</span></span> <span data-ttu-id="7ec0d-197">Например, более надежным *DatePickerReady.js* сценарий показан ниже, которая позволяет вашего сайта поддержки браузеров, которые частично поддерживает элемент управления HTML5 даты.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-197">For example, a more robust *DatePickerReady.js* script is shown below that lets your site support browsers that only partially support the HTML5 date control.</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample9.js)]

<span data-ttu-id="7ec0d-198">Этот скрипт выбирает HTML5 `input` элементов типа `date` , не полностью поддерживают элемент управления HTML5 даты.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-198">This script selects HTML5 `input` elements of type `date` that don't fully support the HTML5 date control.</span></span> <span data-ttu-id="7ec0d-199">Для этих элементов подключает всплывающим календарем jQuery и затем изменяет `type` атрибута из `date` для `text`.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-199">For those elements, it hooks up the jQuery UI popup calendar and then changes the `type` attribute from `date` to `text`.</span></span> <span data-ttu-id="7ec0d-200">Изменив `type` атрибута из `date` для `text`, частичная поддержка даты HTML5 исключается.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-200">By changing the `type` attribute from `date` to `text`, partial HTML5 date support is eliminated.</span></span> <span data-ttu-id="7ec0d-201">Еще более надежные *DatePickerReady.js* можно найти в [JSFIDDLE](http://jsfiddle.net/XSTK8/15/).</span><span class="sxs-lookup"><span data-stu-id="7ec0d-201">An even more robust *DatePickerReady.js* script can be found at [JSFIDDLE](http://jsfiddle.net/XSTK8/15/).</span></span>

### <a name="adding-nullable-dates-to-the-templates"></a><span data-ttu-id="7ec0d-202">Добавление шаблонов дат, допускающие значение NULL</span><span class="sxs-lookup"><span data-stu-id="7ec0d-202">Adding Nullable Dates to the Templates</span></span>

<span data-ttu-id="7ec0d-203">Если использовать один из существующих шаблонов даты и передать значение null, дата, вы получите ошибку во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-203">If you use one of the existing date templates and pass a null date, you'll get a run-time error.</span></span> <span data-ttu-id="7ec0d-204">Для повышения надежности шаблоны даты, вы измените их для обработки значения null.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-204">To make the date templates more robust, you'll change them to handle null values.</span></span> <span data-ttu-id="7ec0d-205">Для поддержки дат, допускающие значение NULL, измените код в *Views\Shared\DisplayTemplates\DateTime.cshtml* следующее:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-205">To support nullable dates, change the code in the *Views\Shared\DisplayTemplates\DateTime.cshtml* to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample10.cshtml)]

<span data-ttu-id="7ec0d-206">Код возвращает пустую строку при использовании модели **null**.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-206">The code returns an empty string when the model is **null**.</span></span>

<span data-ttu-id="7ec0d-207">Измените код в *Views\Shared\EditorTemplates\Date.cshtml* файла следующее:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-207">Change the code in the *Views\Shared\EditorTemplates\Date.cshtml* file to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample11.cshtml)]

<span data-ttu-id="7ec0d-208">Если этот код выполняется, если модель не равно null, модели `DateTime` используется значение.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-208">When this code runs, if the model is not null, the model's `DateTime` value is used.</span></span> <span data-ttu-id="7ec0d-209">Если модель имеет значение null, вместо него используется текущая дата.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-209">If the model is null, the current date is used instead.</span></span>

### <a name="wrapup"></a><span data-ttu-id="7ec0d-210">— Сводка</span><span class="sxs-lookup"><span data-stu-id="7ec0d-210">Wrapup</span></span>

<span data-ttu-id="7ec0d-211">Этот учебник описаны основы шаблонизированные вспомогательные объекты ASP.NET, а также демонстрируется использование раскрывающегося календаря с выбором дат jQuery UI в приложении ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-211">This tutorial has covered the basics of ASP.NET templated helpers and shows you how to use the jQuery UI datepicker popup calendar in an ASP.NET MVC application.</span></span> <span data-ttu-id="7ec0d-212">Дополнительные сведения попробуйте следующие ресурсы:</span><span class="sxs-lookup"><span data-stu-id="7ec0d-212">For more information, try these resources:</span></span>

- <span data-ttu-id="7ec0d-213">Сведения о локализации, см. в Rajeesh записи [JQueryUI Datepicker в ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/).</span><span class="sxs-lookup"><span data-stu-id="7ec0d-213">For information on localization, see Rajeesh's blog [JQueryUI Datepicker in ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/).</span></span>
- <span data-ttu-id="7ec0d-214">Сведения о jQuery UI см. в разделе [jQuery UI](http://docs.jquery.com/UI).</span><span class="sxs-lookup"><span data-stu-id="7ec0d-214">For information about jQuery UI, see [jQuery UI](http://docs.jquery.com/UI).</span></span>
- <span data-ttu-id="7ec0d-215">Сведения о локализации элемент управления datepicker см. в разделе [пользовательского интерфейса, Datepicker/локализации](http://docs.jquery.com/UI/Datepicker/Localization).</span><span class="sxs-lookup"><span data-stu-id="7ec0d-215">For information about how to localize the datepicker control, see [UI/Datepicker/Localization](http://docs.jquery.com/UI/Datepicker/Localization).</span></span>
- <span data-ttu-id="7ec0d-216">Дополнительные сведения о шаблонах ASP.NET MVC см. в разделе серии публикаций в блоге Брэда Уилсона на [ASP.NET MVC 2 Templates](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html).</span><span class="sxs-lookup"><span data-stu-id="7ec0d-216">For more information about the ASP.NET MVC templates, see Brad Wilson's blog series on [ASP.NET MVC 2 Templates](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html).</span></span> <span data-ttu-id="7ec0d-217">Несмотря на то, что ряд была написана для ASP.NET MVC 2, материала по-прежнему применяется для текущей версии ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="7ec0d-217">Although the series was written for ASP.NET MVC 2, the material still applies for the current version of ASP.NET MVC.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="7ec0d-218">Назад</span><span class="sxs-lookup"><span data-stu-id="7ec0d-218">Previous</span></span>](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-3.md)
