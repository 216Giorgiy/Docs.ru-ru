---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
title: "Сортировку, фильтрацию и разбиение по страницам с платформой Entity Framework в приложении ASP.NET MVC | Документы Microsoft"
author: tdykstra
description: "Contoso университета примера веб-приложения показано, как создавать приложения ASP.NET MVC 5 с помощью Entity Framework 6 Code First и Visual Studio..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/01/2015
ms.topic: article
ms.assetid: d5723e46-41fe-4d09-850a-e03b9e285bfa
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 8d11bf47f8c43040ef30d7132f0bb756748dbacd
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="sorting-filtering-and-paging-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="daac4-103">Сортировку, фильтрацию и разбиение по страницам с платформой Entity Framework в приложении ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="daac4-103">Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="daac4-104">По [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="daac4-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="daac4-105">[Загрузка завершенного проекта](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) или [скачать PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="daac4-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="daac4-106">Contoso университета примера веб-приложения показано, как создавать приложения ASP.NET MVC 5 с помощью Entity Framework 6 Code First и Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="daac4-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="daac4-107">Сведения о учебника серии см [в первом учебнике ряда](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="daac4-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="daac4-108">В предыдущем учебнике реализован ряд веб-страниц для основные операции CRUD для `Student` сущностей.</span><span class="sxs-lookup"><span data-stu-id="daac4-108">In the previous tutorial you implemented a set of web pages for basic CRUD operations for `Student` entities.</span></span> <span data-ttu-id="daac4-109">В этом учебнике вы добавите сортировку, фильтрацию и разбиения по страницам для **учащихся** страницы индекса.</span><span class="sxs-lookup"><span data-stu-id="daac4-109">In this tutorial you'll add sorting, filtering, and paging functionality to the **Students** Index page.</span></span> <span data-ttu-id="daac4-110">Здесь также создается страница, выполняющий простым группированием.</span><span class="sxs-lookup"><span data-stu-id="daac4-110">You'll also create a page that does simple grouping.</span></span>

<span data-ttu-id="daac4-111">Ниже показано, как будет выглядеть страница после завершения.</span><span class="sxs-lookup"><span data-stu-id="daac4-111">The following illustration shows what the page will look like when you're done.</span></span> <span data-ttu-id="daac4-112">Заголовки столбцов являются ссылками, пользователь может щелкнуть для сортировки по этому столбцу.</span><span class="sxs-lookup"><span data-stu-id="daac4-112">The column headings are links that the user can click to sort by that column.</span></span> <span data-ttu-id="daac4-113">При щелчке заголовка многократно переключается между сортировкой по возрастанию и убыванию.</span><span class="sxs-lookup"><span data-stu-id="daac4-113">Clicking a column heading repeatedly toggles between ascending and descending sort order.</span></span>

![Students_Index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

## <a name="add-column-sort-links-to-the-students-index-page"></a><span data-ttu-id="daac4-115">Добавить столбец сортировки ссылки на страницы индекса для учащихся</span><span class="sxs-lookup"><span data-stu-id="daac4-115">Add Column Sort Links to the Students Index Page</span></span>

<span data-ttu-id="daac4-116">Для добавления, страница индекса студента сортировки, мы изменим `Index` метод `Student` контроллера и добавьте код для `Student` Индексируйте представление.</span><span class="sxs-lookup"><span data-stu-id="daac4-116">To add sorting to the Student Index page, you'll change the `Index` method of the `Student` controller and add code to the `Student` Index view.</span></span>

### <a name="add-sorting-functionality-to-the-index-method"></a><span data-ttu-id="daac4-117">Добавление функции сортировки в Index-метод</span><span class="sxs-lookup"><span data-stu-id="daac4-117">Add Sorting Functionality to the Index Method</span></span>

<span data-ttu-id="daac4-118">В *Controllers\StudentController.cs*, замените `Index` метод следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-118">In *Controllers\StudentController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

<span data-ttu-id="daac4-119">Этот код получает `sortOrder` параметра из строки запроса в URL-АДРЕСЕ.</span><span class="sxs-lookup"><span data-stu-id="daac4-119">This code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="daac4-120">Значение строки запроса, предоставляемые ASP.NET MVC как параметр методу действия.</span><span class="sxs-lookup"><span data-stu-id="daac4-120">The query string value is provided by ASP.NET MVC as a parameter to the action method.</span></span> <span data-ttu-id="daac4-121">Параметр будет строка, являющаяся «Name» или «Date» последовать знак подчеркивания и строку «desc», чтобы указать порядок по убыванию.</span><span class="sxs-lookup"><span data-stu-id="daac4-121">The parameter will be a string that's either "Name" or "Date", optionally followed by an underscore and the string "desc" to specify descending order.</span></span> <span data-ttu-id="daac4-122">По умолчанию используется порядок сортировки по возрастанию.</span><span class="sxs-lookup"><span data-stu-id="daac4-122">The default sort order is ascending.</span></span>

<span data-ttu-id="daac4-123">При первом запросе страницы индекса имеется строка запроса отсутствует.</span><span class="sxs-lookup"><span data-stu-id="daac4-123">The first time the Index page is requested, there's no query string.</span></span> <span data-ttu-id="daac4-124">Студенты, отображаются в возрастающем порядке по `LastName`, используемого по умолчанию, установленные с проходом регистром `switch` инструкции.</span><span class="sxs-lookup"><span data-stu-id="daac4-124">The students are displayed in ascending order by `LastName`, which is the default as established by the fall-through case in the `switch` statement.</span></span> <span data-ttu-id="daac4-125">Когда пользователь щелкает гиперссылку заголовок столбца, соответствующего `sortOrder` значение указано в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="daac4-125">When the user clicks a column heading hyperlink, the appropriate `sortOrder` value is provided in the query string.</span></span>

<span data-ttu-id="daac4-126">Два `ViewBag` переменные, которые используются, чтобы представление можно настроить гиперссылки заголовок столбца со значениями строки соответствующего запроса:</span><span class="sxs-lookup"><span data-stu-id="daac4-126">The two `ViewBag` variables are used so that the view can configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="daac4-127">Это троичный инструкции.</span><span class="sxs-lookup"><span data-stu-id="daac4-127">These are ternary statements.</span></span> <span data-ttu-id="daac4-128">Указывает, что если первый `sortOrder` параметра равно null или пусто, `ViewBag.NameSortParm` должно быть равно «имя\_desc»; в противном случае задается равным пустой строке.</span><span class="sxs-lookup"><span data-stu-id="daac4-128">The first one specifies that if the `sortOrder` parameter is null or empty, `ViewBag.NameSortParm` should be set to "name\_desc"; otherwise, it should be set to an empty string.</span></span> <span data-ttu-id="daac4-129">Следующие два оператора включите представление для задания гиперссылки заголовка столбца следующим образом:</span><span class="sxs-lookup"><span data-stu-id="daac4-129">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="daac4-130">Текущий порядок сортировки</span><span class="sxs-lookup"><span data-stu-id="daac4-130">Current sort order</span></span> | <span data-ttu-id="daac4-131">Последнее имя гиперссылки</span><span class="sxs-lookup"><span data-stu-id="daac4-131">Last Name Hyperlink</span></span> | <span data-ttu-id="daac4-132">Дата гиперссылки</span><span class="sxs-lookup"><span data-stu-id="daac4-132">Date Hyperlink</span></span> |
| --- | --- | --- |
| <span data-ttu-id="daac4-133">Последняя имени: по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-133">Last Name ascending</span></span> | <span data-ttu-id="daac4-134">по убыванию</span><span class="sxs-lookup"><span data-stu-id="daac4-134">descending</span></span> | <span data-ttu-id="daac4-135">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-135">ascending</span></span> |
| <span data-ttu-id="daac4-136">Последняя имени: по убыванию</span><span class="sxs-lookup"><span data-stu-id="daac4-136">Last Name descending</span></span> | <span data-ttu-id="daac4-137">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-137">ascending</span></span> | <span data-ttu-id="daac4-138">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-138">ascending</span></span> |
| <span data-ttu-id="daac4-139">По возрастанию даты</span><span class="sxs-lookup"><span data-stu-id="daac4-139">Date ascending</span></span> | <span data-ttu-id="daac4-140">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-140">ascending</span></span> | <span data-ttu-id="daac4-141">по убыванию</span><span class="sxs-lookup"><span data-stu-id="daac4-141">descending</span></span> |
| <span data-ttu-id="daac4-142">Дата по убыванию</span><span class="sxs-lookup"><span data-stu-id="daac4-142">Date descending</span></span> | <span data-ttu-id="daac4-143">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-143">ascending</span></span> | <span data-ttu-id="daac4-144">по возрастанию</span><span class="sxs-lookup"><span data-stu-id="daac4-144">ascending</span></span> |

<span data-ttu-id="daac4-145">Этот метод использует [LINQ to Entities](https://msdn.microsoft.com/en-us/library/bb386964.aspx) для указания столбца, по которому выполняется сортировка.</span><span class="sxs-lookup"><span data-stu-id="daac4-145">The method uses [LINQ to Entities](https://msdn.microsoft.com/en-us/library/bb386964.aspx) to specify the column to sort by.</span></span> <span data-ttu-id="daac4-146">Код создает [IQueryable](https://msdn.microsoft.com/en-us/library/bb351562.aspx) переменной перед `switch` инструкции, изменяет его в `switch` инструкции и вызовы `ToList` метод после `switch` инструкции.</span><span class="sxs-lookup"><span data-stu-id="daac4-146">The code creates an [IQueryable](https://msdn.microsoft.com/en-us/library/bb351562.aspx) variable before the `switch` statement, modifies it in the `switch` statement, and calls the `ToList` method after the `switch` statement.</span></span> <span data-ttu-id="daac4-147">После создания и изменения `IQueryable` переменные, не отправляется запрос базы данных.</span><span class="sxs-lookup"><span data-stu-id="daac4-147">When you create and modify `IQueryable` variables, no query is sent to the database.</span></span> <span data-ttu-id="daac4-148">Запрос не выполняется до преобразования `IQueryable` объект в коллекции, такие как вызов метода `ToList`.</span><span class="sxs-lookup"><span data-stu-id="daac4-148">The query is not executed until you convert the `IQueryable` object into a collection by calling a method such as `ToList`.</span></span> <span data-ttu-id="daac4-149">Таким образом, этот код вызывает один запрос, который не выполняется до `return View` инструкции.</span><span class="sxs-lookup"><span data-stu-id="daac4-149">Therefore, this code results in a single query that is not executed until the `return View` statement.</span></span>

<span data-ttu-id="daac4-150">Как Альтернативой написанию другой инструкции LINQ для каждого порядка сортировки можно динамически создать инструкции LINQ.</span><span class="sxs-lookup"><span data-stu-id="daac4-150">As an alternative to writing different LINQ statements for each sort order, you can dynamically create a LINQ statement.</span></span> <span data-ttu-id="daac4-151">Сведения о динамических LINQ см. в разделе [динамических LINQ](https://go.microsoft.com/fwlink/?LinkID=323957).</span><span class="sxs-lookup"><span data-stu-id="daac4-151">For information about dynamic LINQ, see [Dynamic LINQ](https://go.microsoft.com/fwlink/?LinkID=323957).</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="daac4-152">Добавление гиперссылки в представление индекс студента заголовок столбца</span><span class="sxs-lookup"><span data-stu-id="daac4-152">Add Column Heading Hyperlinks to the Student Index View</span></span>

<span data-ttu-id="daac4-153">В *Views\Student\Index.cshtml*, замените `<tr>` и `<th>` элементы для строки заголовка с выделенным кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-153">In *Views\Student\Index.cshtml*, replace the `<tr>` and `<th>` elements for the heading row with the highlighted code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cshtml?highlight=5-15)]

<span data-ttu-id="daac4-154">Этот код использует эти сведения в `ViewBag` свойства для настройки гиперссылки с соответствующего запроса строковые значения.</span><span class="sxs-lookup"><span data-stu-id="daac4-154">This code uses the information in the `ViewBag` properties to set up hyperlinks with the appropriate query string values.</span></span>

<span data-ttu-id="daac4-155">Запустите страницу и щелкните **Фамилия** и **Дата регистрации** заголовки столбцов, чтобы проверить, Сортировка работает.</span><span class="sxs-lookup"><span data-stu-id="daac4-155">Run the page and click the **Last Name** and **Enrollment Date** column headings to verify that sorting works.</span></span>

![Students_Index_page_with_sort_hyperlinks](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="daac4-157">После нажатия кнопки **Фамилия** заголовком учащихся, отображаются в порядке убывания последнее имя.</span><span class="sxs-lookup"><span data-stu-id="daac4-157">After you click the **Last Name** heading, students are displayed in descending last name order.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="daac4-158">Добавить поле поиска на страницу индекса студентов</span><span class="sxs-lookup"><span data-stu-id="daac4-158">Add a Search Box to the Students Index Page</span></span>

<span data-ttu-id="daac4-159">Добавление фильтрации на страницу индекса учащихся, мы добавим текстовое поле и кнопку отправки для представления и внесите соответствующие изменения в `Index` метод.</span><span class="sxs-lookup"><span data-stu-id="daac4-159">To add filtering to the Students Index page, you'll add a text box and a submit button to the view and make corresponding changes in the `Index` method.</span></span> <span data-ttu-id="daac4-160">Текстовое поле можно ввести строку для поиска в полями имени и имени.</span><span class="sxs-lookup"><span data-stu-id="daac4-160">The text box will let you enter a string to search for in the first name and last name fields.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="daac4-161">Добавьте функцию фильтра в метод индекса</span><span class="sxs-lookup"><span data-stu-id="daac4-161">Add Filtering Functionality to the Index Method</span></span>

<span data-ttu-id="daac4-162">В *Controllers\StudentController.cs*, замените `Index` метод (изменения выделены) следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-162">In *Controllers\StudentController.cs*, replace the `Index` method with the following code (the changes are highlighted):</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs?highlight=1,7-11)]

<span data-ttu-id="daac4-163">Вы добавили `searchString` параметр `Index` метода.</span><span class="sxs-lookup"><span data-stu-id="daac4-163">You've added a `searchString` parameter to the `Index` method.</span></span> <span data-ttu-id="daac4-164">Строковое значение поиска получается из текстового поля, который вам предстоит добавить в представление индекс.</span><span class="sxs-lookup"><span data-stu-id="daac4-164">The search string value is received from a text box that you'll add to the Index view.</span></span> <span data-ttu-id="daac4-165">Вы добавили в инструкции LINQ `where` предложение, которое выбирает только студентов, имя или фамилия содержит строку поиска.</span><span class="sxs-lookup"><span data-stu-id="daac4-165">You've also added to the LINQ statement a `where` clause that selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="daac4-166">Оператор, который добавляет [где](https://msdn.microsoft.com/en-us/library/bb535040.aspx) предложение выполняется только в том случае, если значение для поиска.</span><span class="sxs-lookup"><span data-stu-id="daac4-166">The statement that adds the [where](https://msdn.microsoft.com/en-us/library/bb535040.aspx) clause is executed only if there's a value to search for.</span></span>

> [!NOTE]
> <span data-ttu-id="daac4-167">Во многих случаях можно вызвать тот же метод в наборе сущностей Entity Framework или как метод расширения для коллекции в памяти.</span><span class="sxs-lookup"><span data-stu-id="daac4-167">In many cases you can call the same method either on an Entity Framework entity set or as an extension method on an in-memory collection.</span></span> <span data-ttu-id="daac4-168">Обычно такие же результаты, но в некоторых случаях могут различаться.</span><span class="sxs-lookup"><span data-stu-id="daac4-168">The results are normally the same but in some cases may be different.</span></span>
> 
> <span data-ttu-id="daac4-169">Например, реализация .NET Framework `Contains` метод возвращает все строки, если передать пустую строку, но поставщик Entity Framework для SQL Server Compact 4.0 возвращает нуль строк, наличие пустых строк.</span><span class="sxs-lookup"><span data-stu-id="daac4-169">For example, the .NET Framework implementation of the `Contains` method returns all rows when you pass an empty string to it, but the Entity Framework provider for SQL Server Compact 4.0 returns zero rows for empty strings.</span></span> <span data-ttu-id="daac4-170">Поэтому код в примере (размещение `Where` инструкции внутри `if` инструкции) гарантирует, что получить те же результаты для всех версий SQL Server.</span><span class="sxs-lookup"><span data-stu-id="daac4-170">Therefore the code in the example (putting the `Where` statement inside an `if` statement) makes sure that you get the same results for all versions of SQL Server.</span></span> <span data-ttu-id="daac4-171">Кроме того, реализация .NET Framework `Contains` метод выполняет сравнение с учетом регистра по умолчанию, но поставщики Entity Framework SQL Server по умолчанию выполняют сравнения без учета регистра.</span><span class="sxs-lookup"><span data-stu-id="daac4-171">Also, the .NET Framework implementation of the `Contains` method performs a case-sensitive comparison by default, but Entity Framework SQL Server providers perform case-insensitive comparisons by default.</span></span> <span data-ttu-id="daac4-172">Таким образом, вызов `ToUpper` метод производится проверка явно без учета регистра гарантирует, что не изменяются при изменении кода позже в репозитории, которая вернет `IEnumerable` коллекции вместо `IQueryable` объекта.</span><span class="sxs-lookup"><span data-stu-id="daac4-172">Therefore, calling the `ToUpper` method to make the test explicitly case-insensitive ensures that results do not change when you change the code later to use a repository, which will return an `IEnumerable` collection instead of an `IQueryable` object.</span></span> <span data-ttu-id="daac4-173">(При вызове `Contains` метод `IEnumerable` коллекции, получить реализации .NET Framework; при его вызове на `IQueryable` объекта, вы получаете реализации поставщика базы данных.)</span><span class="sxs-lookup"><span data-stu-id="daac4-173">(When you call the `Contains` method on an `IEnumerable` collection, you get the .NET Framework implementation; when you call it on an `IQueryable` object, you get the database provider implementation.)</span></span>
> 
> <span data-ttu-id="daac4-174">Обработка значений NULL, также может быть разным для поставщиков другую базу данных или при использовании `IQueryable` объекта по сравнению с при использовании `IEnumerable` коллекции.</span><span class="sxs-lookup"><span data-stu-id="daac4-174">Null handling may also be different for different database providers or when you use an `IQueryable` object compared to when you use an `IEnumerable` collection.</span></span> <span data-ttu-id="daac4-175">Например, в некоторых сценариях `Where` условия, такие как `table.Column != 0` не может возвращать столбцы, имеющие `null` как значение.</span><span class="sxs-lookup"><span data-stu-id="daac4-175">For example, in some scenarios a `Where` condition such as `table.Column != 0` may not return columns that have `null` as the value.</span></span> <span data-ttu-id="daac4-176">Дополнительные сведения см. в разделе [неправильной обработкой null переменных в предложение «where»](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl).</span><span class="sxs-lookup"><span data-stu-id="daac4-176">For more information, see [Incorrect handling of null variables in 'where' clause](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl).</span></span>


### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="daac4-177">Добавить поле поиска в представление индекс студента</span><span class="sxs-lookup"><span data-stu-id="daac4-177">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="daac4-178">В *Views\Student\Index.cshtml*, добавьте выделенный код непосредственно перед открытием `table` тег, чтобы создать текстовое поле заголовка и **поиска** кнопку.</span><span class="sxs-lookup"><span data-stu-id="daac4-178">In *Views\Student\Index.cshtml*, add the highlighted code immediately before the opening `table` tag in order to create a caption, a text box, and a **Search** button.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml?highlight=5-10)]

<span data-ttu-id="daac4-179">Откройте страницу, введите строку поиска и нажмите кнопку **поиска** для проверки корректности фильтрации.</span><span class="sxs-lookup"><span data-stu-id="daac4-179">Run the page, enter a search string, and click **Search** to verify that filtering is working.</span></span>

![Students_Index_page_with_search_box](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="daac4-181">Обратите внимание, что URL-адрес не содержит «» строка поиска, это означает, что если закладку для этой страницы вы не сможете получить отфильтрованный список при использовании закладки.</span><span class="sxs-lookup"><span data-stu-id="daac4-181">Notice the URL doesn't contain the "an" search string, which means that if you bookmark this page, you won't get the filtered list when you use the bookmark.</span></span> <span data-ttu-id="daac4-182">Это применяется также к ссылкам сортировки столбца, как они будут отсортированы весь список.</span><span class="sxs-lookup"><span data-stu-id="daac4-182">This applies also to the column sort links, as they will sort the whole list.</span></span> <span data-ttu-id="daac4-183">Мы изменим **поиска** кнопку, чтобы использовать в критериях фильтра строки запроса, далее в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="daac4-183">You'll change the **Search** button to use query strings for filter criteria later in the tutorial.</span></span>

## <a name="add-paging-to-the-students-index-page"></a><span data-ttu-id="daac4-184">Добавить разбиение на страницы на страницу индекса студентов</span><span class="sxs-lookup"><span data-stu-id="daac4-184">Add Paging to the Students Index Page</span></span>

<span data-ttu-id="daac4-185">Добавление страницы индекса учащихся разбиения на страницы, вы начнете, установив **PagedList.Mvc** пакет NuGet.</span><span class="sxs-lookup"><span data-stu-id="daac4-185">To add paging to the Students Index page, you'll start by installing the **PagedList.Mvc** NuGet package.</span></span> <span data-ttu-id="daac4-186">Затем будет вносить дополнительные изменения в `Index` метод и добавьте ссылки подкачки `Index` представления.</span><span class="sxs-lookup"><span data-stu-id="daac4-186">Then you'll make additional changes in the `Index` method and add paging links to the `Index` view.</span></span> <span data-ttu-id="daac4-187">**PagedList.Mvc** является одним из многих хорошо постраничного просмотра и сортировки пакетов для ASP.NET MVC и его использование здесь предназначено исключительно в качестве примера, не в качестве рекомендации по изменению его через другие параметры.</span><span class="sxs-lookup"><span data-stu-id="daac4-187">**PagedList.Mvc** is one of many good paging and sorting packages for ASP.NET MVC, and its use here is intended only as an example, not as a recommendation for it over other options.</span></span> <span data-ttu-id="daac4-188">На следующем рисунке ссылки разбиения на страницы.</span><span class="sxs-lookup"><span data-stu-id="daac4-188">The following illustration shows the paging links.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

### <a name="install-the-pagedlistmvc-nuget-package"></a><span data-ttu-id="daac4-190">Установка пакета PagedList.MVC NuGet</span><span class="sxs-lookup"><span data-stu-id="daac4-190">Install the PagedList.MVC NuGet Package</span></span>

<span data-ttu-id="daac4-191">NuGet **PagedList.Mvc** пакет автоматически устанавливает **PagedList** пакета в качестве зависимости.</span><span class="sxs-lookup"><span data-stu-id="daac4-191">The NuGet **PagedList.Mvc** package automatically installs the **PagedList** package as a dependency.</span></span> <span data-ttu-id="daac4-192">**PagedList** пакет устанавливает `PagedList` коллекцию типов и расширения методы для `IQueryable` и `IEnumerable` коллекции.</span><span class="sxs-lookup"><span data-stu-id="daac4-192">The **PagedList** package installs a `PagedList` collection type and extension methods for `IQueryable` and `IEnumerable` collections.</span></span> <span data-ttu-id="daac4-193">Методы расширения создают одной страницы данных в `PagedList` коллекции из вашего `IQueryable` или `IEnumerable`и `PagedList` коллекция предоставляет несколько свойств и методов, предназначенных для упрощения разбиения на страницы.</span><span class="sxs-lookup"><span data-stu-id="daac4-193">The extension methods create a single page of data in a `PagedList` collection out of your `IQueryable` or `IEnumerable`, and the `PagedList` collection provides several properties and methods that facilitate paging.</span></span> <span data-ttu-id="daac4-194">**PagedList.Mvc** пакет устанавливает подкачки вспомогательный класс, отображающий кнопки разбиения по страницам.</span><span class="sxs-lookup"><span data-stu-id="daac4-194">The **PagedList.Mvc** package installs a paging helper that displays the paging buttons.</span></span>

<span data-ttu-id="daac4-195">Из **средства** последовательно выберите пункты **диспетчер пакетов библиотеки** и затем **консоль диспетчера пакетов**.</span><span class="sxs-lookup"><span data-stu-id="daac4-195">From the **Tools** menu, select **Library Package Manager** and then **Package Manager Console**.</span></span>

<span data-ttu-id="daac4-196">В **консоль диспетчера пакетов** окна, убедитесь, что **источник пакета** — **nuget.org** и **проекта по умолчанию** — **ContosoUniversity**, а затем введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="daac4-196">In the **Package Manager Console** window, make sure the **Package source** is **nuget.org** and the **Default project** is **ContosoUniversity**, and then enter the following command:</span></span>

`Install-Package PagedList.Mvc`

![Установить PagedList.Mvc](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="daac4-198">Выполните построение проекта.</span><span class="sxs-lookup"><span data-stu-id="daac4-198">Build the project.</span></span> 

### <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="daac4-199">Добавьте в метод индекс разбиения по страницам</span><span class="sxs-lookup"><span data-stu-id="daac4-199">Add Paging Functionality to the Index Method</span></span>

<span data-ttu-id="daac4-200">В *Controllers\StudentController.cs*, добавьте `using` инструкции для `PagedList` пространство имен:</span><span class="sxs-lookup"><span data-stu-id="daac4-200">In *Controllers\StudentController.cs*, add a `using` statement for the `PagedList` namespace:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="daac4-201">Замените метод `Index` следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-201">Replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs?highlight=1,3,7-16,41-43)]

<span data-ttu-id="daac4-202">Этот код добавляет `page` параметра, текущий параметр порядка сортировки и текущий параметр фильтра к сигнатуре метода:</span><span class="sxs-lookup"><span data-stu-id="daac4-202">This code adds a `page` parameter, a current sort order parameter, and a current filter parameter to the method signature:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="daac4-203">Первый раз, когда страница отображается или если пользователь не щелкнет подкачки или сортировки ссылку, все параметры будут иметь значение null.</span><span class="sxs-lookup"><span data-stu-id="daac4-203">The first time the page is displayed, or if the user hasn't clicked a paging or sorting link, all the parameters will be null.</span></span> <span data-ttu-id="daac4-204">Если щелкнуть ссылку подкачки `page` переменная будет содержать номер страницы для отображения.</span><span class="sxs-lookup"><span data-stu-id="daac4-204">If a paging link is clicked, the `page` variable will contain the page number to display.</span></span>

<span data-ttu-id="daac4-205">Объект `ViewBag` свойство предоставляет представление определения порядка сортировки, так как это должны быть включены в ссылки разбиения на страницы для сохранит порядок сортировки во время разбиения на страницы:</span><span class="sxs-lookup"><span data-stu-id="daac4-205">A `ViewBag` property provides the view with the current sort order, because this must be included in the paging links in order to keep the sort order the same while paging:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample9.cs)]

<span data-ttu-id="daac4-206">Другое свойство `ViewBag.CurrentFilter`, обеспечивает представление с текущей строки фильтра.</span><span class="sxs-lookup"><span data-stu-id="daac4-206">Another property, `ViewBag.CurrentFilter`, provides the view with the current filter string.</span></span> <span data-ttu-id="daac4-207">Это значение должны быть включены в ссылки разбиения на страницы для поддержки настройки фильтра во время разбиения на страницы, и она должна быть восстановлена к текстовому полю, когда отобразится страница.</span><span class="sxs-lookup"><span data-stu-id="daac4-207">This value must be included in the paging links in order to maintain the filter settings during paging, and it must be restored to the text box when the page is redisplayed.</span></span> <span data-ttu-id="daac4-208">Если строка поиска, которая изменяется во время разбиения на страницы, страницы должен быть равным 1, так как новый фильтр может показать различные данные.</span><span class="sxs-lookup"><span data-stu-id="daac4-208">If the search string is changed during paging, the page has to be reset to 1, because the new filter can result in different data to display.</span></span> <span data-ttu-id="daac4-209">Строка поиска, которая изменяется при нажатии кнопки "Отправить", если ввести значение в текстовом поле.</span><span class="sxs-lookup"><span data-stu-id="daac4-209">The search string is changed when a value is entered in the text box and the submit button is pressed.</span></span> <span data-ttu-id="daac4-210">В этом случае `searchString` параметра не равно null.</span><span class="sxs-lookup"><span data-stu-id="daac4-210">In that case, the `searchString` parameter is not null.</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample10.cs)]

<span data-ttu-id="daac4-211">В конце метода `ToPagedList` метод расширения в слушателей `IQueryable` объект преобразует запрос студента на одной странице учеников в тип коллекции, который поддерживает разбиение по страницам.</span><span class="sxs-lookup"><span data-stu-id="daac4-211">At the end of the method, the `ToPagedList` extension method on the students `IQueryable` object converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="daac4-212">Страницы учащихся затем передается в представление:</span><span class="sxs-lookup"><span data-stu-id="daac4-212">That single page of students is then passed to the view:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample11.cs)]

<span data-ttu-id="daac4-213">`ToPagedList` Метод принимает номер страницы.</span><span class="sxs-lookup"><span data-stu-id="daac4-213">The `ToPagedList` method takes a page number.</span></span> <span data-ttu-id="daac4-214">Два знака вопроса указывают [оператор объединения с null](https://msdn.microsoft.com/en-us/library/ms173224.aspx).</span><span class="sxs-lookup"><span data-stu-id="daac4-214">The two question marks represent the [null-coalescing operator](https://msdn.microsoft.com/en-us/library/ms173224.aspx).</span></span> <span data-ttu-id="daac4-215">Оператор объединения с null определяет значение по умолчанию для типа значения NULL; выражение `(page ?? 1)` означает возвращают значение `page` если он имеет значение, или возвращает 1, если `page` имеет значение null.</span><span class="sxs-lookup"><span data-stu-id="daac4-215">The null-coalescing operator defines a default value for a nullable type; the expression `(page ?? 1)` means return the value of `page` if it has a value, or return 1 if `page` is null.</span></span>

### <a name="add-paging-links-to-the-student-index-view"></a><span data-ttu-id="daac4-216">Добавить разбиение на страницы ссылки на представление Index студента</span><span class="sxs-lookup"><span data-stu-id="daac4-216">Add Paging Links to the Student Index View</span></span>

<span data-ttu-id="daac4-217">В *Views\Student\Index.cshtml*, замените существующий код следующим кодом.</span><span class="sxs-lookup"><span data-stu-id="daac4-217">In *Views\Student\Index.cshtml*, replace the existing code with the following code.</span></span> <span data-ttu-id="daac4-218">Изменения выделены.</span><span class="sxs-lookup"><span data-stu-id="daac4-218">The changes are highlighted.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample12.cshtml?highlight=1-3,6,9,14,17,24,30,55-56,58-59)]

<span data-ttu-id="daac4-219">`@model` В верхней части страницы указывает теперь возвращает представление `PagedList` объекта вместо `List` объекта.</span><span class="sxs-lookup"><span data-stu-id="daac4-219">The `@model` statement at the top of the page specifies that the view now gets a `PagedList` object instead of a `List` object.</span></span>

<span data-ttu-id="daac4-220">`using` Инструкции для `PagedList.Mvc` предоставляет доступ к вспомогательным методом MVC для кнопки разбиения по страницам.</span><span class="sxs-lookup"><span data-stu-id="daac4-220">The `using` statement for `PagedList.Mvc` gives access to the MVC helper for the paging buttons.</span></span>

<span data-ttu-id="daac4-221">В коде используется перегруженная версия [BeginForm](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) , позволяющее указать [FormMethod.Get](https://msdn.microsoft.com/en-us/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span><span class="sxs-lookup"><span data-stu-id="daac4-221">The code uses an overload of [BeginForm](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) that allows it to specify [FormMethod.Get](https://msdn.microsoft.com/en-us/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample13.cshtml?highlight=1)]

<span data-ttu-id="daac4-222">Значение по умолчанию [BeginForm](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) отправки данных с помощью запроса POST, это означает, что параметры передаются в тексте сообщения HTTP, а не в URL-адрес как строки запросов.</span><span class="sxs-lookup"><span data-stu-id="daac4-222">The default [BeginForm](https://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) submits form data with a POST, which means that parameters are passed in the HTTP message body and not in the URL as query strings.</span></span> <span data-ttu-id="daac4-223">При указании HTTP GET, данные формы переданный URL-адрес как строки запроса, который позволяет пользователям bookmark URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="daac4-223">When you specify HTTP GET, the form data is passed in the URL as query strings, which enables users to bookmark the URL.</span></span> <span data-ttu-id="daac4-224">[Рекомендации W3C для использования HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) рекомендуется, если действие не приводит к появлению обновления следует использовать GET.</span><span class="sxs-lookup"><span data-stu-id="daac4-224">The [W3C guidelines for the use of HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that you should use GET when the action does not result in an update.</span></span>

<span data-ttu-id="daac4-225">При нажатии кнопки новую страницу для отображения текущей искомой строки, текстовое поле инициализируется текущей искомой строки.</span><span class="sxs-lookup"><span data-stu-id="daac4-225">The text box is initialized with the current search string so when you click a new page you can see the current search string.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample14.cshtml?highlight=1)]

<span data-ttu-id="daac4-226">Ссылки в заголовках столбцов использовать строку запроса для передачи текущей искомой строки к контроллеру, чтобы пользователь может сортировать в результаты фильтрации:</span><span class="sxs-lookup"><span data-stu-id="daac4-226">The column header links use the query string to pass the current search string to the controller so that the user can sort within filter results:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample15.cshtml?highlight=1)]

<span data-ttu-id="daac4-227">Отображаются текущей страницы и общее число страниц.</span><span class="sxs-lookup"><span data-stu-id="daac4-227">The current page and total number of pages are displayed.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample16.cshtml)]

<span data-ttu-id="daac4-228">Если отсутствуют страницы для отображения, отображается «Страница 0 0».</span><span class="sxs-lookup"><span data-stu-id="daac4-228">If there are no pages to display, "Page 0 of 0" is shown.</span></span> <span data-ttu-id="daac4-229">(В этом случае номер страницы больше, чем количество страниц из-за `Model.PageNumber` -1, и `Model.PageCount` — 0.)</span><span class="sxs-lookup"><span data-stu-id="daac4-229">(In that case the page number is greater than the page count because `Model.PageNumber` is 1, and `Model.PageCount` is 0.)</span></span>

<span data-ttu-id="daac4-230">Отображаются кнопки разбиения на страницы с `PagedListPager` поддержки:</span><span class="sxs-lookup"><span data-stu-id="daac4-230">The paging buttons are displayed by the `PagedListPager` helper:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample17.cshtml)]

<span data-ttu-id="daac4-231">`PagedListPager` Вспомогательные предоставляет ряд возможностей, которые можно настраивать, включая URL-адреса и оформление.</span><span class="sxs-lookup"><span data-stu-id="daac4-231">The `PagedListPager` helper provides a number of options that you can customize, including URLs and styling.</span></span> <span data-ttu-id="daac4-232">Дополнительные сведения см. в разделе [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="daac4-232">For more information, see [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) on the GitHub site.</span></span>

<span data-ttu-id="daac4-233">Запустите страницу.</span><span class="sxs-lookup"><span data-stu-id="daac4-233">Run the page.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

<span data-ttu-id="daac4-235">По ссылкам разбиения на страницы в различными порядками сортировки, чтобы убедиться, что работает разбиения на страницы.</span><span class="sxs-lookup"><span data-stu-id="daac4-235">Click the paging links in different sort orders to make sure paging works.</span></span> <span data-ttu-id="daac4-236">Затем введите строку поиска и повторите подкачки еще раз, чтобы проверить правильность разбиения на страницы также с сортировкой и фильтрацией.</span><span class="sxs-lookup"><span data-stu-id="daac4-236">Then enter a search string and try paging again to verify that paging also works correctly with sorting and filtering.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)

## <a name="create-an-about-page-that-shows-student-statistics"></a><span data-ttu-id="daac4-237">Создание о страницы, отображающей студента статистики</span><span class="sxs-lookup"><span data-stu-id="daac4-237">Create an About Page That Shows Student Statistics</span></span>

<span data-ttu-id="daac4-238">Для Contoso университета веб-сайта о странице как отображать количество студентов регистрации для каждой даты регистрации.</span><span class="sxs-lookup"><span data-stu-id="daac4-238">For the Contoso University website's About page, you'll display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="daac4-239">Для этого простого группировки и выполнения расчетов по группам.</span><span class="sxs-lookup"><span data-stu-id="daac4-239">This requires grouping and simple calculations on the groups.</span></span> <span data-ttu-id="daac4-240">Для выполнения этой задачи вы выполните следующее:</span><span class="sxs-lookup"><span data-stu-id="daac4-240">To accomplish this, you'll do the following:</span></span>

- <span data-ttu-id="daac4-241">Создание класса модели представления для данных, которые нужно передать в представление.</span><span class="sxs-lookup"><span data-stu-id="daac4-241">Create a view model class for the data that you need to pass to the view.</span></span>
- <span data-ttu-id="daac4-242">Изменить `About` метод в `Home` контроллера.</span><span class="sxs-lookup"><span data-stu-id="daac4-242">Modify the `About` method in the `Home` controller.</span></span>
- <span data-ttu-id="daac4-243">Изменить `About` представления.</span><span class="sxs-lookup"><span data-stu-id="daac4-243">Modify the `About` view.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="daac4-244">Создание модели представления</span><span class="sxs-lookup"><span data-stu-id="daac4-244">Create the View Model</span></span>

<span data-ttu-id="daac4-245">Создание *ViewModels* папку в папке проекта.</span><span class="sxs-lookup"><span data-stu-id="daac4-245">Create a *ViewModels* folder in the project folder.</span></span> <span data-ttu-id="daac4-246">В этой папке, добавьте файл класса *EnrollmentDateGroup.cs* и замените код шаблона с помощью следующего кода:</span><span class="sxs-lookup"><span data-stu-id="daac4-246">In that folder, add a class file *EnrollmentDateGroup.cs* and replace the template code with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample18.cs)]

### <a name="modify-the-home-controller"></a><span data-ttu-id="daac4-247">Контроллер Home</span><span class="sxs-lookup"><span data-stu-id="daac4-247">Modify the Home Controller</span></span>

<span data-ttu-id="daac4-248">В *HomeController.cs*, добавьте следующий `using` инструкции в верхней части файла:</span><span class="sxs-lookup"><span data-stu-id="daac4-248">In *HomeController.cs*, add the following `using` statements at the top of the file:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample19.cs)]

<span data-ttu-id="daac4-249">Добавьте переменную класса для контекста базы данных сразу же после открывающей фигурной скобки для класса:</span><span class="sxs-lookup"><span data-stu-id="daac4-249">Add a class variable for the database context immediately after the opening curly brace for the class:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample20.cs?highlight=3)]

<span data-ttu-id="daac4-250">Замените метод `About` следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-250">Replace the `About` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample21.cs)]

<span data-ttu-id="daac4-251">Инструкции LINQ группирует учащихся сущностей, Дата регистрации, вычисляет число сущностей в каждой группе и сохраняет результаты в коллекцию `EnrollmentDateGroup` просматривать объекты модели.</span><span class="sxs-lookup"><span data-stu-id="daac4-251">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="daac4-252">Добавить `Dispose` метод:</span><span class="sxs-lookup"><span data-stu-id="daac4-252">Add a `Dispose` method:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample22.cs)]

### <a name="modify-the-about-view"></a><span data-ttu-id="daac4-253">Изменить представление</span><span class="sxs-lookup"><span data-stu-id="daac4-253">Modify the About View</span></span>

<span data-ttu-id="daac4-254">Замените код в *Views\Home\About.cshtml* файла следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="daac4-254">Replace the code in the *Views\Home\About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample23.cshtml)]

<span data-ttu-id="daac4-255">Запустите приложение и нажмите кнопку **о** ссылку.</span><span class="sxs-lookup"><span data-stu-id="daac4-255">Run the app and click the **About** link.</span></span> <span data-ttu-id="daac4-256">Количества учащихся для каждой даты регистрации отображается в таблице.</span><span class="sxs-lookup"><span data-stu-id="daac4-256">The count of students for each enrollment date is displayed in a table.</span></span>

![About_page](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="daac4-258">Сводка</span><span class="sxs-lookup"><span data-stu-id="daac4-258">Summary</span></span>

<span data-ttu-id="daac4-259">В этом учебнике вы знаете, как создать модель данных и реализации основных CRUD, сортировку, фильтрацию, разбиение по страницам и группировку функциональности.</span><span class="sxs-lookup"><span data-stu-id="daac4-259">In this tutorial you've seen how to create a data model and implement basic CRUD, sorting, filtering, paging, and grouping functionality.</span></span> <span data-ttu-id="daac4-260">В следующем уроке вы начнете, просмотрев более сложные вопросы, развернув модели данных.</span><span class="sxs-lookup"><span data-stu-id="daac4-260">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="daac4-261">Оставьте отзыв на том, как вам понравилось этого учебника и что можно улучшить.</span><span class="sxs-lookup"><span data-stu-id="daac4-261">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="daac4-262">Можно также запросить новые разделы на [показать мне как с код](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span><span class="sxs-lookup"><span data-stu-id="daac4-262">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="daac4-263">Ссылки на другие ресурсы Entity Framework можно найти в [доступа к данным ASP.NET - рекомендуется использовать ресурсы](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="daac4-263">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="daac4-264">[Назад](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Вперед](connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="daac4-264">[Previous](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Next](connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span></span>
