---
uid: web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
title: "Создание согласованного макета в ASP.NET Web Pages (Razor) узлов | Документы Microsoft"
author: tfitzmac
description: "Чтобы сделать его более эффективно создавать веб-страницы для веб-узла, можно создать многократно используемых блоков содержимого (например, верхние и нижние колонтитулы) для веб-сайта и вы сможете..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/10/2014
ms.topic: article
ms.assetid: d7bd001b-6db2-4422-9b78-f3d08b743b00
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/3-creating-a-consistent-look
msc.type: authoredcontent
ms.openlocfilehash: 2c7631017f7c0fb31f43320c2ab78baddd87b516
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="creating-a-consistent-layout-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="2b66f-103">Создание согласованного макета веб-страниц (Razor) узлов ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2b66f-103">Creating a Consistent Layout in ASP.NET Web Pages (Razor) Sites</span></span>
====================
<span data-ttu-id="2b66f-104">по [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="2b66f-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="2b66f-105">В этой статье объясняется, как можно использовать страницы макета в на веб-сайт ASP.NET Web Pages (Razor) для создания многократно используемых блоков содержимого (например, верхние и нижние колонтитулы) и создание согласованного вида для всех страниц на сайте.</span><span class="sxs-lookup"><span data-stu-id="2b66f-105">This article explains how you can use layout pages in an ASP.NET Web Pages (Razor) website to create reusable blocks of content (like headers and footers) and to create a consistent look for all the pages in the site.</span></span>
> 
> <span data-ttu-id="2b66f-106">**Что вы узнаете следующее.**</span><span class="sxs-lookup"><span data-stu-id="2b66f-106">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="2b66f-107">Создание многократно используемых блоков содержимого, такого как верхние и нижние колонтитулы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-107">How to create reusable blocks of content like headers and footers.</span></span>
> - <span data-ttu-id="2b66f-108">Инструкции по созданию согласованного вида для все страницы сайта с использованием макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-108">How to create a consistent look for all the pages in your site using a layout.</span></span>
> - <span data-ttu-id="2b66f-109">Способ передачи данных во время выполнения к странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-109">How to pass data at run time to a layout page.</span></span>
> 
> <span data-ttu-id="2b66f-110">Существуют следующие функции ASP.NET, представленные в статье:</span><span class="sxs-lookup"><span data-stu-id="2b66f-110">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="2b66f-111">Блоки содержимого, которые представляют собой файлы, содержащие содержимое в формате HTML для вставки на нескольких страницах.</span><span class="sxs-lookup"><span data-stu-id="2b66f-111">Content blocks, which are files that contain HTML-formatted content to be inserted in multiple pages.</span></span>
> - <span data-ttu-id="2b66f-112">Макет страницы, которые являются страницы, содержащие содержимое в формате HTML, который можно использовать совместно со страниц веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="2b66f-112">Layout pages, which are pages that contain HTML-formatted content that can be shared by pages on the website.</span></span>
> - <span data-ttu-id="2b66f-113">`RenderPage`, `RenderBody`, И `RenderSection` методы, которые определить место вставки элементов страницы ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2b66f-113">The `RenderPage`, `RenderBody`, and `RenderSection` methods, which tell ASP.NET where to insert page elements.</span></span>
> - <span data-ttu-id="2b66f-114">`PageData` Словарь, который позволяет совместно использовать данные блоки содержимого и страницы макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-114">The `PageData` dictionary that lets you share data between content blocks and layout pages.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="2b66f-115">Версии программного обеспечения, используемая в этом учебнике</span><span class="sxs-lookup"><span data-stu-id="2b66f-115">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="2b66f-116">Веб-страниц ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="2b66f-116">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="2b66f-117">Этот учебник также работает с веб-страницы ASP.NET 2.</span><span class="sxs-lookup"><span data-stu-id="2b66f-117">This tutorial also works with ASP.NET Web Pages 2.</span></span>


## <a name="about-layout-pages"></a><span data-ttu-id="2b66f-118">Сведения о страницах макета</span><span class="sxs-lookup"><span data-stu-id="2b66f-118">About Layout Pages</span></span>

<span data-ttu-id="2b66f-119">Содержимое, которое отображается на каждой странице, таких как заголовок и нижний колонтитул или поле, которое сообщает пользователям, что они вошли у многих веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-119">Many websites have content that's displayed on every page, like a header and footer, or a box that tells users that they're logged in.</span></span> <span data-ttu-id="2b66f-120">ASP.NET позволяет создавать отдельный файл с блок содержимого, который может содержать текст, разметку и код, так же, как обычный веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-120">ASP.NET lets you create a separate file with a content block that can contain text, markup, and code, just like a regular web page.</span></span> <span data-ttu-id="2b66f-121">Затем можно вставить блок содержимого на других страницах на сайте место вставки.</span><span class="sxs-lookup"><span data-stu-id="2b66f-121">You can then insert the content block in other pages on the site where you want the information to appear.</span></span> <span data-ttu-id="2b66f-122">В этом случае не нужно скопировать и вставить содержимое в каждой странице.</span><span class="sxs-lookup"><span data-stu-id="2b66f-122">That way you don't have to copy and paste the same content into every page.</span></span> <span data-ttu-id="2b66f-123">Создание общих содержимого, такого как это также упрощает для обновления веб-узла.</span><span class="sxs-lookup"><span data-stu-id="2b66f-123">Creating common content like this also makes it easier to update your site.</span></span> <span data-ttu-id="2b66f-124">Если вам нужно изменить содержимое, можно обновлять только один файл и затем созданной everywhere вставленного содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-124">If you need to change the content, you can just update a single file, and the changes are then reflected everywhere the content has been inserted.</span></span>

<span data-ttu-id="2b66f-125">На следующей диаграмме показан как содержимое блокирует работы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-125">The following diagram shows how content blocks work.</span></span> <span data-ttu-id="2b66f-126">Когда браузер запрашивает страницу с веб-сервера, ASP.NET вставляет блоки содержимого в точке, где `RenderPage` будет вызван на главной странице.</span><span class="sxs-lookup"><span data-stu-id="2b66f-126">When a browser requests a page from the web server, ASP.NET inserts the content blocks at the point where the `RenderPage` method is called in the main page.</span></span> <span data-ttu-id="2b66f-127">Страница завершения (объединенные) затем отправляется в браузер.</span><span class="sxs-lookup"><span data-stu-id="2b66f-127">The finished (merged) page is then sent to the browser.</span></span>

![Концептуальная схема, показывающая, как метод RenderPage вставляет страницей, на которую указывает ссылка в текущей страницы.](3-creating-a-consistent-look/_static/image1.jpg)

<span data-ttu-id="2b66f-129">В этой процедуре создается страница, которая ссылается на два блоки содержимого (заголовок и нижний колонтитул), расположенных в отдельных файлах.</span><span class="sxs-lookup"><span data-stu-id="2b66f-129">In this procedure, you'll create a page that references two content blocks (a header and a footer) that are located in separate files.</span></span> <span data-ttu-id="2b66f-130">Эти же блоки содержимого можно использовать на любой странице веб-узла.</span><span class="sxs-lookup"><span data-stu-id="2b66f-130">You can use these same content blocks in any page in your site.</span></span> <span data-ttu-id="2b66f-131">Когда закончите, вы получите страницы следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2b66f-131">When you're done, you'll get a page like this:</span></span>

![Снимок экрана, показывающий страницу в браузере, получаемые в результате выполнения содержит вызовы метода RenderPage.](3-creating-a-consistent-look/_static/image2.jpg)

1. <span data-ttu-id="2b66f-133">В корневой папке веб-сайта, создайте файл с именем *Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-133">In the root folder of your website, create a file named *Index.cshtml*.</span></span>
2. <span data-ttu-id="2b66f-134">Замените существующую разметку следующей:</span><span class="sxs-lookup"><span data-stu-id="2b66f-134">Replace the existing markup with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample1.html)]
3. <span data-ttu-id="2b66f-135">В корневой папке создайте папку с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-135">In the root folder, create a folder named *Shared*.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2b66f-136">Часто для хранения файлов, которые являются общими для веб-страницы в папку с именем *Shared*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-136">It's common practice to store files that are shared among web pages in a folder named *Shared*.</span></span>
4. <span data-ttu-id="2b66f-137">В *Shared* папки, создайте файл с именем  *\_Header.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-137">In the *Shared* folder, create a file named *\_Header.cshtml*.</span></span>
5. <span data-ttu-id="2b66f-138">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="2b66f-138">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample2.html)]

    <span data-ttu-id="2b66f-139">Обратите внимание, что имя файла  *\_Header.cshtml*, с символа подчеркивания (\_) с префиксом.</span><span class="sxs-lookup"><span data-stu-id="2b66f-139">Notice that the file name is *\_Header.cshtml*, with an underscore (\_) as a prefix.</span></span> <span data-ttu-id="2b66f-140">ASP.NET не будет отправлять страницы в браузере, если его имя начинается с символа подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="2b66f-140">ASP.NET won't send a page to the browser if its name starts with an underscore.</span></span> <span data-ttu-id="2b66f-141">Это позволяет предотвратить людей запрос (случайно или иным способом) эти страницы напрямую.</span><span class="sxs-lookup"><span data-stu-id="2b66f-141">This prevents people from requesting (inadvertently or otherwise) these pages directly.</span></span> <span data-ttu-id="2b66f-142">Рекомендуется использовать знаки подчеркивания на имя страницы, которые имеют блоки содержимого в них, так как вы не хотите действительно пользователи смогут запрашивать эти страницы &#8212; они существуют строго должны быть вставлены в другие страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-142">It's a good idea to use an underscore to name pages that have content blocks in them, because you don't really want users to be able to request these pages &#8212; they exist strictly to be inserted into other pages.</span></span>
6. <span data-ttu-id="2b66f-143">В *Shared* папки, создайте файл с именем  *\_Footer.cshtml* и замените содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-143">In the *Shared* folder, create a file named *\_Footer.cshtml* and replace the content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample3.html)]
7. <span data-ttu-id="2b66f-144">В *Index.cshtml* добавьте два вызова `RenderPage` метода, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="2b66f-144">In the *Index.cshtml* page, add two calls to the `RenderPage` method, as shown here:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample4.html)]

    <span data-ttu-id="2b66f-145">Показано, как вставить блок содержимого на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="2b66f-145">This shows how to insert a content block into a web page.</span></span> <span data-ttu-id="2b66f-146">Вызывается `RenderPage` метода и передачи ей имени файла, содержимое которой нужно вставить в этот момент.</span><span class="sxs-lookup"><span data-stu-id="2b66f-146">You call the `RenderPage` method and pass it the name of the file whose contents you want to insert at that point.</span></span> <span data-ttu-id="2b66f-147">Здесь вы вставляете содержимое  *\_Header.cshtml* и  *\_Footer.cshtml* файлы в *Index.cshtml* файла.</span><span class="sxs-lookup"><span data-stu-id="2b66f-147">Here, you're inserting the contents of the *\_Header.cshtml* and *\_Footer.cshtml* files into the *Index.cshtml* file.</span></span>
8. <span data-ttu-id="2b66f-148">Запустите *Index.cshtml* страницы в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-148">Run the *Index.cshtml* page in a browser.</span></span> <span data-ttu-id="2b66f-149">(В WebMatrix в **файлы** рабочей области, щелкните правой кнопкой мыши файл, а затем выберите **запуск в браузере**.)</span><span class="sxs-lookup"><span data-stu-id="2b66f-149">(In WebMatrix, in the **Files** workspace, right-click the file and then select **Launch in browser**.)</span></span>
9. <span data-ttu-id="2b66f-150">В браузере просмотрите исходный код страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-150">In the browser, view the page source.</span></span> <span data-ttu-id="2b66f-151">(Например, в Internet Explorer, щелкните правой кнопкой мыши страницу и выберите **источник**.)</span><span class="sxs-lookup"><span data-stu-id="2b66f-151">(For example, in Internet Explorer, right-click the page and then click **View Source**.)</span></span>

    <span data-ttu-id="2b66f-152">Это позволяет увидеть разметки веб-страницы, который отправляется в браузер, объединяющего разметку страницы индекса блоки содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-152">This lets you see the web page markup that's sent to the browser, which combines the index page markup with the content blocks.</span></span> <span data-ttu-id="2b66f-153">В следующем примере показан исходный код страницы, отображаемый для *Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-153">The following example shows the page source that's rendered for *Index.cshtml*.</span></span> <span data-ttu-id="2b66f-154">Вызовы `RenderPage` , вставленных в *Index.cshtml* были заменены фактическое содержимое файлов верхнего и нижнего колонтитулов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-154">The calls to `RenderPage` that you inserted into *Index.cshtml* have been replaced with the actual contents of the header and footer files.</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample5.html)]

## <a name="creating-a-consistent-look-using-layout-pages"></a><span data-ttu-id="2b66f-155">Создание согласованного вида с помощью страницы макета</span><span class="sxs-lookup"><span data-stu-id="2b66f-155">Creating a Consistent Look Using Layout Pages</span></span>

<span data-ttu-id="2b66f-156">Теперь вы знаете, можно легко включить содержимое на нескольких страницах.</span><span class="sxs-lookup"><span data-stu-id="2b66f-156">So far you've seen that it's easy to include the same content on multiple pages.</span></span> <span data-ttu-id="2b66f-157">Более структурированный подход к созданию согласованного вида для сайта является использование макета страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-157">A more structured approach to creating a consistent look for a site is to use layout pages.</span></span> <span data-ttu-id="2b66f-158">Страница макета определяет структуру веб-страницы, но не содержит действительного содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-158">A layout page defines the structure of a web page, but doesn't contain any actual content.</span></span> <span data-ttu-id="2b66f-159">После создания макета страницы, можно создать веб-страницы с содержимым и затем связать их с макетом страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-159">After you've created a layout page, you can create web pages that contain the content and then link them to the layout page.</span></span> <span data-ttu-id="2b66f-160">При отображении этих страниц, они будут отформатированное в соответствии со страницы макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-160">When these pages are displayed, they'll be formatted according to the layout page.</span></span> <span data-ttu-id="2b66f-161">(В этом смысле страница макета действует в качестве шаблона для содержимого, которое определено в другие страницы.)</span><span class="sxs-lookup"><span data-stu-id="2b66f-161">(In this sense, a layout page acts as a kind of template for content that's defined in other pages.)</span></span>

<span data-ttu-id="2b66f-162">Страница макета — так же, как и любой HTML-страницы, за исключением того, что он содержит вызов `RenderBody` метод.</span><span class="sxs-lookup"><span data-stu-id="2b66f-162">The layout page is just like any HTML page, except that it contains a call to the `RenderBody` method.</span></span> <span data-ttu-id="2b66f-163">Положение `RenderBody` метода на странице макета определяет, где будут включены сведения на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-163">The position of the `RenderBody` method in the layout page determines where the information from the content page will be included.</span></span>

<span data-ttu-id="2b66f-164">На следующей схеме показано, как содержимое страницы и страницы макета объединяются во время выполнения для создания веб-странице завершения работы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-164">The following diagram shows how content pages and layout pages are combined at run time to produce the finished web page.</span></span> <span data-ttu-id="2b66f-165">Браузер запрашивает страницу содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-165">The browser requests a content page.</span></span> <span data-ttu-id="2b66f-166">Страница содержимого содержит код с указанием страницы макета для страницы структуру.</span><span class="sxs-lookup"><span data-stu-id="2b66f-166">The content page has code in it that specifies the layout page to use for the page's structure.</span></span> <span data-ttu-id="2b66f-167">На странице «макет» вставляется содержимое в точке, где `RenderBody` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="2b66f-167">In the layout page, the content is inserted at the point where the `RenderBody` method is called.</span></span> <span data-ttu-id="2b66f-168">Содержимого блоков можно также вставлять в макет страницы путем вызова `RenderPage` метод способом, как и в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="2b66f-168">Content blocks can also be inserted into the layout page by calling the `RenderPage` method, the way you did in the previous section.</span></span> <span data-ttu-id="2b66f-169">После завершения веб-страницы, он будет отправлен в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-169">When the web page is complete, it's sent to the browser.</span></span>

![Снимок экрана, показывающий страницу в браузере, получаемые в результате выполнения содержит вызовы метода RenderBody.](3-creating-a-consistent-look/_static/image3.jpg)

<span data-ttu-id="2b66f-171">Ниже показано, как создать макет страницы содержимого страницы и ссылку на него.</span><span class="sxs-lookup"><span data-stu-id="2b66f-171">The following procedure shows how to create a layout page and link content pages to it.</span></span>

1. <span data-ttu-id="2b66f-172">В *Shared* папку веб-сайта, создайте файл с именем  *\_Layout1.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-172">In the *Shared* folder of your website, create a file named *\_Layout1.cshtml*.</span></span>
2. <span data-ttu-id="2b66f-173">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="2b66f-173">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample6.html)]

    <span data-ttu-id="2b66f-174">Можно использовать `RenderPage` метода на странице макета для вставки содержимого блоков.</span><span class="sxs-lookup"><span data-stu-id="2b66f-174">You use the `RenderPage` method in a layout page to insert content blocks.</span></span> <span data-ttu-id="2b66f-175">Страница макета могут содержать только один вызов `RenderBody` метод.</span><span class="sxs-lookup"><span data-stu-id="2b66f-175">A layout page can contain only one call to the `RenderBody` method.</span></span>
3. <span data-ttu-id="2b66f-176">В *Shared* папки, создайте файл с именем  *\_Header2.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-176">In the *Shared* folder, create a file named *\_Header2.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample7.html)]
4. <span data-ttu-id="2b66f-177">В корневой папке создайте новую папку с именем *стили*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-177">In the root folder, create a new folder and name it *Styles*.</span></span>
5. <span data-ttu-id="2b66f-178">В *стили* папки, создайте файл с именем *Site.css* и добавьте следующие определения стиля:</span><span class="sxs-lookup"><span data-stu-id="2b66f-178">In the *Styles* folder, create a file named *Site.css* and add the following style definitions:</span></span>

    [!code-css[Main](3-creating-a-consistent-look/samples/sample8.css)]

    <span data-ttu-id="2b66f-179">Эти определения стиля здесь — только для того, чтобы показать, как можно использовать таблицы стилей со страницы макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-179">These style definitions are here only to show how style sheets can be used with layout pages.</span></span> <span data-ttu-id="2b66f-180">Если требуется, можно определить собственные стили для этих элементов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-180">If you want, you can define your own styles for these elements.</span></span>
6. <span data-ttu-id="2b66f-181">В корневой папке создайте файл с именем *Content1.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-181">In the root folder, create a file named *Content1.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample9.cshtml)]

    <span data-ttu-id="2b66f-182">Это страница, на которой будет использована страница макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-182">This is a page that will use a layout page.</span></span> <span data-ttu-id="2b66f-183">Блок кода в верхней части страницы указывает, какую страницу макета для форматирования этого содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-183">The code block at the top of the page indicates which layout page to use to format this content.</span></span>
7. <span data-ttu-id="2b66f-184">Запустите *Content1.cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-184">Run *Content1.cshtml* in a browser.</span></span> <span data-ttu-id="2b66f-185">В формате отображаемой страницы и таблицы стилей, определенные в  *\_Layout1.cshtml* и текст (содержимое), определенные в *Content1.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-185">The rendered page uses the format and style sheet defined in *\_Layout1.cshtml* and the text (content) defined in *Content1.cshtml*.</span></span>

    ![[image]](3-creating-a-consistent-look/_static/image4.jpg)

    <span data-ttu-id="2b66f-187">Можно повторить шаг 6, чтобы создать дополнительные страницы содержимого, которые могут совместно использовать одну и ту же страницу макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-187">You can repeat step 6 to create additional content pages that can then share the same layout page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2b66f-188">Можно настроить веб-узла, чтобы автоматически, можно использовать одну и ту же страницу макета для всех страниц содержимого в папке.</span><span class="sxs-lookup"><span data-stu-id="2b66f-188">You can set up your site so that you can automatically use the same layout page for all the content pages in a folder.</span></span> <span data-ttu-id="2b66f-189">Дополнительные сведения см. в разделе [поведение Настройка сайта для веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202906).</span><span class="sxs-lookup"><span data-stu-id="2b66f-189">For details, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906).</span></span>

## <a name="designing-layout-pages-that-have-multiple-content-sections"></a><span data-ttu-id="2b66f-190">Разработка макета страниц, имеющих несколько разделов содержимого</span><span class="sxs-lookup"><span data-stu-id="2b66f-190">Designing Layout Pages That Have Multiple Content Sections</span></span>

<span data-ttu-id="2b66f-191">Это полезно, если вы хотите использовать макетов, имеющих несколько областей с заменяемое содержимое, страницы содержимого может иметь несколько разделов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-191">A content page can have multiple sections, which is useful if you want to use layouts that have multiple areas with replaceable content.</span></span> <span data-ttu-id="2b66f-192">На странице содержимого вы предоставляете каждого раздела уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="2b66f-192">In the content page, you give each section a unique name.</span></span> <span data-ttu-id="2b66f-193">(Раздел по умолчанию остается без имени.) На странице «макет» добавляется `RenderBody` метод, чтобы указать, где должен отображаться раздел неименованные (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="2b66f-193">(The default section is left unnamed.) In the layout page, you add a `RenderBody` method to specify where the unnamed (default) section should appear.</span></span> <span data-ttu-id="2b66f-194">Затем можно добавить отдельный `RenderSection` методы для визуализации именованные разделы по отдельности.</span><span class="sxs-lookup"><span data-stu-id="2b66f-194">You then add separate `RenderSection` methods in order to render named sections individually.</span></span>

<span data-ttu-id="2b66f-195">На следующей диаграмме показан как ASP.NET обрабатывает содержимое, которое состоит из нескольких разделов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-195">The following diagram shows how ASP.NET handles content that's divided into multiple sections.</span></span> <span data-ttu-id="2b66f-196">Каждый именованный раздел содержится в разделе блок на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-196">Each named section is contained in a section block in the content page.</span></span> <span data-ttu-id="2b66f-197">(Их названия `Header` и `List` в примере.) Платформа вставляет раздела содержимого в страницы макета в точке, где `RenderSection` вызывается метод.</span><span class="sxs-lookup"><span data-stu-id="2b66f-197">(They're named `Header` and `List` in the example.) The framework inserts content section into the layout page at the point where the `RenderSection` method is called.</span></span> <span data-ttu-id="2b66f-198">Раздел неименованные (по умолчанию) вставляется в точке, где `RenderBody` вызывается метод, как показано выше.</span><span class="sxs-lookup"><span data-stu-id="2b66f-198">The unnamed (default) section is inserted at the point where the `RenderBody` method is called, as you saw earlier.</span></span>

![Концептуальная схема, показывающая, как метод RenderSection вставляет ссылки на разделы, в текущей страницы.](3-creating-a-consistent-look/_static/image5.jpg)

<span data-ttu-id="2b66f-200">Эта процедура показывает, как создать страницу содержимого, несколько разделов содержимого и Подготовка к просмотру с помощью страницы макета, которая поддерживает несколько разделов содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-200">This procedure shows how to create a content page that has multiple content sections and how to render it using a layout page that supports multiple content sections.</span></span>

1. <span data-ttu-id="2b66f-201">В *Shared* папки, создайте файл с именем  *\_Layout2.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2b66f-201">In the *Shared* folder, create a file named *\_Layout2.cshtml*.</span></span>
2. <span data-ttu-id="2b66f-202">Замените все существующее содержимое следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="2b66f-202">Replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample10.html)]

    <span data-ttu-id="2b66f-203">Вы используете `RenderSection` метод для отображения заголовка и список разделов.</span><span class="sxs-lookup"><span data-stu-id="2b66f-203">You use the `RenderSection` method to render both the header and list sections.</span></span>
3. <span data-ttu-id="2b66f-204">В корневой папке создайте файл с именем *Content2.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-204">In the root folder, create a file named *Content2.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample11.cshtml)]

    <span data-ttu-id="2b66f-205">Эта страница содержимого содержит блок кода в верхней части страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-205">This content page contains a code block at the top of the page.</span></span> <span data-ttu-id="2b66f-206">Каждый именованный раздел заключается в блок раздела.</span><span class="sxs-lookup"><span data-stu-id="2b66f-206">Each named section is contained in a section block.</span></span> <span data-ttu-id="2b66f-207">Остальная часть страницы содержит раздел содержимого по умолчанию (без имени).</span><span class="sxs-lookup"><span data-stu-id="2b66f-207">The rest of the page contains the default (unnamed) content section.</span></span>
4. <span data-ttu-id="2b66f-208">Запустите *Content2.cshtml* в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-208">Run *Content2.cshtml* in a browser.</span></span>

    ![Снимок экрана, показывающий страницу в браузере, получаемые в результате выполнения содержит вызовы метода RenderSection.](3-creating-a-consistent-look/_static/image6.jpg)

## <a name="making-content-sections-optional"></a><span data-ttu-id="2b66f-210">Делая дополнительные разделы содержимого</span><span class="sxs-lookup"><span data-stu-id="2b66f-210">Making Content Sections Optional</span></span>

<span data-ttu-id="2b66f-211">Как правило разделы, которые можно создать на странице содержимого должны совпадать разделы, определенные на странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-211">Normally, the sections that you create in a content page have to match sections that are defined in the layout page.</span></span> <span data-ttu-id="2b66f-212">Возможно возникновение ошибок при возникновении любого из следующих:</span><span class="sxs-lookup"><span data-stu-id="2b66f-212">You can get errors if any of the following occur:</span></span>

- <span data-ttu-id="2b66f-213">Страница содержимого содержит раздел с нет соответствующий раздел в странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-213">The content page contains a section that has no corresponding section in the layout page.</span></span>
- <span data-ttu-id="2b66f-214">Страница макета содержит раздел, для которого нет содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-214">The layout page contains a section for which there's no content.</span></span>
- <span data-ttu-id="2b66f-215">Страница макета включает вызовы методов, служащие для подготовки к просмотру несколько раз в одном разделе.</span><span class="sxs-lookup"><span data-stu-id="2b66f-215">The layout page includes method calls that try to render the same section more than once.</span></span>

<span data-ttu-id="2b66f-216">Однако можно переопределить это поведение для именованного раздела путем объявления раздела как необязательные в странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-216">However, you can override this behavior for a named section by declaring the section to be optional in the layout page.</span></span> <span data-ttu-id="2b66f-217">Это позволяет определить несколько страниц, могут совместно использоваться страница макета, но, которые могут или не могут иметь содержимое для определенного раздела.</span><span class="sxs-lookup"><span data-stu-id="2b66f-217">This lets you define multiple content pages that can share a layout page but that might or might not have content for a specific section.</span></span>

1. <span data-ttu-id="2b66f-218">Откройте *Content2.cshtml* и удалите следующий раздел:</span><span class="sxs-lookup"><span data-stu-id="2b66f-218">Open *Content2.cshtml* and remove the following section:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample12.cshtml)]
2. <span data-ttu-id="2b66f-219">Сохраните страницу, а затем запустите его в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-219">Save the page and then run it in a browser.</span></span> <span data-ttu-id="2b66f-220">Отображается сообщение об ошибке, так как содержимое страницы не предоставляет содержимое для раздела, определенных на странице макета, а именно: раздел заголовка.</span><span class="sxs-lookup"><span data-stu-id="2b66f-220">An error message is displayed, because the content page doesn't provide content for a section defined in the layout page, namely the header section.</span></span>

    ![Снимок экрана, на которой отображается ошибка, возникающая при запуске страницы, который вызывает метод RenderSection, однако отсутствует соответствующий раздел.](3-creating-a-consistent-look/_static/image7.jpg)
3. <span data-ttu-id="2b66f-222">В *Shared* откройте  *\_Layout2.cshtml* страницы и замените эту строку:</span><span class="sxs-lookup"><span data-stu-id="2b66f-222">In the *Shared* folder, open the *\_Layout2.cshtml* page and replace this line:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample13.js)]

    <span data-ttu-id="2b66f-223">с помощью следующего кода:</span><span class="sxs-lookup"><span data-stu-id="2b66f-223">with the following code:</span></span>

    [!code-javascript[Main](3-creating-a-consistent-look/samples/sample14.js)]

    <span data-ttu-id="2b66f-224">В качестве альтернативы может замените следующий блок кода, который позволяет получить те же результаты предыдущей строке кода:</span><span class="sxs-lookup"><span data-stu-id="2b66f-224">As an alternative, you could replace the previous line of code with the following code block, which produces the same results:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample15.cshtml)]
4. <span data-ttu-id="2b66f-225">Запустите *Content2.cshtml* страницы в браузере еще раз.</span><span class="sxs-lookup"><span data-stu-id="2b66f-225">Run the *Content2.cshtml* page in a browser again.</span></span> <span data-ttu-id="2b66f-226">(При наличии этой странице откройте в браузере можно просто обновить его.) Это время страницы отображается без ошибок, даже при наличии отсутствует заголовок.</span><span class="sxs-lookup"><span data-stu-id="2b66f-226">(If you still have this page open in the browser, you can just refresh it.) This time the page is displayed with no error, even though it has no header.</span></span>

## <a name="passing-data-to-layout-pages"></a><span data-ttu-id="2b66f-227">Передача данных на макет страницы</span><span class="sxs-lookup"><span data-stu-id="2b66f-227">Passing Data to Layout Pages</span></span>

<span data-ttu-id="2b66f-228">Возможно, данные, определенные на странице содержимого, вам потребуется обратиться к странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-228">You might have data defined in the content page that you need to refer to in a layout page.</span></span> <span data-ttu-id="2b66f-229">В этом случае нужно передать данные из содержимого страницы к странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-229">If so, you need to pass the data from the content page to the layout page.</span></span> <span data-ttu-id="2b66f-230">Например может потребоваться отображение состояния входа пользователя, или может потребоваться отображение или скрытие области содержимого, на основе ввода пользователя.</span><span class="sxs-lookup"><span data-stu-id="2b66f-230">For example, you might want to display the login status of a user, or you might want to show or hide content areas based on user input.</span></span>

<span data-ttu-id="2b66f-231">Для передачи данных из страницы содержимого страницы макета, можно разместить значения в `PageData` свойство страницы содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-231">To pass data from a content page to a layout page, you can put values into the `PageData` property of the content page.</span></span> <span data-ttu-id="2b66f-232">`PageData` Свойство является коллекцией пар "имя значение", содержащих данные, передаваемые между страницами.</span><span class="sxs-lookup"><span data-stu-id="2b66f-232">The `PageData` property is a collection of name/value pairs that hold the data that you want to pass between pages.</span></span> <span data-ttu-id="2b66f-233">На странице «макет» могут затем считывать значения из `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="2b66f-233">In the layout page, you can then read values out of the `PageData` property.</span></span>

<span data-ttu-id="2b66f-234">Вот другой схеме.</span><span class="sxs-lookup"><span data-stu-id="2b66f-234">Here's another diagram.</span></span> <span data-ttu-id="2b66f-235">Здесь показано, как можно использовать ASP.NET `PageData` свойство, чтобы передать значения от содержимого страницы к странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-235">This one shows how ASP.NET can use the `PageData` property to pass values from a content page to the layout page.</span></span> <span data-ttu-id="2b66f-236">Когда ASP.NET начинает создавать веб-страницы, он создает `PageData` коллекции.</span><span class="sxs-lookup"><span data-stu-id="2b66f-236">When ASP.NET begins building the web page, it creates the `PageData` collection.</span></span> <span data-ttu-id="2b66f-237">На странице содержимого написать код, чтобы поместить данные в `PageData` коллекции.</span><span class="sxs-lookup"><span data-stu-id="2b66f-237">In the content page, you write code to put data in the `PageData` collection.</span></span> <span data-ttu-id="2b66f-238">Значения в `PageData` коллекции можно получить дополнительные блоки содержимого или других разделах на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="2b66f-238">Values in the `PageData` collection can also be accessed by other sections in the content page or by additional content blocks.</span></span>

![Концептуальная схема, показывающая, как заполнить словарь PageData и передать эту информацию для страницы макета содержимого страницы.](3-creating-a-consistent-look/_static/image8.jpg)

<span data-ttu-id="2b66f-240">Ниже показано, как передавать данные из содержимого страницы к странице макета.</span><span class="sxs-lookup"><span data-stu-id="2b66f-240">The following procedure shows how to pass data from a content page to a layout page.</span></span> <span data-ttu-id="2b66f-241">При запуске страницы отображаются кнопки, которая дает пользователю возможность скрывать или отображать список, который определен в макете страницы.</span><span class="sxs-lookup"><span data-stu-id="2b66f-241">When the page runs, it displays a button that lets the user hide or show a list that's defined in the layout page.</span></span> <span data-ttu-id="2b66f-242">При нажатии пользователем кнопки, устанавливает значение true или false (Boolean) `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="2b66f-242">When users click the button, it sets a true/false (Boolean) value in the `PageData` property.</span></span> <span data-ttu-id="2b66f-243">Страница макета считывает это значение и если это значение равно false, скрытие списка.</span><span class="sxs-lookup"><span data-stu-id="2b66f-243">The layout page reads that value, and if it's false, hides the list.</span></span> <span data-ttu-id="2b66f-244">Значение также используется для определения, следует ли отображать на странице содержимого **скрыть список** кнопку или **Показать список** кнопки.</span><span class="sxs-lookup"><span data-stu-id="2b66f-244">The value is also used in the content page to determine whether to display the **Hide List** button or the **Show List** button.</span></span>

![[image]](3-creating-a-consistent-look/_static/image9.jpg)

1. <span data-ttu-id="2b66f-246">В корневой папке создайте файл с именем *Content3.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-246">In the root folder, create a file named *Content3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample16.cshtml)]

    <span data-ttu-id="2b66f-247">Код сохраняет два блока данных в `PageData` свойство &#8212; заголовок веб-страницы и значение true или false, чтобы указать, следует ли отображать список.</span><span class="sxs-lookup"><span data-stu-id="2b66f-247">The code stores two pieces of data in the `PageData` property &#8212; the title of the web page and true or false to specify whether to display a list.</span></span>

    <span data-ttu-id="2b66f-248">Обратите внимание, что ASP.NET позволяет разместить разметку HTML на странице, условно с помощью блока кода.</span><span class="sxs-lookup"><span data-stu-id="2b66f-248">Notice that ASP.NET lets you put HTML markup into the page conditionally using a code block.</span></span> <span data-ttu-id="2b66f-249">Например `if/else` блок в основной области страницы определяет, какие формы для отображения в зависимости от того, следует ли `PageData["ShowList"]` задано значение true.</span><span class="sxs-lookup"><span data-stu-id="2b66f-249">For example, the `if/else` block in the body of the page determines which form to display depending on whether `PageData["ShowList"]` is set to true.</span></span>
2. <span data-ttu-id="2b66f-250">В *Shared* папки, создайте файл с именем  *\_Layout3.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-250">In the *Shared* folder, create a file named *\_Layout3.cshtml* and replace any existing content with the following:</span></span>

    [!code-cshtml[Main](3-creating-a-consistent-look/samples/sample17.cshtml)]

    <span data-ttu-id="2b66f-251">Страница макета включает выражение в `<title>` элемент, который возвращает значение заголовка из `PageData` свойство.</span><span class="sxs-lookup"><span data-stu-id="2b66f-251">The layout page includes an expression in the `<title>` element that gets the title value from the `PageData` property.</span></span> <span data-ttu-id="2b66f-252">Она также использует `ShowList` значение `PageData` свойства, чтобы определить, следует ли отображать блок содержимого списка.</span><span class="sxs-lookup"><span data-stu-id="2b66f-252">It also uses the `ShowList` value of the `PageData` property to determine whether to display the list content block.</span></span>
3. <span data-ttu-id="2b66f-253">В *Shared* папки, создайте файл с именем  *\_List.cshtml* и замените все существующее содержимое следующим:</span><span class="sxs-lookup"><span data-stu-id="2b66f-253">In the *Shared* folder, create a file named *\_List.cshtml* and replace any existing content with the following:</span></span>

    [!code-html[Main](3-creating-a-consistent-look/samples/sample18.html)]
4. <span data-ttu-id="2b66f-254">Запустите *Content3.cshtml* страницы в браузере.</span><span class="sxs-lookup"><span data-stu-id="2b66f-254">Run the *Content3.cshtml* page in a browser.</span></span> <span data-ttu-id="2b66f-255">Откроется страница со списком отображается в левой части страницы и **скрыть список** кнопку внизу.</span><span class="sxs-lookup"><span data-stu-id="2b66f-255">The page is displayed with the list visible on the left side of the page and a **Hide List** button at the bottom.</span></span>

    ![Снимок экрана со страницей, включающий список "и", «Скрыть список» кнопку.](3-creating-a-consistent-look/_static/image10.jpg)
5. <span data-ttu-id="2b66f-257">Нажмите кнопку **скрыть список**.</span><span class="sxs-lookup"><span data-stu-id="2b66f-257">Click **Hide List**.</span></span> <span data-ttu-id="2b66f-258">Список исчезает, а кнопка изменится на **Показать список**.</span><span class="sxs-lookup"><span data-stu-id="2b66f-258">The list disappears and the button changes to **Show List**.</span></span>

    ![Снимок экрана со страницей, не включает список и отобразить список, кнопку.](3-creating-a-consistent-look/_static/image11.jpg)
6. <span data-ttu-id="2b66f-260">Нажмите кнопку **Показать список** кнопки, а также список отображается снова.</span><span class="sxs-lookup"><span data-stu-id="2b66f-260">Click the **Show List** button, and the list is displayed again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2b66f-261">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="2b66f-261">Additional Resources</span></span>


[<span data-ttu-id="2b66f-262">Настройка поведения сайта для веб-страниц ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2b66f-262">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
