---
uid: signalr/overview/performance/scaleout-in-signalr
title: "Общие сведения о горизонтального масштабирования в SignalR | Документы Microsoft"
author: MikeWasson
description: "Версии программного обеспечения используется в этом разделе Visual Studio 2013 .NET 4.5 SignalR предыдущие версии версии 2 в этом разделе сведения о предыдущих версиях..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/10/2014
ms.topic: article
ms.assetid: 7e781fc1-1c1f-45a8-bc1d-338e96dbe9c9
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/performance/scaleout-in-signalr
msc.type: authoredcontent
ms.openlocfilehash: f1d15250682305f6d0512b72bd2e40cb4a8a18e5
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="introduction-to-scaleout-in-signalr"></a>Общие сведения о горизонтального масштабирования в SignalR
====================
по [Mike Wasson](https://github.com/MikeWasson), [Патрик Флетчера](https://github.com/pfletcher)

> ## <a name="software-versions-used-in-this-topic"></a>Версии программного обеспечения, используемого в этом разделе
> 
> 
> - [Visual Studio 2013](https://www.microsoft.com/visualstudio/eng/2013-downloads)
> - .NET 4.5
> - SignalR версии 2
>   
> 
> 
> ## <a name="previous-versions-of-this-topic"></a>Предыдущие версии этого раздела
> 
> Сведения о более ранних версий SignalR см. в разделе [более ранних версий SignalR](../older-versions/index.md).
> 
> ## <a name="questions-and-comments"></a>Вопросы и комментарии
> 
> Оставьте отзыв на том, как вам понравилось этого учебника и что можно улучшить в комментарии в нижней части страницы. Если у вас есть вопросы, которые не связаны непосредственно для работы с учебником, их можно разместить [форум по ASP.NET SignalR](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) или [StackOverflow.com](http://stackoverflow.com/).


Как правило, существует два способа для масштабирования веб-приложения: *масштабировать* и *горизонтальное масштабирование*.

- Вертикальное масштабирование означает использование более мощный сервер (или большего размера виртуальной Машины) Дополнительные ОЗУ, ЦП, и т. д.
- Горизонтальное масштабирование означает добавлены дополнительные серверы, чтобы справиться с нагрузкой.

Проблемы с масштабированием является быстро попаданий ограничение на размер машины. Кроме этого необходимо расширить. Тем не менее при масштабировании, клиенты могут получить направлены на разных серверах. Клиент, который подключен к одному серверу, не получат сообщения, отправленные с другого сервера.

![](scaleout-in-signalr/_static/image1.png)

Одно из решений — для передачи сообщений между серверами с помощью компонентом, называется *объединительной платы*. В объединительной панели включен каждый экземпляр приложения отправляет сообщения объединительной плате, а объединительной плате пересылает их на другие экземпляры приложения. (В электронике объединительной платы — это группа параллельных соединителей. Используя аналогию в объединительной панели SignalR подключается несколько серверов.)

![](scaleout-in-signalr/_static/image2.png)

В настоящее время SignalR предоставляет три соединительных панелях.

- **Шина обслуживания Azure**. Шина обслуживания является инфраструктуры обмена сообщениями, которая позволяет компонентам для отправки сообщений в слабо связанным образом.
- **Redis**. Redis представляет хранилищу ключей и значений в памяти. Redis поддерживает шаблон публикации подписки («pub/sub») для отправки сообщений.
- **SQL Server**. На задней стороне SQL Server записывает сообщения таблиц SQL. Задняя панель для эффективного обмена сообщениями с компонентом Service Broker. Однако она также работает, если не включен компонент Service Broker.

При развертывании приложения в Azure, рассмотрите возможность использования объединительной платы Redis с помощью [кэш Azure Redis](https://azure.microsoft.com/services/cache/). Если развертываются на ферме серверов, рассмотрите возможность SQL Server или Redis соединительных панелях.

В следующих разделах содержатся пошаговые руководства для каждой объединительной платы:

- [Масштабирование SignalR с помощью служебной шины Azure](scaleout-with-windows-azure-service-bus.md)
- [Масштабирование SignalR с помощью Redis](scaleout-with-redis.md)
- [Масштабирование SignalR с помощью SQL Server](scaleout-with-sql-server.md)

## <a name="implementation"></a>Реализация

В SignalR каждое сообщение отправляется через канал сообщений. Реализует канал сообщений [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) интерфейс, который предоставляет абстракцию публикации или подписки. Соединительных панелях работы, заменив значение по умолчанию **IMessageBus** с шиной, предназначенный для этого объединительной платы. Например, канал сообщений для Redis — [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), и использует команды Redis [pub/sub](http://redis.io/topics/pubsub) механизм для отправки и получения сообщений.

Каждый экземпляр сервера подключается через шину объединительной плате. При отправке сообщения, он переходит объединительной платы и объединительной плате отправляет его на каждый сервер. Когда сервер получает сообщение от объединительной платы, сообщение помещается в локальный кэш. Затем сервер доставляет сообщения клиентам из своего локального кэша.

Для каждого клиентского соединения клиента выполняется при чтении потока сообщений отслеживаются с помощью курсора. (Курсора представляет позицию в потоке сообщений). Если клиент отключается, а затем снова подключается, шины запрашивает все сообщения, полученные после значения курсора клиента. То же самое происходит, если соединение использует [долго опрашивающего](../getting-started/introduction-to-signalr.md#transports). После завершения долго опрашивающего запроса клиент открывает новое соединение и запрашивает у сообщения, полученные после курсора.

Работает механизм курсора, даже если клиент направляется на другой сервер, на переподключение. Задняя панель поддерживают всех серверов, и неважно, какой сервер, клиент подключается к.

## <a name="limitations"></a>Ограничения

Использование объединительной платы, максимальная пропускная способность сообщений меньше, чем при клиенты взаимодействовать непосредственно с одного сервера узла. Это происходит потому объединительной плате пересылает каждое сообщение для каждого из узлов, поэтому объединительной плате могут стать узким местом. Проблема ли это ограничение зависит от приложения. Например ниже приведены некоторые стандартные сценарии, SignalR.

- [Рассылка сервера](../getting-started/tutorial-server-broadcast-with-signalr.md) (например, биржевые сводки): соединительных панелях хорошо подходят для этого сценария server контролирует скорость, с которой сообщения отправляются.
- [Клиент клиент](../getting-started/tutorial-getting-started-with-signalr.md) (например, чат): В этом случае объединительной платы могут быть узким местом, если количество сообщений, масштабируется по числу клиентов, то есть если растет число сообщений, пропорционально как Дополнительные клиенты присоединяются.
- [В реальном времени высокой частотой](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (например, в режиме реального времени игры): объединительной платы не рекомендуется для этого сценария.

## <a name="enabling-tracing-for-signalr-scaleout"></a>Включение трассировки для горизонтального масштабирования SignalR

Чтобы включить трассировку для соединительных панелях, добавьте следующие разделы в файл web.config в корневом каталоге **конфигурации** элемента:

[!code-html[Main](scaleout-in-signalr/samples/sample1.html)]
