---
uid: signalr/overview/older-versions/tutorial-getting-started-with-signalr
title: 'Учебник: Приступая к работе с SignalR 1.x | Документы Microsoft'
author: pfletcher
description: Используйте ASP.NET SignalR для построения приложения разговора в режиме реального времени на HTML-странице.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/18/2013
ms.topic: article
ms.assetid: fdc3599a-5217-44c1-951f-0eec9812dce7
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/older-versions/tutorial-getting-started-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: ce4953a0abf64af28ef4dbc5a62bb2d989343d99
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="tutorial-getting-started-with-signalr-1x"></a>Учебник: Приступая к работе с SignalR 1.x
====================
по [Флетчера Патрик](https://github.com/pfletcher), [Тим Teebken](https://github.com/timlt)

> В этом учебнике содержатся сведения об использовании SignalR для создания приложения разговора в режиме реального времени. Будет добавить SignalR пустое веб-приложение ASP.NET и создать HTML-страницу для отправки и отображения сообщений.


## <a name="overview"></a>Обзор

В этом учебнике рассказывается разработки SignalR, показывая, как создать приложение простом чате на основе браузера. Будет добавить эту библиотеку SignalR в пустое веб-приложение ASP.NET, создайте класс концентратора для отправки сообщений для клиентов и создать HTML-страницу, которая позволяет пользователям отправлять и получать сообщения. Похожий учебник, демонстрирующий создание приложения разговора в MVC 4 с помощью представление MVC, в разделе [Приступая к работе с SignalR и MVC 4](index.md).

> [!NOTE]
> В этом учебнике используется версии (1.x) SignalR. Дополнительные сведения об изменениях между SignalR 1.x и 2.0, см. [SignalR обновление проектов 1.x](../releases/upgrading-signalr-1x-projects-to-20.md).

SignalR — это библиотека .NET открытым исходным кодом, для создания веб-приложений, требующих взаимодействия с пользователем в режиме реального времени или обновления данных в режиме реального времени. Примеры приложений социальных сетей, многопользовательских игр, совместной работы и новости, погода бизнес или финансовые обновления приложений. Они часто называются приложениями в реальном времени.

SignalR упрощает процесс создания приложений в режиме реального времени. Он включает библиотеку сервера ASP.NET и клиентской библиотеке JavaScript, чтобы упростить управление соединениями сервера клиента и отправить обновления содержимого для клиентов. Библиотека SignalR можно добавить к приложению ASP.NET для достижения функциональности в режиме реального времени.

Учебник демонстрирует следующие задачи разработки SignalR:

- Добавление библиотеки SignalR веб-приложения ASP.NET.
- Создание класса для передачи содержимого клиентам концентратора.
- С помощью библиотеки jQuery SignalR на веб-странице для отправки сообщений и отобразить обновления от концентратора.

На следующем снимке экрана показано чата приложение в браузере. Каждый новый пользователь можно отправлять комментарии и добавлены после пользователь не присоединит чат.

![Экземпляры чата](tutorial-getting-started-with-signalr/_static/image1.png)

Разделы:

- [Настройка проекта](#setup)
- [Выполнение образца](#run)
- [Анализ кода](#code)
- [Следующие шаги](#next)

<a id="setup"></a>

## <a name="set-up-the-project"></a>Настройка проекта

В этом разделе показано, как создать пустой веб-приложение ASP.NET, добавить SignalR и создать приложения разговора.

Предварительные требования

- Visual Studio 2010 SP1 или 2012. Если у вас Visual Studio, см. раздел [загрузок ASP.NET](https://www.asp.net/downloads) для получения бесплатной Visual Studio 2012 Express средство разработки.
- [Microsoft ASP.NET и веб-средств 2012.2](https://go.microsoft.com/fwlink/?LinkId=279941). Для Visual Studio 2012 этот установщик добавляет новые возможности ASP.NET, включая шаблоны SignalR в Visual Studio. Для Visual Studio 2010 с пакетом обновления 1 установщик не доступен, но завершения этого учебника можно путем установки пакета SignalR NuGet, как описано в руководстве по установке.

В следующих действиях используется Visual Studio 2012 для создания пустой веб-приложения ASP.NET и добавьте библиотеку SignalR:

1. В Visual Studio создайте пустое веб-приложение ASP.NET.

    ![Создать пустой веб-узел](tutorial-getting-started-with-signalr/_static/image2.png)
2. Откройте **консоль диспетчера пакетов** , выбрав **инструменты | Диспетчер пакетов библиотеки | Консоль диспетчера пакетов**. Введите следующую команду в окне консоли:

    `Install-Package Microsoft.AspNet.SignalR -Version 1.1.3`

    Эта команда устанавливает последнюю версию SignalR 1.x.
3. В **обозревателе решений**, щелкните правой кнопкой мыши проект, выберите **добавить | Класс**. Имя для нового класса **ChatHub**.
4. В **обозревателе решений** разверните узел «скрипты». Библиотеки скриптов jQuery и SignalR, отображаются в проект.

    ![Ссылки на библиотеки](tutorial-getting-started-with-signalr/_static/image3.png)
5. Замените код в **ChatHub** класса следующим кодом.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample1.cs)]
6. В **обозревателе решений**, щелкните правой кнопкой мыши проект, а затем нажмите кнопку **добавить | Новый элемент**. В **Добавление нового элемента** диалогового окна выберите **глобальный класс приложения** и нажмите кнопку **добавить**.

    ![Добавление глобальных](tutorial-getting-started-with-signalr/_static/image4.png)
7. Добавьте следующие `using` инструкции после указанных `using` инструкций в классе Global.asax.cs.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample2.cs)]
8. Добавьте следующую строку кода в `Application_Start` метод глобального класса, чтобы зарегистрировать маршрут по умолчанию для концентраторов SignalR.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample3.cs)]
9. В **обозревателе решений**, щелкните правой кнопкой мыши проект, а затем нажмите кнопку **добавить | Новый элемент**. В **Добавление нового элемента** окна, выберите HTML-страницы и нажмите кнопку **добавить**.
10. В **обозревателе решений**, щелкните правой кнопкой мыши только что созданный HTML-страницы и нажмите кнопку **задать в качестве начальной страницы**.
11. Замените код по умолчанию в HTML-страницу с помощью следующего кода.

    [!code-html[Main](tutorial-getting-started-with-signalr/samples/sample4.html)]
12. **Сохранить все** для проекта.

<a id="run"></a>

## <a name="run-the-sample"></a>Выполнение образца

1. Нажмите клавишу F5 для запуска проекта в режиме отладки. HTML-страницы загружает в экземпляре браузера и предлагает ввести имя пользователя.

    ![Введите имя пользователя](tutorial-getting-started-with-signalr/_static/image5.png)
2. Введите имя пользователя.
3. Копировать URL-адрес из адресной строки браузера и использовать ее для открытия две дополнительные экземпляры браузера. В каждом экземпляре браузера введите уникальное имя пользователя.
4. В каждом экземпляре браузера, добавьте комментарий и щелкните **отправки**. Комментарии должны отображаться в все экземпляры браузера.

    > [!NOTE]
    > Это приложение на простом чате; не поддерживает контекст обсуждения на сервере. Концентратор осуществляет широковещательную рассылку комментариев для всех текущих пользователей. Пользователей, которые позже принять участие в обсуждении будут отображены сообщения, добавлены с момента их соединения.

    На следующем снимке экрана показано чата приложения, работающего в трех экземпляров браузера, все из которых обновляются, когда один экземпляр отправляет сообщение.

    ![Браузеры чата](tutorial-getting-started-with-signalr/_static/image6.png)
5. В **обозревателе решений**, проверять **документов скрипта** узел для запущенного приложения. Отсутствует файл скрипта с именем **концентраторов** , библиотека SignalR динамически приводит к возникновению ошибки во время выполнения. Этот файл обеспечивает связь между jQuery сценарий и код на стороне сервера.

    ![Скрипт, созданный концентратора](tutorial-getting-started-with-signalr/_static/image7.png)

<a id="code"></a>

## <a name="examine-the-code"></a>Анализ кода

Приложение разговора SignalR демонстрирует две основные задачи разработки SignalR: создание концентратора как объект основного координации на сервере, а с помощью библиотеки jQuery SignalR для отправки и получения сообщений.

### <a name="signalr-hubs"></a>Концентраторы SignalR

В следующем образце кода **ChatHub** класс является производным от **Microsoft.AspNet.SignalR.Hub** класса. Наследование от **концентратора** класс является удобным способом для построения приложения SignalR. Можно создавать открытые методы в классе концентратора и откройте эти методы, вызывать их из скриптов jQuery на веб-странице.

В коде чата клиенты вызывают **ChatHub.Send** метод для отправки сообщения. Концентратор в свою очередь отправляет сообщение всем клиентам, вызвав **Clients.All.broadcastMessage**.

**Отправки** метод показывает некоторые понятия концентратора:

- Объявите открытых методов концентратора, чтобы их можно было вызывать клиенты.
- Используйте **Microsoft.AspNet.SignalR.Hub.Clients** динамическое свойство обращается ко всем клиентам подключения этого концентратора.
- Вызов функции jQuery для клиента (такие как `broadcastMessage` функции) для обновления клиентов.

    [!code-csharp[Main](tutorial-getting-started-with-signalr/samples/sample5.cs)]

### <a name="signalr-and-jquery"></a>SignalR и jQuery

HTML-страницы в следующем образце кода показано, как использовать библиотеку jQuery SignalR для связи с концентратора SignalR. Основные задачи в коде объявляется прокси-сервер для ссылки на концентратор, объявление функции, сервер может вызывать для push-содержимое для клиентов и запуска подключения для отправки сообщений в концентратор.

В следующем коде объявляется прокси-сервер для концентратора.

[!code-javascript[Main](tutorial-getting-started-with-signalr/samples/sample6.js)]

> [!NOTE]
> В jQuery ссылку на класс server и его членах находится в верхний регистр. Ссылается на образец кода C# **ChatHub** класса в jQuery как **chatHub**.


Следующий код является, как создать функции обратного вызова в скрипте. Класс концентратора на сервере вызывает эту функцию для принудительной отправки обновления содержимого для каждого клиента. Две строки, что кодировка HTML содержимое перед его отображением являются необязательными и Показать простой способ предотвратить внедрение скрипта.

[!code-html[Main](tutorial-getting-started-with-signalr/samples/sample7.html)]

Ниже показано, как открыть соединение с концентратором. Код запускает подключение, а затем передает его функцию для обработки события щелчка кнопкой мыши на **отправки** кнопки на HTML-странице.

> [!NOTE]
> Такой подход гарантирует, что соединение установлено до выполнения обработчика событий.


[!code-javascript[Main](tutorial-getting-started-with-signalr/samples/sample8.js)]

<a id="next"></a>

## <a name="next-steps"></a>Следующие шаги

Вы узнали, что SignalR — это платформа для построения в режиме реального времени веб-приложений. Вы также узнали несколько задач разработки SignalR: Добавление приложения ASP.NET SignalR, как создать класс концентратора и как отправлять и получать сообщения от концентратора.

Выполненные примера приложения в этом учебнике или других приложений SignalR доступны через Интернет с их развертыванием на поставщике услуг размещения. Корпорация Майкрософт предлагает бесплатные услуг хостинга до 10 веб-сайтов в бесплатной [пробную учетную запись Windows Azure](https://www.windowsazure.com/pricing/free-trial/?WT.mc_id=A443DD604). Пошаговое руководство по развертыванию SignalR пример приложения см. в разделе [публикации SignalR примере для начала работы как веб-сайта Windows Azure](https://blogs.msdn.com/b/timlee/archive/2013/02/27/deploy-the-signalr-getting-started-sample-as-a-windows-azure-web-site.aspx). Подробные сведения о развертывании веб-проекта Visual Studio для веб-сайта Windows Azure см. в разделе [развертывание приложения ASP.NET для веб-сайта Windows Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet). (Примечание: транспорт WebSocket в настоящее время не поддерживается для Windows Azure веб-сайтов. Транспорт WebSocket при недоступна, SignalR использует другие доступные типы транспорта, как описано в разделе транспортов [введение в раздел SignalR](index.md).)

Для получения более сложных понятиях новинках SignalR, посетите следующие сайты для SignalR исходный код и ресурсы:

- [Проект SignalR](http://signalr.net)
- [SignalR Github и образцы](https://github.com/SignalR/SignalR)
- [Вики-сайте SignalR](https://github.com/SignalR/SignalR/wiki)
