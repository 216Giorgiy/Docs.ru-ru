---
uid: signalr/overview/testing-and-debugging/troubleshooting
title: Устранение неполадок SignalR | Документы Microsoft
author: pfletcher
description: В этой статье описываются распространенных проблем в разработке приложений SignalR.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/10/2014
ms.topic: article
ms.assetid: 4b559e6c-4fb0-4a04-9812-45cf08ae5779
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/testing-and-debugging/troubleshooting
msc.type: authoredcontent
ms.openlocfilehash: 2394ee81f4592417a034e47db6eefd3e4b91a9af
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="signalr-troubleshooting"></a>Устранение неполадок SignalR
====================
по [Патрик Флетчера](https://github.com/pfletcher)

> В этом документе описываются распространенные проблемы, связанные с SignalR.
> 
> ## <a name="software-versions-used-in-this-topic"></a>Версии программного обеспечения, используемого в этом разделе
> 
> 
> - [Visual Studio 2013](https://www.microsoft.com/visualstudio/eng/2013-downloads)
> - .NET 4.5
> - SignalR версии 2
>   
> 
> 
> ## <a name="previous-versions-of-this-topic"></a>Предыдущие версии этого раздела
> 
> Сведения о более ранних версий SignalR см. в разделе [более ранних версий SignalR](../older-versions/index.md).
> 
> ## <a name="questions-and-comments"></a>Вопросы и комментарии
> 
> Оставьте отзыв на том, как вам понравилось этого учебника и что можно улучшить в комментарии в нижней части страницы. Если у вас есть вопросы, которые не связаны непосредственно для работы с учебником, их можно разместить [форум по ASP.NET SignalR](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) или [StackOverflow.com](http://stackoverflow.com/).


В этом документе содержатся следующие подразделы.

- [Вызов методов между клиентом и сервером без вмешательства пользователя завершается с ошибкой](#connection)
- [Настройка WebSocket служб IIS для проверки связи и проверка связи для выявления неисправностей клиента](#pong)
- [Другие проблемы с подключением](#other)
- [Ошибки компиляции и на стороне сервера](#server)
- [Проблемы Visual Studio](#vs)
- [Проблемы в службах IIS](#iis)
- [Выдает Microsoft Azure](#azure)

<a id="connection"></a>

## <a name="calling-methods-between-the-client-and-server-silently-fails"></a>Вызов методов между клиентом и сервером без вмешательства пользователя завершается с ошибкой

В этом разделе описываются возможные причины между клиентом и сервером, понятное сообщение в случае сбоя вызова метода. В приложении SignalR сервер не содержит информации о методах, которые реализует клиента; При сервер вызывает клиентский метод, метод имени и параметров данные отправляются клиенту, и этот метод выполняется только в том случае, если он существует в формат, указанный сервер. Если нет соответствующего метода находится на стороне клиента, ничего не происходит, и сообщение об ошибке не возникает на сервере.

Для дальнейшей диагностики клиента методов не вызван, можно включить ведение журнала перед вызовом метода, метод start в концентраторе отображать какие вызовы приходящие с сервера. Включение ведения журнала в приложении JavaScript, в разделе [как включить ведение журнала на стороне клиента (версия клиента JavaScript)](../guide-to-the-api/hubs-api-guide-javascript-client.md#logging). Чтобы включить ведение журнала в клиентском приложении .NET, в разделе [как включить ведение журнала на стороне клиента (версия клиента .NET)](../guide-to-the-api/hubs-api-guide-net-client.md#logging).

### <a name="misspelled-method-incorrect-method-signature-or-incorrect-hub-name"></a>Неправильно написанное метода, Неверный метод подписи или имя неверные концентратора

Если соответствующий метод на стороне клиента точно совпадают с именем или сигнатурой, вызванного метода, вызов завершится ошибкой. Убедитесь, что имя метода, который вызывается сервером совпадает имя метода на стороне клиента. Кроме того, SignalR создает прокси-сервера концентратора, используя методы стиле Camel, как и соответствующие на языке JavaScript, поэтому вызывается метод `SendMessage` на сервере может быть вызвана `sendMessage` в прокси клиента. Если вы используете `HubName` атрибута в своем коде на стороне сервера, убедитесь, что имя, используемое совпадает имя, используемое для создания концентратора на стороне клиента. Если вы не используете `HubName` атрибута, убедитесь, что имя концентратора в клиенте JavaScript стиле Camel, например chatHub вместо ChatHub.

### <a name="duplicate-method-name-on-client"></a>Повторяющееся имя метода на клиенте

Убедитесь, что у вас повторяющийся метод на клиенте, отличается только регистром. Если клиентское приложение содержит метод с именем `sendMessage`, убедитесь, что не существует также метод с именем `SendMessage` также.

### <a name="missing-json-parser-on-the-client"></a>Отсутствует средство синтаксического анализа JSON на стороне клиента

SignalR требуется средство синтаксического анализа JSON для сериализации вызовов между сервером и клиентом. Если клиент не имеет встроенные средства синтаксического анализа JSON (например, Internet Explorer 7), необходимо включить его в приложении. Вы можете загрузить средство синтаксического анализа JSON [здесь](http://nuget.org/packages/json2).

### <a name="mixing-hub-and-persistentconnection-syntax"></a>Смешивание концентратора и подключение PersistentConnection синтаксиса

SignalR использует две модели взаимодействия: концентраторы и PersistentConnections. Синтаксис вызова этих двух связи моделей отличается в коде клиента. При добавлении концентратор в коде сервера убедитесь, что весь код клиента использует синтаксис правильный концентратора.

**Клиентский код JavaScript, который создает подключение PersistentConnection в клиент JavaScript**

[!code-javascript[Main](troubleshooting/samples/sample1.js)]

**Клиентский код JavaScript, который создает прокси-сервер-концентратор в клиент Javascript**

[!code-javascript[Main](troubleshooting/samples/sample2.js)]

**Серверный код на C#, сопоставляет маршрут подключение PersistentConnection**

[!code-csharp[Main](troubleshooting/samples/sample3.cs)]

**Серверный код на C#, сопоставляет маршрут к концентратору или к концентраторам несколькими при наличии нескольких приложений**

[!code-css[Main](troubleshooting/samples/sample4.css)]

### <a name="connection-started-before-subscriptions-are-added"></a>Подключения, запустить до добавления подписок

Если подключение концентратора запускается до добавления методов, которые могут быть вызваны с сервера прокси-сервер, сообщения не будут приниматься. Следующий код JavaScript не запустится концентратора должным образом:

**Неверный клиентский код JavaScript, не позволит концентраторов принимать сообщения**

[!code-javascript[Main](troubleshooting/samples/sample5.js)]

Вместо этого добавьте метод подписки перед вызовом Start:

**Клиентский код JavaScript, который правильно добавляет подписки с концентратором**

[!code-javascript[Main](troubleshooting/samples/sample6.js)]

### <a name="missing-method-name-on-the-hub-proxy"></a>Отсутствует имя метода прокси-сервера концентратора

Убедитесь, что метод, определенный на сервере подписаться на стороне клиента. Несмотря на то, что сервер определяет метод, он по-прежнему должны добавляться в прокси клиента. Добавлены методы прокси-сервер клиента следующим образом (Обратите внимание, что добавляется метод `client` член концентратора не концентратора непосредственно):

**Клиентский код JavaScript, который добавляет методы прокси-сервер концентратора**

[!code-javascript[Main](troubleshooting/samples/sample7.js)]

### <a name="hub-or-hub-methods-not-declared-as-public"></a>Концентратор или методов концентратора не объявлен как Public

Чтобы быть видимым на клиенте, реализации концентратора и методов должны объявляться как `public`.

### <a name="accessing-hub-from-a-different-application"></a>Доступ к концентратору из другого приложения

Концентраторы SignalR может осуществляться только через приложения, реализующие клиентов SignalR. SignalR не может взаимодействовать с другими библиотеками взаимодействия (например, SOAP или WCF веб-службы.) Если клиент не SignalR доступен для целевой платформы, не может напрямую обращаться к конечной точке сервера.

### <a name="manually-serializing-data"></a>Сериализация данных вручную

SignalR будут автоматически использовать JSON для сериализации метод параметров здесь не нужно сделать самостоятельно.

### <a name="remote-hub-method-not-executed-on-client-in-ondisconnected-function"></a>Не выполняется на клиенте в функции OnDisconnected удаленного метода концентратора

Это сделано намеренно. Когда `OnDisconnected` — вызове концентратора уже введен `Disconnected` состояние, которое больше нельзя вызывать методы концентратора.

**Серверный код на C#, правильно выполняет код в событии OnDisconnected**

[!code-csharp[Main](troubleshooting/samples/sample8.cs)]

### <a name="ondisconnect-not-firing-at-consistent-times"></a>Не удается инициировать в согласованное время OnDisconnect

Это сделано намеренно. При попытке уходите со страницы с активного подключения SignalR клиентом SignalR, сделает все необходимое, известить сервер остановку клиентского соединения. Если клиентом SignalR усилия попытка завершается неудачно, для доступа к серверу, сервера приведет к уничтожению соединения после настраиваемые `DisconnectTimeout` позже, после чего `OnDisconnected` событие будет срабатывать. Если клиент SignalR усилия попытка окажется успешной, `OnDisconnected` событие будет срабатывать немедленно.

Сведения об установке `DisconnectTimeout` , просмотреть [обработка события времени жизни соединения: DisconnectTimeout](../guide-to-the-api/handling-connection-lifetime-events.md#disconnecttimeout).

### <a name="connection-limit-reached"></a>Достигнут предел для числа подключений

При использовании полной версии IIS в клиентской операционной системе, например Windows 7, ограничений подключения 10. При использовании клиентской ОС, используйте IIS Express вместо во избежание этого предела.

### <a name="cross-domain-connection-not-set-up-properly"></a>Не настроено подключение между доменами

Если соединение между доменами (соединение, для которого SignalR URL-адрес не в том же домене, что страница размещения) не настроен правильно, не удается установить подключение без сообщения об ошибке. Сведения о включении обмена данными между доменами см. в разделе [как для установления соединения между доменами](../guide-to-the-api/hubs-api-guide-javascript-client.md#crossdomain).

### <a name="connection-using-ntlm-active-directory-not-working-in-net-client"></a>Подключение с использованием протокола NTLM (Active Directory) не работает в клиент .NET

Подключения в клиентском приложении .NET, которая использует безопасность домена может завершиться ошибкой, если подключение не настроено должным образом. Задайте свойства соединения, необходимые для использования SignalR в среде домена, следующим образом.

**Клиентский код на C#, реализующий учетных данных соединения**

[!code-csharp[Main](troubleshooting/samples/sample9.cs)]

<a id="pong"></a>

## <a name="configuring-iis-websockets-to-pingpong-to-detect-a-dead-client"></a>Настройка WebSocket служб IIS для проверки связи и проверка связи для выявления неисправностей клиента

SignalR серверы не знаете, если клиент является мертвой или нет и они полагаются на уведомления от базовый websocket сбоев соединения, то есть OnClose обратного вызова. Одно из решений этой проблемы является настройка WebSocket служб IIS для выполнения проверки связи и проверка связи для вас. Это гарантирует, что подключения к закроется, если он неожиданно останавливается. Дополнительные сведения см. [этой записи блога stackoverflow](http://stackoverflow.com/questions/19502755/websocket-clients-state-not-changing-on-network-loss).

<a id="other"></a>

## <a name="other-connection-issues"></a>Другие проблемы с подключением

В этом разделе описываются причины и способы устранения конкретных проблем или сообщений об ошибках, возникающих во время соединения.

### <a name="start-must-be-called-before-data-can-be-sent-error"></a>Ошибка «Start должен вызываться перед отправкой данных»

Эта ошибка часто возникает, если код ссылается на объекты SignalR до начала соединения. Присоединит для обработчиков и like, будут вызывать методы, определенные на сервере необходимо добавить после создания подключения. Обратите внимание, что вызов `Start` является асинхронным, поэтому код после вызова может выполняться до его завершения. Для добавления обработчиков после подключения запуска полностью рекомендуется поместить их в функцию обратного вызова, передаваемый в качестве параметра в метод start:

**Клиентский код JavaScript, который правильно добавляет обработчики событий, которые ссылаются на объекты SignalR**

[!code-javascript[Main](troubleshooting/samples/sample10.js?highlight=1)]

Эта ошибка также могут появляться, если соединение останавливает время по-прежнему ссылаются объекты SignalR.

### <a name="301-moved-permanently-or-302-moved-temporarily-error"></a>«301 перемещен окончательно» или «302 Перемещен временно» ошибка

Эта ошибка может возникать, если проект содержит папку с именем SignalR, в которой будет мешать автоматически создается прокси-сервера. Чтобы избежать этой ошибки, не используйте папку с именем `SignalR` в приложение, или создания прокси на автоматическое включение off. В разделе [созданного прокси и делает за вас](../guide-to-the-api/hubs-api-guide-javascript-client.md#genproxy) для получения дополнительных сведений.

### <a name="403-forbidden-error-in-net-or-silverlight-client"></a>Ошибка «403 запрещено» в клиент .NET или Silverlight

Эта ошибка может возникнуть в средах между доменами, где связь между доменами не включена должным образом. Сведения о включении обмена данными между доменами см. в разделе [как для установления соединения между доменами](../guide-to-the-api/hubs-api-guide-javascript-client.md#crossdomain). Для установления соединения между доменами в клиент Silverlight, в разделе [соединения между доменами от клиентов Silverlight](../guide-to-the-api/hubs-api-guide-net-client.md#slcrossdomain).

### <a name="404-not-found-error"></a>Ошибка «404 не найдено»

Существует несколько причин этой проблемы. Проверьте все указанные ниже:

- **Ссылка на адресов прокси-сервера концентратора неправильный формат:** Эта ошибка обычно возникает, если ссылку на созданный концентратор прокси-адрес имеет неправильный формат. Проверьте, правильно становится ссылка на адрес в концентратор. В разделе [как ссылаться на динамически созданный прокси](../guide-to-the-api/hubs-api-guide-javascript-client.md#dynamicproxy) подробные сведения.
- **Добавление маршрутов для приложения, прежде чем добавлять маршрут концентратора:** Если приложение использует другие маршруты, убедитесь, что добавления маршрута первый вызов `MapSignalR`.
- **С помощью служб IIS 7 и 7.5 без обновления без расширений URL-адресов:** с помощью IIS 7 и 7.5 требует обновления без расширений URL-адресов, чтобы сервер может предоставлять доступ к определениям концентратора в `/signalr/hubs`. Обновление можно найти [здесь](https://support.microsoft.com/kb/980368).
- **IIS кэшировать устарела или привести к повреждению:** чтобы убедиться, что содержимое кэша не устарела, введите следующую команду в окне PowerShell, чтобы очистить кэш:

    [!code-powershell[Main](troubleshooting/samples/sample11.ps1)]

### <a name="500-internal-server-error"></a>«500 Внутренняя ошибка сервера»

Это очень Общая ошибка, которая может иметь широкий спектр причины. Сведения об ошибке должны появиться в журнале событий сервера, или можно найти по отладку сервера. Более подробные сведения об ошибке можно получить, включив подробных сообщений об ошибках на сервере. Дополнительные сведения см. в разделе [способ обработки ошибок в классе концентратора](../guide-to-the-api/hubs-api-guide-server.md#handleErrors).

Эта ошибка возникает часто, если брандмауэр или прокси-сервера не настроена правильно, причиной заголовки запроса перезаписывается. Решение заключается в том, чтобы убедиться в том, что порт 80 включена брандмауэра или прокси-сервера.

### <a name="unexpected-response-code-500"></a>«Код неожиданный ответ: 500»

Эта ошибка возникает в том случае, если версия платформы .NET framework, используемая в приложении не соответствует версии, указанной в файле Web.Config. Решение заключается в том, чтобы убедиться, что .NET 4.5 используется в настройках приложения и файл Web.Config.

### <a name="typeerror-lthubtypegt-is-undefined-error"></a>«TypeError: &lt;hubType&gt; не определено» ошибки

Эта ошибка возникнет при вызове `MapSignalR` не выполняется должным образом. В разделе [как зарегистрировать SignalR по промежуточного слоя и настройте параметры SignalR](../guide-to-the-api/hubs-api-guide-server.md#route) для получения дополнительной информации.

### <a name="jsonserializationexception-was-unhandled-by-user-code"></a>JsonSerializationException было обработано пользовательским кодом

Убедитесь, что параметры, отправляемые в методы содержит несериализуемые типов (таких как дескрипторы файлов или подключения к базе данных). Если необходимо использовать элементы на стороне сервера объекте, но вы не хотите отправить клиенту (или для безопасности или по причинам, сериализации), используйте `JSONIgnore` атрибута.

### <a name="protocol-error-unknown-transport-error"></a>«Ошибка протокола: неизвестный транспорт» ошибка

Эта ошибка возникает в том случае, если клиент не поддерживает транспортов, которые использует SignalR. В разделе [транспортов и в случае ошибки](../getting-started/introduction-to-signalr.md#transports) сведения, на которой браузеры могут использоваться с SignalR.

### <a name="javascript-hub-proxy-generation-has-been-disabled"></a>«Создание прокси-сервера JavaScript Hub была отключена.»

Эта ошибка возникает, если `DisableJavaScriptProxies` задаются в процессе содержит ссылку на динамически созданный прокси на `signalr/hubs`. Дополнительные сведения о создании учетной записи-посредника вручную см. в разделе [созданный прокси и делает за вас](../guide-to-the-api/hubs-api-guide-javascript-client.md#genproxy).

### <a name="the-connection-id-is-in-the-incorrect-format-or-the-user-identity-cannot-change-during-an-active-signalr-connection-error"></a>«Идентификатор подключения имеет неправильный формат» или «удостоверение пользователя нельзя изменить во время активного подключения SignalR» ошибка

Эта ошибка может возникать, если используется проверка подлинности и выходе клиента, прежде чем подключение остановлено. Решение заключается в том, чтобы остановить подключения SignalR до выхода клиента.

### <a name="uncaught-error-signalr-jquery-not-found-please-ensure-jquery-is-referenced-before-the-signalrjs-file-error"></a>«Ошибка неперехваченное: SignalR: не удалось найти jQuery. Ошибка, убедитесь, что существует jQuery перед SignalR.js файл»

SignalR JavaScript для клиента требуется jQuery для запуска. Проверьте правильность пути, используемого, а также ссылку на jQuery предшествует ссылку на SignalR справочной информации для jQuery.

### <a name="uncaught-typeerror-cannot-read-property-ltpropertygt-of-undefined-error"></a>«Неперехваченное TypeError: не удалось считать свойство "&lt;свойство&gt;" не определено для» ошибка

Эта ошибка возникает из отсутствия jQuery или концентраторов прокси-сервера, правильность ссылок. Убедитесь, что справочной информации для jQuery и прокси-концентраторы правильность пути, используемого, а также ссылку на jQuery предшествует ссылку на концентраторы прокси-сервера. Справочник по умолчанию концентраторов прокси-сервер должен выглядеть следующим образом:

**Клиентский код HTML, правильно ссылается на учетную запись-посредник концентраторы**

[!code-html[Main](troubleshooting/samples/sample12.html)]

### <a name="runtimebinderexception-was-unhandled-by-user-code-error"></a>Ошибка «RuntimeBinderException было обработано пользовательским кодом»

Эта ошибка может возникать при неверные перегруженный `Hub.On` используется. Если метод имеет возвращаемое значение, тип возвращаемого значения указывается как параметр универсального типа:

**Метод, определенный на клиенте (без созданный прокси-сервера)**

[!code-html[Main](troubleshooting/samples/sample13.html?highlight=1)]

### <a name="connection-id-is-inconsistent-or-connection-breaks-between-page-loads"></a>Идентификатор соединения не согласована, или разрыва соединения между загрузке страницы

Это сделано намеренно. Поскольку объект концентратора размещается в объект страницы, концентратор уничтожается при обновлении страницы. Приложению многостраничную для поддержки связи между пользователями и идентификаторов подключений, чтобы они были согласованы между загрузке страницы. Идентификаторов подключений, которые могут храниться на сервере, либо `ConcurrentDictionary` объекта или базы данных.

### <a name="value-cannot-be-null-error"></a>Ошибка «Значение не может быть null»

Методы на стороне сервера с необязательными параметрами в настоящее время не поддерживаются; Если необязательный параметр опущен, метод завершится с ошибкой. Дополнительные сведения см. в разделе [необязательные параметры](https://github.com/SignalR/SignalR/issues/324).

### <a name="firefox-cant-establish-a-connection-to-the-server-at-ltaddressgt-error-in-firebug"></a>«Firefox не удается установить подключение к серверу через &lt;адрес&gt;«ошибка в Firebug

Это сообщение об ошибке может отображаться в Firebug, если происходит сбой согласования транспорта WebSocket и вместо него используется другой транспорт. Это сделано намеренно.

### <a name="the-remote-certificate-is-invalid-according-to-the-validation-procedure-error-in-net-client-application"></a>Ошибка «удаленный сертификат недействителен согласно процедуры проверки» в клиентском приложении .NET

Если сервер требует пользовательских клиентских сертификатов, затем можно добавить подключение x509certificate, перед выполнением запроса. Добавить сертификат для соединения с помощью `Connection.AddClientCertificate`.

### <a name="connection-drops-after-authentication-times-out"></a>Удаляет соединение после проверки подлинности время ожидания

Это сделано намеренно. Учетные данные проверки подлинности нельзя изменить, если подключение активно; Чтобы обновить учетные данные, соединение необходимо остановить и перезапустить.

### <a name="onconnected-gets-called-twice-when-using-jquery-mobile"></a>OnConnected вызывается два раза в том случае, когда с помощью jQuery Mobile

jQuery Mobile `initializePage` функция принудительно скрипты на каждой странице, чтобы выполнить повторно, тем самым создавая второе подключение. Включить решения этой проблемы:

- Включайте ссылку на jQuery Mobile, прежде чем файл JavaScript.
- Отключить `initializePage` функции, задав `$.mobile.autoInitializePage = false`.
- Подождите, пока страница для завершения инициализации перед запуском соединения.

### <a name="messages-are-delayed-in-silverlight-applications-using-server-sent-events"></a>Сообщения задержаны в приложениях Silverlight, с помощью отправки событий сервера

Сообщения задержаны об отправке с помощью сервера события на Silverlight. Чтобы принудительно продолжительный опрос для использования вместо этого, используйте следующие параметры при запуске подключения.

[!code-css[Main](troubleshooting/samples/sample14.css)]

### <a name="permission-denied-using-forever-frame-protocol"></a>С помощью «Разрешение Denied» навсегда фрейма протокола

Это известная проблема, описано [здесь](https://github.com/SignalR/SignalR/issues/1963). Эта проблема может возникать, с помощью последней библиотеки JQuery; Это решение подходит для возврата к предыдущей версии приложения для JQuery 1.8.2.

### <a name="invalidoperationexception-not-a-valid-web-socket-request"></a>«InvalidOperationException: не является допустимым запросом WebSocket.

Эта ошибка возникает в том случае, если используется протокол WebSocket, но сетевой прокси-сервер изменение заголовков запроса. Решение заключается в том, чтобы настроить прокси-сервера, чтобы разрешить WebSocket на порт 80.

### <a name="exception-ltmethod-namegt-method-could-not-be-resolved-when-client-calls-method-on-server"></a>«Исключение: &lt;имя метода&gt; не удалось разрешить метод «когда клиент вызывает метод на сервере

Эта ошибка может быть результатом использование типов данных, которые не могут быть обнаружены в полезные данные JSON, например массива. Это решение подходит для использования типа данных, который можно обнаружить с JSON, например IList. Дополнительные сведения см. в разделе [клиенту .NET не удается вызывать методы концентратора с помощью параметров-массивов](https://github.com/SignalR/SignalR/issues/2672).

<a id="server"></a>

## <a name="compilation-and-server-side-errors"></a>Ошибки компиляции и на стороне сервера

 В следующем разделе приведены возможные решения для компилятора и ошибки времени выполнения стороне сервера. 

### <a name="reference-to-hub-instance-is-null"></a>Ссылка на экземпляр концентратора имеет значение null

Так как для каждого соединения, создается экземпляр концентратора невозможно создать экземпляр концентратора в коде самостоятельно. Для вызова методов в концентратор из за пределами самого концентратора, в разделе [как вызывать методы клиента групп и управление ими из вне класса концентратора](../guide-to-the-api/hubs-api-guide-server.md#callfromoutsidehub) способ получить ссылку на контекст концентратора.

### <a name="httpcontextcurrentsession-is-null"></a>HTTPContext.Current.Session имеет значение null

Это сделано намеренно. SignalR не поддерживает состояние сеанса ASP.NET, так как Включение состояния сеанса будет нарушена дуплексного обмена сообщениями.

### <a name="no-suitable-method-to-override"></a>Не подходящий метод для переопределения

Появится это сообщение об ошибке при использовании кода из документацию к предыдущим версиям или блогов. Убедитесь, что вы не ссылаются на имена методов, которые были изменены или устаревшие (такие как `OnConnectedAsync`).

### <a name="hostcontextextensionswebsocketserverurl-is-null"></a>HostContextExtensions.WebSocketServerUrl имеет значение null

Это сделано намеренно. Данный член является устаревшим и не должны использоваться.

### <a name="a-route-named-signalrhubs-is-already-in-the-route-collection-error"></a>Ошибка «маршрут с именем «signalr.hubs» уже находится в коллекции маршрутов»

Эта ошибка возникает, если `MapSignalR` вызывается дважды для приложения. Некоторые приложения вызывают пример `MapSignalR` непосредственно в класс Startup; другим пользователям в вызове в класс-оболочку. Убедитесь, что приложение не оба.

### <a name="websocket-is-not-used"></a>WebSocket не используется

Если вы убедились, что сервер и клиенты требованиям для WebSocket (перечисленных в [поддерживаемые платформы](../getting-started/supported-platforms.md) документа), вам потребуется включить WebSocket на сервере. Инструкции для этого можно найти [здесь](https://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-websocket-protocol-support).

### <a name="connection-is-undefined"></a>$.connection не определено

Эта ошибка указывает, что скрипты на странице не загружены должным образом, или прокси-сервера концентратора недоступен или осуществляется неправильно. Проверьте соответствие скриптов, загруженных в проект ссылки на скрипты на странице, и что /signalr/hubs может осуществляться в браузере при запуске сервера.

### <a name="one-or-more-types-required-to-compile-a-dynamic-expression-cannot-be-found"></a>Не удается найти один или несколько типов, необходимых для компиляции динамического выражения

Эта ошибка указывает, что `Microsoft.CSharp` отсутствует библиотека. Добавьте его в **сборки -&gt;Framework** вкладки.

### <a name="caller-state-cannot-be-accessed-from-clientscaller-in-visual-basic-or-in-a-strongly-typed-hub-conversion-from-type-taskof-object-to-type-string-is-not-valid-error"></a>Состояние вызывающего объекта не может осуществляться из Clients.Caller в Visual Basic или в строго типизированный концентратора; Ошибка «Преобразование из типа «Task (Of Object)» в тип «String» не является допустимым»

Чтобы получить состояние вызывающего объекта в Visual Basic или в строго типизированный концентратора, используйте `Clients.CallerState` (впервые появилась в SignalR 2.1) вместо свойства `Clients.Caller`.

<a id="vs"></a>

## <a name="visual-studio-issues"></a>Проблемы Visual Studio

В этом разделе описываются проблем, возникающих в Visual Studio.

### <a name="script-documents-node-does-not-appear-in-solution-explorer"></a>Узел документов скрипта не отображается в обозревателе решений

Некоторые из наших учебниках дать вам ссылки на узел «Документы скрипта» в обозревателе решений во время отладки. Этот узел произведенное отладчик JavaScript и отображается только при отладке клиенты браузера в Internet Explorer; узел не будет отображаться при использовании Chrome или Firefox. Отладчик JavaScript также не будет выполняться, если выполняется другой отладчик клиента, такие как отладчик Silverlight.

### <a name="signalr-does-not-work-on-visual-studio-2008-or-earlier"></a>SignalR не работает в Visual Studio 2008 или более ранней версии

Это сделано намеренно. SignalR требуется платформа .NET Framework 4 или более поздней версии; для этого необходимо разработать SignalR приложений в Visual Studio 2010 или более поздней версии. Компонент сервера SignalR требуется .NET Framework 4.5.

<a id="iis"></a>

## <a name="iis-issues"></a>Проблем IIS

Этот раздел содержит проблем со службами IIS.

### <a name="signalr-works-on-visual-studio-development-server-but-not-in-iis"></a>SignalR работает с Visual Studio development server, но не в службах IIS

SignalR поддерживаются в IIS 7.0 и 7.5, но поддержка без расширений URL-адреса должны быть добавлены. Чтобы добавить поддержку без расширений URL-адресов, в разделе [https://support.microsoft.com/kb/980368](https://support.microsoft.com/kb/980368)

SignalR требуется ASP.NET устанавливается на сервере (ASP.NET не установлена на сервере IIS по умолчанию). Установка ASP.NET в разделе [загрузок ASP.NET](https://www.asp.net/downloads).

<a id="azure"></a>

## <a name="microsoft-azure-issues"></a>Выдает Microsoft Azure

Этот раздел содержит проблемы, связанные с Microsoft Azure.

### <a name="fileloadexception-when-hosting-signalr-in-an-azure-worker-role"></a>FileLoadException при размещении SignalR в рабочей роли Azure

Размещение SignalR в рабочей роли Azure может привести к исключение «не удалось загрузить файл или сборку "Microsoft.Owin, Version = 2.0.0.0». Это известная проблема с помощью NuGet; Перенаправление привязки не добавляются автоматически в проектах рабочей роли Azure. Чтобы устранить эту проблему, можно вручную добавить перенаправления привязки. Добавьте следующие строки для `app.config` файл проекта рабочей роли.

[!code-xml[Main](troubleshooting/samples/sample15.xml)]

### <a name="messages-are-not-received-through-the-azure-backplane-after-altering-topic-names"></a>Не были получены сообщения через Azure объединительной платы после изменения раздела имена

Разделы, используемые Azure объединительной платы хранятся в системе; они не предназначены для настройки пользователя.
