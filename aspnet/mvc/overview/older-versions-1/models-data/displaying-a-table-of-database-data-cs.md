---
uid: mvc/overview/older-versions-1/models-data/displaying-a-table-of-database-data-cs
title: "Отображение таблицы базы данных (C#) | Документы Microsoft"
author: microsoft
description: "В этом учебнике я демонстрируются два способа отображения набора записей базы данных. Показать два метода форматирования набора записей базы данных в HTML-ta..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/07/2008
ms.topic: article
ms.assetid: d6e758b6-6571-484d-a132-34ee6c47747a
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/models-data/displaying-a-table-of-database-data-cs
msc.type: authoredcontent
ms.openlocfilehash: 37ea081df2ee26e186669b815a4d769e1976ae9c
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="displaying-a-table-of-database-data-c"></a>Отображение таблицы базы данных (C#)
====================
по [Microsoft](https://github.com/microsoft)

[Скачать PDF](http://download.microsoft.com/download/1/1/f/11f721aa-d749-4ed7-bb89-a681b68894e6/ASPNET_MVC_Tutorial_11_CS.pdf)

> В этом учебнике я демонстрируются два способа отображения набора записей базы данных. Показать два метода форматирования набора записей базы данных в таблицу HTML. Во-первых я расскажу, как можно форматировать записи базы данных непосредственно в представлении. Далее я продемонстрирую, как можно воспользоваться преимуществами частичными репликами при форматировании записи базы данных.


Целью данного учебника является объясняется, как отображать HTML-таблицы базы данных в приложении ASP.NET MVC. Во-первых вы узнаете, как использовать средства формирования шаблонов, включенные в Visual Studio для создания представления, автоматически отображается набор записей. Далее показано, как использовать разделяемый в качестве шаблона при форматировании записи базы данных.

## <a name="create-the-model-classes"></a>Создать классы модели

Мы собираемся отображение набора записей из таблицы базы данных фильмов. Фильмы таблицы базы данных содержит следующие столбцы:

<a id="0.3_table01"></a>


| **Имя столбца** | **Тип данных** | **Разрешить значения NULL** |
| --- | --- | --- |
| Идентификатор | Int | False |
| Заголовок | Nvarchar(200) | False |
| Директор | NVarchar(50) | False |
| DateReleased | DateTime | False |


Для представления таблицы фильмы в приложении ASP.NET MVC, необходимо создать класс модели. В этом учебнике мы используем для создания классов нашей модели Entity Framework корпорации Майкрософт.

> [!NOTE] 
> 
> В этом учебнике мы используем Entity Framework корпорации Майкрософт. Тем не менее важно понимать, что можно использовать множество различных технологий для взаимодействия с базой данных из приложения ASP.NET MVC, включая LINQ to SQL, NHibernate и ADO.NET.


Выполните следующие действия, чтобы запустить мастер моделей EDM.

1. Щелкните правой кнопкой мыши папку модели в окне обозревателя решений и выберите пункт меню **добавить, новый элемент**.
2. Выберите **данные** категорию и выберите **ADO.NET Entity Data Model** шаблона.
3. Присвойте имя модели данных *MoviesDBModel.edmx* и нажмите кнопку **добавить** кнопки.

После нажатия кнопки Добавить появится мастер моделей EDM (см. рис. 1). Выполните следующие действия, чтобы завершить работу мастера.

1. В **Выбор содержимого модели** шаг, выберите **создать из базы данных** параметр.
2. В **Выбор подключения к данным** шаг, используйте *MoviesDB.mdf* подключения данных и имени *MoviesDBEntities* параметров подключения. Нажмите кнопку **Далее** кнопки.
3. В **Выбор объектов базы данных** шаг, разверните узел таблицы, выберите таблицу, фильмов. Введите пространство имен *моделей* и нажмите кнопку **Готово** кнопки.


[![Создание LINQ для классов SQL](displaying-a-table-of-database-data-cs/_static/image1.jpg)](displaying-a-table-of-database-data-cs/_static/image1.png)

**На рисунке 01**: создание классов LINQ to SQL ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image2.png))


После завершения мастера моделей EDM, откроется конструктор модели EDM. Конструктор должен отображать фильмы сущностей (см. рис. 2).


[![Конструктор моделей EDM](displaying-a-table-of-database-data-cs/_static/image2.jpg)](displaying-a-table-of-database-data-cs/_static/image3.png)

**На рисунке 02**: конструктор моделей EDM ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image4.png))


Необходимо внести одно изменение, перед продолжением. Мастер EDM создает класс с именем модели *фильмов* , представляющий таблицу базы данных фильмов. Так как мы будем использовать фильмы класс для представления определенного фильма, необходимо изменить имя класса, чтобы быть *фильма* вместо *фильмов* (единственного числа вместо множественного числа).

Дважды щелкните имя класса в рабочей области конструктора и измените имя класса из фильмов на фильма. После внесения этого изменения, нажмите кнопку **Сохранить** кнопку (значок дискеты) для создания класса фильма.

## <a name="create-the-movies-controller"></a>Создание контроллера фильмов

Теперь, когда у нас есть способ представления нашим записям базы данных, можно создать контроллер, который возвращает коллекции фильмов. В окне обозревателя решений Visual Studio щелкните правой кнопкой мыши папку Controllers и выбрать пункт меню **Add, контроллер** (см. рис. 3).


[![Добавить контроллер меню](displaying-a-table-of-database-data-cs/_static/image3.jpg)](displaying-a-table-of-database-data-cs/_static/image5.png)

**На рисунке 03**: добавить контроллер меню ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image6.png))


Когда **добавить контроллер** откроется диалоговое окно, введите имя контроллера MovieController (см. рис. 4). Нажмите кнопку **добавить** кнопку, чтобы добавить новый контроллер.


[![Диалоговое окно добавления контроллера](displaying-a-table-of-database-data-cs/_static/image4.jpg)](displaying-a-table-of-database-data-cs/_static/image7.png)

**На рисунке 04**: диалоговое окно добавления контроллера ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image8.png))


Нам нужно изменить действие Index(), предоставляемые контроллером фильм, чтобы он возвращал набора записей базы данных. Контроллер, чтобы он выглядел контроллера в листинге 1.

**Перечисление Controllers\MovieController.cs. 1.**

[!code-csharp[Main](displaying-a-table-of-database-data-cs/samples/sample1.cs)]

В список 1 MoviesDBEntities класс используется для представления MoviesDB базы данных. Чтобы использовать этот класс, необходимо импортировать пространство имен MvcApplication1.Models следующим образом:

с помощью MvcApplication1.Models;

Выражение *сущностей. MovieSet.ToList()* возвращает набор всех фильмов фильмы таблицы базы данных.

## <a name="create-the-view"></a>Создание представления

Чтобы воспользоваться преимуществами формирование шаблонов, предоставляемых Visual Studio — самый простой способ отображения набора записей базы данных в таблицу HTML.

Построить приложение, выбрав параметр меню **построить, построить решение**. Необходимо построить приложение, прежде чем открывать **добавить представление** диалогового окна или пользовательские классы данных не будет отображаться в диалоговом окне.

Щелкните правой кнопкой мыши действие Index() и выбрать пункт меню **добавить представление** (см. рис. 5).


[![Добавление представления](displaying-a-table-of-database-data-cs/_static/image5.jpg)](displaying-a-table-of-database-data-cs/_static/image9.png)

**На рисунке 05**: Добавление представления ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image10.png))


В **добавить представление** диалогового окна, установите флажок "с меткой" **создать строго типизированное представление**. Выберите класс фильма как **просматривать данные класс**. Выберите *списка* как **просматривать содержимое** (см. рис. 6). Выбор этих параметров создает строго типизированное представление, отображающее список фильмов.


[![Диалоговое окно добавления представления](displaying-a-table-of-database-data-cs/_static/image6.jpg)](displaying-a-table-of-database-data-cs/_static/image11.png)

**На рисунке 06**: диалоговое окно добавления представления ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image12.png))


После нажатия кнопки **добавить** автоматически создается кнопка, представление в списке 2. Это представление содержит код, необходимый для прохода по коллекции фильмов и отображения всех свойств фильма.

**Перечисление Views\Movie\Index.aspx. 2.**

[!code-aspx[Main](displaying-a-table-of-database-data-cs/samples/sample2.aspx)]

Приложение можно запустить, выбрав параметр меню **отладка, начать отладку** (или при нажатии клавиши F5). Запуск приложения запускает Internet Explorer. Если перейти по URL-адресу /Movie вы увидите страницу на рис. 7.


[![Таблица фильмов](displaying-a-table-of-database-data-cs/_static/image7.jpg)](displaying-a-table-of-database-data-cs/_static/image13.png)

**На рисунке 07**: таблица фильмов ([Просмотр полноразмерное изображение](displaying-a-table-of-database-data-cs/_static/image14.png))


Если вам не нравится что-либо о внешний вид сетки, записей базы данных на рис. 7 можно просто изменить представление Index. Например, можно изменить *DateReleased* заголовок *Дата выпуска* , изменив индекс представления.

## <a name="create-a-template-with-a-partial"></a>Создание шаблона с частичной

При представлении станет слишком сложным, рекомендуется запустить остановом представление частичными репликами. С помощью частичными репликами упрощает представлений для понимания и поддержки. Мы создадим разделяемый, можно использовать в качестве шаблона для форматирования каждой записи фильма базы данных.

Выполните следующие действия для создания изменяющего столбец разделяемого.

1. Щелкните правой кнопкой мыши папку Views\Movie и выбрать пункт меню **добавить представление**.
2. Установите флажок "с меткой" *Создать разделяемое представление (ASCX)*.
3. Имя частичного *MovieTemplate*.
4. Установите флажок "с меткой" **создать строго типизированное представление**.
5. Выберите фильм в качестве *просматривать данные класс*.
6. Выберите пустой как *просматривать содержимое*.
7. Нажмите кнопку **добавить** кнопку, чтобы добавить разделяемом в проект.

После выполнения этих действий изменения частичное MovieTemplate должен выглядеть как листинге 3.

**Листинг 3 – Views\Movie\MovieTemplate.ascx**

[!code-aspx[Main](displaying-a-table-of-database-data-cs/samples/sample3.aspx)]

Partial в списке 3 содержит шаблон для одной строки записей.

Измененный представление Index в листинге 4 использует MovieTemplate частичной.

**Листинг 4 – Views\Movie\Index.aspx**

[!code-aspx[Main](displaying-a-table-of-database-data-cs/samples/sample4.aspx)]

Представление со списком 4 содержит цикл, который выполняет итерацию всех фильмы. Для каждого фильма частичного MovieTemplate используется для форматирования фильма. Путем вызова вспомогательного метода RenderPartial() MovieTemplate подготавливается к просмотру.

Измененный представление индекса представляет то же самое таблицу HTML записей базы данных. Однако представление значительно упрощен.


Метод RenderPartial() отличается от большинства других вспомогательных методов, так как он не возвращает строки. Таким образом, необходимо вызвать метод RenderPartial() с помощью &lt;% Html.RenderPartial(); %&gt; вместо &lt;% = Html.RenderPartial(); %&gt;.


## <a name="summary"></a>Сводка

Целью данного учебника было объясняется, как отображать набора записей базы данных в таблицу HTML. Во-первых вы узнали, как получить набор записей базы данных из действия контроллера, используя преимущества платформы Entity Framework корпорации Майкрософт. Далее вы узнали, как использовать формирование шаблонов Visual Studio для создания представления, автоматически отображается коллекция элементов. Наконец вы узнали, как для упрощения просмотра, используя преимущества частичной. Вы узнали, как использовать разделяемый в качестве шаблона, что можно форматировать каждой записи базы данных.

>[!div class="step-by-step"]
[Назад](creating-model-classes-with-linq-to-sql-cs.md)
[Вперед](performing-simple-validation-cs.md)
