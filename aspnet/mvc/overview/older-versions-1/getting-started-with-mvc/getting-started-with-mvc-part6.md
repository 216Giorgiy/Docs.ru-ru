---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: "Добавление Create-метод и создать представление | Документы Microsoft"
author: shanselman
description: "Это руководство для новичков, в котором представлены основные сведения по ASP.NET MVC. Создание простого веб-приложения, чтение и запись из базы данных."
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/14/2010
ms.topic: article
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 36b3d6ef0432292f21ecd8f29ea2d88ee8867436
ms.sourcegitcommit: a510f38930abc84c4b302029d019a34dfe76823b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2018
---
<a name="adding-a-create-method-and-create-view"></a>Добавление создайте метод и создание представления
====================
по [Скотт Хансельман](https://github.com/shanselman)

> Это руководство для новичков, в котором представлены основные сведения по ASP.NET MVC. Вы создадите простое веб-приложение выполняет чтение и запись из базы данных. Посетите [центр обучения ASP.NET MVC](../../../index.md) для поиска других ASP.NET MVC, учебники и примеры.


В этом разделе мы собираемся реализовать поддержку, необходимую для позволяют пользователям создавать новые фильмы в базе данных. Нам предстоит выполнить путем реализации фильмов или создать URL-адрес действия.

Реализация фильмов или создать URL-адрес является в два этапа. Пользователь посещает в первую очередь фильмов или создать URL-адрес мы хотим отобразить их в HTML-форму, можно заполнить для ввода новых фильмов. Затем когда пользователь отправляет форму и записи данных обратно на сервер, мы хотим получить отправленное содержимое и сохраните его в базу данных.

Следующие два действия в двух методах Create() реализуется в нашем классе MoviesController. Будет отображаться один метод &lt;формы&gt; , пользователь должен заполнять для создания новых фильмов. Второй способ обработки данных при отправке &lt;формы&gt; обратно на сервер и сохранить новый фильм в базе данных.

Ниже приведен полный код мы добавим наш MoviesController класс, чтобы реализовать это:

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

Приведенный выше код содержит весь код, он понадобится в нашем контроллера.

Теперь рассмотрим процедуру внедрения Create View шаблон, который будет использоваться для отображения формы для пользователя. Мы будем щелкните правой кнопкой мыши в первый метод Create и выберите «Добавить представление» для создания шаблона представления для нашу форму фильма.

Мы выберем мы будет передавать Просмотр шаблона «Фильм» как класс представления данных, которые указывают, что мы хотим «на основе скаффолдинга» шаблон «Создать».

[![Добавить представление](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)

После нажатия кнопки "Добавить" \Movies\Create.aspx Просмотр шаблона создается автоматически. Так как мы выбрали «Создать» из раскрывающегося списка «Просмотр содержимого», диалоговое окно добавления представления автоматически «формирования шаблонов» содержимое по умолчанию для нас. Формирование шаблонов создана HTML &lt;формы&gt;, место для ошибки проверки сообщений для перехода, и с момента формирования шаблонов знает о фильмах, она создана метки и поля для каждого свойства класса.

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

Так как идентификатор базе данных автоматически предоставляет фильм, удалим эти поля этой эталонной модели. Идентификатор из наших создать представление. Удалить строки 7 после &lt;условных обозначений&gt;поля&lt;/legend&gt; как они показывают поля «идентификатор» в том, что мы не хотим.

Теперь давайте создать новый фильма и добавить его в базу данных. Мы это сделать, запустив приложение еще раз и посетите «/ фильмов» связать URL-адрес и нажмите кнопку «Создать» для добавления новых фильмов.

[![Создание - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)

После нажатия кнопки «Создать», мы будем публиковать обратно (через HTTP POST) данные в этой форме /Movies/Create метода, который мы только что создали. Так же, как при система автоматически заняло параметр «numTimes» и «name», вне URL-адрес и сопоставить их с параметрами метода ранее система автоматически получить дополнительные поля формы POST и сопоставить их с объектом. В этом случае значений из полей в формате HTML, такие как «ReleaseDate» и «Title» будет автоматически помещен в необходимые свойства нового экземпляра фильма.

Давайте взглянем на второй метод Create из наших MoviesController еще раз. Обратите внимание на то, как он принимает объект «Фильма» в качестве аргумента:

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

Этот объект фильма затем передается [HttpPost] версия наш метод действия Create, и мы хранится в базе данных, а затем перенаправляется пользователь метод действия Index(), который будет отображать сохраненный результат в списке фильма:

[![Список фильмов - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)

Мы не проверки, если нашей фильмы указаны правильно, однако, а базы данных не позволяет сохранить с без названия фильма. Было бы неплохо, если мы может уведомить пользователя, что перед базы данных возникла ошибка. Дальнейшие действия будут выполнены, добавляя поддержку проверки для нашего приложения.

>[!div class="step-by-step"]
[Назад](getting-started-with-mvc-part5.md)
[Вперед](getting-started-with-mvc-part7.md)
