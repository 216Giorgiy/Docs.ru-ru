---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: "Итерация &#6; — использование управляемой тестами разработки (Visual Basic) | Документы Microsoft"
author: microsoft
description: "В итерации этого шестой мы добавим новые функциональные возможности наше приложение, сначала написание модульных тестов и писать код для модульных тестов. В этой итерации..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: 9b558df9c0b44f5f76115270d361b6022658f9f9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="34bc2-104">Итерация &#6; — использование управляемой тестами разработки (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="34bc2-104">Iteration #6 – Use test-driven development (VB)</span></span>
====================
<span data-ttu-id="34bc2-105">по [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="34bc2-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="34bc2-106">Загрузить исходный код</span><span class="sxs-lookup"><span data-stu-id="34bc2-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="34bc2-107">В итерации этого шестой мы добавим новые функциональные возможности наше приложение, сначала написание модульных тестов и писать код для модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="34bc2-108">В этой итерации добавим групп контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="34bc2-109">Создание приложения ASP.NET MVC управления контактами (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="34bc2-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>
  

<span data-ttu-id="34bc2-110">В этой серии учебники мы создаем всего приложения управления контактами от начала и завершения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="34bc2-111">Приложение диспетчера контактов позволяет хранить контактные данные - имена, номера телефонов и адресов электронной почты — список людей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="34bc2-112">Мы постройте приложение в нескольких итерациях.</span><span class="sxs-lookup"><span data-stu-id="34bc2-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="34bc2-113">С каждой итерацией постепенно мы улучшить приложение.</span><span class="sxs-lookup"><span data-stu-id="34bc2-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="34bc2-114">Это несколько итераций предназначена для того, чтобы позволяют понять причину для каждого изменения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="34bc2-115">Итерации #1 - создать приложение.</span><span class="sxs-lookup"><span data-stu-id="34bc2-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="34bc2-116">В первой итерации мы создадим диспетчера контактов простейшим способом невозможно.</span><span class="sxs-lookup"><span data-stu-id="34bc2-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="34bc2-117">Добавлена поддержка для основных операций базы данных: создание, чтение, обновление и удаление (CRUD).</span><span class="sxs-lookup"><span data-stu-id="34bc2-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="34bc2-118">Итерации #2 — сделать приложение поиска работы с низким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="34bc2-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="34bc2-119">В этой итерации нам улучшить внешний вид приложения, изменив значение по умолчанию главной страницы представления ASP.NET MVC и каскадные таблицы стилей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="34bc2-120">Итерации #3 - Добавление проверки формы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="34bc2-121">В третьем проходе добавим проверки базовой формы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="34bc2-122">Мы запретить отправки формы, не завершая обязательные поля.</span><span class="sxs-lookup"><span data-stu-id="34bc2-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="34bc2-123">Мы также для проверки адреса электронной почты и номера телефонов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="34bc2-124">Итерации #4 - сделать приложение слабо.</span><span class="sxs-lookup"><span data-stu-id="34bc2-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="34bc2-125">В этой третьей итерации мы воспользоваться преимуществами нескольких шаблонов разработки программного обеспечения, чтобы упростить обслуживание и изменить приложение диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="34bc2-126">Например мы выполнили рефакторинг наше приложение, чтобы использовать шаблон репозитория и шаблон внедрения зависимостей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="34bc2-127">Итерации #5 - Создание модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="34bc2-128">В пятой итерации сделан нашего приложения проще в обслуживании и изменить, добавив модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="34bc2-129">Мы макета наших классов модели данных и создания модульных тестов для наших контроллеров и логику проверки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="34bc2-130">Итерация &#6; — с помощью управляемой тестами разработки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="34bc2-131">В итерации этого шестой мы добавим новые функциональные возможности наше приложение, сначала написание модульных тестов и писать код для модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="34bc2-132">В этой итерации добавим групп контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="34bc2-133">Итерации #7. Добавление функциональности Ajax.</span><span class="sxs-lookup"><span data-stu-id="34bc2-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="34bc2-134">В седьмой итерации мы повысить скорость реагирования и производительности приложения, добавляя поддержку Ajax.</span><span class="sxs-lookup"><span data-stu-id="34bc2-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="34bc2-135">Этой итерации</span><span class="sxs-lookup"><span data-stu-id="34bc2-135">This Iteration</span></span>

<span data-ttu-id="34bc2-136">В предыдущих итерациях приложение диспетчера контактов мы создали модульные тесты для обеспечения средство подстраховки наш код.</span><span class="sxs-lookup"><span data-stu-id="34bc2-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="34bc2-137">Чтобы сделать код более устойчивым, чтобы изменить был мотивация для создания модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="34bc2-138">С помощью модульных тестов на месте мы счастью изменения наш код и немедленно узнаете ли мы нарушили существующие функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="34bc2-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="34bc2-139">В этой итерации мы используем модульных тестов для абсолютно другой цели.</span><span class="sxs-lookup"><span data-stu-id="34bc2-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="34bc2-140">В этой итерации, мы используем модульных тестов в рамках принципы разработки приложений, которые вызывается *управляемой тестами разработки*.</span><span class="sxs-lookup"><span data-stu-id="34bc2-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="34bc2-141">Если вы на практике разработки через тестирование, сначала создать тесты и затем написать код для выполнения тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="34bc2-142">Точнее, при числе управляемой тестами разработки, состоит из трех шагов, которые выполняются при создании кода (красный или зеленый/рефакторинг):</span><span class="sxs-lookup"><span data-stu-id="34bc2-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="34bc2-143">Написать модульный тест, происходит сбой (красный)</span><span class="sxs-lookup"><span data-stu-id="34bc2-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="34bc2-144">Написать код, который передает модульного теста (зеленый)</span><span class="sxs-lookup"><span data-stu-id="34bc2-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="34bc2-145">Выполнить рефакторинг кода (оптимизации)</span><span class="sxs-lookup"><span data-stu-id="34bc2-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="34bc2-146">Во-первых можно написать модульный тест.</span><span class="sxs-lookup"><span data-stu-id="34bc2-146">First, you write the unit test.</span></span> <span data-ttu-id="34bc2-147">Модульный тест необходимо выражать ваше намерение для как предполагается, что код поведение.</span><span class="sxs-lookup"><span data-stu-id="34bc2-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="34bc2-148">При создании модульного теста в модульный тест должен завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="34bc2-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="34bc2-149">Тест должен завершиться ошибкой, так как код приложения, который будет проходить тест еще не записаны.</span><span class="sxs-lookup"><span data-stu-id="34bc2-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="34bc2-150">После этого достаточно код пишется в порядке для модульного теста для передачи.</span><span class="sxs-lookup"><span data-stu-id="34bc2-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="34bc2-151">Цель заключается в написании кода образом laziest, sloppiest и быстрым невозможно.</span><span class="sxs-lookup"><span data-stu-id="34bc2-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="34bc2-152">Не следует тратить время думать об архитектуре приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="34bc2-153">Вместо этого следует уделить внимание запись минимальный объем кода, необходимого для удовлетворения намерение выражается модульного теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="34bc2-154">Наконец после написания кода достаточно можно шаг назад и рассмотрим общую архитектуру приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="34bc2-155">На этом шаге вы переписать (рефакторинга) код, используя преимущества разработки программного обеспечения, шаблоны — например шаблон репозитория--таким образом, более простого в сопровождении кода.</span><span class="sxs-lookup"><span data-stu-id="34bc2-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="34bc2-156">Код на этом шаге fearlessly можно переписать так, как код, связанная с модульными тестами.</span><span class="sxs-lookup"><span data-stu-id="34bc2-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="34bc2-157">Существует много преимуществ, возникающие в результате упражнений управляемой тестами разработки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="34bc2-158">Во-первых, управляемой тестами разработки заставляет сосредоточиться на код, который фактически необходимо записать.</span><span class="sxs-lookup"><span data-stu-id="34bc2-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="34bc2-159">Поскольку постоянно выделена просто написание кода, недостаточно для передачи конкретного теста, не смогут велика в weeds и записи больших объемов кода, никогда не будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="34bc2-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="34bc2-160">Во-вторых методологии разработки «сначала test» приходится писать код с точки зрения использования кода.</span><span class="sxs-lookup"><span data-stu-id="34bc2-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="34bc2-161">Другими словами при числе управляемой тестами разработки, постоянно пишется тестов с точки зрения пользователя.</span><span class="sxs-lookup"><span data-stu-id="34bc2-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="34bc2-162">Таким образом управляемой тестами разработки может привести к API-интерфейсы более понятным и более понятным.</span><span class="sxs-lookup"><span data-stu-id="34bc2-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="34bc2-163">Наконец управляемой тестами разработки принудительно создать модульные тесты как часть обычного процесса создания приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="34bc2-164">По мере приближения срока выполнения проекта тестирования обычно является первое, что идет окна.</span><span class="sxs-lookup"><span data-stu-id="34bc2-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="34bc2-165">При числе управляемой тестами разработки, с другой стороны, вы, скорее всего, быть действенных о написании модульных тестов, поскольку управляемой тестами разработки делает модульные тесты центра в процесс построения приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="34bc2-166">Дополнительные сведения об управляемой тестами разработки я рекомендуется прочитать книги Майкла Физерса **эффективная работа со старым кодом**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="34bc2-167">В этой итерации мы добавим новую функцию наше приложение диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="34bc2-168">Мы добавили поддержку для группы контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-168">We add support for Contact Groups.</span></span> <span data-ttu-id="34bc2-169">Можно использовать группы контакт Организация контактов по категориям, например бизнеса и Friend.</span><span class="sxs-lookup"><span data-stu-id="34bc2-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="34bc2-170">Мы добавим эти новые командлеты для нашего приложения, выполнив процесс разработки через тестирование.</span><span class="sxs-lookup"><span data-stu-id="34bc2-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="34bc2-171">Мы записываем нашей модульных тестов сначала, и мы записываем все наш код для этих тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="34bc2-172">Что возвращает тестирования</span><span class="sxs-lookup"><span data-stu-id="34bc2-172">What Gets Tested</span></span>

<span data-ttu-id="34bc2-173">Как уже говорилось в предыдущих итерациях, обычно не создавать модульные тесты для логики доступа к данным или просмотра логику.</span><span class="sxs-lookup"><span data-stu-id="34bc2-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="34bc2-174">Вы не хотите t создавать модульные тесты для логики доступа к данным, так как доступ к базе данных является относительно медленным операции.</span><span class="sxs-lookup"><span data-stu-id="34bc2-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="34bc2-175">Вы не хотите t создавать модульные тесты для представления логики, так как доступ к представлению требуется для настройки веб-сервера, который является относительно медленным операцией.</span><span class="sxs-lookup"><span data-stu-id="34bc2-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="34bc2-176">T не старее написать модульный тест, если тест может выполняться снова и снова очень быстро</span><span class="sxs-lookup"><span data-stu-id="34bc2-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="34bc2-177">Поскольку управляемой тестами разработки определяется модульные тесты, мы изначально уделить внимание написанию контроллера и бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="34bc2-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="34bc2-178">Мы не касается базы данных или представления.</span><span class="sxs-lookup"><span data-stu-id="34bc2-178">We avoid touching the database or views.</span></span> <span data-ttu-id="34bc2-179">Мы выиграл t изменения базы данных или создания нашей представлений до окончания этого учебника.</span><span class="sxs-lookup"><span data-stu-id="34bc2-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="34bc2-180">Мы начнем с что можно протестировать.</span><span class="sxs-lookup"><span data-stu-id="34bc2-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="34bc2-181">Создание пользовательских описаний функциональности</span><span class="sxs-lookup"><span data-stu-id="34bc2-181">Creating User Stories</span></span>

<span data-ttu-id="34bc2-182">При числе управляемой тестами разработки, сначала всегда Написание теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="34bc2-183">Немедленно, это вызывает вопрос: как решить, какой тест писать сначала?</span><span class="sxs-lookup"><span data-stu-id="34bc2-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="34bc2-184">Чтобы ответить на этот вопрос, следует писать набор [ *описаний функциональности пользователей*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="34bc2-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="34bc2-185">Описания функциональности пользователя является очень краткое описание требования к программному обеспечению (обычно одно предложение).</span><span class="sxs-lookup"><span data-stu-id="34bc2-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="34bc2-186">Он должен быть нетехнических описание требование записи с точки зрения пользователя.</span><span class="sxs-lookup"><span data-stu-id="34bc2-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="34bc2-187">Здесь s набора пользовательских описаний функциональности, описывающие функции, необходимые для новых функциональных возможностей обратитесь к группе:</span><span class="sxs-lookup"><span data-stu-id="34bc2-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="34bc2-188">Пользователь может просматривать список групп контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="34bc2-189">Пользователь может создавать новые группы контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="34bc2-190">Пользователь может удалить существующую группу контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="34bc2-191">Пользователь может выбрать группу контактов, при создании нового контакта.</span><span class="sxs-lookup"><span data-stu-id="34bc2-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="34bc2-192">Пользователь может выбрать группу контактов, при редактировании существующего контакта.</span><span class="sxs-lookup"><span data-stu-id="34bc2-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="34bc2-193">Список групп контактов отображается в представлении индекса.</span><span class="sxs-lookup"><span data-stu-id="34bc2-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="34bc2-194">Когда пользователь щелкает группу контактов, отображается список совпадающих контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="34bc2-195">Обратите внимание, что этот список описаний функциональности пользователей вполне понятно клиентом.</span><span class="sxs-lookup"><span data-stu-id="34bc2-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="34bc2-196">Нет Техническая реализация не указываются.</span><span class="sxs-lookup"><span data-stu-id="34bc2-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="34bc2-197">Хотя в процессе построения приложения, набора пользовательских историй может стать проще и удобнее.</span><span class="sxs-lookup"><span data-stu-id="34bc2-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="34bc2-198">Описания функциональности пользователя может разбить на несколько описаний функциональности (требования).</span><span class="sxs-lookup"><span data-stu-id="34bc2-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="34bc2-199">Например можно решить, что создания новой группы контактов привлечь проверки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="34bc2-200">Отправка группу контактов без имени должен возвращать ошибку проверки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="34bc2-201">После создания списка описаний функциональности пользователей, все готово для записи первый модульный тест.</span><span class="sxs-lookup"><span data-stu-id="34bc2-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="34bc2-202">Мы начнем с создания модульного теста для просмотра списка групп контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="34bc2-203">Список групп контактов</span><span class="sxs-lookup"><span data-stu-id="34bc2-203">Listing Contact Groups</span></span>

<span data-ttu-id="34bc2-204">Наш первый описания функциональности пользователя является, пользователь должен иметь права для просмотра списка групп контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="34bc2-205">Нам нужно express этой истории с тестом.</span><span class="sxs-lookup"><span data-stu-id="34bc2-205">We need to express this story with a test.</span></span>

<span data-ttu-id="34bc2-206">Создать новый модульный тест, щелкнув правой кнопкой мыши папку Controllers в проекте ContactManager.Tests выбора **Add, новый тест**и выбрав **модульного теста** шаблона (см. рис. 1).</span><span class="sxs-lookup"><span data-stu-id="34bc2-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="34bc2-207">Имя нового модульного тестирования GroupControllerTest.vb и нажмите кнопку **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>


<span data-ttu-id="34bc2-208">[![Добавление GroupControllerTest модульного теста](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="34bc2-209">**На рисунке 01**: Добавление модульного теста GroupControllerTest ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>


<span data-ttu-id="34bc2-210">Наш первый модульный тест содержится в листинге 1.</span><span class="sxs-lookup"><span data-stu-id="34bc2-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="34bc2-211">В этом тесте проверяется, что метод Index() контроллера группы возвращает набор групп.</span><span class="sxs-lookup"><span data-stu-id="34bc2-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="34bc2-212">Тест проверяет, что коллекция группы возвращается в представлении данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="34bc2-213">**Листинг 1 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="34bc2-214">При вводе кода сначала в список 1 в Visual Studio вы сможете получить массу красной волнистой линией.</span><span class="sxs-lookup"><span data-stu-id="34bc2-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="34bc2-215">Классы GroupController или группа не создана.</span><span class="sxs-lookup"><span data-stu-id="34bc2-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="34bc2-216">На этом этапе мы можем даже построения t нашего приложения, поэтому мы можем t выполнение наш первый модульный тест.</span><span class="sxs-lookup"><span data-stu-id="34bc2-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="34bc2-217">Хороший s.</span><span class="sxs-lookup"><span data-stu-id="34bc2-217">That s good.</span></span> <span data-ttu-id="34bc2-218">Считается непройденного теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-218">That counts as a failing test.</span></span> <span data-ttu-id="34bc2-219">Таким образом мы теперь имеет разрешения на запуск написания кода приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="34bc2-220">Нам необходимо написать код, достаточно для выполнения в нашем тесте.</span><span class="sxs-lookup"><span data-stu-id="34bc2-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="34bc2-221">Класс контроллера группы в списке 2 содержит допустимый минимум кода, необходимого для передачи модульного теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="34bc2-222">Действие Index() возвращает статически закодированного список групп (группы класс определен в списке 3).</span><span class="sxs-lookup"><span data-stu-id="34bc2-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="34bc2-223">**Листинг 2 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="34bc2-224">**Листинг 3 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="34bc2-225">После добавить классы GroupController и группа проектов, наш первый модульный тест завершается успешно (см. рис. 2).</span><span class="sxs-lookup"><span data-stu-id="34bc2-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="34bc2-226">Мы выполнили минимальные необходимые действия, чтобы пройти проверку.</span><span class="sxs-lookup"><span data-stu-id="34bc2-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="34bc2-227">Пора отметить.</span><span class="sxs-lookup"><span data-stu-id="34bc2-227">It is time to celebrate.</span></span>


<span data-ttu-id="34bc2-228">[![Выполнена успешно!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="34bc2-229">**На рисунке 02**: успех! () [Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="34bc2-230">Создание групп контактов</span><span class="sxs-lookup"><span data-stu-id="34bc2-230">Creating Contact Groups</span></span>

<span data-ttu-id="34bc2-231">Теперь можно продолжать второй описанием функциональности пользователя.</span><span class="sxs-lookup"><span data-stu-id="34bc2-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="34bc2-232">Необходимо иметь возможность создавать новые группы контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="34bc2-233">Нам нужно express ее с тестом.</span><span class="sxs-lookup"><span data-stu-id="34bc2-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="34bc2-234">Тест в листинге 4 проверяет, что вызов Create(), метод с новой группой добавляет группу в список групп, возвращенный методом Index().</span><span class="sxs-lookup"><span data-stu-id="34bc2-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="34bc2-235">Другими словами Если создать новую группу, я должно быть возможность получить новую группу из списка групп, возвращенный методом Index().</span><span class="sxs-lookup"><span data-stu-id="34bc2-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="34bc2-236">**Листинг 4 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="34bc2-237">Тест в листинге 4 вызывает группы контроллера метод Create() с нового контакта группы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="34bc2-238">Затем тест проверяет, что вызов контроллера группы Index() метод возвращает новую группу в представлении данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="34bc2-239">Изменения группы контроллер в листинге 5 содержит минимальный набор изменений, необходимых для передачи нового теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="34bc2-240">**Список 5 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="34bc2-241">Контроллер группы в листинге 5 содержит действие новых Create().</span><span class="sxs-lookup"><span data-stu-id="34bc2-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="34bc2-242">Это действие добавляет группу в коллекцию групп.</span><span class="sxs-lookup"><span data-stu-id="34bc2-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="34bc2-243">Обратите внимание, действие Index() был изменен для возврата содержимого коллекции групп.</span><span class="sxs-lookup"><span data-stu-id="34bc2-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="34bc2-244">Опять же мы выполнили bare минимальный объем работ, необходимый для передачи модульного теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="34bc2-245">После мы внести эти изменения к контроллеру группу, все наши модульные тесты пройдены.</span><span class="sxs-lookup"><span data-stu-id="34bc2-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="34bc2-246">Добавление проверки</span><span class="sxs-lookup"><span data-stu-id="34bc2-246">Adding Validation</span></span>

<span data-ttu-id="34bc2-247">Это требование не было явно указано в описания функциональности пользователя.</span><span class="sxs-lookup"><span data-stu-id="34bc2-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="34bc2-248">Тем не менее это целесообразно потребовать имя группы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="34bc2-249">В противном случае Организация контактов в группы не будет очень полезным.</span><span class="sxs-lookup"><span data-stu-id="34bc2-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="34bc2-250">Перечисление 6 содержит новый тест, обозначающим ее.</span><span class="sxs-lookup"><span data-stu-id="34bc2-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="34bc2-251">Этот тест проверяет, что попытка создать группу без указания имени результатов в сообщение об ошибке проверки в состоянии модели.</span><span class="sxs-lookup"><span data-stu-id="34bc2-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="34bc2-252">**Перечисление 6 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="34bc2-253">Для удовлетворения этого теста, необходимо добавить свойство имени в нашем группу (см. Листинг 7).</span><span class="sxs-lookup"><span data-stu-id="34bc2-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="34bc2-254">Кроме того нам нужно добавить небольшая логику проверки в нашей группы контроллер s Create() действие (см. список 8).</span><span class="sxs-lookup"><span data-stu-id="34bc2-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="34bc2-255">**Листинг 7 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="34bc2-256">**8 - Controllers\GroupController.vb со списком**</span><span class="sxs-lookup"><span data-stu-id="34bc2-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="34bc2-257">Обратите внимание, что группа контроллера Create() действие логику проверки и базы данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="34bc2-258">В настоящее время базы данных, используемое контроллером группа состоит из не более чем коллекции в памяти.</span><span class="sxs-lookup"><span data-stu-id="34bc2-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="34bc2-259">Время для оптимизации кода</span><span class="sxs-lookup"><span data-stu-id="34bc2-259">Time to Refactor</span></span>

<span data-ttu-id="34bc2-260">На третьем шаге красный, зеленый и рефакторинг входит рефакторинга.</span><span class="sxs-lookup"><span data-stu-id="34bc2-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="34bc2-261">На этом этапе необходимо отойти от нашего кода и рассмотрите, как мы можем выполнить рефакторинг нашего приложения для повышения его разработки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="34bc2-262">На этапе рефакторинга выполняется этап, когда мы считаем, что жесткие о лучший способ реализации принципы разработки программного обеспечения и шаблоны.</span><span class="sxs-lookup"><span data-stu-id="34bc2-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="34bc2-263">Можно свободно изменить наш код каким-либо образом, мы решили улучшить конструкцию кода.</span><span class="sxs-lookup"><span data-stu-id="34bc2-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="34bc2-264">У нас есть средство подстраховки модульных тестов, которые нам предотвратить прерывание существующие функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="34bc2-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="34bc2-265">В данный момент, нашей группы контроллер является карточки с точки зрения Хорошая архитектура программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="34bc2-266">Контроллер группа содержит запутанную карточки проверки и код доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="34bc2-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="34bc2-267">Чтобы не нарушать персональной ответственности, нам необходимо разделить эти проблемы на различных классов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="34bc2-268">Наш рефакторингу класс контроллера группы содержится в Листинг 9.</span><span class="sxs-lookup"><span data-stu-id="34bc2-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="34bc2-269">Контроллер был изменен для использования ContactManager уровня службы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="34bc2-270">Это же уровень служб, мы используем с контроллером контакта.</span><span class="sxs-lookup"><span data-stu-id="34bc2-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="34bc2-271">Перечисление 10 содержит новые методы, добавляется на слой ContactManager службы для поддержки проверки, форматирование и создание групп.</span><span class="sxs-lookup"><span data-stu-id="34bc2-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="34bc2-272">Интерфейс IContactManagerService был обновлен для включения новых методов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="34bc2-273">Перечисление 11 содержит новый класс FakeContactManagerRepository, который реализует интерфейс IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="34bc2-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="34bc2-274">В отличие от класса EntityContactManagerRepository, который также реализует интерфейс IContactManagerRepository наш класс FakeContactManagerRepository не взаимодействуют с базой данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="34bc2-275">Класс FakeContactManagerRepository использует находящуюся в памяти коллекцию как прокси для базы данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="34bc2-276">Мы будем использовать этот класс в нашем модульные тесты как слой имитацией хранилища.</span><span class="sxs-lookup"><span data-stu-id="34bc2-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="34bc2-277">**Листинг 9 - Controllers\GroupController.vb.**</span><span class="sxs-lookup"><span data-stu-id="34bc2-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="34bc2-278">**Перечисление 10 - Controllers\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="34bc2-279">**Перечисление 11 - Controllers\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]


<span data-ttu-id="34bc2-280">Изменение IContactManagerRepository, интерфейс требует использования для реализации методов CreateGroup() и ListGroups() в классе EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="34bc2-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="34bc2-281">Laziest и наиболее быстрый способ сделать это — добавление заглушки методов, которые выглядят следующим образом:</span><span class="sxs-lookup"><span data-stu-id="34bc2-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]


<span data-ttu-id="34bc2-282">Наконец эти изменения в структуре приложения требуют нам внести некоторые изменения в наших модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="34bc2-283">Теперь нам нужно использовать FakeContactManagerRepository при выполнении модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="34bc2-284">Обновленный класс GroupControllerTest содержится листинг 12.</span><span class="sxs-lookup"><span data-stu-id="34bc2-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="34bc2-285">**Пример 12 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="34bc2-286">После мы убедитесь, что все эти изменения, опять же, все наши модульные тесты пройдены.</span><span class="sxs-lookup"><span data-stu-id="34bc2-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="34bc2-287">Мы завершили весь цикл красный, зеленый и рефакторинг.</span><span class="sxs-lookup"><span data-stu-id="34bc2-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="34bc2-288">Мы применили первый две пользовательские истории.</span><span class="sxs-lookup"><span data-stu-id="34bc2-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="34bc2-289">Теперь у нас есть поддержка модульных тестов для требований, представленных в описания функциональности пользователей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="34bc2-290">Реализация оставшуюся часть описаний функциональности пользователей включает в себя повторять этот же цикл красный, зеленый и рефакторинг.</span><span class="sxs-lookup"><span data-stu-id="34bc2-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="34bc2-291">Изменения в базе данных</span><span class="sxs-lookup"><span data-stu-id="34bc2-291">Modifying our Database</span></span>

<span data-ttu-id="34bc2-292">К сожалению несмотря на то, что мы выполнены все требования, выраженный с нашей модульных тестов, нашей работе не выполняется.</span><span class="sxs-lookup"><span data-stu-id="34bc2-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="34bc2-293">Мы все еще требуется изменить базе данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-293">We still need to modify our database.</span></span>

<span data-ttu-id="34bc2-294">Необходимо создать новую таблицу базы данных группы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-294">We need to create a new Group database table.</span></span> <span data-ttu-id="34bc2-295">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="34bc2-295">Follow these steps:</span></span>

1. <span data-ttu-id="34bc2-296">В окне обозревателя решений щелкните правой кнопкой мыши папку «таблицы» и выберите пункт меню в **добавить новую таблицу**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="34bc2-297">Введите два столбца, описанные ниже, в конструкторе таблиц.</span><span class="sxs-lookup"><span data-stu-id="34bc2-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="34bc2-298">Пометьте столбец идентификатора как первичный ключ и столбце идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="34bc2-299">Сохраните новую таблицу с именем группы, щелкнув значок дискеты.</span><span class="sxs-lookup"><span data-stu-id="34bc2-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>


| <span data-ttu-id="34bc2-300">**Имя столбца**</span><span class="sxs-lookup"><span data-stu-id="34bc2-300">**Column Name**</span></span> | <span data-ttu-id="34bc2-301">**Тип данных**</span><span class="sxs-lookup"><span data-stu-id="34bc2-301">**Data Type**</span></span> | <span data-ttu-id="34bc2-302">**Разрешить значения NULL**</span><span class="sxs-lookup"><span data-stu-id="34bc2-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="34bc2-303">Идентификатор</span><span class="sxs-lookup"><span data-stu-id="34bc2-303">Id</span></span> | <span data-ttu-id="34bc2-304">int</span><span class="sxs-lookup"><span data-stu-id="34bc2-304">int</span></span> | <span data-ttu-id="34bc2-305">False</span><span class="sxs-lookup"><span data-stu-id="34bc2-305">False</span></span> |
| <span data-ttu-id="34bc2-306">Имя</span><span class="sxs-lookup"><span data-stu-id="34bc2-306">Name</span></span> | <span data-ttu-id="34bc2-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="34bc2-307">nvarchar(50)</span></span> | <span data-ttu-id="34bc2-308">False</span><span class="sxs-lookup"><span data-stu-id="34bc2-308">False</span></span> |


<span data-ttu-id="34bc2-309">Затем нужно удалить все данные из таблицы Contacts (в противном случае мы выиграл t можно создавать связи между таблицами контакты и группы).</span><span class="sxs-lookup"><span data-stu-id="34bc2-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="34bc2-310">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="34bc2-310">Follow these steps:</span></span>

1. <span data-ttu-id="34bc2-311">Щелкните правой кнопкой мыши таблицу Contacts и выбрать пункт меню **Показать таблицу данных**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="34bc2-312">Удалите все строки.</span><span class="sxs-lookup"><span data-stu-id="34bc2-312">Delete all of the rows.</span></span>

<span data-ttu-id="34bc2-313">Теперь нам нужны для определения связи между таблицей базы данных групп и существующая таблица базы данных контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="34bc2-314">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="34bc2-314">Follow these steps:</span></span>

1. <span data-ttu-id="34bc2-315">Дважды щелкните в таблице контактов в окне обозревателя серверов, чтобы открыть конструктор таблиц.</span><span class="sxs-lookup"><span data-stu-id="34bc2-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="34bc2-316">Добавьте новый столбец целочисленного типа к таблице Contacts, с именем GroupId.</span><span class="sxs-lookup"><span data-stu-id="34bc2-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="34bc2-317">Нажмите кнопку связь, чтобы открыть диалоговое окно связи по внешнему ключу (см. рис. 3).</span><span class="sxs-lookup"><span data-stu-id="34bc2-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="34bc2-318">Нажмите кнопку Добавить.</span><span class="sxs-lookup"><span data-stu-id="34bc2-318">Click the Add button.</span></span>
5. <span data-ttu-id="34bc2-319">Нажмите кнопку с многоточием рядом с кнопку спецификация столбцы и таблицы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="34bc2-320">В диалоговом окне таблиц и столбцов выберите группы, как идентификатор в качестве столбца первичного ключа и таблицу первичного ключа.</span><span class="sxs-lookup"><span data-stu-id="34bc2-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="34bc2-321">Указать контакты в качестве GroupId как столбец внешнего ключа таблицы внешнего ключа (см. рис. 4).</span><span class="sxs-lookup"><span data-stu-id="34bc2-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="34bc2-322">Нажмите кнопку "ОК".</span><span class="sxs-lookup"><span data-stu-id="34bc2-322">Click the OK button.</span></span>
7. <span data-ttu-id="34bc2-323">В разделе **спецификация INSERT и UPDATE**, выберите значение **Cascade** для **удалить правило**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="34bc2-324">Нажмите кнопку "Закрыть", чтобы закрыть диалоговое окно связи по внешнему ключу.</span><span class="sxs-lookup"><span data-stu-id="34bc2-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="34bc2-325">Нажмите кнопку Сохранить, чтобы сохранить изменения в таблице Contacts.</span><span class="sxs-lookup"><span data-stu-id="34bc2-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="34bc2-326">[![Создание связи таблицы базы данных](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="34bc2-327">**На рисунке 03**: Создание связи таблицы базы данных ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>


<span data-ttu-id="34bc2-328">[![Задание связей между таблицами](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="34bc2-329">**На рисунке 04**: указание связи между таблицами ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="34bc2-330">Обновление модели данных</span><span class="sxs-lookup"><span data-stu-id="34bc2-330">Updating our Data Model</span></span>

<span data-ttu-id="34bc2-331">Теперь нам нужны для обновления модели данных для представления новой таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="34bc2-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="34bc2-332">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="34bc2-332">Follow these steps:</span></span>

1. <span data-ttu-id="34bc2-333">Дважды щелкните файл ContactManagerModel.edmx в папку Models, чтобы открыть конструктор сущностей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="34bc2-334">Щелкните правой кнопкой мыши область конструктора и выберите пункт меню в **обновление модели из базы данных**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="34bc2-335">В мастере обновления выберите группы таблицы и нажмите кнопку Готово кнопку (см. рис. 5).</span><span class="sxs-lookup"><span data-stu-id="34bc2-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="34bc2-336">Щелкните правой кнопкой мыши сущность группы и выберите пункт меню в **переименование**.</span><span class="sxs-lookup"><span data-stu-id="34bc2-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="34bc2-337">Измените имя *группы* сущность *группы* (единственного числа).</span><span class="sxs-lookup"><span data-stu-id="34bc2-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="34bc2-338">Щелкните правой кнопкой мыши свойство навигации группы, которое отображается в нижней части сущности Contact.</span><span class="sxs-lookup"><span data-stu-id="34bc2-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="34bc2-339">Измените имя *группы* свойство навигации для *группы* (единственного числа).</span><span class="sxs-lookup"><span data-stu-id="34bc2-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="34bc2-340">[![Обновление модели Entity Framework из базы данных](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="34bc2-341">**На рисунке 05**: обновление модели из базы данных Entity Framework ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>


<span data-ttu-id="34bc2-342">После выполнения этих шагов модель данных будет представлять контакты и группы таблиц.</span><span class="sxs-lookup"><span data-stu-id="34bc2-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="34bc2-343">Конструктор сущностей должны показывать обе сущности (см. рис. 6).</span><span class="sxs-lookup"><span data-stu-id="34bc2-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="34bc2-344">[![Отображение группы и обратитесь в службу конструктора сущностей](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="34bc2-345">**На рисунке 06**: Entity Designer отображения группы и обратитесь в службу ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="34bc2-346">Создание классов нашей репозитория</span><span class="sxs-lookup"><span data-stu-id="34bc2-346">Creating our Repository Classes</span></span>

<span data-ttu-id="34bc2-347">Далее необходимо реализовать класс нашей репозитория.</span><span class="sxs-lookup"><span data-stu-id="34bc2-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="34bc2-348">В течение этой итерации мы добавили новые методы в интерфейсе IContactManagerRepository при написании кода для удовлетворения наших модульных тестов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="34bc2-349">Окончательная версия интерфейса IContactManagerRepository содержится в 14 со списком.</span><span class="sxs-lookup"><span data-stu-id="34bc2-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="34bc2-350">**Перечисление 14 - Models\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="34bc2-351">Мы не использовали t фактически реализации любого из методов, относящиеся к работе со групп, контактов, в нашей настоящего EntityContactManagerRepository класса.</span><span class="sxs-lookup"><span data-stu-id="34bc2-351">We haven t actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="34bc2-352">В настоящее время EntityContactManagerRepository класс имеет методы-заглушки для каждого из методов группы контактов, перечисленных в интерфейсе IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="34bc2-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="34bc2-353">Например метод ListGroups() в данный момент выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="34bc2-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="34bc2-354">Методы-заглушки позволит нам скомпилировать нашего приложения и модульные тесты.</span><span class="sxs-lookup"><span data-stu-id="34bc2-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="34bc2-355">Однако теперь пора фактически реализуют эти методы.</span><span class="sxs-lookup"><span data-stu-id="34bc2-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="34bc2-356">Окончательная версия класса EntityContactManagerRepository содержится в Листинг 13.</span><span class="sxs-lookup"><span data-stu-id="34bc2-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="34bc2-357">**Листинг 13 - Models\EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="34bc2-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="34bc2-358">Создание представления</span><span class="sxs-lookup"><span data-stu-id="34bc2-358">Creating the Views</span></span>

<span data-ttu-id="34bc2-359">Приложение ASP.NET MVC, при использовании механизма представления ASP.NET по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="34bc2-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="34bc2-360">Таким образом пункт не создавать представления в ответ на определенный модульного теста.</span><span class="sxs-lookup"><span data-stu-id="34bc2-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="34bc2-361">Тем не менее, так как приложение будет бесполезен без представлений, мы можем t завершить эту итерацию без создания и изменения представления, содержащиеся в приложение диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="34bc2-362">Необходимо создать следующие новые представления для управления группами, обратитесь в службу (см. рис. 7):</span><span class="sxs-lookup"><span data-stu-id="34bc2-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="34bc2-363">Views\Group\Index.aspx - отображает список групп контактов</span><span class="sxs-lookup"><span data-stu-id="34bc2-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="34bc2-364">Views\Group\Delete.aspx - форма отображает подтверждение для удаления группы контактов</span><span class="sxs-lookup"><span data-stu-id="34bc2-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="34bc2-365">[![Индекс группы представления](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="34bc2-366">**Рисунок 07**: индекс, представляющий группу представление ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>


<span data-ttu-id="34bc2-367">Нам нужно изменить следующие существующие представления, таким образом, чтобы они включали групп контактов:</span><span class="sxs-lookup"><span data-stu-id="34bc2-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="34bc2-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="34bc2-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="34bc2-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="34bc2-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="34bc2-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="34bc2-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="34bc2-371">Для проверки измененного представления приложения Visual Studio, в этом учебнике приводится.</span><span class="sxs-lookup"><span data-stu-id="34bc2-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="34bc2-372">Например на рис. 8 показана представление Index контакта.</span><span class="sxs-lookup"><span data-stu-id="34bc2-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="34bc2-373">[![Представление указателя контактов](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="34bc2-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="34bc2-374">**Рисунок 08**: представление Index контакт ([Просмотр полноразмерное изображение](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="34bc2-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="34bc2-375">Сводка</span><span class="sxs-lookup"><span data-stu-id="34bc2-375">Summary</span></span>

<span data-ttu-id="34bc2-376">В этой итерации мы добавили новые функциональные возможности в наше приложение диспетчера контактов, следуя методологии разработки через тестирование разработки приложения.</span><span class="sxs-lookup"><span data-stu-id="34bc2-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="34bc2-377">Мы начали с помощью набора пользовательских описаний функциональности.</span><span class="sxs-lookup"><span data-stu-id="34bc2-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="34bc2-378">Мы создали набор модульных тестов, соответствующий требованиям выражается описаний функциональности пользователей.</span><span class="sxs-lookup"><span data-stu-id="34bc2-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="34bc2-379">Наконец мы написали код, достаточно для удовлетворения требований, представленных в модульные тесты.</span><span class="sxs-lookup"><span data-stu-id="34bc2-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="34bc2-380">По окончании мы написание кода, недостаточно для удовлетворения требований, представленных в модульные тесты, мы обновили наш базы данных и представления.</span><span class="sxs-lookup"><span data-stu-id="34bc2-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="34bc2-381">Мы Добавление новой группы таблицы в базе данных, а также изменили нашей модели данных Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="34bc2-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="34bc2-382">Мы также создавать и изменять набор представлений.</span><span class="sxs-lookup"><span data-stu-id="34bc2-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="34bc2-383">В следующей итерации--последней итерации — мы перепишите нашего приложения, чтобы воспользоваться преимуществами Ajax.</span><span class="sxs-lookup"><span data-stu-id="34bc2-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="34bc2-384">Используя преимущества Ajax, здесь мы повысить скорость реагирования и производительность приложения диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="34bc2-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="34bc2-385">[Назад](iteration-5-create-unit-tests-vb.md)
[Вперед](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="34bc2-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>
