---
uid: mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
title: "Создайте приложение фильма базы данных в течение 15 минут с ASP.NET MVC (C#) | Документы Microsoft"
author: StephenWalther
description: "Стивен Вальтер строит всей базы данных приложения ASP.NET MVC от начала и завершения. Этот учебник, отлично сведения для пользователей, которые Созд..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: dd1be137-91c5-47a8-8137-fecf0789c7f5
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
msc.type: authoredcontent
ms.openlocfilehash: a67ca5422d4353b8c23b3fd804246906b8b6d717
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="create-a-movie-database-application-in-15-minutes-with-aspnet-mvc-c"></a><span data-ttu-id="b85ee-104">Создайте приложение фильма базы данных в течение 15 минут с ASP.NET MVC (C#)</span><span class="sxs-lookup"><span data-stu-id="b85ee-104">Create a Movie Database Application in 15 Minutes with ASP.NET MVC (C#)</span></span>
====================
<span data-ttu-id="b85ee-105">по [Стивен Вальтер](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="b85ee-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="b85ee-106">Загрузить исходный код</span><span class="sxs-lookup"><span data-stu-id="b85ee-106">Download Code</span></span>](http://download.microsoft.com/download/7/2/8/728F8794-E59A-4D18-9A56-7AD2DB05BD9D/MovieApp_CS.zip)

> <span data-ttu-id="b85ee-107">Стивен Вальтер строит всей базы данных приложения ASP.NET MVC от начала и завершения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-107">Stephen Walther builds an entire database-driven ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="b85ee-108">Этот учебник содержит значительные введение для тех, кто не знаком с платформой ASP.NET MVC, которые хотят понять процесс создания приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-108">This tutorial is a great introduction for people who are new to the ASP.NET MVC Framework and who want to get a sense of the process of building an ASP.NET MVC application.</span></span>


<span data-ttu-id="b85ee-109">Цель данного руководства — предоставить смысл термина «он выглядит» для создания приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-109">The purpose of this tutorial is to give you a sense of "what it is like" to build an ASP.NET MVC application.</span></span> <span data-ttu-id="b85ee-110">В этом учебнике я смоделируйте всего приложения ASP.NET MVC от начала и завершения построения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-110">In this tutorial, I blast through building an entire ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="b85ee-111">Я покажу, как создать простое приложение базы данных, которое показывает как список, создания и редактирования записей базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-111">I show you how to build a simple database-driven application that illustrates how you can list, create, and edit database records.</span></span>

<span data-ttu-id="b85ee-112">Чтобы упростить процесс создания приложения, мы будет воспользоваться преимуществами функции формирования шаблонов Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="b85ee-112">To simplify the process of building our application, we'll take advantage of the scaffolding features of Visual Studio 2008.</span></span> <span data-ttu-id="b85ee-113">Мы сообщим Visual Studio создать исходный код и содержимого для наших контроллеры, модели и представления.</span><span class="sxs-lookup"><span data-stu-id="b85ee-113">We'll let Visual Studio generate the initial code and content for our controllers, models, and views.</span></span>

<span data-ttu-id="b85ee-114">Если вы работали с страницы ASP или ASP.NET, затем следует найти ASP.NET MVC очень знакомыми.</span><span class="sxs-lookup"><span data-stu-id="b85ee-114">If you have worked with Active Server Pages or ASP.NET, then you should find ASP.NET MVC very familiar.</span></span> <span data-ttu-id="b85ee-115">Представления ASP.NET MVC — это очень похоже на страницах приложения Active Server Pages.</span><span class="sxs-lookup"><span data-stu-id="b85ee-115">ASP.NET MVC views are very much like the pages in an Active Server Pages application.</span></span> <span data-ttu-id="b85ee-116">И, как и в традиционных приложений для веб-форм ASP.NET, ASP.NET MVC предоставляет полный доступ к широкий спектр языков и классов, предоставляемых платформой .NET framework.</span><span class="sxs-lookup"><span data-stu-id="b85ee-116">And, just like a traditional ASP.NET Web Forms application, ASP.NET MVC provides you with full access to the rich set of languages and classes provided by the .NET framework.</span></span>

<span data-ttu-id="b85ee-117">Я надеюсь является то, что этот учебник даст вам представление о том, как опыт в создании приложения ASP.NET MVC аналогичные и отличается от качества построения приложения ASP-страниц или веб-форм ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b85ee-117">My hope is that this tutorial will give you a sense of how the experience of building an ASP.NET MVC application is both similar and different than the experience of building an Active Server Pages or ASP.NET Web Forms application.</span></span>

## <a name="overview-of-the-movie-database-application"></a><span data-ttu-id="b85ee-118">Общие сведения о фильме приложение базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-118">Overview of the Movie Database Application</span></span>

<span data-ttu-id="b85ee-119">Поскольку наша цель — для простоты, мы выполним сборку очень простое приложение фильма базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-119">Because our goal is to keep things simple, we'll build a very simple Movie Database application.</span></span> <span data-ttu-id="b85ee-120">Наш простое приложение базы данных фильма позволит выполнить три действия:</span><span class="sxs-lookup"><span data-stu-id="b85ee-120">Our simple Movie Database application will allow us to do three things:</span></span>

1. <span data-ttu-id="b85ee-121">Список фильмов записей базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-121">List a set of movie database records</span></span>
2. <span data-ttu-id="b85ee-122">Создать новую запись фильма базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-122">Create a new movie database record</span></span>
3. <span data-ttu-id="b85ee-123">Изменить существующую запись фильма базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-123">Edit an existing movie database record</span></span>

<span data-ttu-id="b85ee-124">Опять же поскольку мы хотим, чтобы не усложнять, мы воспользуюсь минимальное число компоненты платформы ASP.NET MVC, необходимые для построения приложения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-124">Again, because we want to keep things simple, we'll take advantage of the minimum number of features of the ASP.NET MVC framework needed to build our application.</span></span> <span data-ttu-id="b85ee-125">Например мы не используют преимущества методики разработки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-125">For example, we won't be taking advantage of Test-Driven Development.</span></span>

<span data-ttu-id="b85ee-126">Чтобы создать приложение, необходимо выполнить каждое из следующих действий:</span><span class="sxs-lookup"><span data-stu-id="b85ee-126">In order to create our application, we need to complete each of the following steps:</span></span>

1. <span data-ttu-id="b85ee-127">Создание проекта веб-приложения ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b85ee-127">Create the ASP.NET MVC Web Application Project</span></span>
2. <span data-ttu-id="b85ee-128">Создание базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-128">Create the database</span></span>
3. <span data-ttu-id="b85ee-129">Создание модели базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-129">Create the database model</span></span>
4. <span data-ttu-id="b85ee-130">Создание контроллера ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b85ee-130">Create the ASP.NET MVC controller</span></span>
5. <span data-ttu-id="b85ee-131">Создание представления ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b85ee-131">Create the ASP.NET MVC views</span></span>

## <a name="preliminaries"></a><span data-ttu-id="b85ee-132">Предварительные действия</span><span class="sxs-lookup"><span data-stu-id="b85ee-132">Preliminaries</span></span>

<span data-ttu-id="b85ee-133">Вам потребуется Visual Studio 2008 или Visual Web Developer 2008 Express, для создания приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-133">You'll need either Visual Studio 2008 or Visual Web Developer 2008 Express to build an ASP.NET MVC application.</span></span> <span data-ttu-id="b85ee-134">Необходимо также загрузить платформу ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-134">You also need to download the ASP.NET MVC framework.</span></span>

<span data-ttu-id="b85ee-135">Если вы не являетесь Visual Studio 2008, 90-дневная пробная версия Visual Studio 2008 можно загрузить из этого веб-сайта:</span><span class="sxs-lookup"><span data-stu-id="b85ee-135">If you don't own Visual Studio 2008, then you can download a 90 day trial version of Visual Studio 2008 from this website:</span></span>

[<span data-ttu-id="b85ee-136">https://msdn.microsoft.com/vs2008/products/cc268305.aspx</span><span class="sxs-lookup"><span data-stu-id="b85ee-136">https://msdn.microsoft.com/vs2008/products/cc268305.aspx</span></span>](https://msdn.microsoft.com/vs2008/products/cc268305.aspx)

<span data-ttu-id="b85ee-137">Кроме того создаются ASP.NET MVC приложений с помощью Visual Web Developer Express 2008.</span><span class="sxs-lookup"><span data-stu-id="b85ee-137">Alternatively, you can create ASP.NET MVC applications with Visual Web Developer Express 2008.</span></span> <span data-ttu-id="b85ee-138">Если вы решили использовать Visual Web Developer Express необходимо иметь установленным пакетом обновления 1.</span><span class="sxs-lookup"><span data-stu-id="b85ee-138">If you decide to use Visual Web Developer Express then you must have Service Pack 1 installed.</span></span> <span data-ttu-id="b85ee-139">Visual Web Developer 2008 Express с пакетом обновления 1 можно загрузить из этого веб-сайта:</span><span class="sxs-lookup"><span data-stu-id="b85ee-139">You can download Visual Web Developer 2008 Express with Service Pack 1 from this website:</span></span>

[<span data-ttu-id="b85ee-140">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span><span class="sxs-lookup"><span data-stu-id="b85ee-140">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en)

<span data-ttu-id="b85ee-141">После установки Visual Studio 2008 или Visual Web Developer 2008, необходимо установить платформу ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-141">After you install either Visual Studio 2008 or Visual Web Developer 2008, you need to install the ASP.NET MVC framework.</span></span> <span data-ttu-id="b85ee-142">Платформа ASP.NET MVC можно загрузить с веб-сайте:</span><span class="sxs-lookup"><span data-stu-id="b85ee-142">You can download the ASP.NET MVC framework from the following website:</span></span>

[<span data-ttu-id="b85ee-143">https://www.asp.net/mvc/</span><span class="sxs-lookup"><span data-stu-id="b85ee-143">https://www.asp.net/mvc/</span></span>](../../../index.md)

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-144">Вместо загрузки платформы ASP.NET и платформа ASP.NET MVC по отдельности, можно воспользоваться преимуществами установщика веб-платформы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-144">Instead of downloading the ASP.NET framework and the ASP.NET MVC framework individually, you can take advantage of the Web Platform Installer.</span></span> <span data-ttu-id="b85ee-145">Установщик веб-платформы является приложение, которое позволяет легко управлять установленных приложений на компьютере:</span><span class="sxs-lookup"><span data-stu-id="b85ee-145">The Web Platform Installer is an application that enables you to easily manage the installed applications are your computer:</span></span>
> 
> [<span data-ttu-id="b85ee-146">https://www.microsoft.com/web/gallery/Install.aspx</span><span class="sxs-lookup"><span data-stu-id="b85ee-146">https://www.microsoft.com/web/gallery/Install.aspx</span></span>](https://www.microsoft.com/web/gallery/Install.aspx)


## <a name="creating-an-aspnet-mvc-web-application-project"></a><span data-ttu-id="b85ee-147">Создание проекта веб-приложения ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b85ee-147">Creating an ASP.NET MVC Web Application Project</span></span>

<span data-ttu-id="b85ee-148">Начнем с создания проекта веб-приложения ASP.NET MVC в Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="b85ee-148">Let's start by creating a new ASP.NET MVC Web Application project in Visual Studio 2008.</span></span> <span data-ttu-id="b85ee-149">Выберите пункт меню в **файл, создать проект** и вы увидите диалоговое окно нового проекта на рис. 1.</span><span class="sxs-lookup"><span data-stu-id="b85ee-149">Select the menu option **File, New Project** and you will see the New Project dialog box in Figure 1.</span></span> <span data-ttu-id="b85ee-150">Выберите в качестве языка программирования C# и выберите шаблон проекта веб-приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-150">Select C# as the programming language and select the ASP.NET MVC Web Application project template.</span></span> <span data-ttu-id="b85ee-151">Присвойте проекту имя MovieApp и нажмите кнопку "ОК".</span><span class="sxs-lookup"><span data-stu-id="b85ee-151">Give your project the name MovieApp and click the OK button.</span></span>


<span data-ttu-id="b85ee-152">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-152">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span></span>

<span data-ttu-id="b85ee-153">**На рисунке 01**: диалоговое окно «Новый проект» ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-153">**Figure 01**: The New Project dialog box ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span></span>


<span data-ttu-id="b85ee-154">Убедитесь в том, что .NET Framework 3.5 выберите из раскрывающегося списка в верхней части диалогового окна нового проекта или шаблона проекта веб-приложения ASP.NET MVC не будет отображаться.</span><span class="sxs-lookup"><span data-stu-id="b85ee-154">Make sure that you select .NET Framework 3.5 from the dropdown list at the top of the New Project dialog or the ASP.NET MVC Web Application project template won't appear.</span></span>


<span data-ttu-id="b85ee-155">Каждый раз при создании нового проекта веб-приложение MVC, Visual Studio предложит пользователю создавать проект модульного теста.</span><span class="sxs-lookup"><span data-stu-id="b85ee-155">Whenever you create a new MVC Web Application project, Visual Studio prompts you to create a separate unit test project.</span></span> <span data-ttu-id="b85ee-156">Откроется диалоговое окно, на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="b85ee-156">The dialog in Figure 2 appears.</span></span> <span data-ttu-id="b85ee-157">Поскольку мы не будет создавать тесты в этом учебнике из-за ограничений по времени (и Да, мы должно быть немного какой об этом) выберите **нет** и нажмите кнопку **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-157">Because we won't be creating tests in this tutorial because of time constraints (and, yes, we should feel a little guilty about this) select the **No** option and click the **OK** button.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-158">Visual Web Developer не поддерживает проекты тестов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-158">Visual Web Developer does not support test projects.</span></span>


<span data-ttu-id="b85ee-159">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-159">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span></span>

<span data-ttu-id="b85ee-160">**На рисунке 02**: диалоговое окно Создание проекта модульных тестов ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-160">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span></span>


<span data-ttu-id="b85ee-161">Приложение ASP.NET MVC имеет стандартный набор папок: папки модели, представления и контроллеры.</span><span class="sxs-lookup"><span data-stu-id="b85ee-161">An ASP.NET MVC application has a standard set of folders: a Models, Views, and Controllers folder.</span></span> <span data-ttu-id="b85ee-162">Вы увидите этот стандартный набор папок в окне обозревателя решений.</span><span class="sxs-lookup"><span data-stu-id="b85ee-162">You can see this standard set of folders in the Solution Explorer window.</span></span> <span data-ttu-id="b85ee-163">Нам нужно будет добавить файлы для каждой модели, представления и контроллеры папки для построения нашего фильма базы данных приложения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-163">We'll need to add files to each of the Models, Views, and Controllers folders in order to build our Movie Database application.</span></span>

<span data-ttu-id="b85ee-164">При создании новых MVC-приложений с помощью Visual Studio, вы получаете образец приложения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-164">When you create a new MVC application with Visual Studio, you get a sample application.</span></span> <span data-ttu-id="b85ee-165">Поскольку мы хотим начать с нуля, необходимо удалить содержимое для этого примера приложения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-165">Because we want to start from scratch, we need to delete the content for this sample application.</span></span> <span data-ttu-id="b85ee-166">Вам необходимо удалить следующий файл и в следующую папку:</span><span class="sxs-lookup"><span data-stu-id="b85ee-166">You need to delete the following file and the following folder:</span></span>

- <span data-ttu-id="b85ee-167">Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="b85ee-167">Controllers\HomeController.cs</span></span>
- <span data-ttu-id="b85ee-168">Views\Home</span><span class="sxs-lookup"><span data-stu-id="b85ee-168">Views\Home</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="b85ee-169">Создание базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-169">Creating the Database</span></span>

<span data-ttu-id="b85ee-170">Необходимо создать базу данных для хранения фильма записям базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-170">We need to create a database to hold our movie database records.</span></span> <span data-ttu-id="b85ee-171">К счастью Visual Studio включает бесплатную базу данных с именем SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="b85ee-171">Luckily, Visual Studio includes a free database named SQL Server Express.</span></span> <span data-ttu-id="b85ee-172">Выполните следующие действия для создания базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-172">Follow these steps to create the database:</span></span>

1. <span data-ttu-id="b85ee-173">Щелкните правой кнопкой мыши приложение\_папки данных в окне обозревателя решений и выберите пункт меню **добавить, новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-173">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="b85ee-174">Выберите **данные** категорию и выберите **базы данных SQL Server** шаблона (см. рис. 3).</span><span class="sxs-lookup"><span data-stu-id="b85ee-174">Select the **Data** category and select the **SQL Server Database** template (see Figure 3).</span></span>
3. <span data-ttu-id="b85ee-175">Имя новой базы данных *MoviesDB.mdf* и нажмите кнопку **добавить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-175">Name your new database *MoviesDB.mdf* and click the **Add** button.</span></span>

<span data-ttu-id="b85ee-176">После создания базы данных, можно соединиться с базой данных, дважды щелкнув файл MoviesDB.mdf, расположенный в приложении\_папки данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-176">After you create your database, you can connect to the database by double-clicking the MoviesDB.mdf file located in the App\_Data folder.</span></span> <span data-ttu-id="b85ee-177">Дважды щелкните файл MoviesDB.mdf открыть окно обозревателя серверов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-177">Double-clicking the MoviesDB.mdf file opens the Server Explorer window.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-178">Окно обозревателя серверов называется окно обозревателя базы данных в случае Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="b85ee-178">The Server Explorer window is named the Database Explorer window in the case of Visual Web Developer.</span></span>


<span data-ttu-id="b85ee-179">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-179">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span></span>

<span data-ttu-id="b85ee-180">**На рисунке 03**: Создание базы данных Microsoft SQL Server ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-180">**Figure 03**: Creating a Microsoft SQL Server Database ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span></span>


<span data-ttu-id="b85ee-181">Теперь нам нужны для создания новой таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-181">Next, we need to create a new database table.</span></span> <span data-ttu-id="b85ee-182">Из в окне обозревателя сервера, щелкните правой кнопкой мыши папку «таблицы» и выберите пункт меню в **добавить новую таблицу**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-182">From within the Sever Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="b85ee-183">При выборе этого параметра меню откроется конструктор таблиц базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-183">Selecting this menu option opens the database table designer.</span></span> <span data-ttu-id="b85ee-184">Создайте следующие столбцы базы данных:</span><span class="sxs-lookup"><span data-stu-id="b85ee-184">Create the following database columns:</span></span>

<a id="0.1_table01"></a>


| <span data-ttu-id="b85ee-185">**Имя столбца**</span><span class="sxs-lookup"><span data-stu-id="b85ee-185">**Column Name**</span></span> | <span data-ttu-id="b85ee-186">**Тип данных**</span><span class="sxs-lookup"><span data-stu-id="b85ee-186">**Data Type**</span></span> | <span data-ttu-id="b85ee-187">**Разрешить значения NULL**</span><span class="sxs-lookup"><span data-stu-id="b85ee-187">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b85ee-188">Идентификатор</span><span class="sxs-lookup"><span data-stu-id="b85ee-188">Id</span></span> | <span data-ttu-id="b85ee-189">Int</span><span class="sxs-lookup"><span data-stu-id="b85ee-189">Int</span></span> | <span data-ttu-id="b85ee-190">False</span><span class="sxs-lookup"><span data-stu-id="b85ee-190">False</span></span> |
| <span data-ttu-id="b85ee-191">Заголовок</span><span class="sxs-lookup"><span data-stu-id="b85ee-191">Title</span></span> | <span data-ttu-id="b85ee-192">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="b85ee-192">Nvarchar(100)</span></span> | <span data-ttu-id="b85ee-193">False</span><span class="sxs-lookup"><span data-stu-id="b85ee-193">False</span></span> |
| <span data-ttu-id="b85ee-194">Директор</span><span class="sxs-lookup"><span data-stu-id="b85ee-194">Director</span></span> | <span data-ttu-id="b85ee-195">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="b85ee-195">Nvarchar(100)</span></span> | <span data-ttu-id="b85ee-196">False</span><span class="sxs-lookup"><span data-stu-id="b85ee-196">False</span></span> |
| <span data-ttu-id="b85ee-197">DateReleased</span><span class="sxs-lookup"><span data-stu-id="b85ee-197">DateReleased</span></span> | <span data-ttu-id="b85ee-198">DateTime</span><span class="sxs-lookup"><span data-stu-id="b85ee-198">DateTime</span></span> | <span data-ttu-id="b85ee-199">False</span><span class="sxs-lookup"><span data-stu-id="b85ee-199">False</span></span> |


<span data-ttu-id="b85ee-200">Первый столбец, столбец идентификатора имеет два специальных свойства.</span><span class="sxs-lookup"><span data-stu-id="b85ee-200">The first column, the Id column, has two special properties.</span></span> <span data-ttu-id="b85ee-201">Во-первых необходимо пометить идентификатор столбца, как столбец первичного ключа.</span><span class="sxs-lookup"><span data-stu-id="b85ee-201">First, you need to mark the Id column as the primary key column.</span></span> <span data-ttu-id="b85ee-202">Выбрав столбец идентификатора, нажмите кнопку **задать первичный ключ** кнопки (это значок, который выглядит как ключ).</span><span class="sxs-lookup"><span data-stu-id="b85ee-202">After selecting the Id column, click the **Set Primary Key** button (it is the icon that looks like a key).</span></span> <span data-ttu-id="b85ee-203">Во-вторых необходимо пометить идентификатор столбца, как столбец идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-203">Second, you need to mark the Id column as an Identity column.</span></span> <span data-ttu-id="b85ee-204">В окне «Свойства столбца» перейдите к разделу Спецификация идентификации и разверните его.</span><span class="sxs-lookup"><span data-stu-id="b85ee-204">In the Column Properties window, scroll down to the Identity Specification section and expand it.</span></span> <span data-ttu-id="b85ee-205">Изменение **Is Identity** значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-205">Change the **Is Identity** property to the value **Yes**.</span></span> <span data-ttu-id="b85ee-206">Когда вы закончите, таблица должна выглядеть как на рис. 4.</span><span class="sxs-lookup"><span data-stu-id="b85ee-206">When you are finished, the table should look like Figure 4.</span></span>


<span data-ttu-id="b85ee-207">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-207">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span></span>

<span data-ttu-id="b85ee-208">**На рисунке 04**: фильмы таблицы базы данных ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-208">**Figure 04**: The Movies database table ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span></span>


<span data-ttu-id="b85ee-209">Последним шагом является сохранение новой таблицы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-209">The final step is to save the new table.</span></span> <span data-ttu-id="b85ee-210">Нажмите кнопку «Сохранить» (значок дискеты) и предоставить фильмы имя новой таблицы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-210">Click the Save button (the icon of the floppy) and give the new table the name Movies.</span></span>

<span data-ttu-id="b85ee-211">После создания таблицы, добавьте некоторые фильма записи в таблицу.</span><span class="sxs-lookup"><span data-stu-id="b85ee-211">After you finish creating the table, add some movie records to the table.</span></span> <span data-ttu-id="b85ee-212">Щелкните правой кнопкой мыши таблицу фильмов в окне обозревателя серверов и выберите пункт меню в **Показать таблицу данных**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-212">Right-click the Movies table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="b85ee-213">Введите список избранных фильмы (см. рис. 5).</span><span class="sxs-lookup"><span data-stu-id="b85ee-213">Enter a list of your favorite movies (see Figure 5).</span></span>


<span data-ttu-id="b85ee-214">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-214">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span></span>

<span data-ttu-id="b85ee-215">**На рисунке 05**: ввода записи фильма ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-215">**Figure 05**: Entering movie records ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span></span>


## <a name="creating-the-model"></a><span data-ttu-id="b85ee-216">Создание модели</span><span class="sxs-lookup"><span data-stu-id="b85ee-216">Creating the Model</span></span>

<span data-ttu-id="b85ee-217">Далее необходимо создать набор классов для представления в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-217">We next need to create a set of classes to represent our database.</span></span> <span data-ttu-id="b85ee-218">Необходимо создать модель базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-218">We need to create a database model.</span></span> <span data-ttu-id="b85ee-219">Мы будем воспользоваться преимуществами Microsoft Entity Framework для создания классов для нашей модели базы данных автоматически.</span><span class="sxs-lookup"><span data-stu-id="b85ee-219">We'll take advantage of the Microsoft Entity Framework to generate the classes for our database model automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-220">Платформа ASP.NET MVC не привязан к платформе Entity Framework корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="b85ee-220">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework.</span></span> <span data-ttu-id="b85ee-221">Базы данных можно создать классы модели, используя преимущества различных объекта реляционного сопоставления (или / M) средств, включая LINQ to SQL, Subsonic и NHibernate.</span><span class="sxs-lookup"><span data-stu-id="b85ee-221">You can create your database model classes by taking advantage of a variety of Object Relational Mapping (OR/M) tools including LINQ to SQL, Subsonic, and NHibernate.</span></span>


<span data-ttu-id="b85ee-222">Выполните следующие действия, чтобы запустить мастер моделей EDM.</span><span class="sxs-lookup"><span data-stu-id="b85ee-222">Follow these steps to launch the Entity Data Model Wizard:</span></span>

1. <span data-ttu-id="b85ee-223">Щелкните правой кнопкой мыши папку модели в окне обозревателя решений и выберите пункт меню **добавить, новый элемент**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-223">Right-click the Models folder in the Solution Explorer window and the select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="b85ee-224">Выберите **данные** категорию и выберите **ADO.NET Entity Data Model** шаблона.</span><span class="sxs-lookup"><span data-stu-id="b85ee-224">Select the **Data** category and select the **ADO.NET Entity Data Model** template.</span></span>
3. <span data-ttu-id="b85ee-225">Присвойте имя модели данных *MoviesDBModel.edmx* и нажмите кнопку **добавить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-225">Give your data model the name *MoviesDBModel.edmx* and click the **Add** button.</span></span>

<span data-ttu-id="b85ee-226">После нажатия кнопки Добавить появится мастер моделей EDM (см. рис. 6).</span><span class="sxs-lookup"><span data-stu-id="b85ee-226">After you click the Add button, the Entity Data Model Wizard appears (see Figure 6).</span></span> <span data-ttu-id="b85ee-227">Выполните следующие действия, чтобы завершить работу мастера.</span><span class="sxs-lookup"><span data-stu-id="b85ee-227">Follow these steps to complete the wizard:</span></span>

1. <span data-ttu-id="b85ee-228">В **Выбор содержимого модели** шаг, выберите **создать из базы данных** параметр.</span><span class="sxs-lookup"><span data-stu-id="b85ee-228">In the **Choose Model Contents** step, select the **Generate from database** option.</span></span>
2. <span data-ttu-id="b85ee-229">В **Выбор подключения к данным** шаг, используйте *MoviesDB.mdf* подключения данных и имени *MoviesDBEntities* параметров подключения.</span><span class="sxs-lookup"><span data-stu-id="b85ee-229">In the **Choose Your Data Connection** step, use the *MoviesDB.mdf* data connection and the name *MoviesDBEntities* for the connection settings.</span></span> <span data-ttu-id="b85ee-230">Нажмите кнопку **Далее** кнопки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-230">Click the **Next** button.</span></span>
3. <span data-ttu-id="b85ee-231">В **Выбор объектов базы данных** шаг, разверните узел таблицы, выберите таблицу, фильмов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-231">In the **Choose Your Database Objects** step, expand the Tables node, select the Movies table.</span></span> <span data-ttu-id="b85ee-232">Введите пространство имен *MovieApp.Models* и нажмите кнопку **Готово** кнопки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-232">Enter the namespace *MovieApp.Models* and click the **Finish** button.</span></span>


<span data-ttu-id="b85ee-233">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-233">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span></span>

<span data-ttu-id="b85ee-234">**На рисунке 06**: Создание модели базы данных с помощью мастера моделей EDM ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-234">**Figure 06**: Generating a database model with the Entity Data Model Wizard ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span></span>


<span data-ttu-id="b85ee-235">После завершения мастера моделей EDM, откроется конструктор модели EDM.</span><span class="sxs-lookup"><span data-stu-id="b85ee-235">After you complete the Entity Data Model Wizard, the Entity Data Model Designer opens.</span></span> <span data-ttu-id="b85ee-236">Конструктор должен отображать фильмы таблицы базы данных (см. рис. 7).</span><span class="sxs-lookup"><span data-stu-id="b85ee-236">The Designer should display the Movies database table (see Figure 7).</span></span>


<span data-ttu-id="b85ee-237">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-237">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span></span>

<span data-ttu-id="b85ee-238">**На рисунке 07**: конструктор моделей EDM ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-238">**Figure 07**: The Entity Data Model Designer ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span></span>


<span data-ttu-id="b85ee-239">Необходимо внести одно изменение, перед продолжением.</span><span class="sxs-lookup"><span data-stu-id="b85ee-239">We need to make one change before we continue.</span></span> <span data-ttu-id="b85ee-240">Мастер EDM создает класс с именем модели *фильмов* , представляющий таблицу базы данных фильмов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-240">The Entity Data Wizard generates a model class named *Movies* that represents the Movies database table.</span></span> <span data-ttu-id="b85ee-241">Так как мы будем использовать фильмы класс для представления определенного фильма, необходимо изменить имя класса, чтобы быть *фильма* вместо *фильмов* (единственного числа вместо множественного числа).</span><span class="sxs-lookup"><span data-stu-id="b85ee-241">Because we'll use the Movies class to represent a particular movie, we need to modify the name of the class to be *Movie* instead of *Movies* (singular rather than plural).</span></span>

<span data-ttu-id="b85ee-242">Дважды щелкните имя класса в рабочей области конструктора и измените имя класса из фильмов на фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-242">Double-click the name of the class on the designer surface and change the name of the class from Movies to Movie.</span></span> <span data-ttu-id="b85ee-243">После внесения этого изменения, нажмите кнопку **Сохранить** кнопку (значок дискеты) для создания класса фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-243">After making this change, click the **Save** button (the icon of the floppy disk) to generate the Movie class.</span></span>

## <a name="creating-the-aspnet-mvc-controller"></a><span data-ttu-id="b85ee-244">Создание контроллера ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="b85ee-244">Creating the ASP.NET MVC Controller</span></span>

<span data-ttu-id="b85ee-245">Следующим шагом является создание контроллера ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-245">The next step is to create the ASP.NET MVC controller.</span></span> <span data-ttu-id="b85ee-246">Контроллер отвечает за управление как пользователь взаимодействует с приложением ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-246">A controller is responsible for controlling how a user interacts with an ASP.NET MVC application.</span></span>

<span data-ttu-id="b85ee-247">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b85ee-247">Follow these steps:</span></span>

1. <span data-ttu-id="b85ee-248">В окне обозревателя решений щелкните правой кнопкой мыши папку Controllers и выбрать пункт меню **Add, контроллер**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-248">In the Solution Explorer window, right-click the Controllers folder and select the menu option **Add, Controller**.</span></span>
2. <span data-ttu-id="b85ee-249">В диалоговом окне добавления контроллера, введите имя *HomeController* и установите флажок "с меткой" **добавить методы действий для сценариев создания, обновления и сведения о** (см. рис. 8).</span><span class="sxs-lookup"><span data-stu-id="b85ee-249">In the Add Controller dialog, enter the name *HomeController* and check the checkbox labeled **Add action methods for Create, Update, and Details scenarios** (see Figure 8).</span></span>
3. <span data-ttu-id="b85ee-250">Нажмите кнопку **добавить** кнопку, чтобы добавить в проект новый контроллер.</span><span class="sxs-lookup"><span data-stu-id="b85ee-250">Click the **Add** button to add the new controller to your project.</span></span>

<span data-ttu-id="b85ee-251">После выполнения этих шагов создается контроллера в листинге 1.</span><span class="sxs-lookup"><span data-stu-id="b85ee-251">After you complete these steps, the controller in Listing 1 is created.</span></span> <span data-ttu-id="b85ee-252">Обратите внимание, что он содержит методы, с именем индекса, сведения, создать и изменение.</span><span class="sxs-lookup"><span data-stu-id="b85ee-252">Notice that it contains methods named Index, Details, Create, and Edit.</span></span> <span data-ttu-id="b85ee-253">В следующих разделах мы добавим необходимый код для получения этих методов для работы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-253">In the following sections, we'll add the necessary code to get these methods to work.</span></span>


<span data-ttu-id="b85ee-254">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-254">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span></span>

<span data-ttu-id="b85ee-255">**На рисунке 08**: Добавление нового контроллера ASP.NET MVC ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-255">**Figure 08**: Adding a new ASP.NET MVC Controller ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span></span>


<span data-ttu-id="b85ee-256">**Перечисление Controllers\HomeController.cs. 1.**</span><span class="sxs-lookup"><span data-stu-id="b85ee-256">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample1.cs)]

## <a name="listing-database-records"></a><span data-ttu-id="b85ee-257">Список записей базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-257">Listing Database Records</span></span>

<span data-ttu-id="b85ee-258">Метод Index() контроллера Home является по умолчанию для приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-258">The Index() method of the Home controller is the default method for an ASP.NET MVC application.</span></span> <span data-ttu-id="b85ee-259">При запуске приложения ASP.NET MVC, метод Index() является первый контроллер метод, вызываемый.</span><span class="sxs-lookup"><span data-stu-id="b85ee-259">When you run an ASP.NET MVC application, the Index() method is the first controller method that is called.</span></span>

<span data-ttu-id="b85ee-260">Мы будем использовать метод Index() для отображения списка записей из таблицы базы данных фильмов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-260">We'll use the Index() method to display the list of records from the Movies database table.</span></span> <span data-ttu-id="b85ee-261">Мы воспользуюсь базы данных классов модели, которые извлекаются фильма базы данных с помощью метода Index() созданную ранее.</span><span class="sxs-lookup"><span data-stu-id="b85ee-261">We'll take advantage of the database model classes that we created earlier to retrieve the movie database records with the Index() method.</span></span>

<span data-ttu-id="b85ee-262">Я изменил класс HomeController в списке 2, чтобы он содержал новый закрытое поле с именем \_базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-262">I've modified the HomeController class in Listing 2 so that it contains a new private field named \_db.</span></span> <span data-ttu-id="b85ee-263">Класс MoviesDBEntities представляет нашей модели базы данных, и мы будем использовать этот класс для взаимодействия с нашей базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-263">The MoviesDBEntities class represents our database model and we'll use this class to communicate with our database.</span></span>

<span data-ttu-id="b85ee-264">Я также изменил метод Index() в списке 2.</span><span class="sxs-lookup"><span data-stu-id="b85ee-264">I've also modified the Index() method in Listing 2.</span></span> <span data-ttu-id="b85ee-265">Метод Index() используется класс MoviesDBEntities для получения всех фильма записей из таблицы базы данных фильмов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-265">The Index() method uses the MoviesDBEntities class to retrieve all of the movie records from the Movies database table.</span></span> <span data-ttu-id="b85ee-266">Выражение  *\_db. MovieSet.ToList()* возвращает список всех записей фильма фильмы таблицы базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-266">The expression *\_db.MovieSet.ToList()* returns a list of all of the movie records from the Movies database table.</span></span>

<span data-ttu-id="b85ee-267">Список фильмов передается в представление.</span><span class="sxs-lookup"><span data-stu-id="b85ee-267">The list of movies is passed to the view.</span></span> <span data-ttu-id="b85ee-268">Все, что передается в метод View() передается в представление как представление данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-268">Anything that gets passed to the View() method gets passed to the view as view data.</span></span>

<span data-ttu-id="b85ee-269">**Листинг 2 — Controllers/HomeController.cs (измененный метод индекс)**</span><span class="sxs-lookup"><span data-stu-id="b85ee-269">**Listing 2 – Controllers/HomeController.cs (modified Index method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample2.cs)]

<span data-ttu-id="b85ee-270">Метод Index() возвращает представление с именем индекса.</span><span class="sxs-lookup"><span data-stu-id="b85ee-270">The Index() method returns a view named Index.</span></span> <span data-ttu-id="b85ee-271">Нам нужно создать это представление, чтобы отобразить список фильмов записей базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-271">We need to create this view to display the list of movie database records.</span></span> <span data-ttu-id="b85ee-272">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b85ee-272">Follow these steps:</span></span>


<span data-ttu-id="b85ee-273">Необходимость создания проекта (пункт меню **построить, построить решение**) перед открытием **добавить представление** диалогового окна или классы не будут отображаться в **просматривать данные класс** раскрывающийся список.</span><span class="sxs-lookup"><span data-stu-id="b85ee-273">You should build your project (select the menu option **Build, Build Solution**) before opening the **Add View** dialog or no classes will appear in the **View data class** dropdown list.</span></span>


1. <span data-ttu-id="b85ee-274">Щелкните правой кнопкой мыши метод Index() в редакторе кода и выберите пункт меню в **добавить представление** (см. рис. 9).</span><span class="sxs-lookup"><span data-stu-id="b85ee-274">Right-click the Index() method in the code editor and select the menu option **Add View** (see Figure 9).</span></span>
2. <span data-ttu-id="b85ee-275">В диалоговом окне Добавить представление, проверьте флажок с меткой **создать строго типизированное представление** проверяется.</span><span class="sxs-lookup"><span data-stu-id="b85ee-275">In the Add View dialog, verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="b85ee-276">Из **просматривать содержимое** раскрывающемся списке выберите значение *списка*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-276">From the **View content** dropdown list, select the value *List*.</span></span>
4. <span data-ttu-id="b85ee-277">Из **просматривать данные класс** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-277">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="b85ee-278">Нажмите кнопку "Добавить" для создания нового представления (см. рис. 10).</span><span class="sxs-lookup"><span data-stu-id="b85ee-278">Click the Add button to create the new view (see Figure 10).</span></span>

<span data-ttu-id="b85ee-279">После выполнения этих действий, добавляется новое представление с именем Index.aspx папке Views\Home.</span><span class="sxs-lookup"><span data-stu-id="b85ee-279">After you complete these steps, a new view named Index.aspx is added to the Views\Home folder.</span></span> <span data-ttu-id="b85ee-280">Содержимое представления индекса включаются в списке 3.</span><span class="sxs-lookup"><span data-stu-id="b85ee-280">The contents of the Index view are included in Listing 3.</span></span>


<span data-ttu-id="b85ee-281">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-281">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span></span>

<span data-ttu-id="b85ee-282">**На рисунке 09**: Добавление представления из действия контроллера ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-282">**Figure 09**: Adding a view from a controller action ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span></span>


<span data-ttu-id="b85ee-283">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-283">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span></span>

<span data-ttu-id="b85ee-284">**Рис. 10**: Создание нового представления с диалоговым окном Добавить представление ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-284">**Figure 10**: Creating a new view with the Add View dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span></span>


<span data-ttu-id="b85ee-285">**Перечисление Views\Home\Index.aspx. 3.**</span><span class="sxs-lookup"><span data-stu-id="b85ee-285">**Listing 3 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample3.aspx)]

<span data-ttu-id="b85ee-286">В представлении индекса отображаются все записи из таблицы базы данных фильмов в HTML-таблицу фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-286">The Index view displays all of the movie records from the Movies database table within an HTML table.</span></span> <span data-ttu-id="b85ee-287">Представление содержит цикл, который выполняет итерацию каждого фильма, представленный свойством ViewData.Model.</span><span class="sxs-lookup"><span data-stu-id="b85ee-287">The view contains a foreach loop that iterates through each movie represented by the ViewData.Model property.</span></span> <span data-ttu-id="b85ee-288">При запуске приложение, нажав клавишу F5, вы увидите веб-страницы на рис. 11.</span><span class="sxs-lookup"><span data-stu-id="b85ee-288">If you run your application by hitting the F5 key, then you'll see the web page in Figure 11.</span></span>


<span data-ttu-id="b85ee-289">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-289">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span></span>

<span data-ttu-id="b85ee-290">**Рис. 11**: индекс представления ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-290">**Figure 11**: The Index view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span></span>


## <a name="creating-new-database-records"></a><span data-ttu-id="b85ee-291">Создание новых записей базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-291">Creating New Database Records</span></span>

<span data-ttu-id="b85ee-292">Представление Index, созданную в предыдущем разделе содержит ссылку для создания новых записей базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-292">The Index view that we created in the previous section includes a link for creating new database records.</span></span> <span data-ttu-id="b85ee-293">Добавим и реализации логики и создания представления, необходимые для создания новой записи фильма базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-293">Let's go ahead and implement the logic and create the view necessary for creating new movie database records.</span></span>

<span data-ttu-id="b85ee-294">Контроллер Home содержит два метода с именем Create().</span><span class="sxs-lookup"><span data-stu-id="b85ee-294">The Home controller contains two methods named Create().</span></span> <span data-ttu-id="b85ee-295">Первый метод Create() не имеет параметров.</span><span class="sxs-lookup"><span data-stu-id="b85ee-295">The first Create() method has no parameters.</span></span> <span data-ttu-id="b85ee-296">Эта перегрузка метода Create() используется для отображения HTML-формы для создания новой записи фильма базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-296">This overload of the Create() method is used to display the HTML form for creating a new movie database record.</span></span>

<span data-ttu-id="b85ee-297">Второй метод Create() имеет параметр FormCollection.</span><span class="sxs-lookup"><span data-stu-id="b85ee-297">The second Create() method has a FormCollection parameter.</span></span> <span data-ttu-id="b85ee-298">Эта перегрузка метода Create() вызывается при отправке формы HTML для создания новых фильмов сервера.</span><span class="sxs-lookup"><span data-stu-id="b85ee-298">This overload of the Create() method is called when the HTML form for creating a new movie is posted to the server.</span></span> <span data-ttu-id="b85ee-299">Обратите внимание, что этот второй метод Create() AcceptVerbs атрибут, который запрещает метод вызывается, если выполняется операция HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="b85ee-299">Notice that this second Create() method has an AcceptVerbs attribute that prevents the method from being called unless an HTTP POST operation is performed.</span></span>

<span data-ttu-id="b85ee-300">Этот второй метод Create() был изменен в класс HomeController обновленные в листинге 4.</span><span class="sxs-lookup"><span data-stu-id="b85ee-300">This second Create() method has been modified in the updated HomeController class in Listing 4.</span></span> <span data-ttu-id="b85ee-301">Новая версия метода Create() принимает параметр фильма и содержит логику для вставки новых фильмов в таблице базы данных фильмов.</span><span class="sxs-lookup"><span data-stu-id="b85ee-301">The new version of the Create() method accepts a Movie parameter and contains the logic for inserting a new movie into the Movies database table.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-302">Обратите внимание на атрибут привязки.</span><span class="sxs-lookup"><span data-stu-id="b85ee-302">Notice the Bind attribute.</span></span> <span data-ttu-id="b85ee-303">Поскольку мы не нужно обновлять свойство идентификатора фильма из формы HTML, необходимо явно исключить это свойство.</span><span class="sxs-lookup"><span data-stu-id="b85ee-303">Because we don't want to update the Movie Id property from HTML form, we need to explicitly exclude this property.</span></span>


<span data-ttu-id="b85ee-304">**Листинг 4 – Controllers\HomeController.cs (измененный метод Create)**</span><span class="sxs-lookup"><span data-stu-id="b85ee-304">**Listing 4 – Controllers\HomeController.cs (modified Create method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample4.cs)]

<span data-ttu-id="b85ee-305">Visual Studio позволяет легко создать форму для создания новой базы данных фильма записи (см. рис. 12).</span><span class="sxs-lookup"><span data-stu-id="b85ee-305">Visual Studio makes it easy to create the form for creating a new movie database record (see Figure 12).</span></span> <span data-ttu-id="b85ee-306">Выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b85ee-306">Follow these steps:</span></span>

1. <span data-ttu-id="b85ee-307">Щелкните правой кнопкой мыши метод Create() в редакторе кода и выберите пункт меню в **добавить представление**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-307">Right-click the Create() method in the code editor and select the menu option **Add View**.</span></span>
2. <span data-ttu-id="b85ee-308">Убедитесь, что флажок с меткой **создать строго типизированное представление** проверяется.</span><span class="sxs-lookup"><span data-stu-id="b85ee-308">Verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="b85ee-309">Из **просматривать содержимое** раскрывающемся списке выберите значение *создать*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-309">From the **View content** dropdown list, select the value *Create*.</span></span>
4. <span data-ttu-id="b85ee-310">Из **просматривать данные класс** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-310">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="b85ee-311">Нажмите кнопку **добавить** кнопку, чтобы создать новое представление.</span><span class="sxs-lookup"><span data-stu-id="b85ee-311">Click the **Add** button to create the new view.</span></span>


<span data-ttu-id="b85ee-312">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-312">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span></span>

<span data-ttu-id="b85ee-313">**Рис. 12**: Добавление представления создания ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-313">**Figure 12**: Adding the Create view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span></span>


<span data-ttu-id="b85ee-314">Visual Studio автоматически создает представление в листинге 5.</span><span class="sxs-lookup"><span data-stu-id="b85ee-314">Visual Studio generates the view in Listing 5 automatically.</span></span> <span data-ttu-id="b85ee-315">Это представление содержит HTML-формы, содержащих поля, которые соответствуют свойствам класса фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-315">This view contains an HTML form that includes fields that correspond to each of the properties of the Movie class.</span></span>

<span data-ttu-id="b85ee-316">**Листинг 5 – Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="b85ee-316">**Listing 5 – Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample5.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="b85ee-317">HTML-формы, созданные в диалоговом окне Добавить представление создает идентификатор поля формы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-317">The HTML form generated by the Add View dialog generates an Id form field.</span></span> <span data-ttu-id="b85ee-318">Так как идентификатор столбца является столбцом идентификаторов, нам не нужен в этом поле формы и ее можно безопасно удалить.</span><span class="sxs-lookup"><span data-stu-id="b85ee-318">Because the Id column is an Identity column, we don't need this form field and you can safely remove it.</span></span>


<span data-ttu-id="b85ee-319">После добавления представления создания, можно добавить новые записи фильма к базе данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-319">After you add the Create view, you can add new Movie records to the database.</span></span> <span data-ttu-id="b85ee-320">Запустите приложение, нажав клавишу F5 и нажмите кнопку Создать ссылку, чтобы просмотреть форму на рис. 13.</span><span class="sxs-lookup"><span data-stu-id="b85ee-320">Run your application by pressing the F5 key and click the Create New link to see the form in Figure 13.</span></span> <span data-ttu-id="b85ee-321">Если завершить и отправки формы, создается новый фильма записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-321">If you complete and submit the form, a new movie database record is created.</span></span>

<span data-ttu-id="b85ee-322">Обратите внимание, автоматически получают проверку формы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-322">Notice that you get form validation automatically.</span></span> <span data-ttu-id="b85ee-323">Если не представлен введите дату выпуска фильм, или введите дату выпуска недопустимый, отобразится форма, и будет выделено поле даты выпуска.</span><span class="sxs-lookup"><span data-stu-id="b85ee-323">If you neglect to enter a release date for a movie, or you enter an invalid release date, then the form is redisplayed and the release date field is highlighted.</span></span>


<span data-ttu-id="b85ee-324">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-324">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span></span>

<span data-ttu-id="b85ee-325">**Рис. 13**: создается новая запись фильма базы данных ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-325">**Figure 13**: Creating a new movie database record ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span></span>


## <a name="editing-existing-database-records"></a><span data-ttu-id="b85ee-326">Изменение существующих записей базы данных</span><span class="sxs-lookup"><span data-stu-id="b85ee-326">Editing Existing Database Records</span></span>

<span data-ttu-id="b85ee-327">В предыдущих разделах мы рассмотрели, как можно перечислить и создания новых записей базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-327">In the previous sections, we discussed how you can list and create new database records.</span></span> <span data-ttu-id="b85ee-328">В этом разделе мы обсудим, как можно изменять существующие записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-328">In this final section, we discuss how you can edit existing database records.</span></span>

<span data-ttu-id="b85ee-329">Во-первых необходимо создать форму редактирования.</span><span class="sxs-lookup"><span data-stu-id="b85ee-329">First, we need to generate the Edit form.</span></span> <span data-ttu-id="b85ee-330">Этот шаг можно легко, так как Visual Studio создаст форме редактирования нам автоматически.</span><span class="sxs-lookup"><span data-stu-id="b85ee-330">This step is easy since Visual Studio will generate the Edit form for us automatically.</span></span> <span data-ttu-id="b85ee-331">Откройте класс HomeController.cs в редакторе кода Visual Studio и выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="b85ee-331">Open the HomeController.cs class in the Visual Studio code editor and follow these steps:</span></span>

1. <span data-ttu-id="b85ee-332">Щелкните правой кнопкой мыши метод Edit() в редакторе кода и выберите пункт меню в **добавить представление** (см. рис. 14).</span><span class="sxs-lookup"><span data-stu-id="b85ee-332">Right-click the Edit() method in the code editor and select the menu option **Add View** (see Figure 14).</span></span>
2. <span data-ttu-id="b85ee-333">Установите флажок "с меткой" **создать строго типизированное представление**.</span><span class="sxs-lookup"><span data-stu-id="b85ee-333">Check the checkbox labeled **Create a strongly-typed view**.</span></span>
3. <span data-ttu-id="b85ee-334">Из **просматривать содержимое** раскрывающемся списке выберите значение *изменить*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-334">From the **View content** dropdown list, select the value *Edit*.</span></span>
4. <span data-ttu-id="b85ee-335">Из **просматривать данные класс** раскрывающемся списке выберите значение *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="b85ee-335">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="b85ee-336">Нажмите кнопку **добавить** кнопку, чтобы создать новое представление.</span><span class="sxs-lookup"><span data-stu-id="b85ee-336">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="b85ee-337">Выполнение этих действий добавляет новое представление с именем Edit.aspx в папке Views\Home.</span><span class="sxs-lookup"><span data-stu-id="b85ee-337">Completing these steps adds a new view named Edit.aspx to the Views\Home folder.</span></span> <span data-ttu-id="b85ee-338">Это представление содержит HTML-формы для редактирования запись фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-338">This view contains an HTML form for editing a movie record.</span></span>


<span data-ttu-id="b85ee-339">[![Диалоговое окно нового проекта](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="b85ee-339">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span></span>

<span data-ttu-id="b85ee-340">**Рис. 14**: Добавление представления изменения ([Просмотр полноразмерное изображение](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="b85ee-340">**Figure 14**: Adding the Edit view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span></span>


> [!NOTE] 
> 
> <span data-ttu-id="b85ee-341">Изменить представление содержит поля формы HTML, соответствующее свойству Id фильма.</span><span class="sxs-lookup"><span data-stu-id="b85ee-341">The Edit view contains an HTML form field that corresponds to the Movie Id property.</span></span> <span data-ttu-id="b85ee-342">Поскольку вы не хотите людей, изменив значение свойства Id, следует удалить это поле формы.</span><span class="sxs-lookup"><span data-stu-id="b85ee-342">Because you don't want people editing the value of the Id property, you should remove this form field.</span></span>


<span data-ttu-id="b85ee-343">Наконец мы должны контроллер Home так, чтобы обеспечить редактирование записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-343">Finally, we need to modify the Home controller so that it supports editing a database record.</span></span> <span data-ttu-id="b85ee-344">Обновленный класс HomeController содержится в 6 со списком.</span><span class="sxs-lookup"><span data-stu-id="b85ee-344">The updated HomeController class is contained in Listing 6.</span></span>

<span data-ttu-id="b85ee-345">**Перечисление 6 – Controllers\HomeController.cs (методы редактирования)**</span><span class="sxs-lookup"><span data-stu-id="b85ee-345">**Listing 6 – Controllers\HomeController.cs (Edit methods)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample6.cs)]

<span data-ttu-id="b85ee-346">В поле со списком 6 я добавил дополнительную логику обе перегрузки метода Edit().</span><span class="sxs-lookup"><span data-stu-id="b85ee-346">In Listing 6, I've added additional logic to both overloads of the Edit() method.</span></span> <span data-ttu-id="b85ee-347">Первый метод Edit() возвращает фильма записи базы данных, соответствующий параметр Id, переданного методу.</span><span class="sxs-lookup"><span data-stu-id="b85ee-347">The first Edit() method returns the movie database record that corresponds to the Id parameter passed to the method.</span></span> <span data-ttu-id="b85ee-348">Вторая перегрузка выполняет обновления записи фильма в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-348">The second overload performs the updates to a movie record in the database.</span></span>

<span data-ttu-id="b85ee-349">Обратите внимание, что необходимо получить исходный фильм, а затем вызвать ApplyPropertyChanges(), чтобы обновить существующий фильм в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b85ee-349">Notice that you must retrieve the original movie, and then call ApplyPropertyChanges(), to update the existing movie in the database.</span></span>

## <a name="summary"></a><span data-ttu-id="b85ee-350">Сводка</span><span class="sxs-lookup"><span data-stu-id="b85ee-350">Summary</span></span>

<span data-ttu-id="b85ee-351">Целью данного учебника было дать представление качества построения приложения ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-351">The purpose of this tutorial was to give you a sense of the experience of building an ASP.NET MVC application.</span></span> <span data-ttu-id="b85ee-352">Надеюсь, чтобы обнаружить, что создание веб-приложения ASP.NET MVC очень похож на процесс построения приложения страницы ASP или ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b85ee-352">I hope that you discovered that building an ASP.NET MVC web application is very similar to the experience of building an Active Server Pages or ASP.NET application.</span></span>

<span data-ttu-id="b85ee-353">В этом учебнике мы рассмотрели основные функции платформы ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b85ee-353">In this tutorial, we examined only the most basic features of the ASP.NET MVC framework.</span></span> <span data-ttu-id="b85ee-354">В будущих учебниках мы более глубоко рассмотреть эти подразделы, такие как контроллеров, действия контроллера, представления, представления данных и вспомогательные методы HTML.</span><span class="sxs-lookup"><span data-stu-id="b85ee-354">In future tutorials, we dive deeper into topics such as controllers, controller actions, views, view data, and HTML helpers.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="b85ee-355">Вперед</span><span class="sxs-lookup"><span data-stu-id="b85ee-355">Next</span></span>](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-vb.md)
