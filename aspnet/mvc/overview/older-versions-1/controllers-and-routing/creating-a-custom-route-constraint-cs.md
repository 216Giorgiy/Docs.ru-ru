---
uid: mvc/overview/older-versions-1/controllers-and-routing/creating-a-custom-route-constraint-cs
title: Создание ограничения маршрута Custom (C#) | Документы Microsoft
author: StephenWalther
description: Стивен Вальтер показано, как можно создать ограничение настраиваемый маршрут. Мы реализуем простой пользовательский ограничение, которое блокирует маршрут соответствует w...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/16/2009
ms.topic: article
ms.assetid: a4f4bf4e-abcc-4650-8f43-527e48b52fe6
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/creating-a-custom-route-constraint-cs
msc.type: authoredcontent
ms.openlocfilehash: 4c120a102b117433b6774f2ea7800f1c4a609f8b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="creating-a-custom-route-constraint-c"></a>Создание ограничения маршрута Custom (C#)
====================
по [Стивен Вальтер](https://github.com/StephenWalther)

> Стивен Вальтер показано, как можно создать ограничение настраиваемый маршрут. Мы реализовали простой пользовательский ограничение, которое предотвращает маршрут соответствует при запрос браузера с удаленного компьютера.


Целью данного учебника является демонстрация как можно создать ограничение настраиваемый маршрут. Настраиваемый маршрут ограничение позволяет предотвратить сравниваемыми, если совпадают некоторые настраиваемого условия маршрута.

В этом учебнике мы создания ограничения маршрута Localhost. Ограничения маршрута Localhost соответствует только запросы от локального компьютера. Удаленные запросы из через Интернет не соответствуют.

Реализовать ограничение настраиваемый маршрут, реализовав интерфейс IRouteConstraint. Это очень простой интерфейс, который описывает один метод:

[!code-csharp[Main](creating-a-custom-route-constraint-cs/samples/sample1.cs)]

Метод возвращает логическое значение. Если возвращается значение false, маршрута, связанного с ограничением не соответствует запросу браузера.

Ограничение Localhost содержится в листинге 1.

**Листинг 1 - LocalhostConstraint.cs**

[!code-csharp[Main](creating-a-custom-route-constraint-cs/samples/sample2.cs)]

Ограничение в список 1 использует свойство IsLocal класса HttpRequest. Это свойство возвращает значение true, если IP-адрес запроса либо 127.0.0.1 или если IP-адрес запроса будет таким же, как IP-адрес сервера.

Можно использовать пользовательские ограничения маршрута, определен в файле Global.asax. Файл Global.asax в списке 2 использует ограничение Localhost чтобы запретить запросе страницы администрирования, если они не выполняете запрос с локального сервера. Например запрос /Admin/DeleteAll завершится ошибкой при внесении с удаленного сервера.

**Листинг 2 - Global.asax**

[!code-csharp[Main](creating-a-custom-route-constraint-cs/samples/sample3.cs)]

Ограничение Localhost используется в определении маршрута администратора. Запрос удаленной браузера, не будет соответствовать этот маршрут. Однако поймите, что тот же запрос может совпадать с других маршрутов, указанных в файле Global.asax. Важно понимать, что ограничение не позволяет сопоставить запрос на конкретный маршрут и не все маршруты, определенный в файле Global.asax.

Обратите внимание, что маршрут по умолчанию был закомментирован из файла Global.asax в списке 2. При включении маршрута по умолчанию маршрута по умолчанию будет соответствовать запросов для администрирования контроллера. В этом случае удаленные пользователи по-прежнему удалось вызвать действий администратора контроллера, несмотря на то, что их запросы не соответствует маршруту администратора.

> [!div class="step-by-step"]
> [Назад](creating-a-route-constraint-cs.md)
> [Вперед](asp-net-mvc-controller-overview-vb.md)
