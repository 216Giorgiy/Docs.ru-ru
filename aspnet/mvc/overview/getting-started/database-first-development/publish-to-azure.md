---
uid: mvc/overview/getting-started/database-first-development/publish-to-azure
title: "Опубликовать MVC базы данных первого сайта в Azure | Документы Microsoft"
author: tfitzmac
description: "С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот учебник seri..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/22/2014
ms.topic: article
ms.assetid: 7131f1c1-cef3-4396-ab44-ed4519676546
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/database-first-development/publish-to-azure
msc.type: authoredcontent
ms.openlocfilehash: f75b7192b4d97c88fcbcb4ad7fef88c83157c902
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="publish-mvc-database-first-site-to-azure"></a>Опубликовать MVC базы данных первого сайта в Azure
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот ряд учебника показано, как автоматически создают код, который дает пользователям возможность отображения, изменения, создания и удаления данных, которые хранятся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.
> 
> Эта часть ряда фокусируется на публикации веб-приложения и базы данных в Azure. Можно прочитать этот раздел, чтобы узнать о публикации веб-приложения и базы данных, но для фактического выполнения шагов, которые должно начинаться в начале этого учебника. В разделе [Приступая к работе](setting-up-database.md).


## <a name="deploy-your-web-app-on-azure"></a>Развертывание веб-приложения в Azure

Требуется учетная запись Azure для выполнения заданий данного учебника:

- Вы можете [открыть учетную запись Azure бесплатно](https://azure.microsoft.com/en-us/pricing/free-trial/?WT.mc_id=A261C142F) -вы получаете кредиты можно использовать, чтобы испытать оплаты служб Azure и даже после того, они используются до можно хранить учетной записи, и используйте освободить служб Azure.
- Вы можете [активировать преимущества для подписчиков MSDN](https://azure.microsoft.com/en-us/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F) -подписка Your MSDN дает кредиты каждого месяца, можно использовать для оплаты служб Azure.

Чтобы опубликовать веб-приложения, щелкните правой кнопкой мыши проект и выберите **публикации**.

![опубликовать сайт](publish-to-azure/_static/image1.png)

Выберите веб-сайтов Microsoft Azure.

![Выберите Azure](publish-to-azure/_static/image2.png)

Если вы не вошли Azure, введите учетные данные учетной записи Azure. Выберите создать, чтобы создать новое веб-приложение.

![новый сайт](publish-to-azure/_static/image3.png)

Создайте уникальное имя для веб-приложения. Вы будете знать, что имя уникально Если отображается зеленая галочка справа от поля «имя». Выберите регион для веб-приложения. Выберите **создать новый сервер** для базы данных и укажите имя пользователя и пароль для этого нового сервера базы данных. По завершении нажмите кнопку **создать**.

![Создание сайта](publish-to-azure/_static/image4.png)

Значения подключения теперь все настроены. Можно оставить их без изменений.

![connection](publish-to-azure/_static/image5.png)

Нажмите кнопку **Далее**.

Обратите внимание, что два подключений к базе данных указаны для параметров - ApplicationDBContext и ContosoUniversityDataEntities. ApplicationDBContext является соединение таблиц учетной записи пользователя. Эти значения отображаются только строки подключения для базы данных. Это означает, что эти базы данных будет опубликован, при публикации веб-узла. После завершения публикации веб-приложения вы публикуете проект базы данных.

![](publish-to-azure/_static/image6.png)

Многоточие (...) рядом с подключения к базе данных показаны сведения о строке подключения. Нажмите кнопку с многоточием рядом с ContosoUniversityDataEntities.

![](publish-to-azure/_static/image7.png)

Обратите внимание на имя сервера базы данных и базы данных. Имя сервера формируется случайным образом. Имя базы данных — простое имя узла с  **\_db** добавляется. Понадобится имена обоих позже при публикации базы данных.

Нажмите кнопку **ОК** закрыть окно строку подключения базы данных.

В окне «Публикация веб-сайта» выберите **Далее** предварительного просмотра.

![](publish-to-azure/_static/image8.png)

Можно щелкнуть Запуск предварительного просмотра, чтобы увидеть список файлов для публикации. Поскольку это первый раз, необходимо опубликовать этот сайт, список будет каждого необходимого файла в проекте.

Нажмите кнопку **Опубликовать**.

Область вывода результат будет отображен в публикации.

![](publish-to-azure/_static/image9.png)

После публикации этот сайт является immedialely, запущенный в веб-браузере. Веб-узла была развернута и вы можете зарегистрировать нового пользователя на сайте. Однако таблицы в проекте ContosoUniversityData не еще были опубликованы. Если щелкнуть в списке учащихся ссылку вы получите ошибку.

## <a name="publish-database-to-sql-azure"></a>Публикация базы данных SQL Azure

Перед публикацией базы данных, необходимо убедиться, что ваш локальный компьютер может подключиться к серверу базы данных. Ограничивает брандмауэра для сервера базы данных, которой машины могут подключаться к базе данных. Необходимо добавить IP-адрес компьютера разрешенных IP-адресов для брандмауэра.

Имя входа для учетной записи Azure на портале Azure.

Выберите новую базу данных и выберите **управление**.

![Управление](publish-to-azure/_static/image10.png)

Необходимо настроить для разрешения подключений с компьютера сервера базы данных. При выборе управление, вам будет предложено добавить текущий IP-адрес, разрешенными для сервера базы данных. Выберите "Да".

![Добавьте IP-адрес](publish-to-azure/_static/image11.png)

Имеется возможность того, что IP-адрес, добавленного на предыдущем шаге не только IP-адрес, необходимые для настройки соединений. Можно попытаться войти в базу данных на предмет соединений были правильно настроены. Укажите имя пользователя и пароль, который был создан ранее.

![Имя входа](publish-to-azure/_static/image12.png)

Если появляется сообщение об ошибке, необходимо добавить другой IP-адрес. Щелкните сообщение об ошибке для получения дополнительных сведений об ошибке. В области сведений вы увидите IP-адрес, который необходимо добавить. Обратите внимание, этот IP-адрес.

![не допускается](publish-to-azure/_static/image13.png)

Закройте это окно входа в систему и вернуться к порталу Azure.

Перейдите к панели мониторинга для базы данных. Нажмите кнопку **управление разрешенные IP-адреса**.

![Управление IP-адресами](publish-to-azure/_static/image14.png)

Теперь необходимо добавить IP-адрес из сообщения об ошибке. Изменить диапазон разрешенных IP-адресов, чтобы включить один из сообщения об ошибке, либо добавить этот IP-адрес как отдельный элемент.

![Добавить новый адрес](publish-to-azure/_static/image15.png)

Сохраните изменения, разрешенные IP-адреса.

Щелкните "Управление" и повторите вход в систему базы данных. Может потребоваться подождать несколько минут, прежде чем разрешенных IP-адресов настроены правильно для брандмауэра. Если вы можете успешно войти базы данных, завершения установки подключения к базе данных.

Это окно управления можно оставить открытым, так как результат развертывания базы данных будет проверять скоро.

Вернитесь в проект базы данных. Щелкните правой кнопкой мыши проект и выберите **публикации**.

![Публикация базы данных](publish-to-azure/_static/image16.png)

В окне «базы данных публикации» выберите **изменить**.

![изменение;](publish-to-azure/_static/image17.png)

Укажите имя сервера базы данных и учетные данные проверки подлинности для сервера. После предоставления учетных данных, выберите базу данных, созданный из списка доступных баз данных. По умолчанию Visual Studio задает имя проекта, который не может быть таким же, как базы данных, которую вы создали имя поля базы данных.

![](publish-to-azure/_static/image18.png)

Нажмите кнопку ОК.

Возможно, потребуется сохранить профиль, чтобы опубликовать обновления в будущем без необходимости повторного ввода всех сведений о соединении. Выберите **создать профиль**.

![Сохранение профиля](publish-to-azure/_static/image19.png)

Она создаст файл с именем проекта **ContosoUniversityData.publish.xml**. В следующий раз, необходимо опубликовать базу данных в Azure, просто загрузить этот профиль.

Теперь щелкните **публикации** для создания базы данных в Azure.

![publish](publish-to-azure/_static/image20.png)

После выполнения команды на некоторое время публикации результатов отображаются.

![results](publish-to-azure/_static/image21.png)

Теперь можно перейти обратно на портал управления для базы данных. Обновите представление конструктора и обратите внимание, что были развернуты 3 таблицы предварительно заполняется данными.

![новые таблицы](publish-to-azure/_static/image22.png)

Теперь все готово для тестирования веб-приложения, которое развертывается в Azure. Перейдите к веб-приложения в Azure (например, http://contosositeexample.azurewebsites.net/). Щелкните ссылку для списка учащихся, и вы увидите представление index для учащихся.

![view](publish-to-azure/_static/image23.png)

Иногда базы данных и подключение, потребуется немного времени, чтобы правильно настроить. Если появляется ошибка, подождите несколько минут и повторите попытку.

## <a name="conclusion"></a>Заключение

Эта серия предоставлен простой пример того, как для создания кода из существующей базы данных, позволяющий пользователям изменять, обновлять, создания и удаления данных. Он используется ASP.NET MVC 5, Entity Framework и формирование шаблонов ASP.NET для создания проекта.

Простейший пример шаблона разработки Code First, в разделе [Приступая к работе с ASP.NET MVC 5](../introduction/getting-started.md).

Более сложный пример, в разделе [Создание модели данных Entity Framework для приложения ASP.NET MVC 4](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md). Обратите внимание, что DbContext API, который используется для работы с данными в первой базы данных совпадает с API, можно использовать для работы с данными в Code First. Даже если вы планируете использовать первой базы данных, можно узнать, как обрабатывать более сложные сценарии, такие как чтение и обновление связанных данных обработки конфликтов параллелизма, и так далее из учебника Code First. Единственное отличие заключается в том, как были созданы базы данных, класс контекста и классы сущностей.

>[!div class="step-by-step"]
[Назад](enhancing-data-validation.md)
