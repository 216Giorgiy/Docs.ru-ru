---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: "Приступая к работе с Entity Framework 6 Database First MVC 5 с помощью | Документы Microsoft"
author: tfitzmac
description: "С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот учебник seri..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/01/2014
ms.topic: article
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: cb979333131cc6ac87fd640bf7c96931054a1814
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="getting-started-with-entity-framework-6-database-first-using-mvc-5"></a>Приступая к работе с Entity Framework 6 Database First MVC 5 с помощью
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот ряд учебника показано, как автоматически создают код, который дает пользователям возможность отображения, изменения, создания и удаления данных, которые хранятся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных. В последней части этого ряда развертывается сайта и базы данных в Azure.
> 
> Эта часть ряда фокусируется на создание базы данных и заполнении его данными.
> 
> Эта серия был записан с публикаций из Tom Dykstra и Рик Андерсон. Она была улучшена на основе отзывов пользователей в разделе "Примечания".


## <a name="introduction"></a>Вступление

В этом разделе показано, как начинать с существующей базы данных и быстро создавать веб-приложения, в которой пользователи могут взаимодействовать с данными. В нем Entity Framework 6 и MVC 5 для создания веб-приложения. Формирование шаблонов ASP.NET позволяет автоматически создавать код для отображения, обновления, создания и удаления данных. С помощью средства публикации в среде Visual Studio, можно легко развернуть сайта и базы данных в Azure.

В этом разделе рассматривается ситуация, где имеется база данных и требуется создать код для веб-приложения, основанные на полях этой базы данных. Такой подход называется первой базы данных разработки. Если вы еще нет существующей базы данных, вместо этого можно использовать подход, именуемый разработки Code First, которая включает в себя определения классов данных и создания базы данных из свойств класса.

Простейший пример шаблона разработки Code First, в разделе [Приступая к работе с ASP.NET MVC 5](../introduction/getting-started.md). Более сложный пример, в разделе [Создание модели данных Entity Framework для приложения ASP.NET MVC 4](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).

Рекомендации по выбору подхода Entity Framework см. в разделе [принципы разработки с использованием Entity Framework](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).

## <a name="prerequisites"></a>Предварительные требования

Visual Studio 2013 или Visual Studio Express 2013 для Web

## <a name="set-up-the-database"></a>Настройка базы данных

Для имитации среды наличия существующей базы данных, сначала создать базу данных с предварительно заполняется данными и затем создать веб-приложения, который подключается к базе данных.

Этот учебник был разработан с использованием LocalDB с Visual Studio 2013 или Visual Studio Express 2013 для Web. Можно использовать существующий сервер базы данных вместо LocalDB, но в зависимости от установленной версии Visual Studio и тип базы данных, все данные средства в Visual Studio может не поддерживаться. Если средства недоступны для базы данных, может потребоваться выполнить некоторые шаги настройки базы данных в пакет управления для базы данных.

При наличии проблемы с инструменты для баз данных в вашей версии Visual Studio, убедитесь, что вы установили последнюю версию средства базы данных. Сведения об обновлении или установке инструменты для баз данных см. в разделе [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).

Запустите Visual Studio и создать **проект базы данных SQL Server**. Назовите проект **ContosoUniversityData**.

![Создание проекта базы данных](setting-up-database/_static/image1.png)

Теперь у вас есть проект пустой базы данных. Вам предстоит развертывание этой базы данных в Azure далее в этом учебнике, необходимо задать в качестве целевой платформы для проекта базы данных SQL Azure. Задание целевой платформы не развертывает фактически базе данных. Это лишь означает, что проект базы данных будет проверки правильности совместим с целевой платформой проекта базы данных. Чтобы задать целевую платформу, откройте **свойства** для проекта и выберите **базы данных SQL Microsoft Azure** для целевой платформы.

![Задайте для целевой платформы](setting-up-database/_static/image2.png)

Можно создавать таблицы, необходимые для этого учебника, добавив сценарии SQL, определяющие таблиц. Щелкните правой кнопкой мыши проект и добавить новый элемент.

![Добавление нового элемента](setting-up-database/_static/image3.png)

Добавьте новую таблицу с именем студента.

![Добавление таблицы для учащихся](setting-up-database/_static/image4.png)

В файле таблице замените следующий код, чтобы создать таблицу команды T-SQL.

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

Обратите внимание, что окно конструктора автоматически синхронизируется с кодом. Можно работать с помощью кода или конструктора.

![Показать код и Дизайн](setting-up-database/_static/image5.png)

Добавьте другую таблицу. Время, назовите его курса и используйте следующие команды T-SQL.

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

Кроме того, повторите это действие несколько раз можно создать таблицу с именем регистрации.

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

Можно заполнить базу данных данными через сценарий, выполняемый после развертывания базы данных. Добавьте в проект скрипта после развертывания. Можно использовать имя по умолчанию.

![Добавить скрипт, выполняемый после развертывания](setting-up-database/_static/image6.png)

Добавьте следующий код T-SQL в скрипт после развертывания. Этот скрипт просто добавляет данные в базу данных при отсутствии сопоставления записей. Она не перезаписать или удалить любые данные, введенные в базу данных.

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

Важно отметить, что после развертывания скрипт выполняется каждый раз при развертывании проекта базы данных. Таким образом необходимо тщательно проанализировать требования к при записи этого скрипта. В некоторых случаях вы можете начать с известным набором данных каждый раз при развертывании проекта. В других случаях может потребоваться не изменять существующие данные любым способом. На основе требований, можно указать, следует ли выполняемый после развертывания скрипт, или необходимо включить в скрипт. Дополнительные сведения о заполнении базы данных с помощью сценария после развертывания см. в разделе [включая данных в проекте базы данных SQL Server](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).

Теперь у вас есть 4 файлы скрипта SQL, но не реально существующих таблиц. Все готово для развертывания проекта базы данных в localdb. В Visual Studio нажмите кнопку "Пуск" (или F5) для построения и развертывания проекта базы данных. Проверьте, вкладка «Вывод», чтобы проверить успешность построения и развертывания.

![Показывать выходные данные](setting-up-database/_static/image7.png)

Для просмотра, создания новой базы данных, откройте **обозреватель объектов SQL Server** и найдите имя проекта в нужную базу данных локального сервера (в данном случае **\ProjectsV12 (localdb)**).

![Показать новой базы данных](setting-up-database/_static/image8.png)

Чтобы увидеть, что таблицы заполняются данными, щелкните правой кнопкой мыши таблицу и выберите **данные представления**.

![Показать таблицу данных](setting-up-database/_static/image9.png)

Открывается для редактирования представление табличных данных.

![Показать результаты для таблицы данных](setting-up-database/_static/image10.png)

Теперь базы данных настраивается и заполняется данными. В следующем уроке будет создать веб-приложение для базы данных.

>[!div class="step-by-step"]
[Вперед](creating-the-web-application.md)
