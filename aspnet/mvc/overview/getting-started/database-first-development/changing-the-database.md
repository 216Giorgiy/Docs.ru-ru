---
uid: mvc/overview/getting-started/database-first-development/changing-the-database
title: "EF базы данных сначала с ASP.NET MVC: изменение базы данных | Документы Microsoft"
author: tfitzmac
description: "С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот учебник seri..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/01/2014
ms.topic: article
ms.assetid: cfd5c083-a319-482e-8f25-5b38caa93954
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/database-first-development/changing-the-database
msc.type: authoredcontent
ms.openlocfilehash: 1ffe753812e5eef817f03ab488a28ae5fcefd41e
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="ef-database-first-with-aspnet-mvc-changing-the-database"></a>EF базы данных сначала с ASP.NET MVC: изменение базы данных
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> С помощью MVC, Entity Framework и формирование шаблонов ASP.NET, можно создать веб-приложения, который предоставляет интерфейс для существующей базы данных. Этот ряд учебника показано, как автоматически создают код, который дает пользователям возможность отображения, изменения, создания и удаления данных, которые хранятся в таблице базы данных. Созданный код соответствует столбцам в таблице базы данных.
> 
> Эта часть ряда посвящена вносить обновления в структуре базы данных и распространение это изменение на всем веб-приложения.


## <a name="add-a-column"></a>Добавление столбца

При обновлении структуры таблицы в базе данных, необходимо обеспечить это изменение распространяется модель данных, представления и контроллера.

В этом учебнике добавит новый столбец к таблице студента для записи отчество учащихся. Чтобы добавить этот столбец, откройте проект базы данных и откройте файл Student.sql. В конструкторе или в коде T-SQL, добавьте столбец с именем **MiddleName** , NVARCHAR(50) и допускает значения NULL.

![добавить второе имя](changing-the-database/_static/image1.png)

Разверните это изменение к локальной базе данных, запустив проект базы данных (или F5). Новое поле добавляется в таблицу. Если вы не видите его в обозревателе объектов SQL Server, нажмите кнопку "Обновить" на панели.

![Показать новый столбец](changing-the-database/_static/image2.png)

Новый столбец существует в таблице базы данных, но он не существует в классе модели данных. Необходимо обновить модель, включаемых в новый столбец. В **моделей** откройте **ContosoModel.edmx** файл для отображения на диаграмме модели. Обратите внимание, что модель студента не содержит свойство MiddleName. Щелкните правой кнопкой мыши в области конструктора и выберите **обновление модели из базы данных**.

![обновление модели](changing-the-database/_static/image3.png)

В мастере обновления выберите **обновление** вкладку и **студента** таблицы.

![Мастер обновления](changing-the-database/_static/image4.png)

Нажмите кнопку **Готово**.

После завершения обновления схемы базы данных включает в себя новый **MiddleName** свойство. Сохранить **ContosoModel.edmx** файла. Сохраните этот файл для нового свойства распространять **Student.cs** класса. Теперь обновления базы данных и модели.

Постройте решение.

К сожалению представления по-прежнему не содержат новое свойство. Для обновления представления можно использовать два варианта - то можно либо повторно создать представления, снова добавив формирования шаблонов для класса Student или можно вручную добавить новое свойство в существующие представления. В этом учебнике будет добавление формирования шаблонов еще раз, так как не были внесены пользовательские изменения в представления, автоматически создается. Может потребоваться вручную добавлять свойства, когда были внесены изменения в представления и отменить эти изменения не требуется.

Чтобы представления создаются повторно, удалить **учащихся** папку **представления**и удалите **StudentsController**. После этого щелкните правой кнопкой мыши **контроллеров** папки и добавление формирования шаблонов для **студента** модели. Опять же, имя контроллера **StudentsController**. Нажмите кнопку **ОК**.

Представления теперь содержит свойство MiddleName.

![Показать отчество](changing-the-database/_static/image5.png)

В следующем разделе вы добавите код, чтобы настроить представление для отображения сведений о записи студента.

>[!div class="step-by-step"]
[Назад](generating-views.md)
[Вперед](customizing-a-view.md)
