---
uid: mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-models-and-data-access
title: Модели ASP.NET MVC 4 и доступа к данным | Документы Microsoft
author: rick-anderson
description: 'Примечание: Это Практическое лабораторное занятие предполагается наличие базовых знаний о ASP.NET MVC. Если вы не использовали ASP.NET MVC, прежде чем, мы рекомендуем перейти по ASP.NET MVC 4...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/18/2013
ms.topic: article
ms.assetid: 634ea84b-f904-4afe-b71b-49cccef4d9cc
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-models-and-data-access
msc.type: authoredcontent
ms.openlocfilehash: 081a71ef67a6eee6c84058c30f9e15301afbed23
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
# <a name="aspnet-mvc-4-models-and-data-access"></a>Модели ASP.NET MVC 4 и доступа к данным

По [Web лагеря команды](https://twitter.com/webcamps)

[Загрузите комплект учебных материалов лагеря Web](https://aka.ms/webcamps-training-kit)

Это Практическое лабораторное занятие предполагает иметь базовые знания об **ASP.NET MVC**. Если вы не использовали **ASP.NET MVC** раньше, мы рекомендуем перейти **ASP.NET MVC 4 основы** Практическое лабораторное занятие.

Эта лаборатория рассматриваются улучшения и новые функции, описанные ранее путем применения незначительные изменения примера веб-приложения в папке исходных файлов.

> [!NOTE]
> Все образцы кода и фрагменты кода включаются в Web лагеря комплект учебных материалов, доступных в [выпуски Microsoft Web/WebCampTrainingKit](https://aka.ms/webcamps-training-kit). Проект для этой лаборатории доступен на [ASP.NET MVC 4 моделей и доступа к данным](https://github.com/Microsoft-Web/HOL-MVC4ModelsAndDataAccess).

В **ASP.NET MVC основы** Практическое лабораторное занятие, можно передачи жестко данных на контроллерах шаблонов представлений. Однако для создания реальных веб-приложения, может потребоваться использовать реальной базы данных.

Это Практическое лабораторное занятие будет показано, как для использования компонента database engine для хранения и извлечения данных, необходимые для работы приложения Music Store. Чтобы реализовать это решение, будет начинаться с существующей базы данных и создание модели EDM из него. В этой лаборатории будет соответствовать **Database First** подход а также **Code First** подход.

Однако можно также использовать **Model First** подход, той же модели, используя средства создания и затем создать базу данных из него.

![Vs первой базы данных. Модели первый](aspnet-mvc-4-models-and-data-access/_static/image1.png "Database First vs. Сначала модели")

*Vs первой базы данных. Сначала модели*

После создания модели, будет выполнять правильную корректировки в StoreController для обеспечения хранения представлений с данными, извлеченными из базы данных, вместо использования жестко запрограммированных данных. Не потребуется внести изменения в Просмотр шаблонов, так как StoreController вернется же ViewModels шаблонов представлений, несмотря на то, что это время будут извлекаться данные из базы данных.

**Первый подход на основе кода**

Code First подход позволяет определить модель из кода без создания классов, которые обычно связаны с платформой.

В коде во-первых, объекты модели определяются с POCO, &quot;старые объекты CLR&quot;. POCO, простых простых классов, которые не поддерживают наследование и не реализуют интерфейсы. Мы будет автоматически создавать базы данных из них, или можно использовать существующую базу данных и создать сопоставление класса из кода.

Преимущества использования этого подхода является сохранение независимо от платформы сохраняемости (в данном случае Entity Framework), модели как классы POCO не связаны с платформой сопоставления.

> [!NOTE]
> Эта лаборатория основана на ASP.NET MVC 4 и версии образца приложения Music Store настроенное и свернут помещается только функции, показанные в этом Практическое лабораторное занятие.
> 
> Если вы хотите изучить весь **Music Store** учебного приложения, его можно найти в [MVC Music Store](https://github.com/evilDave/MVC-Music-Store).


<a id="Prerequisites"></a>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a>Предварительные требования

Необходимо иметь следующие элементы для этой лаборатории.

- [Microsoft Visual Studio Express 2012 для Web](https://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web) или выше (чтение [приложение A](#AppendixA) инструкции по его установке).

<a id="Setup"></a>

<a id="Setup"></a>
### <a name="setup"></a>Установка

**Установка фрагменты кода**

Для удобства большая часть кода, который вы планируете управлять вдоль этой лаборатории доступна как фрагменты кода Visual Studio. Чтобы установить фрагменты кода запуска **.\Source\Setup\CodeSnippets.vsi** файла.

Если вы не знакомы с фрагментов кода Visual Studio и хотите узнать о способах их использования, можно ссылаться в приложение из этого документа &quot; [фрагменты кода с помощью приложение C:](#AppendixC)&quot;.

* * *

<a id="Exercises"></a>

<a id="Exercises"></a>
## <a name="exercises"></a>Упражнения

Это Практическое лабораторное занятие состоит в выполнении следующих упражнений.

1. [Упражнение 1: Добавление базы данных](#Exercise1)
2. [Упражнение 2: Создание базы данных с помощью Code First](#Exercise2)
3. [Упражнение 3: Запросы к базе данных с параметрами](#Exercise3)

> [!NOTE]
> Каждого упражнения сопровождается **окончания** папку, содержащую полученное в результате решение, должен быть получен после завершения выполнения упражнений. Это решение можно использовать как руководство, если вам нужна дополнительная помощь при выполнении упражнений.


Предполагаемое время для выполнения этого занятия: **35 минут**.

<a id="Exercise1"></a>

<a id="Exercise_1_Adding_a_Database"></a>
### <a name="exercise-1-adding-a-database"></a>Упражнение 1: Добавление базы данных

В этом упражнении вы узнаете, как добавить базу данных с таблицами MusicStore приложение в решение, чтобы использовать его данные. После базы данных с помощью модели создается и добавляется в решение, будет изменить класс StoreController, чтобы предоставить шаблон представления с данными, извлеченными из базы данных, вместо жестко запрограммированных значений.

<a id="Ex1Task1"></a>

<a id="Task_1_-_Adding_a_Database"></a>
#### <a name="task-1---adding-a-database"></a>Задача 1. Добавление базы данных

В этой задаче вы добавите уже созданную базу данных с основной таблицы MusicStore приложения в решение.

1. Откройте **начать** решений, расположенный **источника или сервера Ex1-AddingADatabaseDBFirst/Begin/** папки.

   1. Необходимо загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
2. Добавить **MvcMusicStore** файла базы данных. В этой лаборатории практических будет использовать уже созданные базу данных с именем **MvcMusicStore.mdf**. Чтобы сделать это, щелкните правой кнопкой мыши **приложения\_данные** папку, выберите пункт **добавить** и нажмите кнопку **существующий элемент**. Перейдите к **\Source\Assets** и выберите **MvcMusicStore.mdf** файла.

    ![Добавление существующего элемента](aspnet-mvc-4-models-and-data-access/_static/image2.png "Добавление существующего элемента")

    *Добавление существующего элемента*

    ![Файл базы данных MvcMusicStore.mdf](aspnet-mvc-4-models-and-data-access/_static/image3.png "MvcMusicStore.mdf файл базы данных")

    *Файл базы данных MvcMusicStore.mdf*

    Базы данных будет добавлен в проект. Даже в том случае, если база данных находится в решении, можно запрашивать и обновить его, как она была размещена в другой сервер базы данных.

    ![MvcMusicStore базы данных в обозревателе решений](aspnet-mvc-4-models-and-data-access/_static/image4.png "MvcMusicStore базы данных в обозревателе решений")

    *MvcMusicStore базы данных в обозревателе решений*
3. Проверьте подключение к базе данных. Для этого дважды щелкните **MvcMusicStore.mdf** для установления соединения.

    ![Подключение к MvcMusicStore.mdf](aspnet-mvc-4-models-and-data-access/_static/image5.png "подключение к MvcMusicStore.mdf")

    *Подключение к MvcMusicStore.mdf*

<a id="Ex1Task2"></a>

<a id="Task_2_-_Creating_a_Data_Model"></a>
#### <a name="task-2---creating-a-data-model"></a>Задача 2 - Создание модели данных

В этой задаче вы создадите модель данных для взаимодействия с базой данных, добавленных в предыдущей задаче.

1. Создайте модель данных, представляющий базу данных. Для этого в обозревателе решений щелкните правой кнопкой мыши **моделей** папку, выберите пункт **добавить** и нажмите кнопку **новый элемент**. В **Добавление нового элемента** диалогового окна выберите **данные** шаблона и затем **ADO.NET Entity Data Model** элемента. Изменение имени модели данных для **StoreDB.edmx** и нажмите кнопку **добавить**.

    ![Добавление модели EDM ADO.NET StoreDB](aspnet-mvc-4-models-and-data-access/_static/image6.png "Добавление StoreDB модели EDM ADO.NET")

    *Добавление StoreDB модели EDM ADO.NET*
2. **Мастер моделей EDM** будут отображаться. Этот мастер поможет выполнить создание слоя модели. Поскольку модель должна быть создана в зависимости от существующей базы данных recentyl добавлен; выберите **создать из базы данных** и нажмите кнопку **Далее**.

    ![Выбор содержимого модели](aspnet-mvc-4-models-and-data-access/_static/image7.png "Выбор содержимого модели")

    *Выбор содержимого модели*
3. Поскольку при создании модели из базы данных, необходимо указать соединение для использования. Нажмите кнопку **новое соединение**.
4. Выберите **файл базы данных Microsoft SQL Server** и нажмите кнопку **Продолжить**.

    ![Выбрать источник данных](aspnet-mvc-4-models-and-data-access/_static/image8.png "выбрать источник данных")

    *Выберите источник данных*
5. Нажмите кнопку **Обзор** и выберите базу данных **MvcMusicStore.mdf** находится в **приложения\_данные** папку и нажмите кнопку **ОК**.

    ![Свойства подключения](aspnet-mvc-4-models-and-data-access/_static/image9.png "свойства соединения")

    *Свойства подключения*
6. Создаваемый класс должен иметь имя, совпадающее с именем строки подключения сущности, поэтому ее имя на **MusicStoreEntities** и нажмите кнопку **Далее**.

    ![Выбор подключения к данным](aspnet-mvc-4-models-and-data-access/_static/image10.png "Выбор подключения к данным")

    *Выбор подключения к данным*
7. Выберите объекты базы данных для использования. Модель сущность будет использовать только в таблицах базы данных, выберите **таблиц** параметр и убедитесь, что **включить столбцы внешних ключей в модель** и **единственном или множественном числе создан имена объектов** выбраны параметры. Изменить пространство имен модели для **MvcMusicStore.Model** и нажмите кнопку **Готово**.

    ![Выбор объектов базы данных](aspnet-mvc-4-models-and-data-access/_static/image11.png "Выбор объектов базы данных")

    *Выбор объектов базы данных*

    > [!NOTE]
    > Если отображается диалоговое окно с предупреждением системы безопасности, нажмите кнопку **ОК** для выполнения шаблона и создания классов сущностей модели.
8. В схеме сущности для базы данных будет отображаться, пока создается отдельный класс, который сопоставляется с каждой таблицы базы данных. Например **альбомы** таблицы представляется **альбом** класса, где каждый столбец в таблице сопоставит свойству класса. Это позволит вам для запроса и работать с объектами, которые представляют строки в базе данных.

    ![Схема Entity](aspnet-mvc-4-models-and-data-access/_static/image12.png "схема Entity")

    *Схема Entity*

    > [!NOTE]
    > Шаблоны T4 (.tt), запустите код для создания классов сущностей и приведет к перезаписи существующих классов с тем же именем. В этом примере классы &quot;альбом&quot;, &quot;жанр&quot; и &quot;исполнителя&quot; были переопределены в создаваемом коде.


<a id="Ex1Task3"></a>

<a id="Task_3_-_Building_the_Application"></a>
#### <a name="task-3---building-the-application"></a>Задача 3. построение приложения

В этой задаче производится проверка, несмотря на то, что создание модели удалили **альбом**, **жанр** и **исполнителя** классы модели успешного построения проекта с помощью новые классы модели данных.

1. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.

    ![Построение проекта](aspnet-mvc-4-models-and-data-access/_static/image13.png "построение проекта")

    *Построение проекта*
2. Сборка проекта выполняется успешно. Почему он по-прежнему работает? Он работает так, как таблицы базы данных содержат поля, которые включают свойства, которые вы использовали в классах, удален **альбом** и **жанр**.

    ![Сборки успешно](aspnet-mvc-4-models-and-data-access/_static/image14.png "сборки выполнено успешно")

    *Выполняет построение успешно выполнено*
3. Хотя формат диаграммы, конструктор отображает сущности, они являются подлинными классов C#. Разверните **StoreDB.edmx** узел в обозревателе решений и затем **StoreDB.tt**, вы увидите новый создаваемых классах.

    ![Созданные файлы](aspnet-mvc-4-models-and-data-access/_static/image15.png "созданных файлов")

    *Создаваемые файлы*

<a id="Ex1Task4"></a>

<a id="Task_4_-_Querying_the_Database"></a>
#### <a name="task-4---querying-the-database"></a>Задача 4 - запросы к базе данных

В этой задаче будет обновлена класс StoreController таким образом, чтобы вместо жестко задано в данных, отправляет запрос базы данных для получения сведений.

1. Откройте **Controllers\StoreController.cs** и добавьте следующее поле класса, содержащего экземпляр **MusicStoreEntities** класс с именем **storeDB**:

    (Фрагмент - кода *моделей и доступа к данным — storeDB сервера Ex1*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample1.cs)]
~~~
2. **MusicStoreEntities** класс предоставляет свойства коллекции для каждой таблицы в базе данных. Обновление **Обзор** метода действия для получения жанр со всеми **альбомы**.

    (Фрагмент - кода *моделей и доступа к данным — Обзор хранилища сервера Ex1*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample2.cs)]

> [!NOTE]
> You are using a capability of .NET called **LINQ** (language-integrated query) to write strongly-typed query expressions against these collections - which will execute code against the database and return objects that you can program against.
> 
> For more information about LINQ, please visit the [msdn site](https://msdn.microsoft.com/library/bb397926&amp;#040;v=vs.110&amp;#041;.aspx).
~~~
3. Обновление **индекс** метода действия для получения всех жанров.

    (Фрагмент - кода *моделей и доступа к данным — индекс хранилища сервера Ex1*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample3.cs)]
~~~
4. Обновление **индекс** метода действия для получения всех жанров и преобразовать коллекцию в список.

    (Фрагмент - кода *моделей и доступа к данным — GenreMenu хранилище сервера Ex1*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample4.cs)]
~~~

<a id="Ex1Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче будет проверять, что страницы индекса хранилища теперь отображаются жанров, хранимые в базе данных вместо тех, которые жестко закодированное значение. Нет необходимости изменить шаблон представления, так как **StoreController** возвращает те же сущности как и раньше, несмотря на то, что это время будут извлекаться данные из базы данных.

1. Пересоберите решение и нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Убедитесь, что в меню **жанров** больше не жестко задано в список, и данные извлекаются непосредственно из базы данных.

    ![BrowsingGenresFromDataBase](aspnet-mvc-4-models-and-data-access/_static/image16.png)

    *Просмотр жанров из базы данных*
3. Теперь перейдите к любой жанр и убедитесь, что альбомов заполняются из базы данных.

    ![Просмотр альбомов из базы данных](aspnet-mvc-4-models-and-data-access/_static/image17.png "просмотра альбомы из базы данных")

    *Просмотр альбомов из базы данных*

<a id="Exercise2"></a>

<a id="Exercise_2_Creating_a_Database_Using_Code_First"></a>
### <a name="exercise-2-creating-a-database-using-code-first"></a>Упражнение 2: Создание базы данных сначала с помощью кода

В этом упражнении будет рассматривается использование Code First подход для создания базы данных с таблицами, MusicStore приложения и доступа к данным.

После создания модели, будут изменены StoreController для предоставления Просмотр шаблона с данными, извлеченными из базы данных, вместо жестко заданных значений.

> [!NOTE]
> Если выполнить упражнения 1 и уже работали с базы данных первый подход, вы узнаете как получить те же результаты с другим процессом. Чтобы облегчить ознакомление помеченные задачи, которые вместе с Упражнение 1. Если вы не завершены упражнения 1, но для получения кода первый подход, можно запустить из этого упражнения и получить полный покрытие раздела.


<a id="Ex2Task1"></a>

<a id="Task_1_-_Populating_Sample_Data"></a>
#### <a name="task-1---populating-sample-data"></a>Задача 1 - заполнению образца данных

В этой задаче вы заполните базу данных с образцами данных при intially создается с помощью сначала код.

1. Откройте **начать** решений, расположенный **источника/Ex2-CreatingADatabaseCodeFirst/начало/** папки. В противном случае можно продолжить использование **окончания** решения получен путем выполнения в предыдущем упражнении.

   1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
2. Добавить **SampleData.cs** файл **моделей** папки. Чтобы сделать это, щелкните правой кнопкой мыши **моделей** папку, выберите пункт **добавить** и нажмите кнопку **существующий элемент**. Перейдите к **\Source\Assets** и выберите **SampleData.cs** файла.

    ![Образец данных заполнения кода](aspnet-mvc-4-models-and-data-access/_static/image18.png "образец данных заполнения кода")

    *Образец данных заполнения кода*
3. Откройте **Global.asax.cs** файл и добавьте следующее *с помощью* инструкции.

    (Фрагмент - кода *моделей и доступа к данным — глобальный Asax директивы Ex2*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample5.cs)]
~~~
4. В **приложения\_Start()** метод добавьте следующую строку для задания инициализатора базы данных.

    (Фрагмент - кода *моделей и доступа к данным — глобальный Asax SetInitializer Ex2*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample6.cs)]
~~~

<a id="Ex2Task2"></a>

<a id="Task_2_-_Configuring_the_connection_to_the_Database"></a>
#### <a name="task-2---configuring-the-connection-to-the-database"></a>Задача 2 - Настройка подключения к базе данных

Теперь, когда вы уже добавлена в свой проект базы данных, будут записаны **Web.config** строку подключения файлов.

1. Добавить строку подключения в **Web.config**. Чтобы сделать это, откройте **Web.config** в корневой каталог проекта и замените строку подключения с именем DefaultConnection со следующей строки в **&lt;connectionStrings&gt;** раздела:

    ![Расположение файла Web.config](aspnet-mvc-4-models-and-data-access/_static/image19.png "расположение файла Web.config")

    *расположение файла Web.config*


~~~
[!code-xml[Main](aspnet-mvc-4-models-and-data-access/samples/sample7.xml)]
~~~

<a id="Ex2Task3"></a>

<a id="Task_3_-_Working_with_the_Model"></a>
#### <a name="task-3---working-with-the-model"></a>Задача 3. Работа с моделью

Теперь, когда вы уже настроили соединение с базой данных, будет связан с таблицами базы данных модели. В этой задаче будет создан класс, который будет связан в базу данных в режиме Code First. Помните, отсутствует класс модели POCO, который должен быть изменен.

   > [!NOTE]
> Если вы выполнили Упражнение 1, можно заметить, то, что этот шаг выполнялась в мастере. Выполняя Code First, будут вручную создать классы, которые будут связаны с сущностями данных.


1. Откройте класс модели POCO **жанр** из **моделей** папку проекта и включают идентификатор. Используйте целочисленное свойство с именем **GenreId**.

    (Фрагмент - кода *моделей и доступа к данным — первый жанр Ex2 код*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample8.cs)]

> [!NOTE]
> To work with Code First conventions, the class Genre must have a primary key property that will be automatically detected.
> 
> You can read more about Code First Conventions in this [msdn article](https://msdn.microsoft.com/library/hh161541&amp;#040;v=vs.103&amp;#041;.aspx).
~~~
2. Теперь откройте класс модели POCO **альбом** из **моделей** папку проекта и включить внешние ключи, создавать свойства с именами **GenreId** и  **ArtistId**. Этот класс уже есть **GenreId** для первичного ключа.

    (Фрагмент - кода *моделей и доступа к данным — первый альбом Ex2 код*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample9.cs)]
~~~
3. Откройте класс модели POCO **исполнителя** и включать **ArtistId** свойство.

    (Фрагмент - кода *моделей и доступа к данным — первый исполнителя Ex2 код*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample10.cs)]
~~~
4. Щелкните правой кнопкой мыши **моделей** папку проекта и выберите **добавить | Класс**. Назовите файл **MusicStoreEntities.cs**. Нажмите кнопку **Add.**

    ![Добавление класса](aspnet-mvc-4-models-and-data-access/_static/image20.png "Добавление класса")

    *Добавление нового элемента*

    ![Добавление класса class2](aspnet-mvc-4-models-and-data-access/_static/image21.png "Добавление class2")

    *Добавление класса*
5. Откройте класс, который вы только что создали, **MusicStoreEntities.cs**и включите пространства имен **System.Data.Entity** и **System.Data.Entity.Infrastructure**.


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample11.cs)]
~~~
6. Замените объявление класса для расширения **DbContext** класса: Объявите общую **DBSet** и Переопределите **OnModelCreating** метод. После выполнения этого шага вы получите класс домена, которое будет связано с платформой Entity Framework модели. Для этого замените код класса с помощью следующего:

    (Фрагмент - кода *моделей и доступа к данным — первый MusicStoreEntities Ex2 код*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample12.cs)]

> [!NOTE]
> With Entity Framework **DbContext** and **DBSet** you will be able to query the POCO class Genre. By extending **OnModelCreating** method, you are specifying in the **code** how Genre will be mapped to a database table. You can find more information about DBContext and DBSet in this msdn article: [link](https://msdn.microsoft.com/library/system.data.entity.dbcontext(v=vs.103).aspx)
~~~

<a id="Ex2Task4"></a>

<a id="Task_4_-_Querying_the_Database"></a>
#### <a name="task-4---querying-the-database"></a>Задача 4 - запросы к базе данных

В этой задаче будет обновлена StoreController класса, чтобы вместо жестко задано в данных, он будет извлекать его из базы данных.

> [!NOTE]
> Эта задача является вместе с Упражнение 1.
> 
> Если вы выполнили Упражнение 1 можно заметить, эти шаги одинаковы в обоих подходов (базы данных сначала или сначала код). Они отличаются в том, как данные, связанные с моделью, но доступ к сущностям данных прозрачно еще из контроллера.


1. Откройте **Controllers\StoreController.cs** и добавьте следующее поле класса, содержащего экземпляр **MusicStoreEntities** класс с именем **storeDB**:

    (Фрагмент - кода *моделей и доступа к данным — storeDB сервера Ex1*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample13.cs)]
~~~
2. **MusicStoreEntities** класс предоставляет свойства коллекции для каждой таблицы в базе данных. Обновление **Обзор** метода действия для получения жанр со всеми **альбомы**.

    (Фрагмент - кода *моделей и доступа к данным — Обзор хранилища Ex2*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample14.cs)]

> [!NOTE]
> You are using a capability of .NET called **LINQ** (language-integrated query) to write strongly-typed query expressions against these collections - which will execute code against the database and return objects that you can program against.
> 
> For more information about LINQ, please visit the [msdn site](https://msdn.microsoft.com/library/bb397926(v=vs.110).aspx).
~~~
3. Обновление **индекс** метода действия для получения всех жанров.

    (Фрагмент - кода *моделей и доступа к данным — индекс хранилища Ex2*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample15.cs)]
~~~
4. Обновление **индекс** метода действия для получения всех жанров и преобразовать коллекцию в список.

    (Фрагмент - кода *моделей и доступа к данным — Ex2 хранилища GenreMenu*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample16.cs)]
~~~

<a id="Ex2Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче будет проверять, что страницы индекса хранилища теперь отображаются жанров, хранимые в базе данных вместо тех, которые жестко закодированное значение. Нет необходимости изменить шаблон представления, так как **StoreController** возвращает же **StoreIndexViewModel** как и раньше, но на этот раз будут извлекаться данные из базы данных.

1. Пересоберите решение и нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Убедитесь, что в меню **жанров** больше не жестко задано в список, и данные извлекаются непосредственно из базы данных.

    ![BrowsingGenresFromDataBase](aspnet-mvc-4-models-and-data-access/_static/image22.png)

    *Просмотр жанров из базы данных*
3. Теперь перейдите к любой жанр и убедитесь, что альбомов заполняются из базы данных.

    ![Просмотр альбомов из базы данных](aspnet-mvc-4-models-and-data-access/_static/image23.png "просмотра альбомы из базы данных")

    *Просмотр альбомов из базы данных*

<a id="Exercise3"></a>

<a id="Exercise_3_Querying_the_Database_with_Parameters"></a>
### <a name="exercise-3-querying-the-database-with-parameters"></a>Упражнение 3: Запросы к базе данных с параметрами

В этом упражнении вы узнаете, как в базе данных, используя параметры и способы формирования результата запроса, функцию, которая уменьшает число баз данных обращается к извлечения данных более эффективным способом.

> [!NOTE]
> Дополнительные сведения о формировании результатов запроса, посетите следующий [статьи msdn](https://msdn.microsoft.com/library/bb896272&amp;#040;v=vs.100&amp;#041;.aspx).


<a id="Ex3Task1"></a>

<a id="Task_1_-_Modifying_StoreController_to_Retrieve_Albums_from_Database"></a>
#### <a name="task-1---modifying-storecontroller-to-retrieve-albums-from-database"></a>Задача 1 - изменение StoreController для получения альбомы из базы данных

В этой задаче будет изменено **StoreController** класса для доступа к базе данных для получения альбомы из определенного жанра.

1. Откройте **начать** решений, расположенный **Source\Ex3 QueryingTheDatabaseWithParametersCodeFirst\Begin** папку, если вы хотите использовать подход сначала код или **Source\ Ex3 QueryingTheDatabaseWithParametersDBFirst\Begin** папку, если вы хотите использовать подход сначала база данных. В противном случае можно продолжить использование **окончания** решения получен путем выполнения в предыдущем упражнении.

   1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
   2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
   3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

      > [!NOTE]
      > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
2. Откройте **StoreController** классе, чтобы изменить **Обзор** метода действия. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
3. Изменение **Обзор** метода действия для получения альбомов для определенного жанра. Для этого замените следующий код:

    (Фрагмент - кода *моделей и доступа к данным — Ex3 StoreController BrowseMethod*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample17.cs)]

> [!NOTE]
> To populate a collection of the entity, you need to use the **Include** method to specify you want to retrieve the albums too. You can use the .**Single()** extension in LINQ because in this case only one genre is expected for an album. The **Single()** method takes a Lambda expression as a parameter, which in this case specifies a single Genre object such that its name matches the value defined.
> 
> You will take advantage of a feature that allows you to indicate other related entities you want loaded as well when the Genre object is retrieved. This feature is called **Query Result Shaping**, and enables you to reduce the number of times needed to access the database to retrieve information. In this scenario, you will want to pre-fetch the Albums for the Genre you retrieve.
> 
> The query includes **Genres.Include(&quot;Albums&quot;)** to indicate that you want related albums as well. This will result in a more efficient application, since it will retrieve both Genre and Album data in a single database request.
~~~

<a id="Ex3Task2"></a>

<a id="Task_2_-_Running_the_Application"></a>
#### <a name="task-2---running-the-application"></a>Задача 2 - запуск приложения

В этой задаче будет запустите приложение и извлечь фотоальбомы определенного жанра из базы данных.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **/Store/обзора? жанр = Pop** чтобы убедиться что результаты извлекаются из базы данных.

    ![Просмотр по жанру](aspnet-mvc-4-models-and-data-access/_static/image24.png "просмотра по жанру")

    *Просмотр/Store/обзора? жанр = Pop*

<a id="Ex3Task3"></a>

<a id="Task_3_-_Accessing_Albums_by_Id"></a>
#### <a name="task-3---accessing-albums-by-id"></a>Задача 3. доступ к альбомам, по идентификатору

В этой задаче будет повторяться предыдущей процедуры, чтобы получить альбомов по их идентификаторам.

1. Закройте браузер, если необходимо, чтобы вернуться в Visual Studio. Откройте **StoreController** классе, чтобы изменить **сведения** метода действия. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
2. Изменение **сведения** на основе метода действия, чтобы получить сведения о дисках их **идентификатор**. Для этого замените следующий код:

    (Фрагмент - кода *моделей и доступа к данным — Ex3 StoreController DetailsMethod*)


~~~
[!code-csharp[Main](aspnet-mvc-4-models-and-data-access/samples/sample18.cs)]
~~~

<a id="Ex3Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4. запуск приложения

В этой задаче будет запустите приложение в веб-браузер и получить сведения об альбоме по их идентификаторам.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **/Store/Details/51** или жанров перейдите и выберите альбом, чтобы убедиться что результаты извлекаются из базы данных.

    ![Просмотр сведений](aspnet-mvc-4-models-and-data-access/_static/image25.png "Просмотр сведений")

    *Просмотр /Store/Details/51*

> [!NOTE]
> Кроме того, можно развернуть это приложение на веб-сайтов Windows Azure ниже [приложение б. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания](#AppendixB).


* * *

<a id="Summary"></a>

<a id="Summary"></a>
## <a name="summary"></a>Сводка

Путем выполнения этого практические занятия вы изучили основы модели ASP.NET MVC и доступа к данным, с помощью **Database First** подход а также **Code First** подход:

- Добавление базы данных в решение для обработки данных
- Обновление контроллеров для предоставления шаблонов представлений с данными, извлеченными из базы данных вместо жестко запрограммированный
- Как в базе данных с помощью параметров
- Как использовать запрос результат формирование, возможность сокращает число обращений к базе данных, извлечение данных более эффективным способом
- При использовании подхода Database First и Code First в Microsoft Entity Framework для связывания базы данных с моделью

<a id="AppendixA"></a>

<a id="Appendix_A_Installing_Visual_Studio_Express_2012_for_Web"></a>
## <a name="appendix-a-installing-visual-studio-express-2012-for-web"></a>Приложение а. Установка Visual Studio Express 2012 для Web

Можно установить **Microsoft Visual Studio Express 2012 для Web** или другой &quot;Express&quot; версию, используя **[Microsoft Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx)**. Следующие инструкции описывают действия, необходимые для установки *Visual studio Express 2012 для Web* с помощью *Microsoft Web Platform Installer*.

1. Последовательно выберите пункты [ [ https://go.microsoft.com/?linkid=9810169 ](https://go.microsoft.com/?linkid=9810169) ](https://go.microsoft.com/?linkid=9810169). Кроме того, если вы уже установили установщика веб-платформы, можно открыть его и выполните поиск продукта &quot; <em>Visual Studio Express 2012 для Web с пакетом Windows Azure SDK</em>&quot;.
2. Щелкните **установить сейчас**. Если у вас **Web Platform Installer** вы будете перенаправлены, чтобы загрузить и установить ее сначала.
3. Один раз **Web Platform Installer** открыто, нажмите кнопку **установить** для запуска программы установки.

    ![Установка Visual Studio Express](aspnet-mvc-4-models-and-data-access/_static/image26.png "установка Visual Studio Express")

    *Установка Visual Studio Express*
4. Чтение всех продуктов лицензий и условия и нажмите кнопку **принимаю** для продолжения.

    ![Принятие условий лицензионного соглашения](aspnet-mvc-4-models-and-data-access/_static/image27.png)

    *Принятие условий лицензионного соглашения*
5. Дождитесь завершения процесса загрузки и установки.

    ![Ход установки](aspnet-mvc-4-models-and-data-access/_static/image28.png)

    *Ход выполнения установки*
6. По завершении установки нажмите кнопку **Готово**.

    ![Установка завершена](aspnet-mvc-4-models-and-data-access/_static/image29.png)

    *Установка завершена*
7. Нажмите кнопку **выхода** закрыть установщик веб-платформы.
8. Чтобы открыть Visual Studio Express для Web, перейдите к **запустить** экрана и начинается запись &quot; **VS Express**&quot;, выберите команду **VS Express для Web** Плитка.

    ![VS Express для Web плитки](aspnet-mvc-4-models-and-data-access/_static/image30.png)

    *VS Express для Web плитки*

<a id="AppendixB"></a>

<a id="Appendix_B_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
## <a name="appendix-b-publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Приложение б. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

В этом приложении будет показано, как создать новый веб-сайт на портале управления Windows Azure и публикация приложения, получить, выполнив в лаборатории преимуществами средство публикации веб-развертывания, предоставленного Windows Azure.

<a id="ApxBTask1"></a>

<a id="Task_1_-_Creating_a_New_Web_Site_from_the_Windows_Azure_Portal"></a>
#### <a name="task-1---creating-a-new-web-site-from-the-windows-azure-portal"></a>Задача 1. Создание нового веб-узла с Windows Azure Portal

1. Последовательно выберите пункты [портала управления Windows Azure](https://manage.windowsazure.com/) и войдите с использованием учетных данных Майкрософт, связанную с вашей подпиской.

    > [!NOTE]
    > С помощью Windows Azure можно бесплатно размещения 10 веб-сайтов ASP.NET и затем масштабирование по мере увеличения трафика. Вы можете зарегистрироваться [здесь](http://aka.ms/aspnet-hol-azure).

    ![Войдите на портал Windows Azure](aspnet-mvc-4-models-and-data-access/_static/image31.png "входа на портал Windows Azure")

    *Выполните вход на портале управления Windows Azure*
2. Нажмите кнопку **New** на панели команд.

    ![Создание нового веб-сайта](aspnet-mvc-4-models-and-data-access/_static/image32.png "создания нового веб-сайта")

    *Создание нового веб-сайта*
3. Нажмите кнопку **вычислений** | **веб-сайт**. Выберите **быстрое создание** параметр. Укажите URL-адрес доступен для нового веб-сайта и нажмите кнопку **Создание веб-сайта**.

    > [!NOTE]
    > Веб-приложение, работающее в облаке, вы можете управлять размещается веб-сайта Windows Azure. Параметр быстрого создания позволяет развернуть завершенное веб-приложение для Windows Azure веб-сайта из вне портала. Он не включает действия по настройке базы данных.

    ![Создание нового веб-сайта с помощью быстрого создания](aspnet-mvc-4-models-and-data-access/_static/image33.png "создания нового веб-сайта с помощью быстрого создания")

    *Создание нового веб-сайта с помощью быстрого создания*
4. Подождите, пока новый **веб-сайт** создается.
5. После создания веб-сайта по ссылке **URL-адрес** столбца. Проверьте, что новый веб-сайт работает.

    ![Просмотр новых веб-сайт](aspnet-mvc-4-models-and-data-access/_static/image34.png "просмотра на новый веб-сайт")

    *Просмотр новых веб-сайт*

    ![Веб-сайта под управлением](aspnet-mvc-4-models-and-data-access/_static/image35.png "веб-сайта под управлением")

    *Запуск веб-сайта*
6. Вернитесь на портал и щелкните имя веб-сайта в разделе **имя** столбец для отображения страницы управления.

    ![Открытие страницы управления веб-сайт](aspnet-mvc-4-models-and-data-access/_static/image36.png "Открытие страниц управления веб-сайта")

    *Открытие страницы управления веб-сайта*
7. В **панели мониторинга** в разделе **беглого** щелкните **загрузить профиль публикации** ссылку.

    > [!NOTE]
    > *Профиль публикации* содержит все сведения, необходимые для публикации веб-приложения на веб-сайте Windows Azure для каждого разрешенного метода публикации. Профиль публикации содержит URL-адреса, учетные данные пользователя и строк базы данных, необходимых для подключения и проверки подлинности с каждой из конечных точек, для которых включен метода публикации. **Microsoft WebMatrix 2**, **Microsoft Visual Studio Express для Web** и **Microsoft Visual Studio 2012** поддерживают чтение профилей публикации для автоматизации настройки этих программ для Публикация веб-приложений на веб-сайтов Windows Azure.

    ![Профиль публикации веб-сайт загрузки](aspnet-mvc-4-models-and-data-access/_static/image37.png "профиль публикации веб-сайта загрузки")

    *Профиль публикации веб-сайта загрузки*
8. Загрузите файл профиля публикации в известном расположении. Далее в этом упражнении вы увидите как использовать этот файл для публикации веб-приложения для веб-сайтов, Windows Azure из Visual Studio.

    ![Сохранить файл профиля публикации](aspnet-mvc-4-models-and-data-access/_static/image38.png "Сохранение профиля публикации")

    *Сохранить файл профиля публикации*

<a id="ApxBTask2"></a>

<a id="Task_2_-_Configuring_the_Database_Server"></a>
#### <a name="task-2---configuring-the-database-server"></a>Задача 2 - Настройка сервера базы данных

Если приложение использует SQL Server базы данных, необходимо будет создать сервер базы данных SQL. Если вы хотите развернуть простое приложение, которое не использует SQL Server может пропустить эту задачу.

1. Сервер базы данных SQL необходимо для хранения базы данных приложения. Можно просматривать серверы базы данных SQL из подписки на портале управления Windows Azure в **баз данных Sql** | **серверы** | **сервера Панель мониторинга**. Если у вас на сервер, созданный, можно создать ее, используя **добавить** кнопки на панели команд. Обратите внимание **имя сервера и URL-адрес, имя входа администратора и пароль**, как будет использовать их в следующие задачи. Не следует создавать базу данных, как он будет создан в более поздней стадии.

    ![Панель мониторинга базы данных SQL Server](aspnet-mvc-4-models-and-data-access/_static/image39.png "панель мониторинга базы данных SQL Server")

    *Панель мониторинга базы данных SQL Server*
2. В следующей задаче требуется проверить подключение к базе данных из Visual Studio, по этой причине необходимо включить локальный IP-адреса в список серверов **разрешенные IP-адреса**. Чтобы сделать это, нажмите кнопку **Настройка**, выберите IP-адрес из **текущий IP-адрес клиента** и вставьте его на **начальный IP-адрес** и **конечный IP-адрес** текстовые поля и нажмите кнопку ![add-client-ip-address-ok-button](aspnet-mvc-4-models-and-data-access/_static/image40.png) кнопки.

    ![Добавление IP-адрес клиента](aspnet-mvc-4-models-and-data-access/_static/image41.png)

    *Добавление IP-адрес клиента*
3. Один раз **IP-адрес клиента** добавляется разрешенных IP-адресов выберите на **Сохранить** для подтверждения изменения.

    ![Подтверждение изменений](aspnet-mvc-4-models-and-data-access/_static/image42.png)

    *Подтверждение изменений*

<a id="ApxBTask3"></a>

<a id="Task_3_-_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
#### <a name="task-3---publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Задача 3. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

1. Вернитесь в решении ASP.NET MVC 4. В **обозревателе решений**, щелкните правой кнопкой мыши проект веб-сайта и выберите **публикации**.

    ![Публикация приложения](aspnet-mvc-4-models-and-data-access/_static/image43.png "публикация приложения")

    *Публикация веб-сайта*
2. Импортируйте профиль публикации, сохраненный в первой задаче.

    ![Импорт профиля публикации](aspnet-mvc-4-models-and-data-access/_static/image44.png "Импорт профиля публикации")

    *Импорт профиля публикации*
3. Нажмите кнопку **Проверка подключения**. После завершения проверки нажмите кнопку **Далее**.

    > [!NOTE]
    > Проверка завершена, как только вы увидите зеленый флажок рядом с "Проверить подключение".

    ![Проверка подключения](aspnet-mvc-4-models-and-data-access/_static/image45.png "Проверка подключения")

    *Проверка подключения*
4. В **параметры** в разделе **баз данных** статьи, нажмите кнопку рядом с текстового поля для подключения к базе данных (т. е. **DefaultConnection**).

    ![Конфигурация веб-развертывания](aspnet-mvc-4-models-and-data-access/_static/image46.png "конфигурация веб-развертывания")

    *Конфигурация веб-развертывания*
5. Настройте подключение к базе данных следующим образом.

   - В **имя сервера** введите ваш URL-адрес сервера базы данных SQL с помощью *tcp:* префикс.
   - В **имя пользователя** введите имя входа администратора сервера.
   - В **пароль** введите пароль входа администратора сервера.
   - Введите имя новой базы данных.

     ![Настройка строки подключения назначения](aspnet-mvc-4-models-and-data-access/_static/image47.png "Настройка целевой строки подключения")

     *Настройка целевой строки подключения*
6. Затем нажмите кнопку **ОК**. Когда появится запрос на создание базы данных щелкните **Да**.

    ![Создание базы данных](aspnet-mvc-4-models-and-data-access/_static/image48.png "Создание строки базы данных")

    *Создание базы данных*
7. Строка подключения, который будет использоваться для подключения к базе данных SQL в Windows Azure отображается внутри текстового поля по умолчанию соединения. Затем нажмите кнопку **Далее**.

    ![Строка подключения, указывающий базу данных SQL](aspnet-mvc-4-models-and-data-access/_static/image49.png "строку соединения, указывающий базу данных SQL")

    *Строка подключения, указывающий базу данных SQL*
8. В **предварительного просмотра** щелкните **публикации**.

    ![Публикация веб-приложения](aspnet-mvc-4-models-and-data-access/_static/image50.png "публикации веб-приложения")

    *Публикация веб-приложения*
9. После завершения процесса публикации в браузере по умолчанию откроется опубликованного веб-узла.

<a id="AppendixC"></a>

<a id="Appendix_C_Using_Code_Snippets"></a>
## <a name="appendix-c-using-code-snippets"></a>Приложение в. фрагменты кода

С помощью фрагментов кода у вас есть весь код, который требуется под рукой. Документ лаборатории сообщает только при их использовании, как показано на следующем рисунке.

![Фрагменты кода Visual Studio для вставки кода в проекте](aspnet-mvc-4-models-and-data-access/_static/image51.png "фрагменты кода с помощью Visual Studio вставьте код в проект")

*Фрагменты кода Visual Studio для вставки кода в проекте*

***Добавление фрагмента кода, с помощью клавиатуры (только C#)***

1. Поместите курсор в место вставки кода.
2. Начните вводить имя фрагмента (без пробелов и дефисы).
3. Смотрите, как IntelliSense отображает, совпадающие с именами фрагменты.
4. Выберите правильный фрагмент (или продолжите ввод, пока не будет выделен весь фрагмент имени).
5. Нажмите клавишу Tab дважды, чтобы вставить фрагмент в положении курсора.

![Начните вводить имя фрагмента](aspnet-mvc-4-models-and-data-access/_static/image52.png "начните вводить имя фрагмента")

*Начните вводить имя фрагмента*

![Нажмите клавишу Tab, чтобы выделить выделенный фрагмент](aspnet-mvc-4-models-and-data-access/_static/image53.png "нажмите клавишу Tab, чтобы выделить выделенный фрагмент")

*Нажмите клавишу Tab, чтобы выделить выделенный фрагмент*

![Снова нажмите клавишу Tab и фрагмент будет расширен](aspnet-mvc-4-models-and-data-access/_static/image54.png "будет расширен, снова нажмите клавишу Tab и фрагмента кода")

*Снова нажмите клавишу Tab и фрагмент будет расширен*

***Добавление фрагмента кода, с помощью мыши (C#, Visual Basic и XML)*** 1. Щелкните правой кнопкой мыши место вставки фрагмента кода.

1. Выберите **вставить фрагмент** следуют **Мои фрагменты кода**.
2. Выберите соответствующий фрагмент из списка, щелкнув по ней.

![Щелкните правой кнопкой мыши место для вставки фрагмента кода и выбора вставить фрагмент](aspnet-mvc-4-models-and-data-access/_static/image55.png "место для вставки фрагмента кода и выбора вставить фрагмент кода щелкните правой кнопкой мыши")

*Щелкните правой кнопкой мыши в место вставки фрагмента кода и выберите Вставить фрагмент*

![Выберите из списка, соответствующего фрагмента, щелкнув его](aspnet-mvc-4-models-and-data-access/_static/image56.png "выбрать соответствующий фрагмент из списка, щелкнув по ней")

*Выберите соответствующий фрагмент из списка, щелкнув по ней*
