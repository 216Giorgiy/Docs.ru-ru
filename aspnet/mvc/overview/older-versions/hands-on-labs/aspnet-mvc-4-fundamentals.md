---
uid: mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-fundamentals
title: "Принципы работы ASP.NET MVC 4 | Документы Microsoft"
author: rick-anderson
description: "Это Практическое лабораторное занятие основан на MVC (Model View Controller) Music Store, учебное приложение, которое вводятся и описываются пошаговые способы использования ASP.NET MV..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/18/2013
ms.topic: article
ms.assetid: b7dba543-73c3-4534-a9a0-ba70fa2c6a8a
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-fundamentals
msc.type: authoredcontent
ms.openlocfilehash: 086084b63cceca1c2d4e0bd4e5b654aaad6637a9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="aspnet-mvc-4-fundamentals"></a>Принципы работы ASP.NET MVC 4
====================
по [Web лагеря команды](https://twitter.com/webcamps)

> Это Практическое лабораторное занятие основано на MVC (Model View Controller) Music Store, учебное приложение, которое вводятся и описываются пошаговые способы использования Visual Studio и ASP.NET MVC. В лаборатории. Здесь простоты еще питания друг с другом с помощью этих технологий. Начнем с простого приложения и будет постройте его, пока не будут полностью функционален ASP.NET MVC 4 веб-приложении.
> 
> Эта лаборатория работает с ASP.NET MVC 4.
> 
> Если вы хотите изучить версию ASP.NET MVC 3 учебного приложения, его можно найти в [MVC Music Store](https://github.com/evilDave/MVC-Music-Store).
> 
> > [!NOTE]
> > Это Практическое лабораторное занятие предполагает, что разработчик имеет опыт в технологии веб-разработки, такие как HTML и JavaScript.
> 
> 
> Все образцы кода и фрагменты кода включаются в Web лагеря комплект учебных материалов, доступных в [https://www.microsoft.com/en-us/download/29843](https://www.microsoft.com/en-us/download/29843).


<a id="The_Music_Store_application"></a>
### <a name="the-music-store-application"></a>Приложение Music Store

Веб-приложение Music Store, который должен быть построен на протяжении этого занятия состоит из трех главных частей: покупок, извлечения и администрирования. Посетители смогут Обзор альбомов по жанру, добавить в корзину альбомы, просмотрите свой выбор и наконец продолжить извлечение, чтобы войти в систему и завершить создание заказа. Кроме того хранилище Администраторы получат доступ для управления доступными альбомы, а также их основные свойства.

![Экраны Music Store](aspnet-mvc-4-fundamentals/_static/image1.png "экраны Music Store")

*Экраны Music Store*

<a id="ASPNET_MVC_4_Essentials"></a>
### <a name="aspnet-mvc-4-essentials"></a>Essentials ASP.NET MVC 4

Приложение Music Store будет построено с помощью **модель View Controller (MVC)**, архитектуре, которая разделяет приложение на три основных компонента:

- **Модели**: объекты моделей являются частями приложения, реализующими доменную логику. Многие модели объектов также получить и сохраняют состояние модели в базе данных.
- **Представления:** представления служат для отображения приложения пользовательского интерфейса (UI). Как правило этот пользовательский Интерфейс создается на основе данных модели. Примером такого представления изменения альбомов, содержит текстовые поля и раскрывающегося списка, исходя из текущего состояния объекта альбома.
- **Контроллеры:** контроллеров служат для управления взаимодействием с пользователем, обработки модели, а также Выбор представления для отображения пользовательского интерфейса. В приложении MVC представления только отображают сведения; контроллер обрабатывает и реагирует на ввод данных пользователем и взаимодействия.

Шаблон MVC позволяет создавать приложения, различные аспекты приложения (логика ввода, бизнес-логика и логика пользовательского интерфейса), обеспечивая при этом слабую связь между этими элементами. Это разделение позволяет работать со сложными структурами при построении приложения, как он позволяет сосредоточиться на один аспект реализации одновременно. Кроме того шаблон MVC упрощает для тестирования приложений, также рекомендовать использование управляемой тестами разработки (TDD) для создания приложений.

**ASP.NET MVC** framework представляет собой альтернативу шаблон веб-форм ASP.NET для создания приложений веб-узла ASP.NET MVC. **ASP.NET MVC** framework является легковесной платформой, (как в случае с веб формы приложения) интегрирована с существующими функциями ASP.NET, такие как главные страницы и на основе членства Проверка подлинности, чтобы получить все возможности платформы core .NET framework. Это полезно, если вы уже знакомы с веб-форм ASP.NET, так как все библиотеки, которые уже используются в ASP.NET MVC 4, также доступны.

Кроме того слабую связь между основными компонентами приложения MVC также облегчает параллельную разработку. Для экземпляра один разработчик может создавать представление, второй разработчик может создавать логику контроллера и третий разработчику сосредоточиться на бизнес-логики в модель.

<a id="Objectives"></a>

<a id="Objectives"></a>
### <a name="objectives"></a>Цели

В этой лаборатории практических вы узнаете, как:

- Создание приложения ASP.NET MVC с нуля, в зависимости от приложения Music Store учебника
- Добавить контроллеры для обработки URL-адреса на домашнюю страницу сайта, а также для просмотра ее основные функциональные возможности
- Добавить представление для настройки содержимого, отображаемого вместе с его стиля
- Добавление модели классов для хранения и управления логику данных и домен
- Использовать шаблон модель представлений для передачи данных из действия контроллера шаблонов представлений
- Просмотр нового шаблона ASP.NET MVC 4 для веб-приложений

<a id="Prerequisites"></a>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a>Предварительные требования

Необходимо иметь следующие элементы для этой лаборатории.

- [Visual Studio 2012 Express для Web](https://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-web) (чтение [приложение A](#AppendixA) инструкции по его установке)

<a id="Setup"></a>

<a id="Setup"></a>
### <a name="setup"></a>Установка

**Установка фрагменты кода**

Для удобства большая часть кода, который вы планируете управлять вдоль этой лаборатории доступна как фрагменты кода Visual Studio. Чтобы установить фрагменты кода запуска **.\Source\Setup\CodeSnippets.vsi** файла.

Если вы не знакомы с фрагментов кода Visual Studio и хотите узнать о способах их использования, можно ссылаться в приложение из этого документа &quot; [фрагменты кода с помощью приложение C:](#AppendixC)&quot;.

<a id="Exercises"></a>

<a id="Exercises"></a>
## <a name="exercises"></a>Упражнения

Это Практическое лабораторное занятие состоит в выполнении следующих упражнений.

1. [Упражнение 1: Создание проекта веб-приложения MusicStore ASP.NET MVC](#Exercise1)
2. [Упражнение 2: Создание контроллера](#Exercise2)
3. [Упражнение 3: Передача параметров контроллера](#Exercise3)
4. [Упражнение 4: Создание представления](#Exercise4)
5. [Упражнение 5: Создание модели представления](#Exercise5)
6. [Упражнение 6: Использование параметров в представлении](#Exercise6)
7. [Упражнение 7. Знакомство с функциями новый шаблон ASP.NET MVC 4](#Exercise7)

> [!NOTE]
> Каждого упражнения сопровождается **окончания** папку, содержащую полученное в результате решение, должен быть получен после завершения выполнения упражнений. Это решение можно использовать как руководство, если вам нужна дополнительная помощь при выполнении упражнений.


Предполагаемое время для выполнения этого занятия: **60 минут**.

<a id="Exercise1"></a>

<a id="Exercise_1_Creating_MusicStore_ASPNET_MVC_Web_Application_Project"></a>
### <a name="exercise-1-creating-musicstore-aspnet-mvc-web-application-project"></a>Упражнение 1: Создание проекта веб-приложения MusicStore ASP.NET MVC

В этом упражнении вы узнаете, как создать приложение ASP.NET MVC в Visual Studio 2012 Express для Web, а также их организация в главную папку. Кроме того вы узнаете, как добавить новый контроллер и сделать его отображения в простую строку на домашней странице приложения.

<a id="Ex1Task1"></a>

<a id="Task_1_-_Creating_the_ASPNET_MVC_Web_Application_Project"></a>
#### <a name="task-1---creating-the-aspnet-mvc-web-application-project"></a>Задача 1. Создание проекта веб-приложения ASP.NET MVC

1. В этой задаче вы создадите пустой проект приложения ASP.NET MVC с помощью шаблона MVC Visual Studio. Запуск **VS Express для Web**.
2. В меню **Файл** выберите пункт **Создать проект**.
3. В **новый проект** диалогового окна выберите **веб-приложение ASP.NET MVC 4** тип, расположенный в узле проекта **Visual C#** **Web** шаблона список.
4. Изменение **имя** для *MvcMusicStore*.
5. Задание расположения в новое решение **начать** папки в этом упражнении исходной папки, например **\Source\Ex01-CreatingMusicStoreProject\Begin [YOUR ХОЛЬ путь]**. Нажмите кнопку **ОК**.

    ![Создание нового проекта-диалоговое окно](aspnet-mvc-4-fundamentals/_static/image2.png "Создание нового проекта-диалоговое окно")

    *Создание нового проекта-диалоговое окно*
6. В **нового проекта ASP.NET MVC 4** диалогового окна выберите **основные** шаблона и убедитесь, что **обработчик представлений** выбранный **Razor**. Нажмите кнопку **ОК**.

    ![Диалоговое окно "новый проект ASP.NET MVC 4"](aspnet-mvc-4-fundamentals/_static/image3.png "новое диалоговое окно проекта ASP.NET MVC 4")

    *Диалоговое окно "новый проект ASP.NET MVC 4"*

<a id="Ex1Task2"></a>

<a id="Task_2_-_Exploring_the_Solution_Structure"></a>
#### <a name="task-2---exploring-the-solution-structure"></a>Задача 2 - изучение структуры решения

Платформы ASP.NET MVC входит шаблон проекта Visual Studio, которая помогает создавать веб-приложения, поддерживающие шаблон MVC. Этот шаблон создает новое приложение веб-ASP.NET MVC с необходимые папки, шаблоны элементов и записи файла конфигурации.

В этой задаче вы проверяете структуры решения понимание элементов, которые участвуют и их связи. Поскольку платформа ASP.NET MVC по умолчанию использует следующие папки включены в ASP.NET MVC application &quot;соглашение по конфигурации&quot; подход и делает некоторые предположения по умолчанию основании наименования папок соглашения.

1. После создания проекта Просмотрите структуру папок, созданной в обозревателе решений на правой стороне.

    ![Структура папки MVC ASP.NET в обозревателе решений](aspnet-mvc-4-fundamentals/_static/image4.png "структура папки MVC ASP.NET в обозревателе решений")

    *Структура папки MVC ASP.NET в обозревателе решений*

    1. **Контроллеры**. Эта папка будет содержать классы контроллера. В приложении на основе MVC контроллеры отвечают за обработку взаимодействия с конечным пользователем, работы с моделью и в конечном счете, Выбор представления для отображения пользовательского интерфейса.

        > [!NOTE]
        > MVC требует имена контроллеров с присвоением &quot;контроллера&quot;-например, HomeController, LoginController или ProductController.
    2. **Модели**. Эта папка предоставляется для классов, которые представляют модель приложения для веб-приложения MVC. Это обычно содержит код, который определяет объекты и логику взаимодействия с хранилищем данных. Как правило сами объекты модели будет в отдельных библиотеках классов. Тем не менее при создании нового приложения может включить классы и переместить их в отдельные библиотеки на более позднем этапе цикла разработки.
    3. **Представления**. Эта папка — рекомендуемое расположение для представлений, компоненты, отвечает за отображение пользовательского интерфейса приложения. Представления использования файлов .aspx, .ascx, cshtml и .master, помимо других файлов, которые относятся к визуализации представления. Папка Views содержит папки для каждого контроллера; папка называется с префиксом имени контроллера. Например, если существует контроллер с именем **HomeController**, папку Views будет содержать папка с именем Home. По умолчанию при загрузке представления платформой ASP.NET MVC выполняется поиск ASPX-файл с именем запрошенное представление в папке Views\controllerName (**представления [Имя_контроллера] [действие] .aspx**) или (**представления [Имя_контроллера] [Действие] .cshtml**) для представлений Razor.

    > [!NOTE]
    > В дополнение к перечисленным выше папкам веб-приложение MVC использует **Global.asax** файл для задания глобальной маршрутизации URL-адрес по умолчанию и использует **Web.config** файл, чтобы настроить приложение.

<a id="Ex1Task3"></a>

<a id="Task_3_-_Adding_a_HomeController"></a>
#### <a name="task-3---adding-a-homecontroller"></a>Задача 3. Добавление HomeController

В приложениях ASP.NET, не использующих платформу MVC взаимодействие с пользователем организуется вокруг страницы и создания и обработки событий из этих страниц. Напротив взаимодействие пользователей с приложениями ASP.NET MVC основаны на контроллерах и методах их действия.

С другой стороны платформа ASP.NET MVC сопоставляет URL-адреса с классами, называются контроллеров. Контроллеры обрабатывают входящие запросы, вводимые пользователями данные и взаимодействия, реализуют необходимую логику приложений и определения ответа для отправки обратно клиенту (отображения HTML-кода, загрузите файл, перенаправление на другой URL-адрес, и т. д.). В случае отображения HTML, класс контроллера обычно вызывает отдельный компонент представления для создания разметки HTML для запроса. В приложении MVC представления только отображают сведения; контроллер обрабатывает и реагирует на ввод данных пользователем и взаимодействия.

В этой задаче вы добавите класс контроллера, который будет обрабатывать URL-адреса на домашнюю страницу сайта Music Store.

1. Щелкните правой кнопкой мыши **контроллеров** папки в обозревателе решений выберите **добавить** и затем **контроллера** команды:

    ![Добавление команды контроллера](aspnet-mvc-4-fundamentals/_static/image5.png "добавьте команду контроллера")

    *Добавьте команду контроллера*
2. **Добавить контроллер** откроется диалоговое окно. Назовите контроллер *HomeController* и нажмите клавишу **добавить**.

    ![Диалоговое окно добавления контроллера](aspnet-mvc-4-fundamentals/_static/image6.png "диалоговое окно добавления контроллера")

    *Диалоговое окно добавления контроллера*
3. Файл **HomeController.cs** создается в **контроллеров** папки. Чтобы получить **HomeController** возвращают строку не на его индекс действия, замените **индекс** метод следующим кодом:

    (Фрагмент - кода *основы ASP.NET MVC 4 - индекс HomeController сервера Ex1*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample1.cs)]

<a id="Ex1Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4. запуск приложения

В этой задаче будет опробовать приложение в веб-браузере.

1. Нажмите клавишу **F5** для запуска приложения. Компиляции проекта и запускает локальный веб-сервер IIS. Локальный веб-сервер IIS автоматически открывается веб-браузер, указывающий на URL-адрес веб-сервера.

    ![Приложение, работающее в браузере](aspnet-mvc-4-fundamentals/_static/image7.png "приложение, работающее в браузере")

    *Приложение, работающее в браузере*

    > [!NOTE]
    > Локальный сервер IIS будет выполняться веб-сайт на случайный бесплатный номер порта. На приведенном выше рисунке, что сайт работает в `http://localhost:50103/`, поэтому он использует порт 50103. Этот номер порта может меняться.
2. Закройте браузер.

<a id="Exercise2"></a>

<a id="Exercise_2_Creating_a_Controller"></a>
### <a name="exercise-2-creating-a-controller"></a>Упражнение 2: Создание контроллера

В этом упражнении вы узнаете, как обновить контроллер для реализации простой функциональности приложение Music Store. Этот контроллер будет определяют методы действий для обработки каждого из следующих определенные запросы:

- Страницы список жанров музыки в Music Store
- Страница обзора, в котором перечислены все альбомы для определенного жанра
- Веб-страницу и отображает сведения о конкретных музыкальный альбом

Для этого упражнения области эти действия просто возвращают строку к этому моменту.

<a id="Ex2Task1"></a>

<a id="Task_1_-_Adding_a_New_StoreController_Class"></a>
#### <a name="task-1---adding-a-new-storecontroller-class"></a>Задача 1. Добавление нового класса StoreController

В этой задаче будет добавлен новый контроллер.

1. Если это еще не открыто, запустите **VS Express для Web 2012**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта найдите **Source\Ex02 CreatingAController\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после завершения работы в предыдущем упражнении.

    1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
    2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
    3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

    > [!NOTE]
    > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
3. Добавьте новый контроллер. Для этого щелкните правой кнопкой мыши **контроллеров** папки в обозревателе решений выберите **добавить** и затем **контроллера** команды. Изменение **имя контроллера** для *StoreController*и нажмите кнопку **добавить**.

    ![Диалоговое окно добавления контроллера](aspnet-mvc-4-fundamentals/_static/image8.png "диалоговое окно добавления контроллера")

    *Диалоговое окно добавления контроллера*

<a id="Ex2Task2"></a>

<a id="Task_2_-_Modifying_the_StoreControllers_Actions"></a>
#### <a name="task-2---modifying-the-storecontrollers-actions"></a>Задача 2 - изменение StoreController действия

В этой задаче предстоит изменить методы контроллера, которые вызываются **действия**. Операции отвечают за обработку запросов URL-адрес и определение содержимого, который будет отправлен обратно в браузер или пользователь, вызвавший URL-адрес.

1. **StoreController** класс уже имеет **индекс** метод. Он будет использовать далее в этой лаборатории для реализации страницу, где перечислены все жанров музыкальном магазине. Теперь, просто замените **индекс** метод следующим кодом, который возвращает строку, &quot;Hello из Store.Index()&quot;:

    (Фрагмент - кода *основы ASP.NET MVC 4 - индекс StoreController Ex2*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample2.cs)]
2. Добавить **Обзор** и **сведения** методы. Чтобы сделать это, добавьте следующий код в **StoreController**:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex2 StoreController BrowseAndDetails*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample3.cs)]

<a id="Ex2Task3"></a>

<a id="Task_3_-_Running_the_Application"></a>
#### <a name="task-3---running-the-application"></a>Задача 3. запуск приложения

В этой задаче будет опробовать приложение в веб-браузере.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Измените URL-адрес, чтобы проверить реализацию каждого действия.

    1. **/ Store**. Вы увидите  **&quot;Hello из Store.Index()&quot;**.
    2. **/ Store/обзора**. Вы увидите  **&quot;Hello из Store.Browse()&quot;**.
    3. **/ / Сведения о хранилище**. Вы увидите  **&quot;Hello из Store.Details()&quot;**.

        ![Просмотр StoreBrowse](aspnet-mvc-4-fundamentals/_static/image9.png "просмотра StoreBrowse")

        *Просмотр /Store/Browse*
3. Закройте браузер.

<a id="Exercise3"></a>

<a id="Exercise_3_Passing_parameters_to_a_Controller"></a>
### <a name="exercise-3-passing-parameters-to-a-controller"></a>Упражнение 3: Передача параметров контроллера

До этого момента в на контроллерах возврат константных строк. В этом упражнении вы узнаете, как для передачи параметров в контроллере с помощью URL-адреса и строки запроса, а затем выполнить метод действия отвечает с текстом в браузере.

<a id="Ex3Task1"></a>

<a id="Task_1_-_Adding_Genre_Parameter_to_StoreController"></a>
#### <a name="task-1---adding-genre-parameter-to-storecontroller"></a>Задача 1. Добавление параметра жанр StoreController

В этой задаче будет использоваться **querystring** для отправки параметров **Обзор** метода действия в **StoreController**.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта найдите **Source\Ex03 PassingParametersToAController\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после завершения работы в предыдущем упражнении.

    1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
    2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
    3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

    > [!NOTE]
    > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
3. Откройте **StoreController** класса. Для этого в **обозревателе решений**, разверните **контроллеров** папку и дважды щелкните **StoreController.cs**.
4. Изменение **Обзор** метод, добавление строковый параметр для запроса для конкретных жанра. ASP.NET MVC будет автоматически передавать все строки запроса или отправки формы параметры с именем **жанр** этого метода действие при вызове. Для этого замените **Обзор** метод следующим кодом:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex3 StoreController BrowseMethod*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample4.cs)]

    > [!NOTE]
    > Вы используете **HttpUtility.HtmlEncode** вспомогательный метод для добавления Javascript в представление с помощью ссылки, например не позволяет пользователям   **/Store/обзора? Жанр =&lt;сценарий&gt;window.location= "[http://hackersite.com](http://hackersite.com)"&lt;/script&gt;**.
    > 
    > Дополнительные пояснения посетите [в этой статье msdn](https://msdn.microsoft.com/en-us/library/a2a4yykt(v=VS.80).aspx).

<a id="Ex3Task2"></a>

<a id="Task_2_-_Running_the_Application"></a>
#### <a name="task-2---running-the-application"></a>Задача 2 - запуск приложения

В этой задаче будет испытать приложение в веб-браузере и использовать **жанр** параметра.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес *, хранения, Обзор? Жанр = Disco* чтобы убедиться, что действие получает параметр жанра.

    ![Просмотр StoreBrowseGenre = Disco](aspnet-mvc-4-fundamentals/_static/image10.png "просмотра StoreBrowseGenre = Disco")

    *Просмотр /Store/Browse? Жанр = Disco*
3. Закройте браузер.

<a id="Ex3Task3"></a>

<a id="Task_3_-_Adding_an_Id_Parameter_Embedded_in_the_URL"></a>
#### <a name="task-3---adding-an-id-parameter-embedded-in-the-url"></a>Задача 3. Добавление параметра Id, URL-адрес

В этой задаче будет использоваться **URL-адрес** для передачи **идентификатор** параметр **сведения** метод действия **StoreController**. ASP.NET MVC по умолчанию используется соглашение о маршрутизации обрабатывать сегмента URL-адрес после имени метода действия, как параметр с именем **идентификатор**. Если метод действия имеет параметр с именем Id, затем ASP.NET MVC будет автоматически передавать сегмента URL-адреса вам как параметр. В URL-АДРЕСЕ **хранилища, сведения и 5**, **идентификатор** будет интерпретироваться как **5**.

1. Изменение **сведения** метод **StoreController**, добавление **int** параметр с именем **идентификатор**. Для этого замените **сведения** метод следующим кодом:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex3 StoreController DetailsMethod*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample5.cs)]

<a id="Ex3Task4"></a>

<a id="Task_4_-_Running_the_Application"></a>
#### <a name="task-4---running-the-application"></a>Задача 4. запуск приложения

В этой задаче будет испытать приложение в веб-браузере и использовать **идентификатор** параметра.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес */Store/Details/5* чтобы убедиться, что действие получает идентификатор параметра.

    ![Просмотр StoreDetails5](aspnet-mvc-4-fundamentals/_static/image11.png "просмотра StoreDetails5")

    *Просмотр /Store/Details/5*

<a id="Exercise4"></a>

<a id="Exercise_4_Creating_a_View"></a>
### <a name="exercise-4-creating-a-view"></a>Упражнение 4: Создание представления

Пока возврат строк из действия контроллера. Несмотря на то, что это удобный способ понимать работу контроллеров, это не как к реальной веб-приложений. Представления — компоненты, которые больше подходят для создания HTML обратно в браузер с использованием файлов шаблонов.

В этом упражнении вы узнаете, как добавить главную страницу макета для настройки шаблонов для распространенных HTML-содержимого, таблицы стилей, чтобы улучшить внешний вид сайта, и наконец Просмотр шаблона для включения HomeController для возврата HTML.

<a id="Ex4Task1"></a>

<a id="Task_1_-_Modifying_the_file__layoutcshtml"></a>
#### <a name="task-1---modifying-the-file-layoutcshtml"></a>Задача 1. Изменение файла \_layout.cshtml

Файл **~/Views/Shared/\_layout.cshtml** позволяет настроить шаблон для HTML, общие для всего веб-сайта. В этой задаче вы добавите Главная страница макета с заголовком общих со ссылками в область домашней страницы и хранилища.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта найдите **Source\Ex04 CreatingAView\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после завершения работы в предыдущем упражнении.

    1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
    2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
    3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

    > [!NOTE]
    > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
3. Файл  **\_layout.cshtml** содержит контейнер HTML-разметку для всех страниц на сайте. Он включает  **&lt;html&gt;**  элемент для HTML-ответа, а также  **&lt;head&gt;**  и  **&lt;текста&gt;**  элементы. **@RenderBody()** в HTML-код текста определить областей представление шаблоны смогут наполнить динамического содержимого.
(C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample6.cshtml)]
4. Добавьте общие заголовок со ссылками в область домашней страницы и хранилища на всех страницах на сайте. Чтобы сделать это, добавьте следующий код ниже &lt;текст&gt; инструкции.
(C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample7.cshtml)]
5. Включить div для отрисовки текста части каждой страницы. Замените  **@RenderBody()** higlighted следующим кодом: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample8.cshtml)]

    > [!NOTE]
    > Знаете ли вы? Visual Studio 2012 имеет фрагменты, которые позволяют легко добавлять часто используемый код в HTML, файлы кода и многое другое! Проверим, введя  **&lt;div&gt;**  и нажав клавишу **ВКЛАДКЕ** дважды, чтобы вставить полный **div** тег.

<a id="Ex4Task2"></a>

<a id="Task_2_-_Adding_CSS_Stylesheet"></a>
#### <a name="task-2---adding-css-stylesheet"></a>Задача 2 - Добавление таблицы стилей CSS

Шаблон пустого проекта содержит очень упрощенный CSS-файл, включающий только стили, используемые для отображения базовых форм и проверки сообщений. Используется дополнительных CSS и изображений (потенциально предоставляется конструктором), чтобы улучшить внешний вид веб-узла.

В этой задаче вы добавите в таблице стилей CSS, определять стили сайта.

1. CSS-файл и изображения включены в **Source\Assets\Content** папку части этой лаборатории. Чтобы добавить их в приложение, перетащите их содержимое из **Проводник** в окно **обозревателе решений** в Visual Studio Express для Web, как показано ниже:

    ![Перетаскивание содержимое стиль](aspnet-mvc-4-fundamentals/_static/image12.png "перетаскивания содержимое стиля")

    *Перетаскивание содержимое стиля*
2. Предупреждение появится диалоговое окно, запрашивающее подтверждение для замены **Site.css** файлов и некоторых существующих образов. Проверьте **применить ко всем элементам** и нажмите кнопку **Да**.

<a id="Ex4Task3"></a>

<a id="Task_3_-_Adding_a_View_Template"></a>
#### <a name="task-3---adding-a-view-template"></a>Задача 3. Добавление шаблона представления

В этой задаче вы добавите Просмотр шаблона для создания HTML-ответа, который будет использовать главную страницу макета и добавлены CSS в этом упражнении.

1. Чтобы использовать шаблон представления при просмотре на домашнюю страницу, сначала необходимо указать, что вместо возвращения строки, **индекс HomeController** метод будет возвращать **представление**. Откройте **HomeController** и измените его **индекс** метод для возврата **ActionResult**, и вернуть его **View()**.

    (Фрагмент - кода *основы ASP.NET MVC 4 - индекс HomeController Ex4*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample9.cs)]
2. Теперь необходимо добавить соответствующий шаблон представления. Чтобы сделать это, **щелкните правой кнопкой мыши** внутри **индекс** метода действия и выберите **добавить представление**. Данная команда откроет **добавить представление** диалогового окна.

    ![Добавление представления из метода индекс](aspnet-mvc-4-fundamentals/_static/image13.png "Добавление представления из метода индекса")

    *Добавление представления из метода индекса*
3. **Добавить представление** появится диалоговое окно для создания файла шаблона представления. По умолчанию это диалоговое окно предварительно определяет имя шаблона представления, чтобы он соответствовал метод действия, который будет его использовать. Поскольку использовался **добавить представление** контекстного меню в **индекс** метода действия в пределах HomeController **добавить представление** диалогового окна есть индекс в качестве имени представления по умолчанию. Нажмите кнопку **Добавить**.

    ![Диалоговое окно добавления представления](aspnet-mvc-4-fundamentals/_static/image14.png "диалоговое окно добавления представления")

    *Диалоговое окно добавления представления*
4. Visual Studio создает **Index.cshtml** Просмотр шаблона внутри **Views\Home** папки, а затем открывает его.

    ![Home индекс представления, созданного](aspnet-mvc-4-fundamentals/_static/image15.png "созданного Главная индекса представления")

    *Домашняя созданного индекса представления*

    > [!NOTE]
    > имя и расположение **Index.cshtml** файл действителен и следует соглашения об именовании ASP.NET MVC по умолчанию.
    > 
    > Папка \Views\**Главная** соответствует имени контроллера (**Главная** контроллера). Имя шаблона представления (**индекс**), соответствующий метод действия контроллера, который будет применяться для отображения представления.
    > 
    > Таким образом, ASP.NET MVC позволяет избежать необходимости явно указывать имя или расположение шаблона представления при использовании это соглашение об именовании, чтобы вернуть представление.
5. Созданный шаблон представления основана на  **\_layout.cshtml** шаблоном, определенным ранее. Обновить свойство ViewBag.Title для **Главная**и измените основного содержимого для **это домашняя страница**, как показано в следующем коде:


    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample10.cshtml)]
6. Выберите **MvcMusicStore** проекта в обозревателе решений и нажать клавишу **F5** для запуска приложения.

<a id="Ex4Task4"></a>

<a id="Task_4_Verification"></a>
#### <a name="task-4-verification"></a>Задача 4: проверка

Чтобы проверить, правильно выполнить все эти шаги в предыдущем упражнении, выполните следующие действия:

Приложения, открывается в браузере следует отметить, что:

1. Метод действия HomeController индекс найден и отображаются **\Views\Home\Index.cshtml** Просмотр шаблона, несмотря на то, что код вызвал **возвращают View()**, так как шаблон представления, а затем соглашение об именовании стандартного.
2. Домашняя страница отображает приветственное сообщение, определенные в **\Views\Home\Index.cshtml** шаблона представления.
3. Использование домашней странице  **\_layout.cshtml** шаблона, и поэтому приветственное сообщение, содержащихся в макет узла стандартный HTML.

    ![Главном представлении индекса с помощью определенных LayoutPage и стиль](aspnet-mvc-4-fundamentals/_static/image16.png "Главная представление индекса, используя заданное LayoutPage и стиля")

    *Домашняя индекс представления, с помощью определенных LayoutPage и стиля*

<a id="Exercise5"></a>

<a id="Exercise_5_Creating_a_View_Model"></a>
### <a name="exercise-5-creating-a-view-model"></a>Упражнение 5: Создание модели представления

Таким образом внесенные отображения жестко закодировано HTML представления, но, чтобы создавать динамические веб-приложения, Просмотр шаблона должен получать сведения из контроллера. Имеет один обычный способ, используемый для этой цели **ViewModel** шаблон, который позволяет контроллеру запаковать все сведения, необходимые для создания соответствующих HTML-ответа.

В этом упражнении вы узнаете, как создать класс ViewModel и добавить необходимые свойства: число жанров в хранилище и список этих жанров. Обновит StoreController использовать созданный ViewModel, и наконец, вы создадите новый шаблон представления, упомянутых свойства отобразятся на странице.

<a id="Ex5Task1"></a>

<a id="Task_1_-_Creating_a_ViewModel_Class"></a>
#### <a name="task-1---creating-a-viewmodel-class"></a>Задача 1. Создание класса ViewModel

В этой задаче вы создадите ViewModel класс, который будет реализовать сценарий листинг жанр хранилища.

1. Если это еще не открыто, запустите **VS Express для Web**.
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта найдите **Source\Ex05 CreatingAViewModel\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после завершения работы в предыдущем упражнении.

    1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
    2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
    3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

    > [!NOTE]
    > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
3. Создание **ViewModels** папку для хранения ViewModel. Для этого щелкните правой кнопкой мыши верхнего уровня **MvcMusicStore** проекта, выберите **добавить** и затем **новую папку**.

    ![Добавление новой папки](aspnet-mvc-4-fundamentals/_static/image17.png "добавления новой папки")

    *Добавление новой папки*
4. Назовите папку *ViewModels*.

    ![ViewModels папку в обозревателе решений](aspnet-mvc-4-fundamentals/_static/image18.png "ViewModels папку в обозревателе решений")

    *ViewModels папку в обозревателе решений*
5. Создание **ViewModel** класса. Для этого щелкните правой кнопкой мыши **ViewModels** папку недавно создан, выберите **добавить** и затем **новый элемент**. В разделе **кода**, выберите **класса** элемента и присвойте файлу имя *StoreIndexViewModel.cs*, нажмите кнопку **добавить**.

    ![Добавление нового класса](aspnet-mvc-4-fundamentals/_static/image19.png "Добавление нового класса")

    *Добавление нового класса*

    ![Создание класса StoreIndexViewModel](aspnet-mvc-4-fundamentals/_static/image20.png "StoreIndexViewModel создание класса")

    *Создание класса StoreIndexViewModel*

<a id="Ex5Task2"></a>

<a id="Task_2_-_Adding_Properties_to_the_ViewModel_class"></a>
#### <a name="task-2---adding-properties-to-the-viewmodel-class"></a>Задача 2 - Добавление свойства в класс ViewModel

Существует два параметра должны быть переданы из StoreController Просмотр шаблона для создания ожидаемый ответ в виде HTML: число жанров в хранилище и список этих жанров.

В этой задаче вы добавите эти свойства 2 **StoreIndexViewModel** класса: **NumberOfGenres** (целое число) и **жанров** (список строк).

1. Добавить **NumberOfGenres** и **жанров** свойства **StoreIndexViewModel** класса. Чтобы сделать это, добавьте следующие строки 2 в определение класса:

    (Фрагмент - кода *MVC 4 ASP.NET основы - свойства Ex5 StoreIndexViewModel*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample11.cs)]

    > [!NOTE]
    > **{Get; задать;}**  нотации задействует возможности C# автоматически реализуемые свойства компонента. Предоставляет преимущества свойства без необходимости нами для объявления резервным полем.

<a id="Ex5Task3"></a>

<a id="Task_3_-_Updating_StoreController_to_use_the_StoreIndexViewModel"></a>
#### <a name="task-3---updating-storecontroller-to-use-the-storeindexviewmodel"></a>Задача 3 - обновления StoreController использовать StoreIndexViewModel

**StoreIndexViewModel** класс инкапсулирует сведения, необходимые для передачи из **StoreController** **индекс** метод Просмотр шаблона для создания ответа .

В этой задаче будет обновлена **StoreController** использовать **StoreIndexViewModel**.

1. Откройте **StoreController** класса.

    ![Открытие класса StoreController](aspnet-mvc-4-fundamentals/_static/image21.png "StoreController открытия класса")

    *Открытие StoreController класса*
2. Чтобы использовать **StoreIndexViewModel** класса из **StoreController**, добавьте следующее пространство имен в верхней части **StoreController** кода:

    (Фрагмент - кода *MVC 4 ASP.NET основы - с помощью ViewModels StoreIndexViewModel Ex5*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample12.cs)]
3. Изменение **StoreController** **индекс** метод действия, чтобы создает и заполняет **StoreIndexViewModel** объекта, а затем передает его шаблон, представление Создайте HTML-ответа с ним.

    > [!NOTE]
    > В лаборатории &quot;модели ASP.NET MVC и доступа к данным&quot; будет написан код, который извлекает из базы данных список жанров хранилища. В следующем коде создается **списка** жанров фиктивные данные, которые будут заполнять **StoreIndexViewModel**.
    > 
    > После создания и настройки **StoreIndexViewModel** объекта, он будет передана в качестве аргумента для **представление** метод. Это означает, что шаблон представления будет использовать этот объект для создания HTML-ответа с ним.
4. Замените **индекс** метод следующим кодом:

    (Фрагмент - кода *MVC 4 ASP.NET основы - метод индекс StoreController Ex5*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample13.cs)]

    > [!NOTE]
    > Если вы знакомы с C#, могут предположить, используя **var** означает, что **viewModel** переменной позднего связывания. Неправильный - компилятор C# используется для определения того, что определение зависимости от того, что можно присвоить переменной типа **viewModel** относится к типу **StoreIndexViewModel**. Кроме того, при компиляции локальной **viewModel** переменной как **StoreIndexViewModel** тип проверки во время компиляции get и поддержка редактора кода Visual Studio.

<a id="Ex5Task4"></a>

<a id="Task_4_-_Creating_a_View_Template_that_Uses_StoreIndexViewModel"></a>
#### <a name="task-4---creating-a-view-template-that-uses-storeindexviewmodel"></a>Задача 4. Создание шаблона представления, который использует StoreIndexViewModel

В этой задаче будет создан шаблон представления, который будет использовать StoreIndexViewModel объекта, переданного из контроллера, чтобы отобразить список жанров.

1. Перед созданием нового шаблона представление, нужно построить проект, чтобы **добавить диалоговое окно представления** знает о **StoreIndexViewModel** класса. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.

    ![Построение проекта](aspnet-mvc-4-fundamentals/_static/image22.png "построение проекта")

    *Построение проекта*
2. Создание шаблона представления. Чтобы сделать это, щелкните правой кнопкой мыши внутри **индекс** метод и выберите **добавить представление**.

    ![Добавление представления](aspnet-mvc-4-fundamentals/_static/image23.png "Добавление представления")

    *Добавление представления*
3. Поскольку **добавить диалоговое окно представления** был вызван из **StoreController**, добавит Просмотр шаблона по умолчанию в **\Views\Store\Index.cshtml** файла. Проверьте **создавать строго типизированные представления** флажок, а затем выберите **StoreIndexViewModel** как **класс модели**. Кроме того, убедитесь в том, что выбран обработчик представлений **Razor**. Нажмите кнопку **Добавить**.

    ![Диалоговое окно добавления представления](aspnet-mvc-4-fundamentals/_static/image24.png "диалоговое окно добавления представления")

    *Диалоговое окно добавления представления*

    **\Views\Store\Index.cshtml** создается и открывается файл шаблона представления. На основе сведений, предоставленных для **добавить представление** диалоговое окно на предыдущем шаге, представление будет ожидать шаблона **StoreIndexViewModel** экземпляр в качестве данных, используемый для создания HTML-ответа. Обратите внимание, что шаблон наследует `ViewPage<musicstore.viewmodels.storeindexviewmodel>` в C#.

<a id="Ex5Task5"></a>

<a id="Task_5_-_Updating_the_View_Template"></a>
#### <a name="task-5---updating-the-view-template"></a>Задача 5 - Обновление шаблона представления

В этой задаче будет обновить представление шаблон, созданный в последней задаче для получения количества жанров и их имена в пределах страницы.

> [!NOTE]
> Будет использовать @ синтаксис (часто обозначается как &quot;фрагменты кода&quot;) для выполнения кода в шаблоне представления.


1. В **Index.cshtml** в файл **хранилища** папка, замените его код следующим:


    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample14.cshtml)]

    > [!NOTE]
    > Как только вы закончите вводить периода после слова **модели**, Intellisense в Visual Studio отображается список возможных свойств и методов для выбора.
    > 
    > ![](aspnet-mvc-4-fundamentals/_static/image25.png)
    > 
    > *Получение свойств модели и методы с IntelliSense в Visual Studio*
    > 
    > **Модель** ссылок на свойства **StoreIndexViewModel** который передан контроллер для шаблона представления. Это означает, что можно получить доступ ко всем данных, передаваемых из контроллера шаблон представления через **модель** свойство и отформатируйте его в соответствующий ответ HTML в шаблоне представления.
    > 
    > Нужно просто выбрать **NumberOfGenres** список свойств в IntelliSense, а не вводить его и затем она будет Автозаполнение его, нажав клавишу **клавиши tab**.
2. Цикл по списку genre в **StoreIndexViewModel** и создать HTML  **&lt;ul&gt;**  список с помощью **foreach** цикла.
(C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample15.cshtml)]
3. Нажмите клавишу **F5** для запуска приложения и Обзор **или сохранений**. Появится список жанров переданный **StoreIndexViewModel** объекта из **StoreController** для шаблона представления.

    ![Представление, содержащее список жанров](aspnet-mvc-4-fundamentals/_static/image26.png "представление, отображающее список жанров")

    *Представление, содержащее список жанров*
4. Закройте браузер.

<a id="Exercise6"></a>

<a id="Exercise_6_Using_Parameters_in_View"></a>
### <a name="exercise-6-using-parameters-in-view"></a>Упражнение 6: Использование параметров в представлении

В упражнении 3 вы узнали, как передавать параметры контроллера. В этом упражнении вы узнаете, как использовать эти параметры в шаблоне представления. Для этой цели будут представлены сначала для классов модели, которые помогают управлять логику данных и домена. Кроме того вы узнаете, как создавать ссылки на страницы в приложении ASP.NET MVC позволяет не задумываться вещей, как кодирование URL-пути.

<a id="Ex6Task1"></a>

<a id="Task_1_-_Adding_Model_Classes"></a>
#### <a name="task-1---adding-model-classes"></a>Задача 1. Добавление классов модели

В отличие от ViewModels, в которой создаются только для передачи данных из контроллера в представление классов модели создаются для хранения и управления логику данных и домена. В этой задаче вы добавите двух классов модели для представления этих концепций: **жанр** и **альбом**.

1. Если это еще не открыто, запустите **VS Express для Web**
2. В **файл** меню, выберите **Открытие проекта**. В диалоговом окне Открытие проекта найдите **Source\Ex06 UsingParametersInView\Begin**выберите **Begin.sln** и нажмите кнопку **откройте**. Кроме того вы можете продолжить с решением, полученный после завершения работы в предыдущем упражнении.

    1. Если вы открыли указанных **начать** решение, необходимо будет загрузить несколько отсутствующих пакетов NuGet прежде чем продолжить. Чтобы сделать это, нажмите кнопку **проекта** и выбрать пункт **управление пакетами NuGet**.
    2. В **управление пакетами NuGet** диалоговое окно, нажмите кнопку **восстановить** чтобы скачивать отсутствующие пакеты.
    3. Наконец, постройте решение, нажав кнопку **построения** | **построить решение**.

    > [!NOTE]
    > Одним из преимуществ использования NuGet является у вас не указан для отправки всех библиотек в вашем проекте, уменьшив размер проекта. С помощью NuGet Power Tools указав версий пакета в файле Packages.config можно для загрузки всех необходимых библиотек первый раз, при запуске проекта. Вот почему необходимо будет выполнить эти шаги после открытия существующего решения в этой лаборатории.
3. Добавить **жанр** класс модели. Для этого щелкните правой кнопкой мыши **моделей** папки в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класса** элемента и присвойте файлу имя *Genre.cs*, нажмите кнопку **добавить**.

    ![Добавление класса](aspnet-mvc-4-fundamentals/_static/image27.png "Добавление класса")

    *Добавление нового элемента*

    ![Добавьте класс модели жанр](aspnet-mvc-4-fundamentals/_static/image28.png "добавьте класс модели жанр")

    *Добавьте класс модели жанр*
4. Добавить **имя** свойство жанр классу. Чтобы сделать это, добавьте следующий код:

    (Фрагмент - кода *основы ASP.NET MVC 4 - жанр Ex6*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample16.cs)]
5. Таким же способом, как и прежде, добавьте **альбом** класса. Для этого щелкните правой кнопкой мыши **моделей** папки в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класса** элемента и присвойте файлу имя *Album.cs*, нажмите кнопку **добавить**.
6. Добавьте в класс альбом два свойства: **жанр** и **заголовка**. Чтобы сделать это, добавьте следующий код:

    (Фрагмент - кода *основы ASP.NET MVC 4 - альбом Ex6*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample17.cs)]

<a id="Ex6Task2"></a>

<a id="Task_2_-_Adding_a_StoreBrowseViewModel"></a>
#### <a name="task-2---adding-a-storebrowseviewmodel"></a>Задача 2 - Добавление StoreBrowseViewModel

Объект **StoreBrowseViewModel** будет использоваться в этой задаче для отображения альбомы, которые соответствуют выбранной жанра. В этой задаче будет создайте этот класс и добавьте два свойства для обработки **жанр** и его **альбом**в списке.

1. Добавить **StoreBrowseViewModel** класса. Для этого щелкните правой кнопкой мыши **ViewModels** папки в **обозревателе решений**выберите **добавить** и затем **новый элемент** параметр. В разделе **кода**, выберите **класса** элемента и присвойте файлу имя *StoreBrowseViewModel.cs*, нажмите кнопку **добавить**.
2. Добавьте ссылку в моделях в **StoreBrowseViewModel** класса. Чтобы сделать это, добавьте следующие пространства имен с помощью:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex6 UsingModel*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample18.cs)]
3. Добавьте два свойства для **StoreBrowseViewModel** класса: **жанр** и **альбомы**. Чтобы сделать это, добавьте следующий код:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex6 ModelProperties*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample19.cs)]

    > [!NOTE]
    > Что такое **списка&lt;альбом&gt;**  ?: использует это определение **списка&lt;T&gt;**  типа, где **T** ограничивает тип, для каких элементов этого **списка** принадлежат, в этом случае **альбом** (или один из его потомков).
    > 
    > Эта возможность создавать классы и методы, которые отложить спецификации один или несколько типов, пока класс или метод объявляется и создавать экземпляры в клиентском коде функции языка C# называется **универсальные шаблоны**.
    > 
    > **Список&lt;T&gt;**  универсального эквивалентно **ArrayList** тип, доступный в **System.Collections.Generic** пространства имен. Одно из преимуществ использования **универсальных шаблонов** что, поскольку задан тип, не требуется выполнять проверку операции, такие как элементы в приведении типа **альбом** как в случае с **ArrayList**.

<a id="Ex6Task3"></a>

<a id="Task_3_-_Using_the_New_ViewModel_in_the_StoreController"></a>
#### <a name="task-3---using-the-new-viewmodel-in-the-storecontroller"></a>Задача 3. Использование нового ViewModel в StoreController

В этой задаче предстоит изменить **StoreController** **Обзор** и **сведения** методы действий для использования новых **StoreBrowseViewModel** .

1. Добавьте ссылку на папку модели в **StoreController** класса. Для этого разверните **контроллеров** папки в **обозревателе решений** и откройте **StoreController** класса. Затем добавьте следующий код:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex6 UsingModelInController*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample20.cs)]
2. Замените **Обзор** метода действия для использования **StoreViewBrowseController** класса. Вы создадите жанра, а два новых альбомы фиктивными данными (в следующей практической работе будут использовать реальные данные из базы данных). Для этого замените **Обзор** метод следующим кодом:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex6 BrowseMethod*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample21.cs)]
3. Замените **сведения** метода действия для использования **StoreViewBrowseController** класса. Будет создана новая **альбом** объекта, возвращаемого в **представление**. Для этого замените **сведения** метод следующим кодом:

    (Фрагмент - кода *основы ASP.NET MVC 4 - Ex6 DetailsMethod*)


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample22.cs)]

<a id="Ex6Task4"></a>

<a id="Task_4_-_Adding_a_Browse_View_Template"></a>
#### <a name="task-4---adding-a-browse-view-template"></a>Задача 4. Добавление шаблона представления обзора

В этой задаче вы добавите **Обзор** представления для отображения альбомы, найдено для определенного жанра.

1. Прежде чем создавать новый шаблон представления, при построении проекта, чтобы **добавить представление** диалоговое окно знает о **ViewModel** класс использовать. Постройте проект, выбрав **построения** пункта меню и затем **построения MvcMusicStore**.
2. Добавить **Обзор** представления. Для этого щелкните правой кнопкой мыши в **Обзор** метод действия **StoreController** и нажмите кнопку **добавить представление**.
3. В **добавить представление** диалогового окна убедитесь, что имя представления **Обзор**. Проверьте **создать строго типизированное представление** флажок и выбрать **StoreBrowseViewModel** из **класс модели** раскрывающегося списка. Остальные поля оставьте значения по умолчанию. Затем нажмите кнопку **Добавить**.

    ![Добавление представления обзора](aspnet-mvc-4-fundamentals/_static/image29.png "Добавление представления обзора")

    *Добавление представления обзора*
4. Изменить **Browse.cshtml** для отображения информации жанра, доступ к **StoreBrowseViewModel** объекта, передаваемого шаблона представления. Для этого замените содержимое следующим: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample23.cshtml)]

<a id="Ex6Task5"></a>

<a id="Task_5_-_Running_the_Application"></a>
#### <a name="task-5---running-the-application"></a>Задача 5 - запуск приложения

В этой задаче вы проверите, **Обзор** метод извлекает альбомы из **Обзор** метода действия.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **, хранения, Обзор? Жанр = Disco** чтобы убедиться, что действие возвращает два альбомов.

    ![Просмотр альбомов Disco хранилища](aspnet-mvc-4-fundamentals/_static/image30.png "просмотра Disco альбомы хранилища")

    *Просмотр альбомов Disco хранилища*

<a id="Ex6Task6"></a>

<a id="Task_6_-_Displaying_information_About_a_Specific_Album"></a>
#### <a name="task-6---displaying-information-about-a-specific-album"></a>Задача 6 - Отображение сведений о конкретных альбом

В этой задаче будет реализовывать **сведения о хранилище** представление для отображения сведений о конкретных альбома. В этой лаборатории практических все данные будут отображаться альбома уже содержится в **представление** шаблона. В этом случае вместо создания **StoreDetailsViewModel** класса, будет использовать текущий **StoreBrowseViewModel** шаблона, передав ему альбома.

1. Закройте браузер, если необходимо, чтобы вернуться в окно Visual Studio. Добавьте новый **сведения** просмотра для **StoreController** **сведения** метода действия. Для этого щелкните правой кнопкой мыши **сведения** метод в **StoreController** класса и нажмите кнопку **добавить представление**.
2. В **добавить представление** диалогового окна, убедитесь, что **имя представления** — **сведения**. Проверьте **создать строго типизированное представление** флажок и выбрать **альбом** из **класс модели** раскрывающегося списка. Остальные поля оставьте значения по умолчанию. Затем нажмите кнопку **Добавить**. Это создает и открывает **\Views\Store\Details.cshtml** файла.

    ![Добавление представления сведений](aspnet-mvc-4-fundamentals/_static/image31.png "Добавление представления сведений")

    *Добавление представления сведений*
3. Изменить **Details.cshtml** файл для отображения сведений о дисках, доступ к **альбом** объекта, передаваемого шаблона представления. Для этого замените содержимое следующим: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample24.cshtml)]

<a id="Ex6Task7"></a>

<a id="Task_7_-_Running_the_Application"></a>
#### <a name="task-7---running-the-application"></a>Задача 7. выполнение приложения

В этой задаче вы проверите, **сведения** представление получает данные альбома из **подробное описание действий** метод.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес **/Store/Details/5** для проверки сведений о диске.

    ![Просмотр сведений альбомы](aspnet-mvc-4-fundamentals/_static/image32.png "просмотра альбомы детализации")

    *Подробности обозревателя альбом*

<a id="Ex6Task8"></a>

<a id="Task_8_-_Adding_Links_Between_Pages"></a>
#### <a name="task-8---adding-links-between-pages"></a>Задача 8. Добавление ссылки между страницами

В этой задаче будет добавить в представление хранилища должна иметься ссылка в имени каждой жанр в соответствующую ссылку **/Store/обзора** URL-адрес. Таким образом, при щелчке жанра, например **Disco**, произойдет переход **/Store/обзора? жанр = Disco** URL-адрес.

1. Закройте браузер, если необходимо, чтобы вернуться в окно Visual Studio. Обновление **индекс** страницу, чтобы добавить ссылку на **Обзор** страницы. Для этого в **обозревателе решений** разверните **представления** папки, то **хранилища** папку и дважды щелкните **Index.cshtml** страницы.
2. Добавьте ссылку на представление обзора, указывающее, выбран жанр. Для этого замените следующий выделенный код в  **&lt;li&gt;**  теги: (C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample25.cshtml)]

    > [!NOTE]
    > другой подход будет связывания непосредственно на страницу с помощью следующего кода:
    > 
    > &lt;href =&quot;/Store/обзора? жанр =@genreName&quot;&gt;@genreName&lt;/a&gt;
    > 
    > Несмотря на то, что такой подход работает, он зависит от строки жестко задано. При переименовании контроллера в более поздней версии необходимо вручную изменить эту инструкцию. Лучшим вариантом является использование **вспомогательный метод HTML** метод. ASP.NET MVC включает метод вспомогательный метод HTML, который доступен для выполнения таких задач. **Html.ActionLink()** вспомогательный метод позволяет легко построить HTML  **&lt;&gt;**  ссылки, всегда убеждаться в том пути URL-адрес правильно URL-кодированием.
    > 
    > Htlm.ActionLink имеет несколько перегрузок. В этом упражнении используется одна из которых принимает три параметра:
    > 
    > 1. Текст ссылки, который будет отображаться название жанра
    > 2. Имя действия контроллера (**Обзор**)
    > 3. Значения параметра, указав и имя маршрута (**жанр**) и значение (**название жанра**)

<a id="Ex6Task9"></a>

<a id="Task_9_-_Running_the_Application"></a>
#### <a name="task-9---running-the-application"></a>Задача 9. запуск приложения

В этой задаче вы проверите отображения со ссылками на соответствующие каждом жанре **/Store/обзора** URL-адрес.

1. Нажмите клавишу **F5** для запуска приложения.
2. На домашней странице запуска проекта. Изменить URL-адрес **или сохранений** чтобы убедиться, что каждом жанре ссылки на соответствующие **/Store/обзора** URL-адрес.

    ![Просмотр жанров со ссылками на странице «Обзор»](aspnet-mvc-4-fundamentals/_static/image33.png "просмотра жанров со ссылками на странице «Обзор»")

    *Просмотр жанров со ссылками на странице «Обзор»*

<a id="Ex6Task10"></a>

<a id="Task_10_-_Using_Dynamic_ViewModel_Collection_to_Pass_Values"></a>
#### <a name="task-10---using-dynamic-viewmodel-collection-to-pass-values"></a>Задача 10 — с помощью динамического ViewModel коллекции для передачи значений

В этой задаче будет изучено простой и эффективный способ передачи значений между контроллером и представлением без внесения изменений в модели. ASP.NET MVC 4 предоставляет коллекцию &quot;ViewModel&quot;, которой назначены все динамические значения и получить доступ в контроллеры и представления также.

Вы сможете использовать динамическую коллекцию ViewBag для передачи списка &quot; **звезду жанров** &quot; из контроллера в представление. Просмотр индекса хранилища будет доступ к **ViewModel** и отображения информации.

1. Закройте браузер, если необходимо, чтобы вернуться в окно Visual Studio. Откройте **StoreController.cs** и изменения **индекс** метод для создания списка или звездообразную жанров в коллекцию ViewModel:


    [!code-csharp[Main](aspnet-mvc-4-fundamentals/samples/sample26.cs)]

    > [!NOTE]
    > Можно также использовать синтаксис **ViewBag [&quot;Starred&quot;]** доступа к свойствам.
2. Значок звезды  **&quot;starred.png&quot;**  включается в **Source\Assets\Images** папку части этой лаборатории. Чтобы добавить его в приложение, перетащите их содержимое из **Проводник** в окно **обозревателе решений** в Visual Web Developer Express, как показано ниже:

    ![Добавление типа «звезда» образ для решения](aspnet-mvc-4-fundamentals/_static/image34.png "изображение решения, добавление типа «звезда»")

    *Добавление типа «звезда» изображения в решение*
3. Откройте представление **Store/Index.cshtml** и изменения содержимого. Будет считывать &quot;звезду&quot; свойство в **ViewBag** коллекции и узнайте имя текущего жанра, в списке. В этом случае будут показаны значка звездочки право жанр ссылку.
(C#)

    [!code-cshtml[Main](aspnet-mvc-4-fundamentals/samples/sample27.cshtml)]

<a id="Ex6Task11"></a>

<a id="Task_11_-_Running_the_Application"></a>
#### <a name="task-11---running-the-application"></a>Задача 11 - запуск приложения

В этой задаче вы проверите, что отмечено жанров отображать значок.

1. Нажмите клавишу **F5** для запуска приложения.
2. Запускает проект в **Главная** страницы. Изменить URL-адрес **или сохранений** для убедитесь, что каждый важная жанр уважение метку:

    ![Просмотр жанров с элементами отмечено](aspnet-mvc-4-fundamentals/_static/image35.png "просмотра жанров отмечено элементами")

    *Просмотр жанров отмечено элементами*

<a id="Exercise7"></a>

<a id="Exercise_7_A_lap_around_ASPNET_MVC_4_new_template"></a>
### <a name="exercise-7-a-lap-around-aspnet-mvc-4-new-template"></a>Упражнение 7. Знакомство с функциями новый шаблон ASP.NET MVC 4

В этом упражнении вы исследуете улучшения, внесенные в шаблоны проектов ASP.NET MVC 4, изучать наиболее соответствующие компоненты нового шаблона.

<a id="Ex7Task1"></a>

<a id="Task_1_Exploring_the_ASPNET_MVC_4_Internet_Application_Template"></a>
#### <a name="task-1-exploring-the-aspnet-mvc-4-internet-application-template"></a>Задача 1: Изучение шаблона приложения ASP.NET MVC 4 Интернета

1. Если это еще не открыто, запустите **VS Express для Web**
2. Выберите **файл | Новые | Проект** команду меню. В **новый проект** диалогового окна выберите **Visual C# | Web** шаблона на левой панели дерева, а затем выберите **веб-приложение ASP.NET MVC 4**. **Имя** проекта *MusicStore* и обновить **имя решения** для *начать*, затем выберите расположение (или оставьте значение по умолчанию) и нажмите кнопку **ОК**.

    ![Создание нового проекта ASP.NET MVC 4](aspnet-mvc-4-fundamentals/_static/image36.png "Создание нового проекта ASP.NET MVC 4")

    *Создание нового проекта ASP.NET MVC 4*
3. В **нового проекта ASP.NET MVC 4** диалогового окна выберите **веб-приложение** шаблон проекта и нажмите кнопку **ОК**. Обратите внимание, что можно выбрать как обработчик представлений Razor или ASPX.

    ![Создание нового приложения ASP.NET MVC 4 Интернет](aspnet-mvc-4-fundamentals/_static/image37.png "Создание нового приложения ASP.NET MVC 4 Интернета")

    *Создание нового приложения ASP.NET MVC 4 Интернета*

    > [!NOTE]
    > Синтаксис Razor была введена в ASP.NET MVC 3. Его задача — чтобы свести к минимуму число знаков и нажатий клавиш в файл, включение fast и жидкости кодирования рабочего процесса. Razor использует существующие C# и Visual Basic (или другое) языковые навыки и доставляет синтаксиса разметки шаблона, который включает это здорово рабочий процесс построения HTML.
4. Нажмите клавишу **F5** для запуска решения и отображения обновленного шаблона. Проверьте работу следующих функций:

    1. **Шаблоны в современном стиле**

        Шаблоны были обновлены, предоставляя дополнительные стили, современный вид.

        ![Шаблоны ASP.NET MVC 4 приведен](aspnet-mvc-4-fundamentals/_static/image38.png "приведен шаблоны ASP.NET MVC 4")

        *Шаблоны ASP.NET MVC 4 приведен*
    2. **Адаптивной отрисовки**

        Извлеките изменения размера окна браузера и обратите внимание на то, как динамически адаптируется макет страницы и новый размер окна. Эти шаблоны использовать методика адаптивной отрисовки к просмотру правильно в настольных и мобильных платформ без настройки.

        ![Шаблон проекта ASP.NET MVC 4 в другом браузере размеры](aspnet-mvc-4-fundamentals/_static/image39.png "шаблон проекта ASP.NET MVC 4 в другом браузере размеры")

        *Шаблон проекта ASP.NET MVC 4 в другом браузере размеры*
5. Закройте браузер, чтобы остановить отладчик и вернуться в Visual Studio.
6. Теперь имеется возможность просматривать решения и посмотрите, какие новые функции ASP.NET MVC 4 в шаблоне проекта.

    ![MVC4-Интернет приложения шаблон проекта ASP.NET-](aspnet-mvc-4-fundamentals/_static/image40.png "шаблон проекта ASP.NET MVC 4 Интернет приложений")

    *Шаблон проекта приложения Internet ASP.NET MVC 4*

    1. **Разметку HTML5**

        Обзор представлений шаблона, чтобы определить новый разметку тему, например открыть **About.cshtml** просматривать внутри **Главная** папки.

        ![Новый шаблон, с помощью Razor и HTML5 разметки](aspnet-mvc-4-fundamentals/_static/image41.png "новый шаблон, с помощью Razor и HTML5 разметки")

        *Новый шаблон, с помощью Razor и HTML5 разметки*
    2. **Включены библиотеки JavaScript**

        1. **jQuery**: jQuery упрощает обход документа HTML, обработка событий, анимации и взаимодействий Ajax.
        2. **jQuery UI**: Эта библиотека предоставляет абстракции для низкоуровневого взаимодействия, а также дополнительные эффекты анимации и тематизации мини-приложений построена на базе библиотека JavaScript jQuery.

            > [!NOTE]
            > Вы можете узнать о jQuery и jQuery UI в [ [http://docs.jquery.com/](http://docs.jquery.com/)](http://docs.jquery.com/).
        3. **Использованием KnockoutJS**: шаблон по умолчанию ASP.NET MVC 4 теперь включает **использованием KnockoutJS**, платформа JavaScript MVVM, которая позволяет создавать широкие возможности и с высокой скоростью отклика веб-приложения с помощью JavaScript и HTML. Как и в ASP.NET MVC 3, jQuery и jQuery библиотеки пользовательского интерфейса также включаются в ASP.NET MVC 4.

            > [!NOTE]
            > Можно получить дополнительные сведения о библиотеке с использованием KnockOutJS в этой связи: [http://learn.knockoutjs.com/](http://learn.knockoutjs.com/).
        4. **Modernizr**: Эта библиотека запускается автоматически, создание сайтов, совместимые с старых браузерах при использовании технологии HTML5 и CSS3.

            > [!NOTE]
            > Можно получить дополнительные сведения о библиотеке Modernizr в этой связи: [http://www.modernizr.com/](http://www.modernizr.com/).
    3. **SimpleMembership, включенные в решение**

        SimpleMembership была разработана для замены предыдущей системы поставщика ролей ASP.NET и членства. Он имеет много новых возможностей, которые упрощают для разработчиков на безопасное веб-страницы в более гибкий способ.

        Шаблон Интернета уже настроил несколько моментов, которые интегрируются SimpleMembership, например, AccountController подготовлена для использования OAuthWebSecurity (для регистрации учетной записи OAuth, имя входа, управления, т. д.) и веб-безопасности.

        ![SimpleMembership, включенные в решение](aspnet-mvc-4-fundamentals/_static/image42.png "SimpleMembership, включенные в решение")

        *SimpleMembership, включенные в решение*

        > [!NOTE]
        > Получите дополнительную информацию о [OAuthWebSecurity](https://msdn.microsoft.com/en-us/library/jj158393(v=vs.111).aspx) в библиотеке MSDN.

> [!NOTE]
> Кроме того, можно развернуть это приложение на веб-сайтов Windows Azure ниже [приложение б. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания](#AppendixB).


* * *

<a id="Summary"></a>

<a id="Summary"></a>
## <a name="summary"></a>Сводка

Выполнив этот Практическое лабораторное занятие вы изучили основы ASP.NET MVC:

- Основными компонентами приложения MVC и их взаимодействие
- Создание приложения ASP.NET MVC
- Добавление и настройка контроллеров для обработки параметров, передаваемые через URL-адрес и строки запроса
- Добавление главной страницы макета для настройки шаблонов для распространенных HTML-содержимого, в таблице стилей, улучшить внешний вид и представление шаблон для отображения HTML-содержимого
- Как использовать шаблон ViewModel для передачи свойства в шаблоне представления для отображения динамических данных
- Как использовать параметры, передаваемые контроллеров в шаблоне представления
- Добавление ссылки на страницы в приложении ASP.NET MVC
- Как добавить и использовать динамические свойства в представлении
- Усовершенствования в шаблоны проектов ASP.NET MVC 4

<a id="AppendixA"></a>

<a id="Appendix_A_Installing_Visual_Studio_Express_2012_for_Web"></a>
## <a name="appendix-a-installing-visual-studio-express-2012-for-web"></a>Приложение а. Установка Visual Studio Express 2012 для Web

Можно установить **Microsoft Visual Studio Express 2012 для Web** или другой &quot;Express&quot; версию, используя  **[Microsoft Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx)** . Следующие инструкции описывают действия, необходимые для установки *Visual studio Express 2012 для Web* с помощью *Microsoft Web Platform Installer*.

1. Последовательно выберите пункты [ [https://go.microsoft.com/?linkid=9810169](https://go.microsoft.com/?linkid=9810169)](https://go.microsoft.com/?linkid=9810169). Кроме того, если вы уже установили установщика веб-платформы, можно открыть его и выполните поиск продукта &quot; *Visual Studio Express 2012 для Web с пакетом Windows Azure SDK*&quot;.
2. Щелкните **установить сейчас**. Если у вас **Web Platform Installer** вы будете перенаправлены, чтобы загрузить и установить ее сначала.
3. Один раз **Web Platform Installer** открыто, нажмите кнопку **установить** для запуска программы установки.

    ![Установка Visual Studio Express](aspnet-mvc-4-fundamentals/_static/image43.png "установка Visual Studio Express")

    *Установка Visual Studio Express*
4. Чтение всех продуктов лицензий и условия и нажмите кнопку **принимаю** для продолжения.

    ![Принятие условий лицензионного соглашения](aspnet-mvc-4-fundamentals/_static/image44.png)

    *Принятие условий лицензионного соглашения*
5. Дождитесь завершения процесса загрузки и установки.

    ![Ход установки](aspnet-mvc-4-fundamentals/_static/image45.png)

    *Ход выполнения установки*
6. По завершении установки нажмите кнопку **Готово**.

    ![Установка завершена](aspnet-mvc-4-fundamentals/_static/image46.png)

    *Установка завершена*
7. Нажмите кнопку **выхода** закрыть установщик веб-платформы.
8. Чтобы открыть Visual Studio Express для Web, перейдите к **запустить** экрана и начинается запись &quot; **VS Express**&quot;, выберите команду **VS Express для Web** Плитка.

    ![VS Express для Web плитки](aspnet-mvc-4-fundamentals/_static/image47.png)

    *VS Express для Web плитки*

<a id="AppendixB"></a>

<a id="Appendix_B_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
## <a name="appendix-b-publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Приложение б. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

В этом приложении будет показано, как создать новый веб-сайт на портале управления Windows Azure и публикация приложения, получить, выполнив в лаборатории преимуществами средство публикации веб-развертывания, предоставленного Windows Azure.

<a id="ApxBTask1"></a>

<a id="Task_1_-_Creating_a_New_Web_Site_from_the_Windows_Azure_Portal"></a>
#### <a name="task-1---creating-a-new-web-site-from-the-windows-azure-portal"></a>Задача 1. Создание нового веб-узла с Windows Azure Portal

1. Последовательно выберите пункты [портала управления Windows Azure](https://manage.windowsazure.com/) и войдите с использованием учетных данных Майкрософт, связанную с вашей подпиской.

    > [!NOTE]
    > С помощью Windows Azure можно бесплатно размещения 10 веб-сайтов ASP.NET и затем масштабирование по мере увеличения трафика. Вы можете зарегистрироваться [здесь](http://aka.ms/aspnet-hol-azure).

    ![Войдите на портал Windows Azure](aspnet-mvc-4-fundamentals/_static/image48.png "входа на портал Windows Azure")

    *Выполните вход на портале управления Windows Azure*
2. Нажмите кнопку **New** на панели команд.

    ![Создание нового веб-сайта](aspnet-mvc-4-fundamentals/_static/image49.png "создания нового веб-сайта")

    *Создание нового веб-сайта*
3. Нажмите кнопку **вычислений** | **веб-сайт**. Выберите **быстрое создание** параметр. Укажите URL-адрес доступен для нового веб-сайта и нажмите кнопку **Создание веб-сайта**.

    > [!NOTE]
    > Веб-приложение, работающее в облаке, вы можете управлять размещается веб-сайта Windows Azure. Параметр быстрого создания позволяет развернуть завершенное веб-приложение для Windows Azure веб-сайта из вне портала. Он не включает действия по настройке базы данных.

    ![Создание нового веб-сайта с помощью быстрого создания](aspnet-mvc-4-fundamentals/_static/image50.png "создания нового веб-сайта с помощью быстрого создания")

    *Создание нового веб-сайта с помощью быстрого создания*
4. Подождите, пока новый **веб-сайт** создается.
5. После создания веб-сайта по ссылке **URL-адрес** столбца. Проверьте, что новый веб-сайт работает.

    ![Просмотр новых веб-сайт](aspnet-mvc-4-fundamentals/_static/image51.png "просмотра на новый веб-сайт")

    *Просмотр новых веб-сайт*

    ![Веб-сайта под управлением](aspnet-mvc-4-fundamentals/_static/image52.png "веб-сайта под управлением")

    *Запуск веб-сайта*
6. Вернитесь на портал и щелкните имя веб-сайта в разделе **имя** столбец для отображения страницы управления.

    ![Открытие страницы управления веб-сайт](aspnet-mvc-4-fundamentals/_static/image53.png "Открытие страниц управления веб-сайта")

    *Открытие страницы управления веб-сайта*
7. В **панели мониторинга** в разделе **беглого** щелкните **загрузить профиль публикации** ссылку.

    > [!NOTE]
    > *Профиль публикации* содержит все сведения, необходимые для публикации веб-приложения на веб-сайте Windows Azure для каждого разрешенного метода публикации. Профиль публикации содержит URL-адреса, учетные данные пользователя и строк базы данных, необходимых для подключения и проверки подлинности с каждой из конечных точек, для которых включен метода публикации. **Microsoft WebMatrix 2**, **Microsoft Visual Studio Express для Web** и **Microsoft Visual Studio 2012** поддерживают чтение профилей публикации для автоматизации настройки этих программ для Публикация веб-приложений на веб-сайтов Windows Azure.

    ![Профиль публикации веб-сайт загрузки](aspnet-mvc-4-fundamentals/_static/image54.png "профиль публикации веб-сайта загрузки")

    *Профиль публикации веб-сайта загрузки*
8. Загрузите файл профиля публикации в известном расположении. Далее в этом упражнении вы увидите как использовать этот файл для публикации веб-приложения для веб-сайтов, Windows Azure из Visual Studio.

    ![Сохранить файл профиля публикации](aspnet-mvc-4-fundamentals/_static/image55.png "Сохранение профиля публикации")

    *Сохранить файл профиля публикации*

<a id="ApxBTask2"></a>

<a id="Task_2_-_Configuring_the_Database_Server"></a>
#### <a name="task-2---configuring-the-database-server"></a>Задача 2 - Настройка сервера базы данных

Если приложение использует SQL Server базы данных, необходимо будет создать сервер базы данных SQL. Если вы хотите развернуть простое приложение, которое не использует SQL Server может пропустить эту задачу.

1. Сервер базы данных SQL необходимо для хранения базы данных приложения. Можно просматривать серверы базы данных SQL из подписки на портале управления Windows Azure в **баз данных Sql** | **серверы** | **сервера Панель мониторинга**. Если у вас на сервер, созданный, можно создать ее, используя **добавить** кнопки на панели команд. Обратите внимание **имя сервера и URL-адрес, имя входа администратора и пароль**, как будет использовать их в следующие задачи. Не следует создавать базу данных, как он будет создан в более поздней стадии.

    ![Панель мониторинга базы данных SQL Server](aspnet-mvc-4-fundamentals/_static/image56.png "панель мониторинга базы данных SQL Server")

    *Панель мониторинга базы данных SQL Server*
2. В следующей задаче требуется проверить подключение к базе данных из Visual Studio, по этой причине необходимо включить локальный IP-адреса в список серверов **разрешенные IP-адреса**. Чтобы сделать это, нажмите кнопку **Настройка**, выберите IP-адрес из **текущий IP-адрес клиента** и вставьте его на **начальный IP-адрес** и **конечный IP-адрес** текстовые поля и нажмите кнопку ![add-client-ip-address-ok-button](aspnet-mvc-4-fundamentals/_static/image57.png) кнопки.

    ![Добавление IP-адрес клиента](aspnet-mvc-4-fundamentals/_static/image58.png)

    *Добавление IP-адрес клиента*
3. Один раз **IP-адрес клиента** добавляется разрешенных IP-адресов выберите на **Сохранить** для подтверждения изменения.

    ![Подтверждение изменений](aspnet-mvc-4-fundamentals/_static/image59.png)

    *Подтверждение изменений*

<a id="ApxBTask3"></a>

<a id="Task_3_-_Publishing_an_ASPNET_MVC_4_Application_using_Web_Deploy"></a>
#### <a name="task-3---publishing-an-aspnet-mvc-4-application-using-web-deploy"></a>Задача 3. публикация приложения ASP.NET MVC 4 с помощью веб-развертывания

1. Вернитесь в решении ASP.NET MVC 4. В **обозревателе решений**, щелкните правой кнопкой мыши проект веб-сайта и выберите **публикации**.

    ![Публикация приложения](aspnet-mvc-4-fundamentals/_static/image60.png "публикация приложения")

    *Публикация веб-сайта*
2. Импортируйте профиль публикации, сохраненный в первой задаче.

    ![Импорт профиля публикации](aspnet-mvc-4-fundamentals/_static/image61.png "Импорт профиля публикации")

    *Импорт профиля публикации*
3. Нажмите кнопку **Проверка подключения**. После завершения проверки нажмите кнопку **Далее**.

    > [!NOTE]
    > Проверка завершена, как только вы увидите зеленый флажок рядом с "Проверить подключение".

    ![Проверка подключения](aspnet-mvc-4-fundamentals/_static/image62.png "Проверка подключения")

    *Проверка подключения*
4. В **параметры** в разделе **баз данных** статьи, нажмите кнопку рядом с текстового поля для подключения к базе данных (т. е. **DefaultConnection**).

    ![Конфигурация веб-развертывания](aspnet-mvc-4-fundamentals/_static/image63.png "конфигурация веб-развертывания")

    *Конфигурация веб-развертывания*
5. Настройте подключение к базе данных следующим образом.

    - В **имя сервера** введите ваш URL-адрес сервера базы данных SQL с помощью *tcp:* префикс.
    - В **имя пользователя** введите имя входа администратора сервера.
    - В **пароль** введите пароль входа администратора сервера.
    - Введите имя новой базы данных, например: *MVC4SampleDB*.

    ![Настройка строки подключения назначения](aspnet-mvc-4-fundamentals/_static/image64.png "Настройка целевой строки подключения")

    *Настройка целевой строки подключения*
6. Затем нажмите кнопку **ОК**. Когда появится запрос на создание базы данных щелкните **Да**.

    ![Создание базы данных](aspnet-mvc-4-fundamentals/_static/image65.png "Создание строки базы данных")

    *Создание базы данных*
7. Строка подключения, который будет использоваться для подключения к базе данных SQL в Windows Azure отображается внутри текстового поля по умолчанию соединения. Затем нажмите кнопку **Далее**.

    ![Строка подключения, указывающий базу данных SQL](aspnet-mvc-4-fundamentals/_static/image66.png "строку соединения, указывающий базу данных SQL")

    *Строка подключения, указывающий базу данных SQL*
8. В **предварительного просмотра** щелкните **публикации**.

    ![Публикация веб-приложения](aspnet-mvc-4-fundamentals/_static/image67.png "публикации веб-приложения")

    *Публикация веб-приложения*
9. После завершения процесса публикации в браузере по умолчанию откроется опубликованного веб-узла.

    ![Публикации приложения в Windows Azure](aspnet-mvc-4-fundamentals/_static/image68.png "публикации приложения в Windows Azure")

    *Приложения, опубликованные в Windows Azure*

<a id="AppendixC"></a>

<a id="Appendix_C_Using_Code_Snippets"></a>
## <a name="appendix-c-using-code-snippets"></a>Приложение в. фрагменты кода

С помощью фрагментов кода у вас есть весь код, который требуется под рукой. Документ лаборатории сообщает только при их использовании, как показано на следующем рисунке.

![Фрагменты кода Visual Studio для вставки кода в проекте](aspnet-mvc-4-fundamentals/_static/image69.png "фрагменты кода с помощью Visual Studio вставьте код в проект")

*Фрагменты кода Visual Studio для вставки кода в проекте*

***Добавление фрагмента кода, с помощью клавиатуры (только C#)***

1. Поместите курсор в место вставки кода.
2. Начните вводить имя фрагмента (без пробелов и дефисы).
3. Смотрите, как IntelliSense отображает, совпадающие с именами фрагменты.
4. Выберите правильный фрагмент (или продолжите ввод, пока не будет выделен весь фрагмент имени).
5. Нажмите клавишу Tab дважды, чтобы вставить фрагмент в положении курсора.

![Начните вводить имя фрагмента](aspnet-mvc-4-fundamentals/_static/image70.png "начните вводить имя фрагмента")

*Начните вводить имя фрагмента*

![Нажмите клавишу Tab, чтобы выделить выделенный фрагмент](aspnet-mvc-4-fundamentals/_static/image71.png "нажмите клавишу Tab, чтобы выделить выделенный фрагмент")

*Нажмите клавишу Tab, чтобы выделить выделенный фрагмент*

![Снова нажмите клавишу Tab и фрагмент будет расширен](aspnet-mvc-4-fundamentals/_static/image72.png "будет расширен, снова нажмите клавишу Tab и фрагмента кода")

*Снова нажмите клавишу Tab и фрагмент будет расширен*

***Добавление фрагмента кода, с помощью мыши (C#, Visual Basic и XML)*** 1. Щелкните правой кнопкой мыши место вставки фрагмента кода.

1. Выберите **вставить фрагмент** следуют **Мои фрагменты кода**.
2. Выберите соответствующий фрагмент из списка, щелкнув по ней.

![Щелкните правой кнопкой мыши место для вставки фрагмента кода и выбора вставить фрагмент](aspnet-mvc-4-fundamentals/_static/image73.png "место для вставки фрагмента кода и выбора вставить фрагмент кода щелкните правой кнопкой мыши")

*Щелкните правой кнопкой мыши в место вставки фрагмента кода и выберите Вставить фрагмент*

![Выберите из списка, соответствующего фрагмента, щелкнув его](aspnet-mvc-4-fundamentals/_static/image74.png "выбрать соответствующий фрагмент из списка, щелкнув по ней")

*Выберите соответствующий фрагмент из списка, щелкнув по ней*
