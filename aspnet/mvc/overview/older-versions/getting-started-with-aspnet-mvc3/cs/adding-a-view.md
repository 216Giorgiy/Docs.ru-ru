---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
title: Добавление представления (C#) | Документы Microsoft
author: Rick-Anderson
description: Этот учебник поможет узнать основы создания MVC веб-приложения ASP.NET с помощью Microsoft Visual Web Developer 2010 Express пакетом обновления 1, являющийся...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/12/2011
ms.topic: article
ms.assetid: abc7c78d-cb09-4a4c-a887-61bc401d40e3
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/cs/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: 50ce4a2024ffd9e2bbb5526717052d486689ff38
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="adding-a-view-c"></a>Добавление представления (C#)
====================
по [Рик Андерсон](https://github.com/Rick-Anderson)

> > [!NOTE]
> > Доступна обновленная версия этого учебника [здесь](../../../getting-started/introduction/getting-started.md) , с использованием ASP.NET MVC 5 и Visual Studio 2013. Он является более безопасны, выполните гораздо проще и показаны дополнительные возможности.
> 
> 
> Этот учебник поможет узнать основы создания MVC веб-приложения ASP.NET с помощью Microsoft Visual Web Developer 2010 Express пакетом обновления 1, которой — это бесплатная версия Microsoft Visual Studio. Прежде чем начать, убедитесь, что вы установили необходимые компоненты, перечисленные ниже. Все из них можно установить, щелкнув по следующей ссылке: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack). Кроме того можно установить отдельно предварительные требования, используя следующие ссылки:
> 
> - [Необходимые компоненты Visual Studio Web Developer Express SP1](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [Обновление средств ASP.NET MVC 3](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - [SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(среда выполнения + средства поддержки)
> 
> Если вы используете Visual Studio 2010 вместо Visual Web Developer 2010, необходимо установить необходимые компоненты, щелкнув по следующей ссылке: [необходимых компонентов Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).
> 
> Проект Visual Web Developer с исходного кода C# доступна по следующему адресу. [Загрузка версии C#](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098). Если используется Visual Basic, перейдите в [Visual Basic-версии](../vb/intro-to-aspnet-mvc-3.md) этого учебника.


В этом разделе вы собираетесь изменить `HelloWorldController` класса для использования представления файлы шаблонов для четко инкапсулировать процесс создания HTML ответов клиенту.

Вы создадите представление файла шаблона с использованием нового [представлений Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) впервые появилась в ASP.NET MVC 3. Шаблоны, представление на основе Razor *.cshtml* расширение имени файла, а также предоставляют удобный способ создания выходных данных с помощью C# HTML. Razor сводит к минимуму число знаков и нажатий клавиш при написании шаблона представления, а также позволяет быстро, жидкости кодирования рабочего процесса.

Запустить с помощью шаблона представления с `Index` метод `HelloWorldController` класса. На данный момент метод `Index` возвращает строку с сообщением, которое жестко задано в классе контроллера. Изменение `Index` метод для возврата `View` объекта, как показано ниже:

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

Этот код использует Просмотр шаблона для создания HTML-ответа в браузер. Добавьте в проект, Просмотр шаблона, который можно использовать с `Index` метод. Для этого щелкните правой кнопкой мыши внутри `Index` метода и нажмите кнопку **добавить представление**.

![](adding-a-view/_static/image1.png)

**Добавить представление** откроется диалоговое окно. Оставьте настройки по умолчанию способ их и нажмите кнопку **добавить** кнопки:

![](adding-a-view/_static/image2.png)

*MvcMovie\Views\HelloWorld* папки и *MvcMovie\Views\HelloWorld\Index.cshtml* создания файла. Вы увидите их в **обозревателе решений**:

![](adding-a-view/_static/image3.png)

Ниже *Index.cshtml* файл, который был создан:

[![HelloWorldIndex](adding-a-view/_static/image5.png)](adding-a-view/_static/image4.png)

Добавление HTML в `<h2>` тег. Измененный *MvcMovie\Views\HelloWorld\Index.cshtml* файла показан ниже.

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml)]

Запустите приложение и перейдите к `HelloWorld` контроллера (`http://localhost:xxxx/HelloWorld`). `Index` Метод в контроллер не представляют большую нагрузку; он просто выполнившего инструкцию `return View()`, что указывается, что метод следует использовать файл шаблона представления для отображения ответа в браузер. Так как не был явно указан имя файла шаблона представления для использования, ASP.NET MVC по умолчанию с помощью *Index.cshtml* просмотреть файл в *\Views\HelloWorld* папки. На рисунке ниже показаны строки жестко запрограммированы в представлении.

![](adding-a-view/_static/image6.png)

Выглядит очень хорошо. Тем не менее Обратите внимание, что строка заголовка браузера отображается надпись «Index» большой заголовок на странице отображается надпись «Мое приложение MVC.» Изменим их.

## <a name="changing-views-and-layout-pages"></a>Изменение представления и макета страницы

Во-первых необходимо изменить название «Мое приложение MVC» в верхней части страницы. Этот текст является общим для каждой страницы. Он фактически реализуется только в одном месте в проекте, даже если оно появляется на каждой странице приложения. Последовательно выберите пункты */представления/Общие* папки в **обозревателе решений** и откройте  *\_Layout.cshtml* файла. Этот файл называется *страница макета* и общих «оболочка», использовать другие страницы.

[![_LayoutCshtml](adding-a-view/_static/image8.png)](adding-a-view/_static/image7.png)

Шаблоны макета позволяют указать HTML-разметку контейнера узла в одном месте, а затем применять их на нескольких страницах на сайте. Примечание `@RenderBody()` строки в нижней части файла. `RenderBody` заполнитель, где все страницы представления, создаваемые вами отображаются, «оболочкой» страница макета. Изменение заголовка в шаблон макета с «My MVC Application» на «Приложение MVC фильма».

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml)]

Запустите приложение и обратите внимание, что теперь отображается надпись «Приложение MVC фильма». Нажмите кнопку **о** ссылку и содержатся как страницы «Фильма приложение MVC,» слишком. Нам удалось сделать всего один раз в шаблон макета и у всех страниц на сайте отражают новый заголовок.

![](adding-a-view/_static/image9.png)

Полный  *\_Layout.cshtml* файла показан ниже:

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

Теперь изменим заголовка страницы индекса (представление).

Open *MvcMovie\Views\HelloWorld\Index.cshtml*. Есть два места для внесения изменений: во-первых, текст, расположенный в заголовке обозревателя, а затем в заголовке получателя ( `<h2>` элемент). Сделайте их немного разными, чтобы видеть, какой именно фрагмент кода изменяет соответствующую часть приложения.

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

Для указания заголовка HTML для отображения кода выше наборы `Title` свойство `ViewBag` объекта (который находится в *Index.cshtml* Просмотр шаблона). Если взглянуть на исходный код в шаблон макета, вы заметите, что шаблон использует это значение в `<title>` как часть `<head>` части HTML-код. При таком подходе вы можете легко передавать другие параметры между представление шаблон и файл макета.

Запустите приложение и перейдите к `http://localhost:xx/HelloWorld`. Обратите внимание, что основной и дополнительный заголовки браузера изменились. (Если изменения не отображаются, возможно, вы просматриваете кэшированное содержимое. В этом случае нажмите в браузере клавиши CTRL+F5 для принудительной загрузки ответа сервера.)

Также Обратите внимание, как содержимое в *Index.cshtml* шаблон представления объединяется с  *\_Layout.cshtml* Просмотр шаблона и одного ответа HTML был отправлен в браузере. С помощью шаблонов макета можно легко вносить изменения, которые применяются ко всем страницам приложения.

![](adding-a-view/_static/image10.png)

В этом примере небольшой фрагмент данных (сообщение "Hello from our View Template!" ) жестко задан в коде. Приложение MVC предоставляет представление, вы реализуете контроллер, однако модели на данный момент еще нет. Вскоре, мы рассмотрим как создать базу данных и получения из него данных модели.

## <a name="passing-data-from-the-controller-to-the-view"></a>Передача данных из контроллера в представление

Прежде чем мы перейдите к базе данных и говорить о модели, менее, сначала поговорим о передаче информации из контроллера в представление. Классы контроллера вызываются в ответ на запрос входящего URL-адрес. Класс контроллера пишется код, который обрабатывает входящие параметры, извлекает данные из базы данных и в конечном счете решает, какой тип ответа для отправки в браузер. Просмотр шаблонов может использоваться из контроллера, создавать и форматировать HTML-ответа в браузер.

Контроллеры несут ответственность за предоставление необходимых любые данные или объекты в порядке для шаблона представления для отображения ответа в браузер. Просмотр шаблона никогда не следует выполнять бизнес-логики или напрямую взаимодействовать с базой данных. Он должен работать только с данными, передается контроллером. Поддержание этот «Разделение областей ответственности» позволяет поддерживать код очистки и более простого в сопровождении.

В настоящее время `Welcome` метода действия в `HelloWorldController` класса принимает `name` и `numTimes` параметра, а затем выходные данные значения непосредственно в браузере. Вместо контроллера отрисовки этот ответ в виде строки, изменим на контроллере, чтобы вместо этого используйте представление шаблона. Шаблон представления создаст динамический ответ, для получения которого необходимо передать соответствующие фрагменты данных из контроллера в представление. Это можно сделать, что контроллер поместить динамические данные, которые требуется Просмотр шаблона в `ViewBag` , Просмотр шаблона можно получить доступ к объекту.

Вернитесь к *HelloWorldController.cs* и измените `Welcome` метод, чтобы добавить `Message` и `NumTimes` значение `ViewBag` объекта. `ViewBag` является динамическим объектом, это означает, что любые необходимые можно поместить в него; `ViewBag` объект не имеет определенных свойств, пока не будет помещен внутри него. Полный файл *HelloWorldController.cs* выглядит следующим образом:

[!code-csharp[Main](adding-a-view/samples/sample6.cs)]

Теперь `ViewBag` объект содержит данные, которые будут переданы в представление автоматически.

Далее необходимо шаблона представления Добро пожаловать! В **отладки** последовательно выберите пункты **MvcMovie построения** для убедитесь, что при компиляции проекта.

[![BuildHelloWorld](adding-a-view/_static/image12.png)](adding-a-view/_static/image11.png)

Щелкните правой кнопкой мыши внутри `Welcome` метода и нажмите кнопку **добавить представление**. Вот **добавить представление** диалоговое окно выглядит следующим образом:

![](adding-a-view/_static/image13.png)

Нажмите кнопку **добавить**и добавьте следующий код под `<h2>` элемент в новом *Welcome.cshtml* файла. Вы создадите цикл, в котором отображается надпись «Hello» столько раз, сколько пользователя о том, что оно должно. Полный *Welcome.cshtml* файла показан ниже.

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml)]

Запустите приложение и откройте следующий URL-адрес:

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

Теперь данные получены из URL-адрес и автоматически передается контроллеру. Контроллер пакеты данных в `ViewBag` объекта и передает объект, в представление. Представление отображает данные как HTML для пользователя.

![](adding-a-view/_static/image14.png)

Этот подход характерен для модели, а не для базы данных. Итак, обобщим все полученные данные и попробуем создать базу данных фильмов.

> [!div class="step-by-step"]
> [Назад](adding-a-controller.md)
> [Вперед](adding-a-model.md)
