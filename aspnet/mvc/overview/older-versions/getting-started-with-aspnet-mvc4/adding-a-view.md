---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-view
title: Добавление представления | Документы Microsoft
author: Rick-Anderson
description: 'Примечание: Обновленную версию этого учебника доступен здесь, использующий ASP.NET MVC 5 и Visual Studio 2013. Это более безопасный, гораздо проще выполните и демонстрационных...'
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/28/2012
ms.topic: article
ms.assetid: dde851d7-882e-4d99-9b96-cf96daed81cc
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: 61a93c1430e9e39543c69b84901a50ceb710a5ae
ms.sourcegitcommit: 6784510cfb589308c3875ccb5113eb31031766b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2018
ms.locfileid: "30874522"
---
<a name="adding-a-view"></a>Добавление представления
====================
по [Рик Андерсон](https://github.com/Rick-Anderson)

> > [!NOTE]
> > Доступна обновленная версия этого учебника [здесь](../../getting-started/introduction/getting-started.md) , с использованием ASP.NET MVC 5 и Visual Studio 2013. Он является более безопасны, выполните гораздо проще и показаны дополнительные возможности.


В этом разделе вы собираетесь изменить `HelloWorldController` класса для использования представления файлы шаблонов для четко инкапсулировать процесс создания HTML ответов клиенту.

Вы создадите в файл шаблона представления с помощью [представлений Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) впервые появилась в ASP.NET MVC 3. Шаблоны, представление на основе Razor *.cshtml* расширение имени файла, а также предоставляют удобный способ создания выходных данных с помощью C# HTML. Razor сводит к минимуму число знаков и нажатий клавиш при написании шаблона представления, а также позволяет быстро, жидкости кодирования рабочего процесса.

На данный момент метод `Index` возвращает строку с сообщением, которое жестко задано в классе контроллера. Изменение `Index` метод для возврата `View` объекта, как показано в следующем коде:

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

`Index` Описанный выше метод использует Просмотр шаблона для создания HTML-ответа в браузер. Методы контроллера (также известный как [методы действий](http://rachelappel.com/asp.net-mvc-actionresults-explained)), такие как `Index` метод выше, обычно возвращают [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (или класс, производный от [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), не простых типов, таких как строка.

Добавьте в проект, Просмотр шаблона, который можно использовать с `Index` метод. Для этого щелкните правой кнопкой мыши внутри `Index` метода и нажмите кнопку **добавить представление**.

![](adding-a-view/_static/image1.png)

**Добавить представление** откроется диалоговое окно. Оставьте настройки по умолчанию способ их и нажмите кнопку **добавить** кнопки:

![](adding-a-view/_static/image2.png)

*MvcMovie\Views\HelloWorld* папки и *MvcMovie\Views\HelloWorld\Index.cshtml* создания файла. Вы увидите их в **обозревателе решений**:

![](adding-a-view/_static/image3.png)

Ниже *Index.cshtml* файл, который был создан:

![HelloWorldIndex](adding-a-view/_static/image4.png)

Добавьте следующий код HTML в `<h2>` тег.

[!code-html[Main](adding-a-view/samples/sample2.html)]

Полный *MvcMovie\Views\HelloWorld\Index.cshtml* файла показан ниже.

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml?highlight=7-8)]

При использовании Visual Studio 2012, в обозревателе решений щелкните правой кнопкой мыши *Index.cshtml* файла и выберите **просмотреть в инспекторе страниц**.

![PI](adding-a-view/_static/image5.png)

[Инспектор страниц учебника](../../views/using-page-inspector-in-aspnet-mvc.md) содержит дополнительные сведения об использовании этого нового инструмента.

Кроме того, запустите приложение и перейдите к `HelloWorld` контроллера (`http://localhost:xxxx/HelloWorld`). `Index` Метод в контроллер не представляют большую нагрузку; он просто выполнившего инструкцию `return View()`, что указывается, что метод следует использовать файл шаблона представления для отображения ответа в браузер. Так как не был явно указан имя файла шаблона представления для использования, ASP.NET MVC по умолчанию с помощью *Index.cshtml* просмотреть файл в *\Views\HelloWorld* папки. На рисунке ниже показана строка &quot;Hello из наших Просмотр шаблона!&quot; жестко запрограммированы в представлении.

![](adding-a-view/_static/image6.png)

Выглядит очень хорошо. Обратите внимание, что в строке заголовка браузера отображается &quot;индекса My ASP.NET A&quot; и больших ссылку верхней части страницы отображается надпись &quot;логотип вашей организации.&quot; Ниже &quot;ваша эмблема здесь.&quot; ссылку регистрации и журнал ссылки, а также следующие этой ссылки на домашнюю страницу, около и обратитесь в службу страниц. Изменим некоторые из них.

## <a name="changing-views-and-layout-pages"></a>Изменение представления и макета страницы

Во-первых, необходимо изменить &quot;ваша эмблема здесь.&quot; заголовка в верхней части страницы. Этот текст является общим для каждой страницы. Он фактически реализован только в одном месте в проекте, даже если оно появляется на каждой странице приложения. Последовательно выберите пункты */представления/Общие* папки в **обозревателе решений** и откройте  *\_Layout.cshtml* файла. Этот файл называется *страница макета* и является общей &quot;оболочки&quot; , использовать другие страницы.

![_LayoutCshtml](adding-a-view/_static/image7.png)

Шаблоны макета позволяют указать HTML-разметку контейнера узла в одном месте, а затем применять их на нескольких страницах на сайте. Найдите строку `@RenderBody()`. `RenderBody` — это заполнитель, в котором отображаются все создаваемые страницы для определенных представлений, &quot;упакованные&quot; на странице макета. Например, если вы выберите эту ссылку, о программе *Views\Home\About.cshtml* представление отображается внутри `RenderBody` метод.

Измените заголовок название узла шаблона макета &quot;ваша эмблема здесь&quot; для &quot;фильма MVC&quot;.

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

Замените содержимое элемента title следующую разметку:

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

Запустите приложение и обратите внимание, что теперь отображается надпись &quot;фильма MVC &quot;. Нажмите кнопку **о** см. ссылку и каким образом эта страница показывает &quot;фильма MVC&quot;, также. Нам удалось сделать всего один раз в шаблон макета и у всех страниц на сайте отражают новый заголовок.

![](adding-a-view/_static/image8.png)

Теперь изменим название индекс представления.

Откройте *MvcMovie\Views\HelloWorld\Index.cshtml*. Есть два места для внесения изменений: во-первых, текст, расположенный в заголовке обозревателя, а затем в заголовке получателя ( `<h2>` элемент). Сделайте их немного разными, чтобы видеть, какой именно фрагмент кода изменяет соответствующую часть приложения.

[!code-cshtml[Main](adding-a-view/samples/sample6.cshtml)]

Для указания заголовка HTML для отображения кода выше наборы `Title` свойство `ViewBag` объекта (который находится в *Index.cshtml* Просмотр шаблона). Если взглянуть на исходный код в шаблон макета, вы заметите, что шаблон использует это значение в `<title>` как часть `<head>` раздел HTML, которые мы внесли изменения в ранее. С помощью этого `ViewBag` подход, вы можете легко передавать другие параметры между представление шаблон и файл макета.

Запустите приложение и перейдите к `http://localhost:xx/HelloWorld`. Обратите внимание, что основной и дополнительный заголовки браузера изменились. (Если изменения не отображаются, возможно, вы просматриваете кэшированное содержимое. В этом случае нажмите в браузере клавиши CTRL+F5 для принудительной загрузки ответа сервера.) Заголовок обозревателя создается с `ViewBag.Title` задается *Index.cshtml* Просмотр шаблона и дополнительный &quot;-фильма приложения&quot; добавлены в файл макета.

Также Обратите внимание, как содержимое в *Index.cshtml* шаблон представления объединяется с  *\_Layout.cshtml* Просмотр шаблона и одного ответа HTML был отправлен в браузере. С помощью шаблонов макета можно легко вносить изменения, которые применяются ко всем страницам приложения.

![](adding-a-view/_static/image9.png)

Наши небольшую &quot;данные&quot; (в этом случае &quot;Hello из наших шаблон представления!&quot; сообщение) задается жестко, хотя. Приложение MVC имеет &quot;V&quot; (представление) и у вас есть &quot;C&quot; (контроллер), но не &quot;M&quot; (модель). еще. Вскоре, мы рассмотрим как создать базу данных и получения из него данных модели.

## <a name="passing-data-from-the-controller-to-the-view"></a>Передача данных из контроллера в представление

Прежде чем мы перейдите к базе данных и говорить о модели, менее, сначала поговорим о передаче информации из контроллера в представление. Классы контроллера вызываются в ответ на запрос входящего URL-адрес. Класс контроллера пишется код, который обрабатывает входящие браузер запрашивает, извлекает данные из базы данных и в конечном счете решает, какой тип ответа для отправки в браузер. Просмотр шаблонов может использоваться из контроллера, создавать и форматировать HTML-ответа в браузер.

Контроллеры несут ответственность за предоставление необходимых любые данные или объекты в порядке для шаблона представления для отображения ответа в браузер. Рекомендуется: **шаблона представления не стоит выполнять бизнес-логики или напрямую взаимодействовать с базой данных**. Вместо этого шаблона представления подойдут только с данными, передается контроллером. Поддержание это &quot;Разделение областей ответственности&quot; позволяет поддерживать код понятен, тестирования и более простого в сопровождении.

В настоящее время `Welcome` метода действия в `HelloWorldController` класса принимает `name` и `numTimes` параметра, а затем выходные данные значения непосредственно в браузере. Вместо контроллера отрисовки этот ответ в виде строки, изменим на контроллере, чтобы вместо этого используйте представление шаблона. Шаблон представления создаст динамический ответ, для получения которого необходимо передать соответствующие фрагменты данных из контроллера в представление. Это можно сделать, используя контроллер поместить динамических данных (параметры), который необходим Просмотр шаблона `ViewBag` , Просмотр шаблона можно получить доступ к объекту.

Вернитесь к *HelloWorldController.cs* и измените `Welcome` метод, чтобы добавить `Message` и `NumTimes` значение `ViewBag` объекта. `ViewBag` является динамическим объектом, это означает, что любые необходимые можно поместить в него; `ViewBag` объект не имеет определенных свойств, пока не будет помещен внутри него. [Система привязки модели ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) автоматически сопоставляет именованные параметры (`name` и `numTimes`) из строки запроса в адресной строке параметров в методе. Полный файл *HelloWorldController.cs* выглядит следующим образом:

[!code-csharp[Main](adding-a-view/samples/sample7.cs)]

Теперь `ViewBag` объект содержит данные, которые будут переданы в представление автоматически.

Далее необходимо шаблона представления Добро пожаловать! В **построения** последовательно выберите пункты **MvcMovie построения** для убедитесь, что при компиляции проекта.

Щелкните правой кнопкой мыши внутри `Welcome` метода и нажмите кнопку **добавить представление**.

![](adding-a-view/_static/image10.png)

Вот **добавить представление** диалоговое окно выглядит следующим образом:

![](adding-a-view/_static/image11.png)

Нажмите кнопку **добавить**и добавьте следующий код под `<h2>` элемент в новом *Welcome.cshtml* файла. Вы создадите цикл, который говорит &quot;Hello&quot; столько раз, сколько пользователь говорит, оно должно. Полный *Welcome.cshtml* файла показан ниже.

[!code-cshtml[Main](adding-a-view/samples/sample8.cshtml)]

Запустите приложение и откройте следующий URL-адрес:

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

Теперь данные получены из URL-адрес и передаваемый контроллере, используя [связывателя модели](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx). Контроллер пакеты данных в `ViewBag` объекта и передает объект, в представление. Представление отображает данные как HTML для пользователя.

![](adding-a-view/_static/image12.png)

В примере выше, мы использовали `ViewBag` для передачи данных из контроллера в представление. Последнее в учебнике, мы будем использовать модель представлений для передачи данных из контроллера в представление. Представление модели способ передачи данных предпочтительнее обычно гораздо подход контейнера представления. См. в записи блога [динамические V строго типизированного представления](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) для получения дополнительной информации.

Контейнер, который был тип из &quot;M&quot; для модели, но не тип базы данных. Итак, обобщим все полученные данные и попробуем создать базу данных фильмов.

> [!div class="step-by-step"]
> [Назад](adding-a-controller.md)
> [Вперед](adding-a-model.md)
