---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
title: Основные различия между IIS и ASP.NET Development Server (C#) | Документы Microsoft
author: rick-anderson
description: При тестировании приложения ASP.NET локально, скорее всего, вы используете веб-сервера разработки ASP.NET. Рабочий веб-сайт то, скорее всего, pow...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2009
ms.topic: article
ms.assetid: 13a5a423-9235-4dde-b408-2fd10f791d63
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
msc.type: authoredcontent
ms.openlocfilehash: e343a6eac39d7959718cb791012cfa3b931ae33f
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="core-differences-between-iis-and-the-aspnet-development-server-c"></a>Основные различия между IIS и ASP.NET Development Server (C#)
====================
по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Загрузить код](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) или [скачать PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)

> При тестировании приложения ASP.NET локально, скорее всего, вы используете веб-сервера разработки ASP.NET. Рабочий веб-сайт то, скорее всего, питание IIS. Существуют некоторые различия между порядок этих веб-серверы обработки запросов, и эти различия может иметь важные последствия. Этот учебник рассматриваются более germane различия.


## <a name="introduction"></a>Вступление

Каждый раз, когда пользователь открывает приложение ASP.NET свой браузер отправляет запрос на веб-сайт. Этот запрос передается в сетевые, который координирует среды выполнения ASP.NET для создания и получения содержимого для запрашиваемого ресурса. [**я** иться **я** информация служб **S** служб (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) — это набор служб, которые предоставляют общие функции Интернет клиентов для Серверы Windows. IIS является наиболее часто используемых веб-сервера для приложений ASP.NET в производственных средах; Это наиболее вероятно сетевые, используемого поставщиком веб узла для работы с вашим приложением ASP.NET. Службы IIS также может использоваться как сетевые в среде разработки, несмотря на то, что это приводит к установке служб IIS и настроить его должным образом.


ASP.NET Development Server может использоваться альтернативных web server для среды разработки; Он поставляется с и интегрированные в Visual Studio. Если веб-приложения был настроен на использование IIS, ASP.NET Development Server автоматически запущен и использовать в качестве веб-сервер при первом посещении веб-страницы в Visual Studio. Демонстрация веб-приложений, мы создали обратно в [ *определения файлов, которые должны быть развернуты* ](determining-what-files-need-to-be-deployed-cs.md) учебника были обоих приложений системы веб-файла, которые не были настроены на использование IIS. Таким образом при посещении либо этих веб-сайтов, из среды Visual Studio используется сервер разработки ASP.NET.

В идеальном мире будет совпадать разработки и рабочих средах. Тем не менее как уже говорилось в предыдущем учебнике не нередко сред определить различные настройки конфигурации. С помощью по другой веб-сервера в средах добавляет другой переменной, которое необходимо принимать во внимание при развертывании приложения. В этом учебнике приведены основные различия между IIS и ASP.NET Development Server. Из-за этих различий существуют сценарии, где возникло исключение код, выполняемый безукоризненно в среде разработки, или ведет себя по-разному при выполнении в рабочей среде.

## <a name="security-context-differences"></a>Различия в контексте безопасности

Каждый раз, когда сетевые обрабатывает входящий запрос, он связывает этот запрос с контекстом безопасности. Эти сведения о контексте безопасности используется операционной системой, чтобы определить, какие действия допустимы в запросе. Например страница ASP.NET может включать код, который записывает некоторые сообщения в файл на диске. Данная страница ASP.NET выполняются без ошибки, контекст безопасности должен иметь соответствующий файл прав системного уровня, а именно предоставлены разрешения на запись этого файла.

ASP.NET Development Server связывает входящие запросы в контексте безопасности пользователя, выполнившего вход. При входе на компьютер с правами администратора на страницах ASP.NET, обслуживаемых ASP.NET Development Server имеют те же права доступа с правами администратора. Тем не менее ASP.NET запросов, обрабатываемых IIS связаны с учетной записью конкретного компьютера. По умолчанию учетная запись машины сетевой службы используется IIS версии 6 и 7, несмотря на то, что поставщик веб узла может настроить уникальную учетную запись для каждого клиента. Более того поставщик узла web скорее всего предоставил ограниченных разрешений учетной записи компьютера. Конечным результатом является, возможно, требуется веб-страниц, которые выполняются без ошибки в среде разработки, но вызывают исключения, связанных с авторизацией при размещении в рабочей среде.

Для отображения ошибки такого типа в действие рецензий веб-сайта, создающий файл на диске, в которой хранятся самые последние дату и время, кто-то создали страницу просмотра *обучение самостоятельно ASP.NET 3.5 в течение 24 часов* просмотрите. Для выполнения этой процедуры откройте `~/Tech/TYASP35.aspx` и добавьте следующий код в `Page_Load` обработчик событий:

[!code-csharp[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample1.cs)]

> [!NOTE]
> [ `File.WriteAllText` Метод](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) создает новый файл, если он не существует и записывает указанным содержимым. Если файл уже существует, перезаписывается существующего содержимого.


Затем посетите *обучение самостоятельно ASP.NET 3.5 в течение 24 часов* страница «Просмотр книги» в среде разработки с использованием сервера разработки ASP.NET. При условии, что вы вошли в систему под учетной записью, имеет достаточные разрешения для создания и изменения в текстовый файл в Интернете корневого каталога приложения рецензия на книгу отображается теми же самыми, но каждый раз, когда страница посетил даты и времени пользователя  IP-адрес хранится в `LastTYASP35Access.txt` файла. Укажите в браузере в этот файл; Вы увидите сообщение, похожее на показанное на рис. 1.


[![Текстовый файл содержит дату и время последнего была выбрана проверка книги](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)

**Рис. 1**: текстовый файл содержит последнюю дату и время, была выбрана рецензия на книгу ([Просмотр полноразмерное изображение](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))


Развертывание веб-приложения в рабочей среде, а затем перейдите размещаемый *обучение самостоятельно ASP.NET 3.5 в течение 24 часов* страница «Просмотр» для книги. На этом этапе либо появится страница «Просмотр» книги как обычный или сообщение об ошибке, которое показано на рисунке 2. Некоторые веб-узла поставщиками предоставить разрешения на запись для анонимного ASP.NET учетную запись компьютера, в котором регистр страницы будет работать без ошибок. Если, однако поставщик узла web запрещает доступ на запись для учетной записи анонимного то [ `UnauthorizedAccessException` исключение](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) вызывается, когда `TYASP35.aspx` страница пытается записать текущей даты и времени в `LastTYASP35Access.txt` файла.


[![Учетной записи компьютера по умолчанию, используемый службой IIS не имеет разрешения на запись в файловой системе](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)

**На рисунке 2**: по умолчанию машины учетная запись используется IIS Does не имеют разрешения на запись в файловую систему ([Просмотр полноразмерное изображение](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))


Хорошие новости является то, что большинство поставщиков веб-узла какая-либо разрешения средство, которое позволяет указать разрешения файловой системы веб-сайта. Предоставить анонимный доступ записи для учетной записи ASP.NET в корневой каталог и затем вернитесь на страницу предварительного просмотра книги. (При необходимости обратитесь к web узла поставщику услуг для получения помощи по предоставлению разрешения на запись для учетной записи ASP.NET по умолчанию.) Это время, следует загрузить страницу без ошибок и `LastTYASP35Access.txt` файл должен быть создан успешно.

Take немедленно здесь заключается в ASP.NET Development Server работает в контексте безопасности, отличном от IIS, возможно, что страницы ASP.NET, чтение и запись в файловой системе, считывается или записи в журнал событий Windows, или чтение и запись в Windows  реестра будет работать должным образом на разработку, но создают исключения в рабочей среде. При построении веб-приложение, которое будут развернуты на веб-хостинга среды, не чтение и запись в журнал событий или в реестре Windows. Принять во внимание все страницы ASP.NET, чтение или запись в файловой системе, которые может потребоваться предоставить чтения и записи в соответствующие папки в рабочей среде.

## <a name="differences-on-serving-static-content"></a>Различия для обслуживания статического содержимого

Другое основное различие между IIS и ASP.NET Development Server является, как они обрабатывают запросы статического содержимого. Каждый запрос, который поступает на сервер разработки ASP.NET, для страницы ASP.NET, изображение или файл JavaScript обрабатывается средой выполнения ASP.NET. По умолчанию IIS только вызывает среды выполнения ASP.NET при поступлении запроса для ресурса ASP.NET, такие как веб-страницу ASP.NET, веб-службы и т. д. Запросы для статического содержимого - изображения, файлов CSS, файлы JavaScript, PDF-файлы, ZIP-файлы и т. п - извлекаются путем IIS без участия среды выполнения ASP.NET. (Его можно выполнить настройку IIS для работы со средой выполнения ASP.NET при выполнении статического содержимого; в этом учебнике для получения дополнительной информации см. в разделе «Выполнение проверки подлинности с помощью форм и URL-адрес проверки подлинности для статических файлов с IIS 7»).

Среда выполнения ASP.NET выполняет некоторые действия для создания запрошенного содержимого, включая (определение запрашивающей стороне) проверки подлинности и авторизации (определение, если у запрашивающего пользователя имеется разрешение на просмотр запрошенного содержимого). Популярные форма проверки подлинности *проверки подлинности на основе форм*, в которой для идентификации пользователя, введя свои учетные данные — как правило, имя пользователя и пароль — в текстовых полях на веб-странице. После проверки учетных данных, сохраняет веб-сайт *билет проверки подлинности* файла cookie в браузере пользователя, который отправляется веб-сайта с каждого последующего запроса и используется для проверки подлинности пользователя. Кроме того, существует возможность указания *Авторизация URL-адреса* правила, определяющие, какие пользователи могут или не может получить доступ к определенной папке. Многие веб-сайты ASP.NET использовать форм проверки подлинности и авторизации URL-адрес для поддержки учетных записей пользователей и для определения частей узла, которые доступны только прошедшим проверку пользователям или пользователям, принадлежащим к определенной ролью.

> [!NOTE]
> Для тщательного изучения ASP. NET проверку подлинности на основе форм, авторизация URL-адреса и прочего связанные с учетной записью пользователя Убедитесь, что извлечь my [учебники безопасности веб-сайта](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).


Рассмотрим веб-сайт, который поддерживает учетные записи пользователей с помощью авторизации на основе форм и имеет папку, используя авторизацию URL-адрес разрешено только прошедшим проверку пользователям. Предположим, что эта папка содержит страниц ASP.NET и PDF-файлы и что цель состоит в том, что только прошедшие проверку пользователи могут просматривать эти PDF-файлы.

Что произойдет, если посетитель пытается просмотреть один из этих файлов PDF, введя URL-адрес непосредственно в адресной строке браузера его? Чтобы узнать, давайте создайте новую папку в узле рецензий, добавить некоторые PDF-файлы и настроить сайт на использование авторизации URL-адреса, чтобы запретить анонимным пользователям посещения этой папки. При загрузке демонстрационное приложение вы увидите создания папку с именем `PrivateDocs` и добавляется в PDF-ФАЙЛ из моей [учебники безопасности веб-сайта](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (как подходящим!). `PrivateDocs` Папка также содержит `Web.config` файл, задающий правила авторизации URL-адрес, чтобы запретить анонимных пользователей:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample2.xml)]

Наконец, я настроил веб-приложение для использования проверки подлинности на основе форм, обновив `Web.config` файл в корневом каталоге замены:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample3.xml)]

На:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample4.xml)]

С помощью сервера разработки ASP.NET, посетите сайт и введите URL-адрес прямой в один PDF-файлы в адресной строке браузера. Если вы загрузили веб-сайт, связанный с данным учебником, URL-адрес должен выглядеть примерно так: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`

Этот URL-адрес в адресную строку заставляет браузер для отправки запроса на сервере разработки ASP.NET для файла. ASP.NET Development Server передает в среду выполнения ASP.NET для обработки запроса. Поскольку мы еще не выполнил вход, а `Web.config` в `PrivateDocs` папка настроена для анонимного доступа, среда выполнения ASP.NET автоматически перенаправляет нам на страницу входа `Login.aspx` (см. рис. 3). Когда перенаправления пользователя на страницу входа, ASP.NET включает `ReturnUrl` параметр строки запроса, который показывает страницу, пользователь при попытке просмотра. После успешного входа пользователя могут быть возвращены на эту страницу.


[![У пользователей, автоматически перенаправляется на страницу входа](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)

**Рис. 3**: У пользователей, автоматически перенаправляется на страницу входа ([Просмотр полноразмерное изображение](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))


Теперь давайте посмотрим, это поведение на производство. Развертывание приложения и введите URL-адрес прямой в один PDF-файлов в `PrivateDocs` папки в рабочей среде. По этой причине, появляется браузер, чтобы отправить запрос IIS для файла. Поскольку запроса статического файла IIS извлекает и возвращает файл без вызова среды выполнения ASP.NET. В результате был проверка авторизации URL-адреса, не выполнено; содержимое предположительно закрытый PDF доступны всем, кто знает прямой URL-адрес к файлу.


[![Анонимные пользователи можно загрузить закрытого PDF-файлы, введя прямой URL-адрес к файлу](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)

**Рис. 4**: анонимных пользователей можно загрузить закрытый PDF файлы, введя прямой URL-адрес к файлу ([Просмотр полноразмерное изображение](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))


### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a>Выполнение проверки подлинности на основе форм и URL-адрес на статические файлы с IIS 7

Существует несколько методов, которые можно использовать для защиты от несанкционированного доступа из статического содержимого. Появился в IIS 7 *интегрированного конвейера*, который выходит замуж рабочий процесс служб IIS с рабочего процесса среды выполнения ASP.NET. По сути можно настроить IIS для вызова среды выполнения ASP.NET проверки подлинности и авторизации модули всех входящих запросов (включая статического содержимого, такого как PDF-файлы). Обратитесь к поставщику веб узла, чтобы узнать, как настроить веб-сайт для использования интегрированного конвейера.

После настройки IIS для использования интегрированного конвейера добавьте следующую разметку, чтобы `Web.config` файл в корневом каталоге:

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample5.xml)]

Эта разметка указывает, что службы IIS 7 для использования на основе ASP.NET модули проверки подлинности и авторизации. Повторное развертывание приложения и повторно откройте PDF-файл. Это время, когда IIS обрабатывает запрос на его предоставляет логику проверки подлинности и авторизации среды выполнения ASP.NET возможность проверить запрос. Так как только прошедшие проверку подлинности пользователи авторизованы для просмотра содержимого в `PrivateDocs` папку анонимный посетителя автоматически перенаправляется на страницу входа (см. обратно на рис. 3).

> [!NOTE]
> Если поставщик узла web по-прежнему использует IIS 6 нельзя использовать функцию интегрированного конвейера. Одно решение — поместить частных документов в папке, которая запрещает доступ по протоколу HTTP (например, `App_Data`), а затем создать страницу, чтобы обслуживать эти документы. Эта страница может быть вызван `GetPDF.aspx`и передается имя PDF через параметр строки запроса. `GetPDF.aspx` Страницы сначала нужно проверить, что пользователь имеет разрешение на просмотр файла и, если да, использовать [ `Response.WriteFile(filePath)` ](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) метод для отправки содержимого PDF-файл клиента, отправившего запрос. Этот способ также будет работать для IIS 7, если вы не хотите включить интегрированного конвейера.


## <a name="summary"></a>Сводка

Веб-приложений в производственной среде размещаются при помощи по Microsoft IIS для веб-сервера. В среде разработки Однако приложение может размещаться с помощью служб IIS или ASP.NET Development Server. В идеальном случае же сетевые следует использовать в обеих средах, так как с помощью различных программных добавляет другой переменной в наборе. Тем не менее легкость использования ASP.NET Development Server делает ее привлекательным вариантом в среде разработки. Хорошие новости — существуют некоторые основные различия между службами IIS и ASP.NET Development Server, что если принять во внимание эти различия можно предпринять шаги помогут вам, что приложение работает и работает так же, каким образом независимо от того, Среда.

Программирование довольны!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:

- [Интеграция ASP.NET с IIS 7.0](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- [С помощью проверки подлинности ASP.NET форумы со всеми типами содержимого на сервере IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (видео)
- [Веб-серверы в Visual Web Developer](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> [Назад](common-configuration-differences-between-development-and-production-cs.md)
> [Вперед](deploying-a-database-cs.md)
