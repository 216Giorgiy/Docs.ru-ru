---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/determining-what-files-need-to-be-deployed-cs
title: Определение файлов, которые должны быть развернуты (C#) | Документы Microsoft
author: rick-anderson
description: Файлы должны выполнять развертывание из среды разработки в рабочую среду отчасти зависит ли нам было создано приложение ASP.NET...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2009
ms.topic: article
ms.assetid: f8d78a88-cc91-40d8-bce3-3d7954f6033b
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/determining-what-files-need-to-be-deployed-cs
msc.type: authoredcontent
ms.openlocfilehash: ff5f1d7d156efa12d97382db56211a07c43178fd
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888673"
---
<a name="determining-what-files-need-to-be-deployed-c"></a>Определение файлов, которые должны быть развернуты (C#)
====================
по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Загрузить код](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_02_CS.zip) или [скачать PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial02_FilesToDeploy_cs.pdf)

> Файлы должны выполнять развертывание из среды разработки в рабочую среду отчасти зависит ли приложение ASP.NET создан с помощью модели веб-узла или модели веб-приложения. Дополнительные сведения об этих двух проектов моделей и влияние развертывания модели проекта.


## <a name="introduction"></a>Вступление

Развертывание веб-приложения ASP.NET включает в себя копирование файлов, относящихся к ASP.NET из среды разработки в рабочую среду. Файлы, связанные с ASP.NET включают разметки веб-страницы ASP.NET и файлы поддержки кода и на стороне клиента и сервера. Файлы поддержки на стороне клиента, эти файлы ссылается на веб-страницы и отправить непосредственно в браузер - изображений, файлов CSS и файлы JavaScript, например. Файлы поддержки на стороне сервера включают те, которые используются для обработки запроса на стороне сервера. Это включает в себя файлы конфигурации, веб-службы, файлы классов, типизированные наборы данных и LINQ к файлам SQL, в частности.

Как правило все файлы поддержку на стороне клиента должны копироваться из среды разработки в рабочую среду, но скопирован какие файлы поддержку на стороне сервера зависит от того, ли явно компиляции серверный код в сборку ( `.dll` файла) или при возникновении этих сборок создан. Этот учебник выделены, что файлы должны быть развернуты при явно компиляция кода в сборку сравнению с этого шага компиляции происходит автоматически.

## <a name="explicit-compilation-versus-automatic-compilation"></a>Явную компиляцию и автоматическую компиляцию

Веб-страниц ASP.NET можно разделить декларативной разметки и исходный код. Включает в себя часть декларативная разметка HTML, веб-элементов управления и синтаксис привязки данных; часть кода содержит обработчики событий, записанных в код Visual Basic или C#. Фрагменты разметку и код обычно разделяются на различные файлы: `WebPage.aspx` содержит декларативная разметка при `WebPage.aspx.cs` содержит код.

Рассмотрим страницы ASP.NET с именем Clock.aspx, который содержит элемент управления Label, текст, свойство которого имеет значение текущей датой и временем, при загрузке страницы. Часть декларативной разметкой (в `Clock.aspx`) будет содержать разметку элемента управления веб-метки -`<asp:Label runat="server" id="TimeLabel" />` — при часть кода (в `Clock.aspx.cs`) будет иметь `Page_Load` обработчика событий следующим кодом:

[!code-csharp[Main](determining-what-files-need-to-be-deployed-cs/samples/sample1.cs)]

В порядке для обработчика ASP.NET для обслуживания запроса для этой страницы в коде страницы ( `WebPage.aspx.cs` файл) сначала необходимо скомпилировать. Этой компиляции может произойти явным образом или автоматически.

Если компиляция происходит явно, то все приложение исходный код компилируется в одну или несколько сборок (`.dll` файлы) найдены в тестируемом приложении `Bin` каталога. Если компиляция происходит автоматически, а затем полученный автоматически сгенерированный сборка является, по умолчанию расположены в `Temporary ASP.NET` папке, которую можно найти в `%WINDOWS%\Microsoft.NET\Framework\`  *&lt;версии&gt;*, Несмотря на то, что это расположение настраивается через [ `<compilation>` элемент](https://msdn.microsoft.com/library/s10awwz0.aspx) в `Web.config`. Явную компиляцию необходимо предпринимать какие-либо действия для приложения ASP.NET код компилируется в сборку, и этот шаг выполняется перед их развертыванием. С автоматическую компиляцию процесс компиляции происходит на веб-сервере, при первом доступе к ресурсу.

Независимо от того, какая модель компиляции используется, фрагмент разметки для всех страниц ASP.NET ( `WebPage.aspx` файлы) должны быть скопированы в рабочую среду. С явную компиляцию необходимо скопировать сборок в `Bin` папку, но не нужно копировать копирование фрагментов кода на страницах ASP.NET ( `WebPage.aspx.cs` файлов). С автоматическую компиляцию необходимо скопировать файлы часть кода, чтобы код присутствует и может быть скомпилирован автоматически при посещении страницы. Включает разметки часть каждой веб-страницы ASP.NET `@Page` директив с атрибутами, которые указывают, скомпилирован ли связанный код страницы уже явно или необходимости его автоматически скомпилирован. В результате в рабочей среде может без проблем работать с любой модели компиляции, и необходимо применять какие-либо параметры специальной настройки использован компиляции явную или автоматически.

В таблице 1 перечислены различные файлы для развертывания при использовании явную компиляцию и автоматическую компиляцию. Обратите внимание, независимо от того, компиляция модели использования вы всегда следует развертывать сборки в `Bin` папке, если эта папка существует. `Bin` Папка содержит сборки, относящиеся к веб-приложения, включающих скомпилированных исходного кода при использовании модели явную компиляцию. `Bin` Каталог содержит сборки из других проектов и открытым исходным кодом или сторонние сборки, возможно, используется, и они должны быть на рабочем сервере. Таким образом, как правило, скопируйте `Bin` папки до рабочей при развертывании. (Если используется модель автоматическую компиляцию и не используются все внешние сборки, то вы не будете иметь `Bin` каталог — это нормально,!)

| **Модели компиляции** | **Развертывание файла разметки часть?** | **Развертывание файла исходного кода?** | **Развертывание сборок в `Bin` каталога?** |
| --- | --- | --- | --- |
| Явную компиляцию | Да | Нет | Да |
| Автоматическая компиляция | Да | Да | Да (если он существует) |

**Таблица 1:** развертывания файлов в зависимости от модели компиляции используется.

## <a name="taking-a-trip-down-memory-lane"></a>Создание маршрута вниз Lane памяти

Какие компиляции подход используется, отчасти зависит, управление приложения ASP.NET в Visual Studio. С момента. NET его появления в 2000 году, были четыре различных версий Visual Studio - Visual Studio .NET 2002, Visual Studio .NET 2003, Visual Studio 2005 и Visual Studio 2008. Visual Studio .NET 2002 и 2003 управляемых приложений ASP.NET с помощью *модель проекта веб-приложения*. Перечислены ключевые функции модели проекта веб-приложения.

- Файлы, что план проекта, определены в одном файле проекта. Все файлы, не определенные в файле проекта не считаются частью веб-приложения в Visual Studio.
- Использует явную компиляцию. Построение проекта компилирует файлы кода в проекте в одну сборку, которая размещается в `Bin` папки.

Когда корпорация Майкрософт выпустила Visual Studio 2005 они удалены поддержку модели проекта веб-приложения и заменены модели проекта веб-сайта. Модель проекта веб-сайта отличить сам из модели проекта веб-приложения одним из следующих способов:

- Вместо того чтобы использовать один файл проекта, указывающий, как файлы проекта, вместо него используется в файловой системе. Иными словами все файлы в папке веб-приложения (или вложенные папки), считаются частью проекта.
- Построение проекта в Visual Studio не создает сборку в `Bin` каталога. Вместо этого построения проекта веб-сайта выводятся ошибки времени компиляции.
- Поддержка автоматическую компиляцию. Несмотря на то, что код может быть предварительно скомпилированного (явную компиляцию) проектов веб-сайтов обычно развертываются путем копирования разметку и исходный код в рабочую среду.

Microsoft восстановлен модели проекта веб-приложения после его выпуска Visual Studio 2005 с пакетом обновления 1. Однако Visual Web Developer продолжает поддерживают только модель проекта веб-сайта. Хорошо то, что это ограничение было удалено со Visual Web Developer 2008 Service Pack 1. Сегодня можно создавать приложения ASP.NET в Visual Studio (и Visual Web Developer) с помощью модели проекта веб-приложения или модели проекта веб-сайта. У каждой модели есть свои преимущества и недостатки. Ссылаться на [введение в проекты веб-приложений: сравнение проектов веб-сайтов и проектов веб-приложений](https://msdn.microsoft.com/library/aa730880.aspx#wapp_topic5) для сравнения двух моделей и решить, какая модель проекта лучше всего подходит для конкретной ситуации.

## <a name="exploring-the-sample-web-application"></a>Просмотр примера веб-приложения

В этом учебнике загружаемый файл содержит вызывается рецензий приложения ASP.NET. Кто-то может создать веб-сайт хобби имитирует веб-сайта для совместного использования свои книги просматривает с Интернет-сообщество. Этот веб-приложения ASP.NET очень проста и состоит из следующих ресурсов:

- `Web.config`, в файле конфигурации.
- Главная страница (`Site.master`).
- Семь другие страницы ASP.NET: 

    - ~`/Default.aspx`-домашнюю страницу сайта.
    - ~`/About.aspx` -на страницу «О Site».
    - ~`/Fiction/Default.aspx` -страницы со списком фантастики книг, которые проверены. 

        - ~`/Fiction/Blaze.aspx` -Обзор novel Ричард Bachman *Blaze*.
    - ~/`Tech/Default.aspx` -страницы со списком книг технологии, которые проверены. 

        - ~/`Tech/CYOW.aspx`-ознакомиться с *Создание веб-узла*.
        - ~/`Tech/TYASP35.aspx` -ознакомиться с *обучение самостоятельно ASP.NET 3.5 в течение 24 часов*.
- Три разных файла CSS в папке Styles.
- Четыре изображения - на базе технологий ASP.NET логотип и изображения покрытий три проверенные книг — всех файлов в `Images` папки.
- Объект `Web.sitemap` файл, который определяет карты веб-узла и используется для отображения меню в `Default.aspx` страниц в корневом каталоге и `Fiction` и `Tech` папки.
- Файл класса с именем `BasePage.cs` , определяющий базовый `Page` класса. Этот класс расширяет функциональность `Page` класса автоматически присваивая `Title` свойство исходя из позиции страницы в карте узла. По сути, любой класс фонового кода ASP.NET, расширяющий `BasePage` (вместо `System.Web.UI.Page`) будет присвоено значение в зависимости от его положение в карте узла название. Например при просмотре ~ /`Tech/CYOW.aspx` страниц, заголовок имеет значение «Домашняя страница: технологии: Создание веб-узла».

Снимок экрана рецензий веб-сайта, при просмотре через браузер представлена на рисунке 1. Здесь вы увидите страницу ~ /`Tech/TYASP35.aspx`, который просматривает книги *обучение самостоятельно ASP.NET 3.5 в течение 24 часов*. Навигации, охватывающий верхней части страницы и меню в левом столбце основаны на структуре карты сайта, определенные в `Web.sitemap`. В правом верхнем углу изображения является одним из обложки книги, образы находятся в `Images` папки. Внешний вид и поведение веб-сайта определяются через каскадных таблиц прописью по CSS-файл в папке Styles пока перекрывающих макет страницы определен на главной странице правила стилей `Site.master`.


[![Веб-сайта просматривает книги предлагает проверками на набор заголовков](determining-what-files-need-to-be-deployed-cs/_static/image2.png)](determining-what-files-need-to-be-deployed-cs/_static/image1.png)

**Рисунок 1.** веб-сайта просматривает книги предлагает проверками на ассортимент заголовков ([Просмотр полноразмерное изображение](determining-what-files-need-to-be-deployed-cs/_static/image3.png))


Это приложение не использует базы данных. все проверки, реализован как отдельный веб-страницы в приложении. Этот учебник (и далее несколько учебников) содержат пошаговые инструкции по развертыванию веб-приложения, у которого нет базы данных. Тем не менее в будущем учебника мы поможет повысить эффективность это приложение для хранения обзоры, комментарии и другие сведения в базе данных и ознакомлению с тем, какие действия необходимо выполнить для развертывания управляемых данными веб-приложения правильно.

> [!NOTE]
> Эти учебники сосредоточиться на размещение приложений ASP.NET с помощью узла поставщик услуг и не изучить вспомогательные разделы как ASP. NET система карты сайта или с помощью базового `Page` класса. Дополнительные сведения об этих технологиях и Дополнительные сведения о других подразделов всего учебника см. в разделе Дополнительные материалы в конце каждого учебника.


Этот учебник загрузки имеет две копии веб-приложения, реализованы с другим типом проекта Visual Studio: BookReviewsWAP, проект веб-приложения и BookReviewsWSP проект веб-сайта. Оба проекта были созданы с помощью Visual Web Developer 2008 SP1 и использовать ASP.NET 3.5 SP1. Чтобы работать с эти проекты сначала распаковки содержимого на рабочий стол. Чтобы открыть проект веб-приложения (BookReviewsWAP), перейдите в папку BookReviewsWAP и дважды щелкните файл решения `BookReviewsWAP.sln`. Чтобы открыть проект веб-сайта (BookReviewsWSP), запустите Visual Studio и затем из меню «Файл» выберите параметр открыть веб-сайт, перейдите в `BookReviewsWSP` папки на рабочем столе и нажмите кнопку ОК.


Два остальных подразделах этого учебника внимание на то, какие файлы необходимо скопировать в рабочей среде при развертывании приложения. Два следующих учебников - *[развертывание вашего сайта с помощью FTP](deploying-your-site-using-an-ftp-client-cs.md)* и *[развертыванию ваш сайт с помощью Visual Studio](deploying-your-site-using-visual-studio-cs.md)* -демонстрируют различные способы Скопируйте эти файлы на поставщике узла.

## <a name="determining-the-files-to-deploy-for-the-web-application-project"></a>Определение файлов для развертывания для проекта веб-приложения

Модель проекта веб-приложения использует явную компиляцию - компиляции исходного кода проекта в одну сборку каждый раз, когда производится построение приложения. Этой компиляции включает файлы кода на страницах ASP.NET (~ /`Default.aspx.cs`, ~ /`About.aspx.cs`и так далее), а также `BasePage.cs` класса. Результирующую сборку называется BookReviewsWAP.dll и находится в приложении `Bin` каталога.

На рисунке 2 показаны файлы, входящие в состав проекта книги проверки веб-приложения.


[![В обозревателе решений список файлов, которые составляют проект веб-приложения](determining-what-files-need-to-be-deployed-cs/_static/image5.png)](determining-what-files-need-to-be-deployed-cs/_static/image4.png)

**На рисунке 2**: обозревателе список файлов, которые составляют проект веб-приложения


Для развертывания приложения ASP.NET, разработанные с помощью запуска модели проекта веб-приложения при построении приложения таким образом, чтобы явным образом компиляцию последних исходного кода в сборку. Затем скопируйте следующие файлы в рабочей среде:

- Файлы, содержащие декларативная разметка для каждого ASP.NET страницы, например, ~ /`Default.aspx`, ~ /`About.aspx`, и т. д. Кроме того копирование копии декларативная разметка для любой главные страницы и пользовательские элементы управления.
- Сборки (`.dll` файлы) в `Bin` папки. Необходимо скопировать файлы базы данных программы (`.pdb`) или XML-файлы, можно найти в `Bin` каталога.

Не нужно скопировать файлы исходного кода на страницах ASP.NET в рабочей среде, а также обязательно скопируйте `BasePage.cs` файл класса.

> [!NOTE]
> Как показано на рисунке 2, `BasePage` класс реализуется как файл класса в проекте, помещаются в папку с именем `HelperClasses`. При компиляции проекта кода в `BasePage.cs` файл компилируется вместе с классами кода на страницах ASP.NET в одну сборку `BookReviewsWAP.dll.` ASP.NET имеет специальную папку с именем `App_Code` , предназначен для хранения файлов классов для веб-сайта Проекты сайтов. Код в `App_Code` папку автоматически компилируется и таким образом, не должны использоваться с проектами веб-приложений. Вместо этого следует поместить файлы класс приложения в обычную папку с именем `HelperClasses`, или `Classes`, или что-нибудь подобное. Кроме того можно поместить файлы класса в отдельном проекте библиотеки классов.


Помимо копирования файлов разметки, связанные с ASP.NET и сборки в `Bin` папку, также необходимо скопировать необходимые файлы поддержки клиентских - образы и файлы CSS - и другие файлы поддержки на стороне сервера, `Web.config` и `Web.sitemap`. Эти клиента и стороне сервера поддерживать необходимость файлы копируются в рабочую среду, независимо от того, используется ли автоматически или явной компиляции.

## <a name="determining-the-files-to-deploy-for-the-web-site-project-files"></a>Определение файлов для развертывания файлов проекта веб-сайта

Модель проекта веб-сайта поддерживает автоматическую компиляцию, не работает при использовании модели проекта веб-приложения. С явную компиляцию необходимо скомпилировать исходный код вашего проекта в сборку и скопируйте эту сборку в рабочей среде. С другой стороны с автоматическую компиляцию просто скопируйте исходный код в рабочей среде, и она компилируется средой выполнения по требованию, при необходимости.

Меню «Построение», в Visual Studio в проекты веб-приложений и проектами веб-сайтов. Построение проектов веб-приложений компилирует исходный код проекта в одну сборку, расположенный в `Bin` каталог; построение проекта веб-сайта проверяет наличие ошибок во время компиляции, но не создает все сборки. Для развертывания приложения ASP.NET, разработанных с использованием всех проекта веб-сайта модели, необходимо выполнить, копией соответствующих файлов в рабочую среду, но я рекомендую для первого построения проекта, чтобы убедиться, что отсутствуют ошибки компиляции.

Рис. 3 показаны файлы, входящие в состав проекта веб-сайта проверки книги.


 [![В обозревателе решений список файлов, которые составляют проект веб-сайта](determining-what-files-need-to-be-deployed-cs/_static/image7.png)](determining-what-files-need-to-be-deployed-cs/_static/image6.png) 

**Рис. 3**: обозревателе список файлов, которые составляют проект веб-сайта


Развертывание проекта веб-сайта включает копирование все файлы, связанные с ASP.NET в рабочей среде -, включающей страницы разметки для страницы ASP.NET, главные страницы и пользовательские элементы управления, а также их файлов кода. Также необходимо скопировать файлы класса, например BasePage.cs. Обратите внимание, что `BasePage.cs` файл находится в `App_Code` папку, которая является особой папке ASP.NET, используемым в проектах веб-сайта для файлов классов. Эта особая папка должна быть создана в рабочей среде, а также как файлы класса в `App_Code` необходимо скопировать папку в среде разработки `App_Code` папки в рабочей среде.

Помимо копирования ASP.NET разметки и файлами исходного кода, также необходимо скопировать файлы поддержку на стороне клиента - образы и файлы CSS - и другие файлы поддержки на стороне сервера, `Web.config` и `Web.sitemap`.

> [!NOTE]
> Проекты веб-сайта можно также использовать явную компиляцию. Будущие учебника рассмотрена явным образом компилировать проект веб-сайта.


## <a name="summary"></a>Сводка

Развертывание приложения ASP.NET включает в себя копирование необходимых файлов из среды разработки в рабочую среду. Точный набор файлов, которые должны быть синхронизированы зависит от того, является ли приложение ASP.NET явным образом или автоматически компиляции кода. Влияют стратегии компиляции задействован ли настройки Visual Studio для управления приложением ASP.NET, с помощью модели проекта веб-приложения или модели проекта веб-сайта.

Модель проекта веб-приложения использует явную компиляцию и компилирует код проекта в одну сборку в `Bin` папки. При развертывании приложения, часть разметки страниц ASP.NET, а также содержимое `Bin` папка должна отправляться в рабочей среде; исходный код в приложении - файлы кода и кода классов, например - не обязательно. для копирования в рабочую среду.

Автоматическую компиляцию использует модель проекта веб-сайта по умолчанию, хотя можно явно компиляции проекта веб-сайта, как мы увидим в будущих учебниках. Развертывание приложения ASP.NET, который использует автоматическую компиляцию требуется часть разметки *и* исходного кода должны быть скопированы в рабочей среде. Код компилируется в рабочей среде автоматически, когда он запрашивается в первый раз.

Теперь, когда мы рассмотрели файлов, которые должны быть синхронизированы между средами разработки и эксплуатации не готово к развертыванию приложения рецензий на поставщике узла.

Программирование довольны!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:

- [Общие сведения о компиляции в ASP.NET](https://msdn.microsoft.com/library/ms178466.aspx)
- [Пользовательские элементы управления ASP.NET](https://msdn.microsoft.com/library/y6wb1a0e.aspx)
- [Проверка ASP. В NET навигации веб-узла](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [Введение в проекты веб-приложений](https://msdn.microsoft.com/library/aa730880.aspx)
- [Образец учебники страницы](../master-pages/creating-a-site-wide-layout-using-master-pages-cs.md)
- [Совместное использование кода на нескольких страницах](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/pages/code.aspx)
- [С помощью другого базового класса для классов кода страницы ASP.NET](http://aspnet.4guysfromrolla.com/articles/041305-1.aspx)
- [Система проектов Visual Studio 2005 веб-сайт: что это такое и зачем мы сделали его?](https://weblogs.asp.net/scottgu/archive/2005/08/21/423201.aspx)
- [Пошаговое руководство: Преобразование проекта веб-сайта в проект веб-приложения в Visual Studio](https://msdn.microsoft.com/library/aa983476.aspx)

> [!div class="step-by-step"]
> [Назад](asp-net-hosting-options-cs.md)
> [Вперед](deploying-your-site-using-an-ftp-client-cs.md)
