---
uid: web-forms/overview/older-versions-getting-started/master-pages/multiple-contentplaceholders-and-default-content-vb
title: "Несколько ContentPlaceHolders и содержимого по умолчанию (Visual Basic) | Документы Microsoft"
author: rick-anderson
description: "Проверяет, как добавить несколько владельцев содержимого месте главной страницы, а также способ указания содержимого по умолчанию в Владельцы содержимого месте."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/21/2008
ms.topic: article
ms.assetid: 866a7177-6884-451e-88f4-c934b1dd1af5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/multiple-contentplaceholders-and-default-content-vb
msc.type: authoredcontent
ms.openlocfilehash: ccb65f0b2f16e0c7a67787f7dfab14303daeca1d
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="multiple-contentplaceholders-and-default-content-vb"></a>Несколько ContentPlaceHolders и содержимого по умолчанию (Visual Basic)
====================
по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Загрузить код](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_02_VB.zip) или [скачать PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_02_VB.pdf)

> Проверяет, как добавить несколько владельцев содержимого месте главной страницы, а также способ указания содержимого по умолчанию в Владельцы содержимого месте.


## <a name="introduction"></a>Вступление

В предыдущем учебнике мы рассмотрели, как главные страницы enable разработчиков ASP.NET для создания согласованного макета-узла. Главные страницы определяют разметку, общие для всех его страниц и области, которые можно настраивать на основе страницу за страницей. В предыдущем учебнике мы создали простую главную страницу (`Site.master`) и два содержимого страницы (`Default.aspx` и `About.aspx`). Наш главной страницы состоял из двух ContentPlaceHolders с именем `head` и `MainContent`, которой были расположены в `<head>` элемент и веб-форму, соответственно. Пока страницы содержимого каждого ожидала двух элементов управления содержимым, можно указать только разметки, соответствующие `MainContent`.

О чем свидетельствует двух элементов управления ContentPlaceHolder в `Site.master`, Главная страница может содержать несколько. Более того по умолчанию разметки для элементов управления ContentPlaceHolder указать главной страницы. Страницы содержимого, затем можно при необходимости указать собственную разметку или разметку по умолчанию. В этом учебнике мы рассмотрим использование нескольких элементов управления содержимым на главной странице и узнать, как определить разметки по умолчанию в элементах управления ContentPlaceHolder.

## <a name="step-1-adding-additional-contentplaceholder-controls-to-the-master-page"></a>Шаг 1: Добавление элементов управления дополнительных ContentPlaceHolder на главную страницу

Во многих проектах веб-сайт содержит несколько областей, на экране, настроенные на основе страницу за страницей. `Site.master`, мы создали в предыдущем учебнике главной страницы содержит один ContentPlaceHolder в веб-форму с именем `MainContent`. В частности, это ContentPlaceHolder располагается в пределах `mainContent` `<div>` элемента.

На рисунке 1 показано `Default.aspx` при просмотре через браузер. Регион, в кружке красным цветом — разметку страницы, соответствующий `MainContent`.


[![Область кружке показана область в настоящее время настраиваемые на основе страницу по](multiple-contentplaceholders-and-default-content-vb/_static/image2.png)](multiple-contentplaceholders-and-default-content-vb/_static/image1.png)

**Рисунок 01**: область в круге показывает область в настоящее время настраиваемое на основе страницу по ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image3.png))


Предположим, что в дополнение к области, приведенный на рисунке 1, необходимо также добавить элементы страниц в левом столбце под занятия и новости разделов. Для этого мы добавьте другой элемент управления ContentPlaceHolder на главную страницу. Для выполнения этой процедуры откройте `Site.master` главную страницу в Visual Web Developer и перетащите элемент управления ContentPlaceHolder из области элементов в конструктор после раздела новостей. Задать ContentPlaceHolder `ID` для `LeftColumnContent`.


[![Добавление элемента управления ContentPlaceHolder главной страницы в левом столбце](multiple-contentplaceholders-and-default-content-vb/_static/image5.png)](multiple-contentplaceholders-and-default-content-vb/_static/image4.png)

**На рисунке 02**: Добавление элемента управления ContentPlaceHolder столбца влево на главной странице ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image6.png))


С добавлением `LeftColumnContent` ContentPlaceHolder на главную страницу, можно определить содержимое для этой области на основе страницу за страницей, включая содержимое элемент управления на странице `ContentPlaceHolderID` равно `LeftColumnContent`. Мы изучаем этот процесс на шаге 2.

## <a name="step-2-defining-content-for-the-new-contentplaceholder-in-the-content-pages"></a>Шаг 2: Определение содержимого для новых ContentPlaceHolder на страницах содержимого

При добавлении новой страницы содержимого на веб-сайт, Visual Web Developer автоматически создает содержимое элемента управления на странице для каждого ContentPlaceHolder выбранной главной страницы. После добавления `LeftColumnContent` ContentPlaceHolder нашей главную страницу на шаге 1, теперь новый будет страниц ASP.NET имеет три элемента управления содержимым.

Чтобы проиллюстрировать это, добавьте новую страницу содержимого в корневом каталоге с именем `MultipleContentPlaceHolders.aspx` , привязанный к `Site.master` главной страницы. Visual Web Developer создает эту страницу следующей декларативной разметкой:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample1.aspx)]

Введите некоторое содержимое в элемент управления содержимым, ссылающиеся на `MainContent` ContentPlaceHolders (`Content2`). Добавьте следующую разметку, чтобы `Content3` элемент управления содержимым (который ссылается на `LeftColumnContent` ContentPlaceHolder):

[!code-html[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample2.html)]

После добавления этой разметки, перейдите на страницу с помощью браузера. Как показано на рис. 3, разметку помещаются в `Content3` содержимого элемента управления отображается в столбце слева под разделом новостей (обведена красным цветом). Разметка помещаются в `Content2` отображается в правой части страницы (обведена синим цветом).


[![Левый столбец теперь включает содержимое конкретной странице под разделом новостей](multiple-contentplaceholders-and-default-content-vb/_static/image8.png)](multiple-contentplaceholders-and-default-content-vb/_static/image7.png)

**На рисунке 03**: слева теперь включает конкретной странице содержимого под новостей секции столбцов ([щелкните, чтобы просмотреть полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image9.png))


### <a name="defining-content-in-existing-content-pages"></a>Определение содержимого в существующих страниц содержимого

Создание новой страницы содержимого автоматически включает в себя элемент управления ContentPlaceHolder, который мы добавили в шаге 1. Но наших двух существующих страниц - `About.aspx` и `Default.aspx` -нет элемента управления содержимым для `LeftColumnContent` ContentPlaceHolder. Для указания содержимого для этого ContentPlaceHolder в этих двух существующих страниц, необходимо добавить элемент управления содержимым, сами.

В отличие от большинства элементов управления ASP.NET Web элементов Visual Web Developer не включает элемент управления содержимым. Можно вручную ввести декларативная разметка элемента управления содержимым в представлении источника, но проще и быстрее подход заключается в использовании представления конструктора. Откройте `About.aspx` страницы и переключитесь в представление конструктора. Как показано на рис. 4, `LeftColumnContent` ContentPlaceHolder доступен в режиме конструктора, если указатель мыши находится над ним, считывает заголовок, отображаемый: «LeftColumnContent (Master)». Включение «Master» в названии указывает нет элемента управления содержимым, заданное для этого ContentPlaceHolder на странице. Если существует элемент управления содержимым для ContentPlaceHolder, как и в случае с `MainContent`, заголовок будет считывать: «*ContentPlaceHolderID* (пользовательский).»

Чтобы добавить элемент управления содержимым для `LeftColumnContent` ContentPlaceHolder на `About.aspx`разверните ContentPlaceHolder смарт-тег и щелкните ссылку Создать настраиваемый содержимое.


[![Режим конструктора для About.aspx показывает LeftColumnContent ContentPlaceHolder](multiple-contentplaceholders-and-default-content-vb/_static/image11.png)](multiple-contentplaceholders-and-default-content-vb/_static/image10.png)

**На рисунке 04**: режим конструктора для `About.aspx` показывает `LeftColumnContent` ContentPlaceHolder ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image12.png))


Щелкнув ссылку на содержимое создать настраиваемый создает необходимые содержимого элемента управления в страницы и задает его `ContentPlaceHolderID` свойства ContentPlaceHolder `ID`. Например, если щелкнуть ссылку на содержимое создать настраиваемый для `LeftColumnContent` область в `About.aspx` добавляет следующие декларативная разметка страницы:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample3.aspx)]

### <a name="omitting-content-controls"></a>Пропуск элементов управления содержимым

ASP.NET не требуется включение всех страниц содержимого элементов управления содержимым для каждого ContentPlaceHolder, определенные на главной странице. Если указан элемент управления содержимым, подсистема ASP.NET использует разметки, определенные в ContentPlaceHolder на главной странице. Эта разметка называется ContentPlaceHolder *по умолчанию содержимое* и полезно в сценариях, где содержимое для некоторых области являются общими для большинства страниц, но необходимо выполнить настройку для небольшого числа страниц. Шаг 3 более подробно рассматривается задание содержимого по умолчанию на главной странице.

В настоящее время `Default.aspx` содержит два элемента управления содержимым для `head` и `MainContent` ContentPlaceHolders; не имеет элемента управления содержимым для `LeftColumnContent`. Следовательно, если `Default.aspx` подготавливается к просмотру `LeftColumnContent` используется ContentPlaceHolder элемента содержимого по умолчанию. Так как мы еще определить все содержимое по умолчанию для этого ContentPlaceHolder, в итоге получается, что разметка не создается для этой области. Чтобы проверить это, посетите `Default.aspx` через браузер. Как показано на рисунке 5, разметка не создается в столбце слева под разделом новостей.


[![Содержимое не отображается для LeftColumnContent ContentPlaceHolder](multiple-contentplaceholders-and-default-content-vb/_static/image14.png)](multiple-contentplaceholders-and-default-content-vb/_static/image13.png)

**На рисунке 05**: нет содержимого для отображается `LeftColumnContent` ContentPlaceHolder ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image15.png))


## <a name="step-3-specifying-default-content-in-the-master-page"></a>Шаг 3: Указание содержимого по умолчанию на главной странице

Некоторые макеты веб-сайт включать область, содержимое которого является одинаковым для всех страниц на сайте, кроме одного или двух исключений. Рассмотрим веб-сайт, который поддерживает учетные записи пользователей. Такой узел требует страницы входа, где посетители могут ввести свои учетные данные для входа в веб-узел. Чтобы ускорить входа в систему, конструкторы веб-сайт может включать текстовые поля имя пользователя и пароль в левом верхнем углу каждой страницы, чтобы пользователи могли войти без необходимости явно перейти на страницу входа. Эти текстовые поля имя пользователя и пароль могут оказаться полезными в большинстве страниц, они являются избыточным на странице входа, который уже содержит текстовые поля для учетных данных пользователя.

Для внедрения разработки, можно создать элемент управления ContentPlaceHolder в верхнем левом углу главной страницы. Каждую страницу, чтобы отобразить текстовые поля имя пользователя и пароль в верхнем левом углу следует создать элемент управления содержимым для этого ContentPlaceHolder и добавить необходимые интерфейс. Страницы входа, с другой стороны, либо будет пропущен, добавление элемента управления содержимым для этого ContentPlaceHolder или создать содержимое элемента управления с помощью разметка не определен. Недостатком такого подхода является необходимость не забудьте добавить текстовые поля имя пользователя и пароль для каждой страницы, мы добавим сайта (за исключением страница входа). Это стать большой проблемой. Мы наиболее вероятных забыли добавить на страницу или два эти текстовые поля, или того, мы не может реализовывать интерфейс правильно (возможно добавление только одно текстовое поле вместо двух).

Лучшим решением является определение текстовые поля имя пользователя и пароль как ContentPlaceHolder содержимого по умолчанию. Таким образом, нам требуется только переопределить это содержимое по умолчанию в этих несколько страниц, которые не видны в текстовых полях имя пользователя и пароль (страницы входа, например). Чтобы проиллюстрировать указание содержимого по умолчанию для элемента управления ContentPlaceHolder, давайте реализации сценария только что обсудили.

> [!NOTE]
> В оставшейся части этого учебника обновляет наш веб-сайт, необходимо включить интерфейс входа в левом столбце для всех страниц, но страницы входа. Этот учебник не проверяет способы настройки веб-сайта для поддержки учетных записей пользователей. Дополнительные сведения об этом разделе посвящены my [форм проверки подлинности, авторизации, учетные записи пользователей и ролей](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) учебники.


### <a name="adding-a-contentplaceholder-and-specifying-its-default-content"></a>Добавление ContentPlaceHolder и указав его содержимое по умолчанию

Откройте `Site.master` главную страницу и добавьте следующую разметку в левый столбец между `DateDisplay` метки и занятий раздела:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample4.aspx)]

После добавления этой разметки главной страницы в конструкторе будет выглядеть на рис. 6.


[![Главная страница содержит элемент управления входа](multiple-contentplaceholders-and-default-content-vb/_static/image17.png)](multiple-contentplaceholders-and-default-content-vb/_static/image16.png)

**На рисунке 06**: главная страница содержит элемент управления входа ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image18.png))


Это ContentPlaceHolder `QuickLoginUI`, имеет имя входа веб-элемент управления, его содержимое по умолчанию. Элемент управления входа отображает пользовательский интерфейс, который предлагает пользователю ввести имя пользователя и пароль, а также кнопки входа в. После нажатия кнопки "Вход" управления входом внутренне проверяет учетные данные пользователя для API членства. Чтобы использовать этот элемент управления входа на практике, затем необходимо настроить сайт для использования членства. В этом разделе выходит за рамки данного руководства; ссылаться на мой [форм проверки подлинности, авторизации, учетные записи пользователей и ролей](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) учебники Дополнительные сведения о построении веб-приложения, который поддерживает учетные записи пользователей.

Вы можете настроить поведение или внешний вид элемента управления входа в систему. Я установил двух из его свойств: `TitleText` и `FailureAction`. `TitleText` Значение свойства, значение по умолчанию «Вход», отображается в верхней части элемента управления пользовательского интерфейса. Я установил это свойство, чтобы он отображался текст «Вход» `<h3>` элемента. `FailureAction` Свойство указывает, что делать, если учетные данные пользователя являются недопустимыми. По умолчанию используется значение `Refresh`, оставляет пользователя на одной странице и отображает сообщение об ошибке в элементе управления входа в систему. После изменения его `RedirectToLoginPage`, который отправляет пользователя на страницу входа в случае недопустимых учетных данных. Я хочу отправить пользователю на страницу входа, когда пользователь пытается войти в систему из некоторых других страниц, но дает сбой, так как на страницу входа могут содержать дополнительные инструкции и параметры, которые легко не может поместиться в левом столбце. Например на страницу входа может включать параметры для извлечения забытый пароль или для создания новой учетной записи.

### <a name="creating-the-login-page-and-overriding-the-default-content"></a>Создание страницы входа, а также путем переопределения содержимого по умолчанию

С главной страницы завершения следующим шагом является создание страницы входа. Добавить страницу ASP.NET в корневой каталог веб-узла с именем `Login.aspx`, привязав его к `Site.master` главной страницы. При этом будет создана страница с четырьмя элементами управления содержимым, один для каждого из ContentPlaceHolders определен в `Site.master`.

Добавить элемент управления входа `MainContent` элемент управления содержимым. Аналогичным образом, вы можете добавить любое содержимое, `LeftColumnContent` области. Тем не менее, убедитесь, что оставить элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder пустым. Это позволит гарантировать, имя входа, элемент управления не отображается в левом столбце страницы входа.

После определения содержимого для `MainContent` и `LeftColumnContent` областей страницы входа должна выглядеть следующим образом:

[!code-aspx[Main](multiple-contentplaceholders-and-default-content-vb/samples/sample5.aspx)]

На рисунке 7 показано эту страницу при просмотре через браузер. Так как эта страница задает для элемента управления содержимым `QuickLoginUI` ContentPlaceHolder, оно переопределяет содержимого по умолчанию, указанное на главной странице. В итоге получается, что управления входом отображения конструктора главной страницы представления (см. рис. 6) не отображается на этой странице.


[![Страница входа Represses QuickLoginUI ContentPlaceHolder содержимого по умолчанию](multiple-contentplaceholders-and-default-content-vb/_static/image20.png)](multiple-contentplaceholders-and-default-content-vb/_static/image19.png)

**Рисунок 07**: Represses страницы входа `QuickLoginUI` содержимого по умолчанию элемента ContentPlaceHolder ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image21.png))


### <a name="using-the-default-content-in-new-pages"></a>С помощью содержимого по умолчанию в новых страниц

Мы хотим Показать элемента управления для входа в левом столбце для всех страниц, кроме страницы входа. Чтобы добиться этого, все страницы содержимого за исключением страницы входа следует пропустить элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder. Если не указан элемент управления содержимым, будет использоваться ContentPlaceHolder содержимого по умолчанию.

Наши существующие содержимого страницы - `Default.aspx`, `About.aspx`, и `MultipleContentPlaceHolders.aspx` -не включать элемент управления содержимым для `QuickLoginUI` так, как они были созданы, прежде чем мы добавили этот элемент управления ContentPlaceHolder на главную страницу. Таким образом эти существующие страницы не должны обновляться. Тем не менее, новые страницы, веб-сайте включать элемент управления содержимым для `QuickLoginUI` ContentPlaceHolder по умолчанию. Таким образом, нам нужно не забудьте удалить эти элементы управления содержимым каждый раз, добавим новую страницу содержимого (если мы хотим переопределить ContentPlaceHolder содержимого по умолчанию, в случае страницы входа).

Чтобы удалить элемент управления содержимым, можно вручную удалить его декларативная разметка из представления источников или, в режиме конструктора выберите значение по умолчанию для ссылки на содержимое главной из его смарт-тег. Любой из этих подходов удаляет элемент управления содержимым из страницы и выдает же net эффект.

На рисунке 8 показана `Default.aspx` при просмотре через браузер. Помните, что `Default.aspx` имеет только двух элементов управления содержимым, указанный в его декларативная разметка — один для `head` и один для `MainContent`. Таким образом, значение по умолчанию для содержимого `LeftColumnContent` и `QuickLoginUI` ContentPlaceHolders отображаются.


[![По умолчанию содержимое для LeftColumnContent и QuickLoginUI ContentPlaceHolders отображаются](multiple-contentplaceholders-and-default-content-vb/_static/image23.png)](multiple-contentplaceholders-and-default-content-vb/_static/image22.png)

**На рисунке 08**: по умолчанию содержимого для `LeftColumnContent` и `QuickLoginUI` ContentPlaceHolders отображаются ([Просмотр полноразмерное изображение](multiple-contentplaceholders-and-default-content-vb/_static/image24.png))


## <a name="summary"></a>Сводка

Модель главной страницы ASP.NET позволяет произвольное число ContentPlaceHolders на главной странице. Включить дополнительные возможности, ContentPlaceHolders содержимое по умолчанию, которое выдается в случае это нет соответствующей содержимого элемента управления на странице содержимого. В этом учебнике мы узнали, как включать дополнительные элементы ContentPlaceHolder на главной странице и определение элементов управления содержимым для этих новых ContentPlaceHolders в новых и существующих страниц ASP.NET. Мы также рассмотрели указания по умолчанию содержимое ContentPlaceHolder, что полезно в сценариях, где находится недостаточное количество страниц необходимо настроить, в противном случае Стандартизован содержимое в определенном регионе.

В следующем уроке мы изучим `head` ContentPlaceHolder более подробно, отображается как декларативно и программно определить на основе страницу по заголовку мета-теги и другие заголовки HTML.

Программирование довольны!

### <a name="about-the-author"></a>Об авторе

[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор по ASP/ASP.NET и основатель 4GuysFromRolla.com, работает с веб-технологиями Майкрософт с 1998 года. Скотт — независимый консультант, trainer и записи. Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 3.5 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco). Скотт может быть достигнута по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) или через его блог по [http://ScottOnWriting.NET](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Благодарности

Этот учебник ряд прошел проверку многие полезные рецензентов. Основной рецензент этого учебника было Банерджи Suchi. Объясняются моих последующих статей для MSDN? Если Да, напишите мне по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).

>[!div class="step-by-step"]
[Назад](creating-a-site-wide-layout-using-master-pages-vb.md)
[Вперед](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-vb.md)
