---
uid: web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
title: "Создание структуры сайта с помощью главных страниц (C#) | Документы Microsoft"
author: rick-anderson
description: "Этот учебник покажет основы главной страницы. А именно, каковы главные страницы, как работает один Создание главной страницы, каковы содержимого заполнителями, как работает один cr..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/21/2008
ms.topic: article
ms.assetid: 78f8d194-03b9-44a5-8255-90e7cd1c2ee1
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/creating-a-site-wide-layout-using-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 5e3507acda4958fa7caa4a22fec7603deaec73c2
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="creating-a-site-wide-layout-using-master-pages-c"></a><span data-ttu-id="a19d3-104">Создание структуры сайта с помощью главных страниц (C#)</span><span class="sxs-lookup"><span data-stu-id="a19d3-104">Creating a Site-Wide Layout Using Master Pages (C#)</span></span>
====================
<span data-ttu-id="a19d3-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a19d3-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a19d3-106">[Загрузить код](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip) или [скачать PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="a19d3-106">[Download Code](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_01_CS.zip) or [Download PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_01_CS.pdf)</span></span>

> <span data-ttu-id="a19d3-107">Этот учебник покажет основы главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-107">This tutorial will show master page basics.</span></span> <span data-ttu-id="a19d3-108">А именно, каковы главные страницы, как один создать главной страницы, каковы содержимого заполнителями как один создает страницу ASP.NET, которая использует главной страницы, как изменение главной страницы автоматически отражаются на связанные содержимого страницы и т. д.</span><span class="sxs-lookup"><span data-stu-id="a19d3-108">Namely, what are master pages, how does one create a master page, what are content place holders, how does one create an ASP.NET page that uses a master page, how modifying the master page is automatically reflected in its associated content pages, and so on.</span></span>


## <a name="introduction"></a><span data-ttu-id="a19d3-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="a19d3-109">Introduction</span></span>

<span data-ttu-id="a19d3-110">Один атрибут хорошо спроектированной веб-сайта — согласованного сайта макета страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-110">One attribute of a well-designed website is a consistent site-wide page layout.</span></span> <span data-ttu-id="a19d3-111">Возьмем www.asp.net веб-сайта, например.</span><span class="sxs-lookup"><span data-stu-id="a19d3-111">Take the www.asp.net website, for example.</span></span> <span data-ttu-id="a19d3-112">На момент написания этой статьи каждая страница имеет то же содержимое в верхней и нижней части страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-112">At the time of this writing, every page has the same content at the top and bottom of the page.</span></span> <span data-ttu-id="a19d3-113">Как показано на рис. 1, в самой верхней части каждой страницы отображается серую линию со списком сообщества Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a19d3-113">As Figure 1 shows, the very top of each page displays a gray bar with a list of Microsoft Communities.</span></span> <span data-ttu-id="a19d3-114">Под, то есть логотипа веб-узла, список языков, в которые переведены сайта и основных разделов: Домашняя, приступить к работе, Дополнительные сведения, загрузки и т. д.</span><span class="sxs-lookup"><span data-stu-id="a19d3-114">Beneath that is the site logo, the list of languages into which the site has been translated, and the core sections: Home, Get Started, Learn, Downloads, and so forth.</span></span> <span data-ttu-id="a19d3-115">Аналогичным образом нижней части страницы включает сведения о рекламе в www.asp.net заявление об авторских правах и ссылку на заявление о конфиденциальности.</span><span class="sxs-lookup"><span data-stu-id="a19d3-115">Likewise, the bottom of the page includes information about advertising on www.asp.net, a copyright statement, and a link to the privacy statement.</span></span>


<span data-ttu-id="a19d3-116">[![Www.asp.net веб-сайт использует согласованного внешнего вида и поведения на всех страницах](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-116">[![The www.asp.net Website Employs a Consistent Look and Feel Across All Pages](creating-a-site-wide-layout-using-master-pages-cs/_static/image2.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="a19d3-117">**На рисунке 01**: www.asp.net веб-сайт использует согласованные поиска и чувствовать себя через все страницы ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-117">**Figure 01**: The www.asp.net Website Employs a Consistent Look and Feel Across All Pages ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image3.png))</span></span>


<span data-ttu-id="a19d3-118">Другой атрибут хорошо спроектированной узла заключается в простоте, с помощью которого можно изменить внешний вид веб-узла.</span><span class="sxs-lookup"><span data-stu-id="a19d3-118">Another attribute of a well-designed site is the ease with which the site's appearance can be changed.</span></span> <span data-ttu-id="a19d3-119">На домашней странице www.asp.net марта 2008 г представлена на рисунке 1, но между текущей датой и публикации этого учебника, могло измениться внешний вид.</span><span class="sxs-lookup"><span data-stu-id="a19d3-119">Figure 1 shows the www.asp.net homepage as of March 2008, but between now and this tutorial's publication, the look and feel may have changed.</span></span> <span data-ttu-id="a19d3-120">Возможно пунктов меню в верхней расширяться и включать новый раздел для MVC.</span><span class="sxs-lookup"><span data-stu-id="a19d3-120">Perhaps the menu items along the top will expand to include a new section for the MVC framework.</span></span> <span data-ttu-id="a19d3-121">Или может быть радикально обновленной различные цвета, шрифты и макет будет узнали о нем.</span><span class="sxs-lookup"><span data-stu-id="a19d3-121">Or maybe a radically new design with different colors, fonts, and layout will be unveiled.</span></span> <span data-ttu-id="a19d3-122">Применение таких изменений для всего сайта должно быть быстрой и простой процесс, который не требует изменения для тысяч веб-страницы, входящие в состав сайта.</span><span class="sxs-lookup"><span data-stu-id="a19d3-122">Applying such changes to the entire site should be a fast and simple process that does not require modifying the thousands of web pages that make up the site.</span></span>

<span data-ttu-id="a19d3-123">Создание шаблона для всех страниц в ASP.NET возможности использования *главные страницы*.</span><span class="sxs-lookup"><span data-stu-id="a19d3-123">Creating a site-wide page template in ASP.NET is possible through the use of *master pages*.</span></span> <span data-ttu-id="a19d3-124">По сути, главной страницы — это специальный тип страницы ASP.NET, который определяет разметку, являются общими для всех *содержимого страницы* а также области, которые можно настраивать на основе страницы содержимого, содержимого страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-124">In a nutshell, a master page is a special type of ASP.NET page that defines the markup that is common among all *content pages* as well as regions that are customizable on a content page-by-content page basis.</span></span> <span data-ttu-id="a19d3-125">(Страница содержимого является страницей ASP.NET, привязанная к главной страницы). При каждом изменении макета главной страницы или форматирования все выходные данные его содержимого страницы аналогично немедленно обновляется, что делает применение изменения внешнего вида всего веб-узла, так же легко, как обновление и развертывание одного файла (а именно, главной страницы).</span><span class="sxs-lookup"><span data-stu-id="a19d3-125">(A content page is an ASP.NET page that is bound to the master page.) Whenever a master page's layout or formatting is changed, all of its content pages' output is likewise immediately updated, which makes applying site-wide appearance changes as easy as updating and deploying a single file (namely, the master page).</span></span>

<span data-ttu-id="a19d3-126">Это в первом учебнике серию учебников, в которых рассматривается использование главных страниц.</span><span class="sxs-lookup"><span data-stu-id="a19d3-126">This is the first tutorial in a series of tutorials that explore using master pages.</span></span> <span data-ttu-id="a19d3-127">В ходе этого учебника серии мы:</span><span class="sxs-lookup"><span data-stu-id="a19d3-127">Over the course of this tutorial series we:</span></span>

- <span data-ttu-id="a19d3-128">Изучите создание главных страниц и их связанные содержимого страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-128">Examine creating master pages and their associated content pages,</span></span>
- <span data-ttu-id="a19d3-129">Рассматриваются различные советы, рекомендации и ловушек,</span><span class="sxs-lookup"><span data-stu-id="a19d3-129">Discuss a variety of tips, tricks, and traps,</span></span>
- <span data-ttu-id="a19d3-130">Определить типичные проблемы главной страницы и изучить возможные варианты решения</span><span class="sxs-lookup"><span data-stu-id="a19d3-130">Identify common master page pitfalls and explore workarounds,</span></span>
- <span data-ttu-id="a19d3-131">Как получить доступ к главной страницы из страницы содержимого и a наоборот, в разделе</span><span class="sxs-lookup"><span data-stu-id="a19d3-131">See how to access the master page from a content page and vice-a-versa,</span></span>
- <span data-ttu-id="a19d3-132">Узнайте, как указать страницу содержимого главной страницы во время выполнения, и</span><span class="sxs-lookup"><span data-stu-id="a19d3-132">Learn how to specify a content page's master page at runtime, and</span></span>
- <span data-ttu-id="a19d3-133">Другие дополнительные разделы главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-133">Other advanced master page topics.</span></span>

<span data-ttu-id="a19d3-134">Эти учебники предназначены для краткого и содержат пошаговые инструкции с множеством снимков экранов, дающих процесс визуально.</span><span class="sxs-lookup"><span data-stu-id="a19d3-134">These tutorials are geared to be concise and provide step-by-step instructions with plenty of screen shots to walk you through the process visually.</span></span> <span data-ttu-id="a19d3-135">В каждом учебнике доступен в C# и Visual Basic версии и загрузить полный код, используемый.</span><span class="sxs-lookup"><span data-stu-id="a19d3-135">Each tutorial is available in C# and Visual Basic versions and includes a download of the complete code used.</span></span>

<span data-ttu-id="a19d3-136">Этот учебник первых начинается с рассмотрим основы главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-136">This inaugural tutorial starts with a look at master page basics.</span></span> <span data-ttu-id="a19d3-137">Мы рассматриваются как функционируют главные страницы, рассмотрим создание главной страницы и связанные страницы содержимого, с помощью Visual Web Developer и разделе как главной страницы изменения немедленно отражаются в его страниц.</span><span class="sxs-lookup"><span data-stu-id="a19d3-137">We discuss how master pages work, look at creating a master page and associated content pages using Visual Web Developer, and see how changes to a master page are immediately reflected in its content pages.</span></span> <span data-ttu-id="a19d3-138">Давайте начнем!</span><span class="sxs-lookup"><span data-stu-id="a19d3-138">Let's get started!</span></span>

## <a name="understanding-how-master-pages-work"></a><span data-ttu-id="a19d3-139">Основные сведения о том, как функционируют главные страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-139">Understanding How Master Pages Work</span></span>

<span data-ttu-id="a19d3-140">Создание веб-сайт с макетом согласованность всех страниц требует что каждой веб-страницы создавать общие форматирования разметки в дополнение к его настраиваемое содержимое.</span><span class="sxs-lookup"><span data-stu-id="a19d3-140">Building a website with a consistent site-wide page layout requires that each web page emit common formatting markup in addition to its custom content.</span></span> <span data-ttu-id="a19d3-141">Например, каждого учебника или форум post на www.asp.net, имеют собственные уникальные материалы, каждая из этих страниц также отрисовки ряд общих `<div>` элементов, отображающих связи разделов верхнего уровня: Домашняя, приступить к работе, Дополнительные сведения и т. д.</span><span class="sxs-lookup"><span data-stu-id="a19d3-141">For example, while each tutorial or forum post on www.asp.net have their own unique content, each of these pages also render a series of common `<div>` elements that display the top-level section links: Home, Get Started, Learn, and so on.</span></span>

<span data-ttu-id="a19d3-142">Существуют различные методы для создания веб-страниц с помощью единого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="a19d3-142">There are a variety of techniques for creating web pages with a consistent look and feel.</span></span> <span data-ttu-id="a19d3-143">— Это упрощенный подход просто скопировать и вставить общие макета разметки в все веб-страницы, но такой подход имеет несколько недостатков.</span><span class="sxs-lookup"><span data-stu-id="a19d3-143">A naive approach is to simply copy and paste the common layout markup into all web pages, but this approach has a number of downsides.</span></span> <span data-ttu-id="a19d3-144">Во-первых всякий раз при создании новой страницы необходимо скопировать и вставить общего содержимого на страницу.</span><span class="sxs-lookup"><span data-stu-id="a19d3-144">For starters, every time a new page is created, you must remember to copy and paste the shared content into the page.</span></span> <span data-ttu-id="a19d3-145">Такие скопировав и вставив операций, богатыми возможностями ошибки может случайно скопировать только подмножество общих разметки в новую страницу.</span><span class="sxs-lookup"><span data-stu-id="a19d3-145">Such copying and pasting operations are ripe for error as you may accidentally copy only a subset of the shared markup into a new page.</span></span> <span data-ttu-id="a19d3-146">И к началу страницы, такой подход делает замены существующего сайта внешний новый реальную боль, так как для использования нового интерфейса должны изменяться каждый одной страницы на сайте.</span><span class="sxs-lookup"><span data-stu-id="a19d3-146">And to top it off, this approach makes replacing the existing site-wide appearance with a new one a real pain because every single page in the site must be edited in order to use the new look and feel.</span></span>

<span data-ttu-id="a19d3-147">До ASP.NET версии 2.0, страница разработчики часто помещают общие разметки в [пользовательские элементы управления](https://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx) и затем добавить эти пользовательские элементы управления для каждой страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-147">Prior to ASP.NET version 2.0, page developers often placed common markup in [User Controls](https://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx) and then added these User Controls to each and every page.</span></span> <span data-ttu-id="a19d3-148">Этот подход необходим разработчик помните, что необходимо вручную добавить пользовательские элементы управления для каждой страницы, что разрешено для изменения проще всего сайта, так как при обновлении общих разметки только пользовательские элементы управления необходимо изменить.</span><span class="sxs-lookup"><span data-stu-id="a19d3-148">This approach required that the page developer remember to manually add the User Controls to every new page, but allowed for easier site-wide modifications because when updating the common markup only the User Controls needed to be modified.</span></span> <span data-ttu-id="a19d3-149">К сожалению Visual Studio .NET 2002 и 2003 - версии Visual Studio используется для создания приложений ASP.NET 1.x - отображается пользовательских элементов управления в режиме конструктора в виде серых блоков.</span><span class="sxs-lookup"><span data-stu-id="a19d3-149">Unfortunately, Visual Studio .NET 2002 and 2003 - the versions of Visual Studio used to create ASP.NET 1.x applications - rendered User Controls in the Design view as gray boxes.</span></span> <span data-ttu-id="a19d3-150">Следовательно при таком подходе разработчики страниц не понравилось WYSIWYG среды разработки.</span><span class="sxs-lookup"><span data-stu-id="a19d3-150">Consequently, page developers using this approach did not enjoy a WYSIWYG design-time environment.</span></span>

<span data-ttu-id="a19d3-151">Недостатки использования пользовательских элементов управления были учтены в ASP.NET версии 2.0 и Visual Studio 2005 с появлением *главные страницы*.</span><span class="sxs-lookup"><span data-stu-id="a19d3-151">The shortcomings of using User Controls were addressed in ASP.NET version 2.0 and Visual Studio 2005 with the introduction of *master pages*.</span></span> <span data-ttu-id="a19d3-152">Главная страница — это специальный тип страницы ASP.NET, определяющий разметку-узла и *областей* там, где связанные *содержимого страницы* определить их пользовательской разметки.</span><span class="sxs-lookup"><span data-stu-id="a19d3-152">A master page is a special type of ASP.NET page that defines both the site-wide markup and the *regions* where associated *content pages* define their custom markup.</span></span> <span data-ttu-id="a19d3-153">Как будет показано в шаге 1, эти регионы определяются ContentPlaceHolder элементов управления.</span><span class="sxs-lookup"><span data-stu-id="a19d3-153">As we will see in Step 1, these regions are defined by ContentPlaceHolder controls.</span></span> <span data-ttu-id="a19d3-154">Элемент управления ContentPlaceHolder просто указывает позицию в иерархии элементов управления на главной странице, где пользовательского содержимого могут быть добавлены со страницей содержимого.</span><span class="sxs-lookup"><span data-stu-id="a19d3-154">The ContentPlaceHolder control simply denotes a position in the master page's control hierarchy where custom content can be injected by a content page.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-155">Основные понятия и функциональные возможности главных страниц не был изменен после ASP.NET версии 2.0.</span><span class="sxs-lookup"><span data-stu-id="a19d3-155">The core concepts and functionality of master pages has not changed since ASP.NET version 2.0.</span></span> <span data-ttu-id="a19d3-156">Однако Visual Studio 2008 предлагает поддержку времени разработки для вложенные главные страницы, функцию, которая отсутствовавшая в Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="a19d3-156">However, Visual Studio 2008 offers design-time support for nested master pages, a feature that was lacking in Visual Studio 2005.</span></span> <span data-ttu-id="a19d3-157">Мы рассмотрим использование вложенные главные страницы в будущем учебника.</span><span class="sxs-lookup"><span data-stu-id="a19d3-157">We will look at using nested master pages in a future tutorial.</span></span>


<span data-ttu-id="a19d3-158">На рисунке 2 показано, как будет выглядеть на главную страницу для www.asp.net.</span><span class="sxs-lookup"><span data-stu-id="a19d3-158">Figure 2 shows what the master page for www.asp.net might look like.</span></span> <span data-ttu-id="a19d3-159">Обратите внимание, что главная страница определяет общий макет сайта - разметки в верхней, нижней и правой части каждой страницы - а также ContentPlaceHolder в середине левом углу, где находится содержимое, уникальный для каждого отдельного веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-159">Note that the master page defines the common site-wide layout - the markup at the top, bottom, and right of every page - as well as a ContentPlaceHolder in the middle-left, where the unique content for each individual web page is located.</span></span>


![Главная страница определяет макет сайта и редактируемые области на основе содержимого содержимое страницы, страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image4.png)

<span data-ttu-id="a19d3-161">**На рисунке 02**: главная страница определяет макет сайта и редактируемые области на основе содержимого содержимое страницы, страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-161">**Figure 02**: A Master Page Defines the Site-Wide Layout and the Regions Editable on a Content Page-by-Content Page Basis</span></span>


<span data-ttu-id="a19d3-162">После определения главной страницы его можно привязать к новой страницы ASP.NET через деления флажок.</span><span class="sxs-lookup"><span data-stu-id="a19d3-162">Once a master page has been defined it can be bound to new ASP.NET pages through the tick of a checkbox.</span></span> <span data-ttu-id="a19d3-163">Эти страницы ASP.NET - вызывается страницами содержимого - включать элемент управления содержимым для каждого из элементов управления ContentPlaceHolder на главной странице.</span><span class="sxs-lookup"><span data-stu-id="a19d3-163">These ASP.NET pages - called content pages - include a Content control for each of the master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="a19d3-164">При посещении страницы содержимого с помощью браузера подсистема ASP.NET создает иерархию элементов управления главной страницы и внедряет иерархии элементов управления страницы содержимого в соответствующих местах.</span><span class="sxs-lookup"><span data-stu-id="a19d3-164">When the content page is visited through a browser the ASP.NET engine creates the master page's control hierarchy and injects the content page's control hierarchy into the appropriate places.</span></span> <span data-ttu-id="a19d3-165">Эта иерархия объединенный элемент управления подготавливается к просмотру и результирующий HTML возвращается браузер пользователя.</span><span class="sxs-lookup"><span data-stu-id="a19d3-165">This combined control hierarchy is rendered and the resulting HTML is returned to the end user's browser.</span></span> <span data-ttu-id="a19d3-166">Следовательно страницы содержимого выдает общих разметки, определенные в его главной странице за пределами ContentPlaceHolder элементы управления и разметку страницы, определенные в свои собственные элементы управления содержимым.</span><span class="sxs-lookup"><span data-stu-id="a19d3-166">Consequently, the content page emits both the common markup defined in its master page outside of the ContentPlaceHolder controls and the page-specific markup defined within its own Content controls.</span></span> <span data-ttu-id="a19d3-167">Этот принцип показан на рис. 3.</span><span class="sxs-lookup"><span data-stu-id="a19d3-167">Figure 3 illustrates this concept.</span></span>


<span data-ttu-id="a19d3-168">[![Разметка страницы запрошенный совмещенного в главной страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-168">[![The Requested Page's Markup is Fused into the Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image6.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="a19d3-169">**На рисунке 03**: запрошенный разметку страницы совмещенного в главной страницы ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-169">**Figure 03**: The Requested Page's Markup is Fused into the Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image7.png))</span></span>


<span data-ttu-id="a19d3-170">Теперь, когда мы обсуждали как функционируют главные страницы, давайте рассмотрим создание главной страницы и связанные страницы содержимого, с помощью Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="a19d3-170">Now that we have discussed how master pages work, let's take a look at creating a master page and associated content pages using Visual Web Developer.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-171">Для достижения наиболее широкой аудитории, мы создаем на протяжении этого учебника ряда веб-сайта ASP.NET будет создан с помощью ASP.NET 3.5 с корпорации Майкрософт бесплатную версию Visual Studio 2008 [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span><span class="sxs-lookup"><span data-stu-id="a19d3-171">In order to reach the widest possible audience, the ASP.NET website we build throughout this tutorial series will be created using ASP.NET 3.5 with Microsoft's free version of Visual Studio 2008, [Visual Web Developer 2008](https://www.microsoft.com/express/vwd/).</span></span> <span data-ttu-id="a19d3-172">Если вы еще не обновлены до ASP.NET 3.5, не беспокойтесь - концепции, описанные в этих учебниках рабочих одинаково с ASP.NET 2.0 и Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="a19d3-172">If you have not yet upgraded to ASP.NET 3.5, don't worry - the concepts discussed in these tutorials work equally well with ASP.NET 2.0 and Visual Studio 2005.</span></span> <span data-ttu-id="a19d3-173">Тем не менее некоторые демонстрация приложения могут использовать новые возможности .NET Framework версии 3.5; При использовании функции 3.5 включать заметку, которая описывает, как реализовать аналогичные функциональные возможности в версии 2.0.</span><span class="sxs-lookup"><span data-stu-id="a19d3-173">However, some demo applications may use features new to the .NET Framework version 3.5; when 3.5-specific features are used, I include a note that discusses how to implement similar functionality in version 2.0.</span></span> <span data-ttu-id="a19d3-174">Имейте в виду, демонстрационных приложений, доступных для загрузки из учебника целевые объекты .NET Framework версии 3.5, что приводит к `Web.config` файл, который содержит элементы конфигурации, относящиеся к 3.5 и ссылки на пространства имен конкретного 3.5 в `using` инструкций в классах кода страниц ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a19d3-174">Do keep in mind that the demo applications available for download from each tutorial target the .NET Framework version 3.5, which results in a `Web.config` file that includes 3.5-specific configuration elements and references to 3.5-specific namespaces in the `using` statements in ASP.NET pages' code-behind classes.</span></span> <span data-ttu-id="a19d3-175">Короче говоря, если у вас еще установка .NET 3.5 на компьютере, затем загружаемая веб-приложение не будет работать без предварительного удаления 3.5 разметку из `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-175">Long story short, if you have yet to install .NET 3.5 on your computer then the downloadable web application will not work without first removing the 3.5-specific markup from `Web.config`.</span></span> <span data-ttu-id="a19d3-176">В разделе [разбор ASP.NET версии 3.5 `Web.config` файл](http://www.4guysfromrolla.com/articles/121207-1.aspx) Дополнительные сведения по этой теме.</span><span class="sxs-lookup"><span data-stu-id="a19d3-176">See [Dissecting ASP.NET Version 3.5's `Web.config` File](http://www.4guysfromrolla.com/articles/121207-1.aspx) for more information on this topic.</span></span> <span data-ttu-id="a19d3-177">Также необходимо будет удалить `using` инструкций, ссылающихся на 3.5 определенного пространства имен.</span><span class="sxs-lookup"><span data-stu-id="a19d3-177">You will also need to remove the `using` statements that reference 3.5-specific namespaces.</span></span>


## <a name="step-1-creating-a-master-page"></a><span data-ttu-id="a19d3-178">Шаг 1: Создание главной страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-178">Step 1: Creating a Master Page</span></span>

<span data-ttu-id="a19d3-179">Прежде чем мы можем рассмотреть создание и использование страницах, необходимо сначала на веб-сайте ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a19d3-179">Before we can explore creating and using master and content pages, we first need an ASP.NET website.</span></span> <span data-ttu-id="a19d3-180">Начните с создания нового файла на основе системы веб-узла ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a19d3-180">Start by creating a new file system-based ASP.NET website.</span></span> <span data-ttu-id="a19d3-181">Для этого запустите Visual Web Developer и затем перейдите в меню «файл» и выберите новый веб-сайт, отображение диалогового окна нового веб-сайта (см. рис. 4).</span><span class="sxs-lookup"><span data-stu-id="a19d3-181">To accomplish this, launch Visual Web Developer and then go to the File menu and choose New Web Site, displaying the New Web Site dialog box (see Figure 4).</span></span> <span data-ttu-id="a19d3-182">Выберите шаблон веб-сайт ASP.NET, указывает расположение раскрывающегося списка в файловой системе, выберите папку для размещения веб-сайта и выбранный язык C#.</span><span class="sxs-lookup"><span data-stu-id="a19d3-182">Choose the ASP.NET Web Site template, set the Location drop-down list to File System, choose a folder to place the web site, and set the language to C#.</span></span> <span data-ttu-id="a19d3-183">Это создаст новый веб-сайт с `Default.aspx` страницы ASP.NET, `App_Data` папки и `Web.config` файла.</span><span class="sxs-lookup"><span data-stu-id="a19d3-183">This will create a new web site with a `Default.aspx` ASP.NET page, an `App_Data` folder, and a `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-184">Visual Studio поддерживает два режима управления проектом: проекты веб-сайтов и проектов веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="a19d3-184">Visual Studio supports two modes of project management: Web Site Projects and Web Application Projects.</span></span> <span data-ttu-id="a19d3-185">Проектов веб-сайтов отсутствует в файле проекта, тогда как проекты веб-приложений имитировать архитектуру проекта в Visual Studio .NET 2002/2003 — они включают файл проекта и компиляции исходного кода проекта в единую сборку, которая размещается в `/bin` папка.</span><span class="sxs-lookup"><span data-stu-id="a19d3-185">Web Site Projects lack a project file, whereas Web Application Projects mimic the project architecture in Visual Studio .NET 2002/2003 - they include a project file and compile the project's source code into a single assembly, which is placed in the `/bin` folder.</span></span> <span data-ttu-id="a19d3-186">Проекты Visual Studio 2005 изначально только поддерживаемые веб-сайта, несмотря на то что [модель проекта веб-приложения](https://msdn.microsoft.com/en-us/library/aa730880(vs.80).aspx) было снова с пакетом обновления 1; Visual Studio 2008 предлагает обе модели проекта.</span><span class="sxs-lookup"><span data-stu-id="a19d3-186">Visual Studio 2005 initially only supported Web Site Projects, although the [Web Application Project model](https://msdn.microsoft.com/en-us/library/aa730880(vs.80).aspx) was reintroduced with Service Pack 1; Visual Studio 2008 offers both project models.</span></span> <span data-ttu-id="a19d3-187">Visual Web Developer 2005 и 2008 выпусков, однако поддерживают только проекты веб-сайтов.</span><span class="sxs-lookup"><span data-stu-id="a19d3-187">The Visual Web Developer 2005 and 2008 editions, however, only support Web Site Projects.</span></span> <span data-ttu-id="a19d3-188">Я использую модели проекта веб-сайта для свои примеры в этой серии учебника.</span><span class="sxs-lookup"><span data-stu-id="a19d3-188">I use the Web Site Project model for my demos in this tutorial series.</span></span> <span data-ttu-id="a19d3-189">Если используется не Express edition и хотите вместо этого использовать модель проекта веб-приложения, вы можете сделать это, но имейте в виду, что может быть некоторые несоответствия между отображаемые на экране и действия, которые необходимо выполнить, и показано снимки экрана и инструкций в этих учебниках NS.</span><span class="sxs-lookup"><span data-stu-id="a19d3-189">If you are using a non-Express edition and want to use the Web Application Project model instead, feel free to do so but be aware that there may be some discrepancies between what you see on your screen and the steps you must take versus the screen shots shown and instructions provided in these tutorials.</span></span>


<span data-ttu-id="a19d3-190">[![Создать новый файл на основе системы веб-сайта](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-190">[![Create a New File System-Based Web Site](creating-a-site-wide-layout-using-master-pages-cs/_static/image9.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image8.png)</span></span>

<span data-ttu-id="a19d3-191">**Рисунок 04**: Создание веб-сайта New File System-Based ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-191">**Figure 04**: Create a New File System-Based Web Site  ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image10.png))</span></span>


<span data-ttu-id="a19d3-192">Добавьте главной страницы сайта в корневую папку, щелкните правой кнопкой мыши имя проекта и добавить новый элемент и выбрав шаблон главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-192">Next, add a master page to the site in the root directory by right-clicking on the Project name, choosing Add New Item, and selecting the Master Page template.</span></span> <span data-ttu-id="a19d3-193">Обратите внимание, что главные страницы заканчиваться расширением `.master`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-193">Note that master pages end with the extension `.master`.</span></span> <span data-ttu-id="a19d3-194">Имя этой новой главной страницы `Site.master` и нажмите кнопку Добавить.</span><span class="sxs-lookup"><span data-stu-id="a19d3-194">Name this new master page `Site.master` and click Add.</span></span>


<span data-ttu-id="a19d3-195">[![Добавить главную страницу Site.master на веб-сайт с именем](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-195">[![Add a Master Page Named Site.master to the Website](creating-a-site-wide-layout-using-master-pages-cs/_static/image12.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image11.png)</span></span>

<span data-ttu-id="a19d3-196">**Рисунок 05**: Добавление страницы Master именованных `Site.master` на веб-сайт ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-196">**Figure 05**: Add a Master Page Named `Site.master` to the Website ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image13.png))</span></span>


<span data-ttu-id="a19d3-197">Добавление нового файла главной страницы через Visual Web Developer создает главную страницу следующей декларативной разметкой:</span><span class="sxs-lookup"><span data-stu-id="a19d3-197">Adding a new master page file through Visual Web Developer creates a master page with the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="a19d3-198">Первая строка в декларативная разметка [ `@Master` директивы](https://msdn.microsoft.com/en-us/library/ms228176.aspx).</span><span class="sxs-lookup"><span data-stu-id="a19d3-198">The first line in the declarative markup is the [`@Master` directive](https://msdn.microsoft.com/en-us/library/ms228176.aspx).</span></span> <span data-ttu-id="a19d3-199">`@Master` Аналогична директиве [ `@Page` директивы](https://msdn.microsoft.com/en-us/library/ydy4x04a.aspx) , которая отображается на страницах ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a19d3-199">The `@Master` directive is similar to the [`@Page` directive](https://msdn.microsoft.com/en-us/library/ydy4x04a.aspx) that appears in ASP.NET pages.</span></span> <span data-ttu-id="a19d3-200">Он определяет серверные языка (C#) и сведения о расположении и наследования класса кода программной части главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-200">It defines the server-side language (C#) and information about the location and inheritance of the master page's code-behind class.</span></span>

<span data-ttu-id="a19d3-201">`DOCTYPE` И декларативная разметка страницы отображается под `@Master` директивы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-201">The `DOCTYPE` and the page's declarative markup appears beneath the `@Master` directive.</span></span> <span data-ttu-id="a19d3-202">На этой странице доступны статическим HTML вместе с четырьмя серверных элементов управления:</span><span class="sxs-lookup"><span data-stu-id="a19d3-202">The page includes static HTML along with four server-side controls:</span></span>

- <span data-ttu-id="a19d3-203">**Веб-формы ( `<form runat="server">`)** — так как все страницы ASP.NET обычно имеют веб-формы - и так, как Главная страница может включать веб-элементов управления, которые должны находиться в пределах веб-формы - следует добавить веб-формы на главной странице (вместо добавления веб-формы для вставки образом страницы содержимого).</span><span class="sxs-lookup"><span data-stu-id="a19d3-203">**A Web Form (the `<form runat="server">`)** - because all ASP.NET pages typically have a Web Form - and because the master page may include Web controls that must appear within a Web Form - be sure to add the Web Form to your master page (rather than adding a Web Form to each content page).</span></span>
- <span data-ttu-id="a19d3-204">**Элемент управления ContentPlaceHolder `ContentPlaceHolder1`**  -ContentPlaceHolder элемент управления отображается в веб-формы и служит в качестве области для содержимого страницы пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="a19d3-204">**A ContentPlaceHolder control named `ContentPlaceHolder1`** - this ContentPlaceHolder control appears within the Web Form and serves as the region for the content page's user interface.</span></span>
- <span data-ttu-id="a19d3-205">**На стороне сервера `<head>` элемент** - `<head>` элемент имеет `runat="server"` атрибут доступности через серверный код.</span><span class="sxs-lookup"><span data-stu-id="a19d3-205">**A server-side `<head>` element** - the `<head>` element has the `runat="server"` attribute, making it accessible through server-side code.</span></span> <span data-ttu-id="a19d3-206">`<head>` Элемент реализуется таким образом, чтобы заголовок страницы и другие `<head>`-, связанных с разметки может добавить или изменить программным способом.</span><span class="sxs-lookup"><span data-stu-id="a19d3-206">The `<head>` element is implemented this way so that the page's title and other `<head>`-related markup may be added or adjusted programmatically.</span></span> <span data-ttu-id="a19d3-207">Например, установка страницы ASP.NET `Title` изменения свойств `<title>` элемент подготавливается к просмотру модулем `<head>` серверного элемента управления.</span><span class="sxs-lookup"><span data-stu-id="a19d3-207">For example, setting an ASP.NET page's `Title` property changes the `<title>` element rendered by the `<head>` server control.</span></span>
- <span data-ttu-id="a19d3-208">**Элемент управления ContentPlaceHolder `head`**  -ContentPlaceHolder элемент управления отображается в `<head>` сервера управления и может использоваться декларативно добавлять содержимое в `<head>` элемент.</span><span class="sxs-lookup"><span data-stu-id="a19d3-208">**A ContentPlaceHolder control named `head`** - this ContentPlaceHolder control appears within the `<head>` server control and can be used to declaratively add content to the `<head>` element.</span></span>

<span data-ttu-id="a19d3-209">Это декларативная разметка главной страницы по умолчанию служит в качестве отправной точки для проектирования главных страниц.</span><span class="sxs-lookup"><span data-stu-id="a19d3-209">This default master page declarative markup serves as a starting point for designing your own master pages.</span></span> <span data-ttu-id="a19d3-210">Вы можете изменить код HTML или добавление дополнительных веб-элементы управления или ContentPlaceHolders на главную страницу.</span><span class="sxs-lookup"><span data-stu-id="a19d3-210">Feel free to edit the HTML or to add additional Web controls or ContentPlaceHolders to the master page.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-211">При проектировании главной странице убедитесь, что главная страница содержит веб-формы и, по крайней мере один элемент управления ContentPlaceHolder отображается в этой веб-формы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-211">When designing a master page make sure that the master page contains a Web Form and that at least one ContentPlaceHolder control appears within this Web Form.</span></span>


### <a name="creating-a-simple-site-layout"></a><span data-ttu-id="a19d3-212">Создание простого узла структуры</span><span class="sxs-lookup"><span data-stu-id="a19d3-212">Creating a Simple Site Layout</span></span>

<span data-ttu-id="a19d3-213">Давайте разверните `Site.master`элемента по умолчанию декларативная разметка для создания макета сайта, где все страницы имеют: общие заголовок; в левом столбце навигации, новости и другое содержимое всего сайта; и нижнего колонтитула, отображает значок «На платформе с Microsoft ASP.NET».</span><span class="sxs-lookup"><span data-stu-id="a19d3-213">Let's expand `Site.master`'s default declarative markup to create a site layout where all pages share: a common header; a left column with navigation, news and other site-wide content; and a footer that displays the "Powered by Microsoft ASP.NET" icon.</span></span> <span data-ttu-id="a19d3-214">Рис. 6 показан результат главной страницы, при просмотре одного из его страниц с помощью браузера.</span><span class="sxs-lookup"><span data-stu-id="a19d3-214">Figure 6 shows the end result of the master page when one of its content pages is viewed through a browser.</span></span> <span data-ttu-id="a19d3-215">Относится только к просматриваемую страницу области красным кружке на рис. 6 (`Default.aspx`); другое содержимое определены в главной страницы и поэтому согласованность на всех страницах содержимого.</span><span class="sxs-lookup"><span data-stu-id="a19d3-215">The red circled region in Figure 6 is specific to the page being visited (`Default.aspx`); the other content is defined in the master page and therefore consistent across all content pages.</span></span>


<span data-ttu-id="a19d3-216">[![Главная страница определяет разметку для слева, верхней и нижней части](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-216">[![The Master Page Defines the Markup for the Top, Left, and Bottom Portions](creating-a-site-wide-layout-using-master-pages-cs/_static/image15.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image14.png)</span></span>

<span data-ttu-id="a19d3-217">**На рисунке 06**: главная страница определяет разметку для слева, верхней и нижней части ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-217">**Figure 06**: The Master Page Defines the Markup for the Top, Left, and Bottom Portions ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image16.png))</span></span>


<span data-ttu-id="a19d3-218">Для получения узла макета, показанные на рис. 6, начните с обновления `Site.master` главную страницу, чтобы он содержал следующий декларативная разметка:</span><span class="sxs-lookup"><span data-stu-id="a19d3-218">To achieve the site layout shown in Figure 6, start by updating the `Site.master` master page so that it contains the following declarative markup:</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="a19d3-219">Макет главной страницы определяется с помощью ряда `<div>` HTML-элементов.</span><span class="sxs-lookup"><span data-stu-id="a19d3-219">The master page's layout is defined using a series of `<div>` HTML elements.</span></span> <span data-ttu-id="a19d3-220">`topContent` `<div>` Содержит разметку, которая отображается в верхней части каждой страницы, хотя `mainContent`, `leftContent`, и `footerContent` `<div>` s используются для отображения содержимого страницы, левом столбце и «на платформе с Майкрософт Значок ASP.NET» соответственно.</span><span class="sxs-lookup"><span data-stu-id="a19d3-220">The `topContent` `<div>` contains the markup that appears at the top of each page, while the `mainContent`, `leftContent`, and `footerContent` `<div>` s are used to display the page's content, the left column, and the "Powered by Microsoft ASP.NET" icon, respectively.</span></span> <span data-ttu-id="a19d3-221">Помимо добавления этих `<div>` элементов, также переименовал `ID` свойство основным элементом управления ContentPlaceHolder из `ContentPlaceHolder1` для `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-221">In addition to adding these `<div>` elements, I also renamed the `ID` property of the primary ContentPlaceHolder control from `ContentPlaceHolder1` to `MainContent`.</span></span>

<span data-ttu-id="a19d3-222">Правила форматирования и макета для них различные `<div>` элементы выраженная в [каскадной таблицы стилей (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) файл `Styles.css`, которой указываются с помощью &lt;ссылку&gt; элемент в Главная страница &lt;head&gt; элемента.</span><span class="sxs-lookup"><span data-stu-id="a19d3-222">The formatting and layout rules for these assorted `<div>` elements is spelled out in the [Cascading Stylesheet (CSS)](http://en.wikipedia.org/wiki/Cascading_Style_Sheets) file `Styles.css`, which is specified via a &lt;link&gt; element in the master page's &lt;head&gt; element.</span></span> <span data-ttu-id="a19d3-223">Эти различные правила определяют внешний вид каждого `<div>` элемента указано выше.</span><span class="sxs-lookup"><span data-stu-id="a19d3-223">These various rules define the look and feel of each `<div>` element noted above.</span></span> <span data-ttu-id="a19d3-224">Например `topContent` `<div>` элемент, который отображает текст «Учебники Master страниц» и ссылка, имеет правилах форматирования, указанные в `Styles.css` следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a19d3-224">For example, the `topContent` `<div>` element, which displays the "Master Pages Tutorials" text and link, has its formatting rules specified in `Styles.css` as follows:</span></span>

[!code-css[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample3.css)]

<span data-ttu-id="a19d3-225">Если вы следуете на компьютере, необходимо будет загрузить сопутствующий код этого учебника и добавить `Styles.css` файл в проект.</span><span class="sxs-lookup"><span data-stu-id="a19d3-225">If you are following along at your computer, you will need to download this tutorial's accompanying code and add the `Styles.css` file to your project.</span></span> <span data-ttu-id="a19d3-226">Аналогичным образом также необходимо будет создать папку с именем изображения и копирования значок «На платформе с Microsoft ASP.NET» с демонстрационной загруженного веб-сайта в проект.</span><span class="sxs-lookup"><span data-stu-id="a19d3-226">Similarly, you will also need to create a folder named Images and copy the "Powered by Microsoft ASP.NET" icon from the downloaded demo website to your project.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-227">Обсуждение CSS и форматирования веб-страница выходит за рамки данной статьи.</span><span class="sxs-lookup"><span data-stu-id="a19d3-227">A discussion of CSS and web page formatting is beyond the scope of this article.</span></span> <span data-ttu-id="a19d3-228">Дополнительные сведения о CSS извлечь [учебники CSS](http://www.w3schools.com/css/default.asp) в [W3Schools.com](http://www.w3schools.com/). Я также рекомендую загрузить сопутствующий код этого учебника и работать с параметры CSS в `Styles.css` чтобы увидеть влияние различных правил форматирования.</span><span class="sxs-lookup"><span data-stu-id="a19d3-228">For more on CSS, check out the [CSS Tutorials](http://www.w3schools.com/css/default.asp) at [W3Schools.com](http://www.w3schools.com/). I also encourage you to download this tutorial's accompanying code and play with the CSS settings in `Styles.css` to see the effects of different formatting rules.</span></span>


### <a name="creating-a-master-page-using-an-existing-design-template"></a><span data-ttu-id="a19d3-229">Создание с помощью существующего шаблона конструирования главной страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-229">Creating a Master Page Using an Existing Design Template</span></span>

<span data-ttu-id="a19d3-230">С годами создали несколько веб-приложений ASP.NET для малых средних компаний.</span><span class="sxs-lookup"><span data-stu-id="a19d3-230">Over the years I've built a number of ASP.NET web applications for small- to medium-sized companies.</span></span> <span data-ttu-id="a19d3-231">Некоторые клиентские компьютеры были существующий макет сайта, они хотели использовать; другие наняли конструктор надлежащей графики.</span><span class="sxs-lookup"><span data-stu-id="a19d3-231">Some of my clients had an existing site layout they wanted to use; others hired a competent graphics designer.</span></span> <span data-ttu-id="a19d3-232">Некоторые уровню мне создать макет веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="a19d3-232">A few entrusted me to design the website layout.</span></span> <span data-ttu-id="a19d3-233">Как можно видеть на рисунке 6, управление задачами программисту макет веб-сайта обычно статистику, как ваш бухгалтер выполнять open-heart surgery, а ваш doctor налогов.</span><span class="sxs-lookup"><span data-stu-id="a19d3-233">As you can tell by Figure 6, tasking a programmer to design a website's layout is usually as wise as having your accountant perform open-heart surgery while your doctor does your taxes.</span></span>

<span data-ttu-id="a19d3-234">К счастью существует innumerous веб-сайты, которые предлагают бесплатные шаблоны проектирования HTML — Google вернул более шести миллионов результатов поиска термина «шаблоны бесплатные веб-сайта».</span><span class="sxs-lookup"><span data-stu-id="a19d3-234">Fortunately, there are innumerous websites that offer free HTML design templates - Google returned more than six million results for the search term "free website templates."</span></span> <span data-ttu-id="a19d3-235">Мои любимые из них она [OpenDesigns.org](http://opendesigns.org/). После нахождения шаблона веб-сайта, но следует добавить файлов CSS и изображений в проект веб-сайта и интегрировать шаблона HTML на главную страницу.</span><span class="sxs-lookup"><span data-stu-id="a19d3-235">One of my favorite ones is [OpenDesigns.org](http://opendesigns.org/). Once you find a website template you like, add the CSS files and images to your website project and integrate the template's HTML into your master page.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-236">Корпорация Майкрософт также предлагает ряд [освободить ASP.NET запустить набор шаблонов](https://msdn.microsoft.com/en-us/asp.net/aa336613.aspx) , интегрировать в диалоговом окне нового веб-сайта в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a19d3-236">Microsoft also offers a number of [free ASP.NET Design Start Kit Templates](https://msdn.microsoft.com/en-us/asp.net/aa336613.aspx) that integrate into the New Web Site dialog box in Visual Studio.</span></span>


## <a name="step-2-creating-associated-content-pages"></a><span data-ttu-id="a19d3-237">Шаг 2: Создание связанного содержимого страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-237">Step 2: Creating Associated Content Pages</span></span>

<span data-ttu-id="a19d3-238">С главной страницы создан мы готовы приступить к созданию страницы ASP.NET, привязанные к главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-238">With the master page created, we are ready to start creating ASP.NET pages that are bound to the master page.</span></span> <span data-ttu-id="a19d3-239">Такие страницы называются *содержимого страницы*.</span><span class="sxs-lookup"><span data-stu-id="a19d3-239">Such pages are referred to as *content pages*.</span></span>

<span data-ttu-id="a19d3-240">Давайте добавьте новую страницу ASP.NET в проект и привяжите его к `Site.master` главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-240">Let's add a new ASP.NET page to the project and bind it to the `Site.master` master page.</span></span> <span data-ttu-id="a19d3-241">Щелкните правой кнопкой мыши имя проекта в обозревателе решений и выберите Добавить новый элемент.</span><span class="sxs-lookup"><span data-stu-id="a19d3-241">Right-click on the project name in Solution Explorer and choose the Add New Item option.</span></span> <span data-ttu-id="a19d3-242">Выберите шаблон веб-формы, введите имя `About.aspx`и установите флажок «Выбрать главную страницу», как показано на рис. 7.</span><span class="sxs-lookup"><span data-stu-id="a19d3-242">Select the Web Form template, enter the name `About.aspx`, and then check the "Select master page" checkbox as shown in Figure 7.</span></span> <span data-ttu-id="a19d3-243">При этом отображается Select главной страницы диалоговое окно поле (см. рис. 8), в котором можно выбрать главную страницу для использования.</span><span class="sxs-lookup"><span data-stu-id="a19d3-243">Doing so will display the Select a Master Page dialog box (see Figure 8) from where you can choose the master page to use.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-244">Если вы создали веб-сайта ASP.NET, с помощью модели проекта веб-приложения, вместо модели проекта веб-сайта не появится флажок «Выбрать главную страницу» в диалоговом окне Добавление нового элемента, показанный на рисунке 7.</span><span class="sxs-lookup"><span data-stu-id="a19d3-244">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 7.</span></span> <span data-ttu-id="a19d3-245">Для создания содержимого страницы, когда проект веб-приложения с помощью модели вы необходимо выбрать шаблон веб-содержимого формы вместо шаблона веб-форму.</span><span class="sxs-lookup"><span data-stu-id="a19d3-245">To create a content page when using the Web Application Project model you must choose the Web Content Form template instead of the Web Form template.</span></span> <span data-ttu-id="a19d3-246">После выбора шаблона веб-содержимого формы и нажмите кнопку Добавить, то выберите главной страницы, появится диалоговое окно показано на рисунке 8.</span><span class="sxs-lookup"><span data-stu-id="a19d3-246">After selecting the Web Content Form template and clicking Add, the same Select a Master Page dialog box shown in Figure 8 will appear.</span></span>


<span data-ttu-id="a19d3-247">[![Добавление новой страницы содержимого](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-247">[![Add a New Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image18.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image17.png)</span></span>

<span data-ttu-id="a19d3-248">**На рисунке 07**: Добавление новой страницы содержимого ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-248">**Figure 07**: Add a New Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image19.png))</span></span>


<span data-ttu-id="a19d3-249">[![Выберите Site.master главной страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-249">[![Select the Site.master Master Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image21.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image20.png)</span></span>

<span data-ttu-id="a19d3-250">**На рисунке 08**: выберите `Site.master` главной страницы ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-250">**Figure 08**: Select the `Site.master` Master Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image22.png))</span></span>


<span data-ttu-id="a19d3-251">Как показано на следующем декларативная разметка, новая страница содержимого содержит `@Page` директивы, что указывает обратно его шаблон страницы и управления содержимым для каждого из элементов управления ContentPlaceHolder на главной странице.</span><span class="sxs-lookup"><span data-stu-id="a19d3-251">As the following declarative markup shows, a new content page contains a `@Page` directive that points back to its master page and a Content control for each of the master page's ContentPlaceHolder controls.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="a19d3-252">В разделе «Создание простая структура узла» в шаге 1 переименован `ContentPlaceHolder1` для `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-252">In the "Creating a Simple Site Layout" section in Step 1 I renamed `ContentPlaceHolder1` to `MainContent`.</span></span> <span data-ttu-id="a19d3-253">Если вы не переименовали управления ContentPlaceHolder `ID` таким же образом декларативная разметка страницы содержимого будут немного отличаться от разметки, показанном выше.</span><span class="sxs-lookup"><span data-stu-id="a19d3-253">If you did not rename this ContentPlaceHolder control's `ID` in the same way, your content page's declarative markup will differ slightly from the markup shown above.</span></span> <span data-ttu-id="a19d3-254">А именно, второй содержимого элемента управления `ContentPlaceHolderID` отразят `ID` соответствующего ContentPlaceHolder управления на главной странице.</span><span class="sxs-lookup"><span data-stu-id="a19d3-254">Namely, the second Content control's `ContentPlaceHolderID` will reflect the `ID` of the corresponding ContentPlaceHolder control in your master page.</span></span>


<span data-ttu-id="a19d3-255">При подготовке к просмотру страницу содержимого, подсистема ASP.NET необходимо объединять страницы содержимого элементов управления с элементами управления ContentPlaceHolder главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-255">When rendering a content page, the ASP.NET engine must fuse the page's Content controls with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="a19d3-256">Обработчик ASP.NET определяет страницы содержимого главной страницы `@Page` директивы `MasterPageFile` атрибута.</span><span class="sxs-lookup"><span data-stu-id="a19d3-256">The ASP.NET engine determines the content page's master page from the `@Page` directive's `MasterPageFile` attribute.</span></span> <span data-ttu-id="a19d3-257">Как показано выше разметки, привязанного к этой странице содержимого `~/Site.master`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-257">As the above markup shows, this content page is bound to `~/Site.master`.</span></span>

<span data-ttu-id="a19d3-258">Поскольку главная страница имеет два элемента управления ContentPlaceHolder - `head` и `MainContent` -Visual Web Developer создается двух элементов управления содержимым.</span><span class="sxs-lookup"><span data-stu-id="a19d3-258">Because the master page has two ContentPlaceHolder controls - `head` and `MainContent` - Visual Web Developer generated two Content controls.</span></span> <span data-ttu-id="a19d3-259">Каждый элемент управления содержимым, ссылается на определенный ContentPlaceHolder через его `ContentPlaceHolderID` свойство.</span><span class="sxs-lookup"><span data-stu-id="a19d3-259">Each Content control references a particular ContentPlaceHolder via its `ContentPlaceHolderID` property.</span></span>

<span data-ttu-id="a19d3-260">Где блеска главных страниц за предыдущие способы шаблона сайта — с их поддержку во время разработки.</span><span class="sxs-lookup"><span data-stu-id="a19d3-260">Where master pages shine over previous site-wide template techniques is with their design-time support.</span></span> <span data-ttu-id="a19d3-261">Рис. 9 показана `About.aspx` страницы содержимого, при просмотре через представление конструктора Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="a19d3-261">Figure 9 shows the `About.aspx` content page when viewed through Visual Web Developer's Design view.</span></span> <span data-ttu-id="a19d3-262">Обратите внимание, что пока отображается содержимое главной страницы, он отображается серым и не может быть изменено.</span><span class="sxs-lookup"><span data-stu-id="a19d3-262">Note that while the master page content is visible, it is grayed out and cannot be modified.</span></span> <span data-ttu-id="a19d3-263">Элементы управления содержимым, соответствующий ContentPlaceHolders главной страницы будут, тем не менее, для редактирования.</span><span class="sxs-lookup"><span data-stu-id="a19d3-263">The Content controls corresponding to the master page's ContentPlaceHolders are, however, editable.</span></span> <span data-ttu-id="a19d3-264">А так же, как с любой другой страницы ASP.NET, можно создать интерфейс страницы содержимого, добавив веб-элементы управления через представления источника или конструктора.</span><span class="sxs-lookup"><span data-stu-id="a19d3-264">And just like with any other ASP.NET page, you can create the content page's interface by adding Web controls through the Source or Design views.</span></span>


<span data-ttu-id="a19d3-265">[![Страница содержимого режим конструктора отображает содержимое постранично, главной страницы](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-265">[![The Content Page's Design View Displays Both the Page-Specific and Master Page Contents](creating-a-site-wide-layout-using-master-pages-cs/_static/image24.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image23.png)</span></span>

<span data-ttu-id="a19d3-266">**На рисунке 09**: содержимого страницы конструктора представление отображает как определенной страницы и содержимое страницы Master ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-266">**Figure 09**: The Content Page's Design View Displays Both the Page-Specific and Master Page Contents ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image25.png))</span></span>


### <a name="adding-markup-and-web-controls-to-the-content-page"></a><span data-ttu-id="a19d3-267">Добавление разметки и веб-элементы управления на страницу содержимого</span><span class="sxs-lookup"><span data-stu-id="a19d3-267">Adding Markup and Web Controls to the Content Page</span></span>

<span data-ttu-id="a19d3-268">Теперь пора создать часть содержимого для `About.aspx` страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-268">Take a moment to create some content for the `About.aspx` page.</span></span> <span data-ttu-id="a19d3-269">Как видно на рис. 10, введенный с заголовком «О автор» и несколько абзацев текста, но можно добавить веб-элементов управления, слишком.</span><span class="sxs-lookup"><span data-stu-id="a19d3-269">As you can see in Figure 10, I entered an "About the Author" heading and a couple of paragraphs of text, but feel free to add Web controls, too.</span></span> <span data-ttu-id="a19d3-270">После создания этот интерфейс, посетите `About.aspx` страницу в обозревателе.</span><span class="sxs-lookup"><span data-stu-id="a19d3-270">After creating this interface, visit the `About.aspx` page through a browser.</span></span>


<span data-ttu-id="a19d3-271">[![Перейдите на страницу About.aspx через браузер](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-271">[![Visit the About.aspx Page Through a Browser](creating-a-site-wide-layout-using-master-pages-cs/_static/image27.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image26.png)</span></span>

<span data-ttu-id="a19d3-272">**Рис. 10**: посетите `About.aspx` страницы через браузер ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-272">**Figure 10**: Visit the `About.aspx` Page Through a Browser ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image28.png))</span></span>


<span data-ttu-id="a19d3-273">Важно понимать, что запрашиваемая страница содержимого и связанные с ней главной страницы совмещенного и подготовке к просмотру в целом полностью на веб-сервере.</span><span class="sxs-lookup"><span data-stu-id="a19d3-273">It is important to understand that the requested content page and its associated master page are fused and rendered as a whole entirely on the web server.</span></span> <span data-ttu-id="a19d3-274">Браузер пользователя отправляется полученный, плавким HTML.</span><span class="sxs-lookup"><span data-stu-id="a19d3-274">The end user's browser is then sent the resulting, fused HTML.</span></span> <span data-ttu-id="a19d3-275">Чтобы проверить это, просмотр HTML, полученных с помощью браузера, перейдите в меню «Вид» и выбрав источник.</span><span class="sxs-lookup"><span data-stu-id="a19d3-275">To verify this, view the HTML received by the browser by going to the View menu and choosing Source.</span></span> <span data-ttu-id="a19d3-276">Обратите внимание, что нет кадров или другие специальные методы для отображения двух разных веб-страниц в одном окне.</span><span class="sxs-lookup"><span data-stu-id="a19d3-276">Note that there are no frames or any other specialized techniques for displaying two different web pages in a single window.</span></span>

### <a name="binding-a-master-page-to-an-existing-aspnet-page"></a><span data-ttu-id="a19d3-277">Привязка к существующую страницу ASP.NET главной страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-277">Binding a Master Page to an Existing ASP.NET Page</span></span>

<span data-ttu-id="a19d3-278">Как было показано на этом шаге, добавление новой страницы содержимого к веб-приложению ASP.NET просто установив флажок «Выбрать главную страницу» и выбора главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-278">As we saw in this step, adding a new content page to an ASP.NET web application is as easy as checking the "Select master page" checkbox and picking the master page.</span></span> <span data-ttu-id="a19d3-279">К сожалению преобразование существующую страницу ASP.NET в главной страницы не так просто.</span><span class="sxs-lookup"><span data-stu-id="a19d3-279">Unfortunately, converting an existing ASP.NET page to a master page is not as easy.</span></span>

<span data-ttu-id="a19d3-280">Для привязки к существующей страницы ASP.NET главной страницы необходимо выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="a19d3-280">To bind a master page to an existing ASP.NET page you need to perform the following steps:</span></span>

1. <span data-ttu-id="a19d3-281">Добавить `MasterPageFile` для страницы ASP.NET атрибута `@Page` директивы, указывающий его соответствующей главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-281">Add the `MasterPageFile` attribute to the ASP.NET page's `@Page` directive, pointing it to the appropriate master page.</span></span>
2. <span data-ttu-id="a19d3-282">Добавление элементов управления содержимым для каждого ContentPlaceHolders на главной странице.</span><span class="sxs-lookup"><span data-stu-id="a19d3-282">Add Content controls for each of the ContentPlaceHolders in the master page.</span></span>
3. <span data-ttu-id="a19d3-283">Выборочно Вырезать и вставить страницу ASP.NET существующее содержимое в соответствующие элементы управления содержимым.</span><span class="sxs-lookup"><span data-stu-id="a19d3-283">Selectively cut and paste the ASP.NET page's existing content into the appropriate Content controls.</span></span> <span data-ttu-id="a19d3-284">Я говорю «выборочно» здесь так, как страница ASP.NET, скорее всего содержит разметку, которая уже выражается с главной страницы, такие как `DOCTYPE`, `<html>` элемент и веб-формы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-284">I say "selectively" here because the ASP.NET page likely contains markup that's already expressed by the master page, such as the `DOCTYPE`, the `<html>` element, and the Web Form.</span></span>

<span data-ttu-id="a19d3-285">Пошаговые инструкции по этому процессу, а также снимков экрана извлечь [Скотт Гатри](https://weblogs.asp.net/scottgu/) [с помощью главных страниц и переходов](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx) учебника.</span><span class="sxs-lookup"><span data-stu-id="a19d3-285">For step-by-step instructions on this process along with screen shots, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s [Using Master Pages and Site Navigation](http://webproject.scottgu.com/CSharp/MasterPages/MasterPages.aspx) tutorial.</span></span> <span data-ttu-id="a19d3-286">«Обновление `Default.aspx` и `DataSample.aspx` использовать главную страницу «разделе подробно описаны следующие действия.</span><span class="sxs-lookup"><span data-stu-id="a19d3-286">The "Update `Default.aspx` and `DataSample.aspx` to use the Master Page" section details these steps.</span></span>

<span data-ttu-id="a19d3-287">Поскольку это гораздо проще создавать новые страницы содержимого, чем для преобразования существующих страниц ASP.NET в страницы содержимого, рекомендуется, каждый раз при создании нового веб-сайта ASP.NET добавить главной страницы сайта.</span><span class="sxs-lookup"><span data-stu-id="a19d3-287">Because it is much easier to create new content pages than it is to convert existing ASP.NET pages into content pages, I recommend that whenever you create a new ASP.NET website add a master page to the site.</span></span> <span data-ttu-id="a19d3-288">Привязка всех новых страниц ASP.NET для этой главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-288">Bind all new ASP.NET pages to this master page.</span></span> <span data-ttu-id="a19d3-289">Не беспокойтесь, если начальный Главная страница является очень простой или простой; можно обновить позднее главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-289">Don't worry if the initial master page is very simple or plain; you can update the master page later.</span></span>

> [!NOTE]
> <span data-ttu-id="a19d3-290">При создании нового приложения ASP.NET, Visual Web Developer добавляет `Default.aspx` страницы, не привязанный к главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-290">When creating a new ASP.NET application, Visual Web Developer adds a `Default.aspx` page that isn't bound to a master page.</span></span> <span data-ttu-id="a19d3-291">Если вы хотите практике преобразования существующую страницу ASP.NET в страницы содержимого, действуйте и сделать это с `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-291">If you want to practice converting an existing ASP.NET page into a content page, go ahead and do so with `Default.aspx`.</span></span> <span data-ttu-id="a19d3-292">Кроме того, можно удалить `Default.aspx` и затем снова добавьте его, но на этот раз, установив флажок «Выбрать главную страницу».</span><span class="sxs-lookup"><span data-stu-id="a19d3-292">Alternatively, you can delete `Default.aspx` and then re-add it, but this time checking the "Select master page" checkbox.</span></span>


## <a name="step-3-updating-the-master-pages-markup"></a><span data-ttu-id="a19d3-293">Шаг 3: Обновление разметки главной страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-293">Step 3: Updating the Master Page's Markup</span></span>

<span data-ttu-id="a19d3-294">Одно из основных преимуществ главные страницы —, что одна главная страница может использоваться для определения всей разметки для различных страниц на сайте.</span><span class="sxs-lookup"><span data-stu-id="a19d3-294">One of the primary benefits of master pages is that a single master page may be used to define the overall layout for numerous pages on the site.</span></span> <span data-ttu-id="a19d3-295">Таким образом при обновлении внешний вид и поведение сайта требуется обновить один файл - главной страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-295">Therefore, updating the site's look and feel requires updating a single file - the master page.</span></span>

<span data-ttu-id="a19d3-296">Для иллюстрации этого поведения, давайте обновить нашей главной страницы, чтобы включить текущую дату в верхней части левой.</span><span class="sxs-lookup"><span data-stu-id="a19d3-296">To illustrate this behavior, let's update our master page to include the current date in at the top of the left column.</span></span> <span data-ttu-id="a19d3-297">Добавить метку с именем `DateDisplay` для `leftContent` `<div>`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-297">Add a Label named `DateDisplay` to the `leftContent` `<div>`.</span></span>

[!code-aspx[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="a19d3-298">Создайте `Page_Load` обработчик событий для базы данных master и добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="a19d3-298">Next, create a `Page_Load` event handler for the master page and add the following code:</span></span>

[!code-csharp[Main](creating-a-site-wide-layout-using-master-pages-cs/samples/sample6.cs)]

<span data-ttu-id="a19d3-299">Этот код задает метку `Text` свойство текущую дату и время в формате день недели, название месяца и двузначным днем (см. рис. 11).</span><span class="sxs-lookup"><span data-stu-id="a19d3-299">The above code sets the Label's `Text` property to the current date and time formatted as the day of the week, the name of the month, and the two-digit day (see Figure 11).</span></span> <span data-ttu-id="a19d3-300">Благодаря этому изменению повторное использование содержимого страницы.</span><span class="sxs-lookup"><span data-stu-id="a19d3-300">With this change, revisit one of your content pages.</span></span> <span data-ttu-id="a19d3-301">Как показано на рис. 11, разметка немедленно обновляется с учетом изменений в главную страницу.</span><span class="sxs-lookup"><span data-stu-id="a19d3-301">As Figure 11 shows, the resulting markup is immediately updated to include the change to the master page.</span></span>


<span data-ttu-id="a19d3-302">[![Изменения на главную страницу будут отражены при просмотре страницы содержимого](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="a19d3-302">[![The Changes to the Master Page are Reflected When Viewing the a Content Page](creating-a-site-wide-layout-using-master-pages-cs/_static/image30.png)](creating-a-site-wide-layout-using-master-pages-cs/_static/image29.png)</span></span>

<span data-ttu-id="a19d3-303">**Рис. 11**: изменения на главную страницу будут отражены при просмотре страницы содержимого ([Просмотр полноразмерное изображение](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="a19d3-303">**Figure 11**: The Changes to the Master Page are Reflected When Viewing the a Content Page ([Click to view full-size image](creating-a-site-wide-layout-using-master-pages-cs/_static/image31.png))</span></span>


> [!NOTE]
> <span data-ttu-id="a19d3-304">Как показано в этом примере, главные страницы может содержать серверные веб-элементы управления, код и обработчики событий.</span><span class="sxs-lookup"><span data-stu-id="a19d3-304">As this example illustrates, master pages may contain server-side Web controls, code, and event handlers.</span></span>


## <a name="summary"></a><span data-ttu-id="a19d3-305">Сводка</span><span class="sxs-lookup"><span data-stu-id="a19d3-305">Summary</span></span>

<span data-ttu-id="a19d3-306">Главные страницы позволяют разработчикам ASP.NET для создания согласованного макета-узла, который легко обновляется.</span><span class="sxs-lookup"><span data-stu-id="a19d3-306">Master pages enable ASP.NET developers to design a consistent site-wide layout that is easily updateable.</span></span> <span data-ttu-id="a19d3-307">Создание главных страниц и связанных страниц содержимого является просто создать стандартные страницы ASP.NET, как Visual Web Developer предлагает широкие возможности поддержки во время разработки.</span><span class="sxs-lookup"><span data-stu-id="a19d3-307">Creating master pages and their associated content pages is as simple as creating standard ASP.NET pages, as Visual Web Developer offers rich design-time support.</span></span>

<span data-ttu-id="a19d3-308">В примере главную страницу, созданную в этом учебнике было два элемента управления ContentPlaceHolder `head` и `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="a19d3-308">The master page example we created in this tutorial had two ContentPlaceHolder controls, `head` and `MainContent`.</span></span> <span data-ttu-id="a19d3-309">Мы только указанные разметку для `MainContent` в нашу страницу содержимого, однако контролировать ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="a19d3-309">We only specified markup for the `MainContent` ContentPlaceHolder control in our content page, however.</span></span> <span data-ttu-id="a19d3-310">В следующем уроке мы рассмотрим несколько содержимого с помощью элементов управления на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="a19d3-310">In the next tutorial we look at using multiple Content controls in the content page.</span></span> <span data-ttu-id="a19d3-311">Также показано, как определить по умолчанию разметки для содержимого элементов управления на главной странице, также как определение для переключения между использования значения по умолчанию разметки на главной страницы, а также предоставлять пользовательской разметки на странице содержимого.</span><span class="sxs-lookup"><span data-stu-id="a19d3-311">We also see how to define default markup for Content controls within the master page, as well as how to toggle between using the default markup defined in the master page and providing custom markup from the content page.</span></span>

<span data-ttu-id="a19d3-312">Программирование довольны!</span><span class="sxs-lookup"><span data-stu-id="a19d3-312">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a19d3-313">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="a19d3-313">Further Reading</span></span>

<span data-ttu-id="a19d3-314">Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="a19d3-314">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a19d3-315">ASP.NET для конструкторов: освободить шаблоны и рекомендации по разработке веб-сайтов ASP.NET с помощью веб-стандартам</span><span class="sxs-lookup"><span data-stu-id="a19d3-315">ASP.NET for Designers: Free Design Templates and Guidance on Building ASP.NET Websites Using Web Standards</span></span>](https://msdn.microsoft.com/en-us/asp.net/aa336602.aspx)
- [<span data-ttu-id="a19d3-316">Страницах</span><span class="sxs-lookup"><span data-stu-id="a19d3-316">ASP.NET Master Pages Overview</span></span>](https://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)
- [<span data-ttu-id="a19d3-317">Учебники каскадных таблиц стилей (CSS)</span><span class="sxs-lookup"><span data-stu-id="a19d3-317">Cascading Stylesheets (CSS) Tutorials</span></span>](http://www.w3schools.com/css/default.asp)
- [<span data-ttu-id="a19d3-318">Динамическое задание заголовка страницы</span><span class="sxs-lookup"><span data-stu-id="a19d3-318">Dynamically Setting the Page's Title</span></span>](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [<span data-ttu-id="a19d3-319">Главные страницы в ASP.NET</span><span class="sxs-lookup"><span data-stu-id="a19d3-319">Master Pages in ASP.NET</span></span>](http://www.odetocode.com/articles/419.aspx)
- [<span data-ttu-id="a19d3-320">Главные страницы статьи краткого руководства</span><span class="sxs-lookup"><span data-stu-id="a19d3-320">Master Pages QuickStart Tutorials</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="a19d3-321">Об авторе</span><span class="sxs-lookup"><span data-stu-id="a19d3-321">About the Author</span></span>

<span data-ttu-id="a19d3-322">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор по ASP/ASP.NET и основатель 4GuysFromRolla.com, работает с веб-технологиями Майкрософт с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="a19d3-322">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a19d3-323">Скотт — независимый консультант, trainer и записи.</span><span class="sxs-lookup"><span data-stu-id="a19d3-323">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a19d3-324">Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 3.5 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a19d3-324">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a19d3-325">Скотт может быть достигнута по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) или через его блог по [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="a19d3-325">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="a19d3-326">Благодарности</span><span class="sxs-lookup"><span data-stu-id="a19d3-326">Special Thanks To</span></span>

<span data-ttu-id="a19d3-327">Объясняются моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="a19d3-327">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="a19d3-328">Если Да, напишите мне по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="a19d3-328">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="a19d3-329">Вперед</span><span class="sxs-lookup"><span data-stu-id="a19d3-329">Next</span></span>](multiple-contentplaceholders-and-default-content-cs.md)
