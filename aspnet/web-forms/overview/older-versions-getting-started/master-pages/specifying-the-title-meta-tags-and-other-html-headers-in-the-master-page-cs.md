---
uid: web-forms/overview/older-versions-getting-started/master-pages/specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs
title: Задание заголовка, мета-теги и другие заголовки HTML на главной странице (C#) | Документы Microsoft
author: rick-anderson
description: Рассматриваются различные методы для определения assorted &lt;head&gt; элементы на главной странице, со страницы содержимого.
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/21/2008
ms.topic: article
ms.assetid: 0aa1c84f-c9e2-4699-b009-0e28643ecbc6
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 2f9399be5b95f608f0d635b69b132dcb1d27909a
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30891491"
---
<a name="specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-c"></a>Задание заголовка, мета-теги и другие заголовки HTML на главной странице (C#)
====================
по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Загрузить код](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_03_CS.zip) или [скачать PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_03_CS.pdf)

> Рассматриваются различные методы для определения assorted &lt;head&gt; элементы на главной странице, со страницы содержимого.


## <a name="introduction"></a>Вступление

У новых главных страниц, созданных в Visual Studio 2008, по умолчанию, два элемента управления ContentPlaceHolder: один с именем заголовка, а в `<head>` элементу; и один с именем `ContentPlaceHolder1`, помещенных в веб-форму. Назначение `ContentPlaceHolder1` является определение области в веб-формы, которые могут быть настроены на основе страницу за страницей. `head` ContentPlaceHolder включает страницы добавить настраиваемое содержимое для `<head>` раздела. (Конечно, эти два ContentPlaceHolders могут быть изменены или удалены, и могут быть добавлены дополнительные ContentPlaceHolder на главную страницу. Наш главной страницы `Site.master`, в настоящее время имеет четыре элемента управления ContentPlaceHolder.)

HTML `<head>` элемент служит для хранения сведений о веб-страницы документа, который не является частью самого документа. Сюда входят сведения, такие как заголовок веб-страницы, метаданные используемые поисковые системы или внутренней модулям и ссылки на внешние ресурсы, такие как веб-каналы RSS, JavaScript и CSS файлы. Некоторые из этих сведений может быть относящиеся ко всем страницам на веб-сайте. Например может потребоваться глобально импортировать эти же правила CSS и JavaScript файлы для каждой страницы ASP.NET. Однако существуют некоторые части `<head>` элемент, специфичные для страницы. Заголовок страницы — отличный пример.

В этом учебнике мы рассмотрим, как задать глобальные и конкретной странице `<head>` разметка раздела на главной странице и в его страниц.

## <a name="examining-the-master-pagesheadsection"></a>Изучение главной страницы`<head>`раздела

По умолчанию файл главной страницы созданные Visual Studio 2008 содержит следующую разметку в его `<head>` раздела:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample1.aspx)]

Обратите внимание, что `<head>` элемент содержит `runat="server"` атрибут, который указывает, что сервер управления (а не статическим HTML). Все страницы ASP.NET, являются производными от [ `Page` класса](https://msdn.microsoft.com/library/system.web.ui.page.aspx), который находится в `System.Web.UI` пространства имен. Этот класс содержит `Header` свойства, которое предоставляет доступ к странице `<head>` области. С помощью [ `Header` свойство](https://msdn.microsoft.com/library/system.web.ui.page.header.aspx) можно установить заголовок страницы ASP.NET или добавьте дополнительные разметку в готовом для просмотра `<head>` раздела. Это возможно, затем для настройки содержимого страницы `<head>` элемент путем написания фрагмента кода на странице `Page_Load` обработчика событий. Мы рассмотрим, как программно задать заголовок страницы в шаге 1.

Разметка, показанная в `<head>` элемент выше также включает элемент управления ContentPlaceHolder, с именем head. Этот элемент управления ContentPlaceHolder необязателен, как страницы содержимого можно добавить пользовательское содержимое для `<head>` элемент программными средствами. Это полезно, однако в случае, если требуется страницу содержимого для добавления разметки static в `<head>` как разметки static можно добавить элемент декларативно для соответствующего элемента управления содержимым, а не программным путем.

В дополнение к `<title>` элемент и head ContentPlaceHolder, главной страницы `<head>` должны содержать элемент `<head>`-уровне разметки, общие для всех страниц. В нашем сайте всех страниц используйте правила CSS, определенные в `Styles.css` файла. Следовательно, мы обновили `<head>` элемент в [ *создание макета-узла с главными страницами* ](creating-a-site-wide-layout-using-master-pages-cs.md) учебника, чтобы включить соответствующий `<link>` элемента. Наш `Site.master` текущей главной страницы `<head>` разметки показан ниже.


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample2.aspx)]

## <a name="step-1-setting-a-content-pages-title"></a>Шаг 1: Установка заголовка содержимого страницы

Заголовок веб-страницы указываются с помощью `<title>` элемента. Очень важно для установки заголовка на каждой странице соответствующее значение. При открытии страницы в браузере в строке заголовка отображается название. Кроме того при возможности закладок страницы, браузеры используют заголовок страницы как предлагаемое имя закладки. Кроме того Многие поисковые может отображать заголовок страницы для отображения результатов поиска.

> [!NOTE]
> По умолчанию Visual Studio устанавливает `<title>` элемент на главной странице «Без заголовка страницы». Аналогичным образом, имеют новые страницы ASP.NET их `<title>` слишком равным «Без заголовка страницы». Так как его можно легко забыть задать заголовок страницы соответствующее значение, существует много страниц в Интернете с заголовком «Untitled Page». Поиск веб-страницы с таким названием Google возвращает примерно 2,460,000 результаты. Даже Microsoft уязвим для публикации веб-страниц с заголовком «Untitled Page». На момент написания этой статьи поиска Google сообщил 236 таких веб-страниц в домен Microsoft.com.


Страницы ASP.NET можно определить его заголовок в одном из следующих способов:

- Установив значение непосредственно в `<title>` элемент
- С помощью `Title` атрибута в `<%@ Page %>` директивы
- Программной настройке страницы `Title` свойства с помощью следующего кода `Page.Title="title"` или `Page.Header.Title="title"`.

Содержимое страницы не имеют `<title>` элемента, как оно определено на главной странице. Таким образом, чтобы задать заголовок страницы содержимого можно использовать либо `<%@ Page %>` директивы `Title` атрибута или его программным способом.

### <a name="setting-the-pages-title-declaratively"></a>Задание заголовка страницы декларативно

Заголовок содержимого страницы можно задать декларативно с помощью `Title` атрибут [ `<%@ Page %>` директивы](https://msdn.microsoft.com/library/ydy4x04a.aspx). Это свойство можно задать путем непосредственного изменения `<%@ Page %>` директив или с помощью окна «Свойства». Давайте взглянем на оба подхода.

В представлении источника найдите `<%@ Page %>` директивы, в верхней части страницы декларативная разметка. `<%@ Page %>` Директивы `Default.aspx` ниже:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample3.aspx)]

`<%@ Page %>` Директива задает особые для страницы атрибуты, используемые обработчиком ASP.NET, если синтаксический анализ и компиляцию страницы. Сюда входят его файл главной страницы, местоположение своего файла кода и его заголовок, а также другую информацию.

По умолчанию при создании новой страницы содержимого Visual Studio устанавливает `Title` атрибута без имени страницы. Изменение `Default.aspx` `Title` атрибута из «Без заголовка страницы» на «Учебники страницы Master», а затем просмотрите страницу с помощью браузера. Рисунок 1 демонстрирует заголовке в браузере, который отражает новый заголовок страницы.


![Теперь отображается в строке заголовка браузера &quot;образец учебники страницы&quot; вместо &quot;без заголовка&quot;](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image1.png)

**На рисунке 01**: строка заголовка браузера теперь отображается «Учебники Master страницы» вместо «Без заголовка страницы»


Заголовок страницы также можно задать в окне свойств. В окне свойств выберите документ из раскрывающегося списка для нагрузки на уровне страницы свойств, которые включают `Title` свойство. На рисунке 2 представлен в окне «Свойства» после `Title` значение «Master страницы учебники».


![Заголовок в окне «Свойства» можно настроить слишком](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image2.png)

**На рисунке 02**: заголовок в окне «Свойства» можно настроить слишком


### <a name="setting-the-pages-title-programmatically"></a>Программная установка заголовок страницы

Главной страницы `<head runat="server">` разметку, преобразуется в [ `HtmlHead` класса](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlhead.aspx) экземпляра при отображении страницы обработчиком ASP.NET. `HtmlHead` Класс имеет [ `Title` свойство](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlhead.title.aspx) , значение которого будет отражено в отображаемых `<title>` элемента. Это свойство доступно из класс кода страницы ASP.NET с помощью `Page.Header.Title`; в этом же свойство можно получить через `Page.Title`.

На практике Программная установка заголовок страницы, перейдите в каталог `About.aspx` страницы кода класса и создайте обработчик событий для этой страницы `Load` событий. Затем задайте заголовок страницы в «образец учебники страницы:: о:: *даты*», где *даты* является текущая дата. После добавления этого кода вашего `Page_Load` обработчик событий должен выглядеть следующим образом:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample4.cs)]

На рисунке 3 показана строка заголовка браузера при посещении `About.aspx` страницы.


![Заголовок страницы программно набор и включает текущей даты](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image3.png)

**На рисунке 03**: заголовок страницы программно набор и включает текущей даты


## <a name="step-2-automatically-assigning-a-page-title"></a>Шаг 2: Автоматическое назначение заголовок страницы

Как было показано в шаге 1, заголовок страницы можно задать декларативно или программно. Если вы забыли явно изменить заголовок на более описательное имя, однако на странице будет заголовок по умолчанию «Без имени страница». В идеальном случае заголовок страницы устанавливается автоматически для нас, если мы явно указывать его значение. Например если во время выполнения заголовок страницы «Безымянный страница», мы хотим имеют заголовок автоматически обновится, чтобы быть таким же, как имя файла страницы ASP.NET. Хорошо то, с небольшим переднего плана работы, возможно, это могут быть автоматически присваивается заголовок.

Все веб-страницы ASP.NET, являются производными от `Page` класса в `System.Web.UI` пространства имен. `Page` Класс определяет минимальный набор функциональных возможностей, необходимых для страниц ASP.NET и предоставляет основные свойства, как `IsPostBack`, `IsValid`, `Request`, и `Response`, многие другие. Очень часто каждой страницы в веб-приложение требует дополнительные компоненты или функциональные возможности. Распространенным способом предоставления это является создание пользовательского базового класса страницы. Пользовательские базового класса страницы является создаваемый класс, производный от `Page` класса и включает дополнительные функциональные возможности. После создания этот базовый класс может иметь производные от него страниц ASP.NET (а не к `Page` класса), тем самым предложения расширенные функции для страниц ASP.NET.

В этом шаге мы создадим базовой страницы, который автоматически задает заголовок страницы к имени файла страницы ASP.NET, если заголовок не в противном случае было задано явно. Шаг 3 анализирует задание заголовка страницы, исходя из карты сайта.

> [!NOTE]
> Полное тестирование создания и использования классов пользовательских базовой страницы выходит за рамки этого учебника рядов. Дополнительные сведения см. в статье [с помощью пользовательский базовый класс для классов кода Your страниц ASP.NET](http://aspnet.4guysfromrolla.com/articles/041305-1.aspx).


### <a name="creating-the-base-page-class"></a>Создание базового класса страницы

Наш первой задачей является создание базового класса страницы, который является классом, который расширяет `Page` класса. Начните с добавления `App_Code` папки в проект, правой кнопкой мыши имя проекта в обозревателе решений и добавьте папку ASP.NET и затем выбрав `App_Code`. После этого щелкните правой кнопкой мыши `App_Code` папки и добавьте новый класс с именем `BasePage.cs`. На рисунке 4 показаны обозреватель решений после `App_Code` папки и `BasePage.cs` класс были добавлены.


![Добавление папки App_Code и класс с именем основная страница](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image4.png)

**На рисунке 04**: добавление `App_Code` папку и класс с именем `BasePage`


> [!NOTE]
> Visual Studio поддерживает два режима управления проектом: проекты веб-сайтов и проектов веб-приложений. `App_Code` Папка должна использоваться в модели проекта веб-сайта. При использовании модели проекта веб-приложения, поместите `BasePage.cs` класс в папке с именем, отличным от `App_Code`, такие как `Classes`. Дополнительные сведения об этом разделе посвящены [миграции проекта веб-сайта в проект веб-приложения](http://webproject.scottgu.com/CSharp/Migration2/Migration2.aspx).


Поскольку пользовательские базовой страницы служит базовым классом для классов кода страницы ASP.NET, необходимо расширить `Page` класса.


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample5.cs)]

При запросе страницы ASP.NET, он проходит через ряд этапов, одновременной в запрошенной готовится к просмотру в HTML-страницы. Мы могут использовать в рабочей области путем переопределения `Page` класса `OnEvent` метод. Для наших базы страницы давайте автоматически задание заголовка, если он не был указан явно по `LoadComplete` рабочей области (который, как вы могли догадаться, происходит после `Load` рабочей области).

Чтобы сделать это, переопределите `OnLoadComplete` метод и введите следующий код:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample6.cs)]

`OnLoadComplete` Метода начинается с определения Если `Title` свойство не еще было задано явно. Если `Title` свойство `null`, является пустой строкой, или имеет значение «Без заголовка страницы» присваивается имя файла запрошенной страницы ASP.NET. Физический путь к запрошенной странице ASP.NET - `C:\MySites\Tutorial03\Login.aspx`, например - доступна через `Request.PhysicalPath` свойство. `Path.GetFileNameWithoutExtension` Метод позволяет извлечь только часть имени файла, а затем присваивается filename `Page.Title` свойство.

> [!NOTE]
> Я приглашаю вас в целях повышения эту логику для улучшения форматирования заголовка. Например, если имя файла страницы `Company-Products.aspx`, приведенный выше код создает заголовок «Компании продукты», но в идеале дефис необходимо заменить пробелами, как «Продукты компании». Кроме того рассмотрите возможность добавления пробела при каждом запуске изменения регистра. То есть, рекомендуется добавить код, который преобразует имя файла `OurBusinessHours.aspx` для заголовка элемента «наш рабочего дня».


### <a name="having-the-content-pages-inherit-the-base-page-class"></a>Расположение содержимого страниц унаследовать базовый класс страницы

Теперь нам нужно обновить страницы ASP.NET в наш сайт для наследования от базового пользовательской страницы (`BasePage`) вместо `Page` класса. Выполнять этот параметр, перейдите к каждому классу кода и замените объявление класса с:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample7.cs)]

В:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample8.cs)]

После этого на узле с помощью браузера. При посещении страницы, заголовок которого установлено явно, такие как `Default.aspx` или `About.aspx`, используется явно заданный заголовок. Если, однако посещении страницы, заголовок которого не были изменены относительно значения по умолчанию («без заголовка страницы»), базовый класс страницы задает заголовок, имя файла страницы.

Рис. 5 показано `MultipleContentPlaceHolders.aspx` страниц при просмотре через браузер. Обратите внимание, что заголовок точно страницы filename (менее расширение), «MultipleContentPlaceHolders».


[![Если заголовок не указан явно, имя файла страницы будет автоматически использовать](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image6.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image5.png)

**Рисунок 05**: Если заголовок не указан явно, имя файла страницы будет автоматически использовать ([Просмотр полноразмерное изображение](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image7.png))


## <a name="step-3-basing-the-page-title-on-the-site-map"></a>Шаг 3: Индексация отображается заголовок карты сайта

ASP.NET предоставляет платформу карты надежных сайтов, позволяющая разработчикам страницы для определения иерархической карты сайта в внешнего ресурса (например, XML-таблицу файла или базы данных) вместе с веб-элементы управления для отображения сведений о карте узла (например, SiteMapPath Меню и элементы управления TreeView).

Структура карты сайта можно получить программным образом из класса с выделенным кодом страницы ASP.NET. Таким образом можно автоматически задается заголовок страницы с заголовком ее соответствующий узел в карте узла. Давайте повышения `BasePage` класс, созданный на шаге 2, чтобы он обеспечивает эту функцию. Но сначала необходимо создать мы карты сайта.

> [!NOTE]
> Учебнике предполагается, что модуль чтения уже знакомы с ASP. Элементы карты сайта в сети. Дополнительные сведения об использовании карты веб-узла можно найти рядов составной статьи [проверки ASP. Навигация по сайту NET](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx).


### <a name="creating-the-site-map"></a>Создание карты сайта

Система карты сайта строится поверх [модель поставщика](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), который отделяет карты сайта API от логики, которая сериализует данные карты сайта между памятью и постоянное хранилище. Платформа .NET Framework поставляется с [ `XmlSiteMapProvider` класса](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx), который является поставщик карты сайта по умолчанию. Как и предполагает его имя, `XmlSiteMapProvider` использует XML-файл в качестве хранилища карты сайта. Давайте используйте этого поставщика для определения карта узла.

Начните с создания файла карты узла в корневой папке веб-сайта с именем `Web.sitemap`. Для этого щелкните правой кнопкой мыши имя веб-сайта в обозревателе решений, выберите Добавить новый элемент и выберите шаблон карты сайта. Убедитесь, что этот файл имеет имя `Web.sitemap` и нажмите кнопку Добавить.


[![Добавьте в файл с именем Web.sitemap корневую папку веб-сайта](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image9.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image8.png)

**На рисунке 06**: добавить файл с именем `Web.sitemap` корневую папку веб-сайта ([Просмотр полноразмерное изображение](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image10.png))


Добавьте следующий XML-код для `Web.sitemap` файла:


[!code-xml[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample9.xml)]

Этот XML-документ определяет иерархической структуре карты сайта показано на рисунке 7.


![Карта сайта является в настоящее время состоит из трех узлов карты](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image11.png)

**На рисунке 07**: карта сайта является в настоящее время состоит из трех узлов карты


При добавлении новых примеров будет обновлена в будущих учебниках по структуре карты сайта.

### <a name="updating-the-master-page-to-include-navigation-web-controls"></a>Обновление главной страницы для включения навигации веб-элементов управления

Теперь, когда у нас есть определенные карты сайта, давайте обновления для включения навигации веб-элементы управления главной страницы. В частности добавим в элемент управления ListView в левый столбец, в разделе занятий, отображающий неупорядоченный список элемент списка для каждого узла, определенного в карте узла.

> [!NOTE]
> Элемент управления ListView впервые появился в ASP.NET версии 3.5. При использовании более ранней версии ASP.NET, используйте элементе управления повторителем. Дополнительные сведения об элементе управления ListView см. в разделе [с помощью ASP.NET 3.5 DataPager элементов управления ListView и](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx).


Запуск, удалив существующую разметку неупорядоченный список из раздела занятий. Затем перетащите элемент управления ListView с панели элементов и поместите его под занятий заголовок. ListView находится в разделе данных панели элементов, наряду с другими элементами управления представления: GridView, DetailsView и FormView. Значение свойства ID ListView `LessonsList`.

В мастер настройки источника данных выберите, чтобы привязать новый элемент управления SiteMapDataSource ListView `LessonsDataSource`. Элемент управления SiteMapDataSource возвращает иерархическую структуру из системы карты сайта.


[![Привязать элемент управления SiteMapDataSource к элементу управления LessonsList ListView](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image13.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image12.png)

**На рисунке 08**: привязать элемент управления SiteMapDataSource к `LessonsList` управления ListView ([Просмотр полноразмерное изображение](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image14.png))


После создания управления SiteMapDataSource, необходимо определить шаблоны ListView, таким образом, чтобы отобразить ее неупорядоченный список элемент списка для каждого узла, возвращаемых элементом управления SiteMapDataSource. Это можно сделать, используя следующую разметку шаблона:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample10.aspx)]

`LayoutTemplate` Создает разметку для неупорядоченный список (`<ul>...</ul>`) во время `ItemTemplate` отображает каждый элемент, возвращаемый SiteMapDataSource как элемент списка (`<li>`), содержащий ссылку на определенном занятии.

После настройки шаблонов ListView, посетите веб-сайт. Как показано на рис. 9, раздел занятий содержит маркированный элемент домашней. Где находятся о программе и с помощью занятий ContentPlaceHolder несколько элементов управления? SiteMapDataSource предназначена для возврата иерархический набор данных, но в элементе управления ListView можно отобразить только один уровень иерархии. Следовательно отображается только первый уровень узлов карты возвращенных SiteMapDataSource.


[![Раздел занятий содержит единственный элемент списка](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image16.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image15.png)

**На рисунке 09**: раздел занятий содержит один элемент списка ([Просмотр полноразмерное изображение](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image17.png))


Для отображения нескольких уровней можно вложить нескольких представлениях ListView в `ItemTemplate`. Этот метод был проверяются в [ *главные страницы и переходов* учебника](../../data-access/introduction/master-pages-and-site-navigation-cs.md) из моей [работа с учебника ряда данных](../../data-access/index.md). Однако для этого учебника ряда карта узла будет содержать только два уровня: Домашняя (верхний уровень); и каждое занятие потомком домашней страницы. Вместо создания вложенный элемент управления ListView, мы вместо этого можно указать SiteMapDataSource, чтобы он не возвращал начальный узел, установив его [ `ShowStartingNode` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) для `false`. В итоге получается, что SiteMapDataSource начинается путем возвращения второго уровня узлов карты.

Благодаря этому изменению ListView отображаются элементы, маркера для о программе и использование нескольких элементов управления ContentPlaceHolder уроки, но пропускает элемент маркера для дома. Чтобы исправить это, мы можно явно добавить элемент маркера для дома в `LayoutTemplate`:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample11.aspx)]

Настройка SiteMapDataSource для пропуска начальный узел и явно добавив элемент маркера домашней раздел занятий теперь отображает требуемые выходные данные.


[![В разделе занятий содержит элемент маркера для дома и каждый дочерний узел](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image19.png)](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image18.png)

**Рис. 10**: раздел занятий содержит элемент маркера для дома и каждый дочерний узел ([Просмотр полноразмерное изображение](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image20.png))


### <a name="setting-the-title-based-on-the-site-map"></a>Задание заголовка, в зависимости от карты сайта

С карты сайта на месте, мы можем обновить нашей `BasePage` класс, используемый для заголовка, указанного в карте веб-узла. Как мы делали на шаге 2, необходимо использовать заголовок узел карты узла, если заголовок страницы не было явно задано разработчиком страницы. Если выполняется запрашиваемой страницы не был явно указан заголовок страницы, а не найдена в карте узла, а затем мы будем переключиться на использование имени файла запрошенной страницы (менее расширение), как мы делали на шаге 2. Рис. 11 иллюстрирует этот процесс принятия решений.


![В случае отсутствия явно название страницы используется заголовок соответствующий узел карты сайта](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image21.png)

**Рис. 11**: В случае отсутствия явно название страницы используется заголовок соответствующий узел карты сайта


Обновление `BasePage` класса `OnLoadComplete` метод, чтобы включить следующий код:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample12.cs)]

Как и раньше `OnLoadComplete` метод начинается с определения, является ли заголовок страницы было задано явно. Если `Page.Title` — `null`, является пустой строкой, или присваивается значение «Безымянный страница», а затем код автоматически присваивает значение свойству `Page.Title`.

Чтобы определить, заголовок, начинается код, ссылаясь на [ `SiteMap` класса](https://msdn.microsoft.com/library/system.web.sitemap.aspx) [ `CurrentNode` свойства](https://msdn.microsoft.com/library/system.web.sitemap.currentnode.aspx). `CurrentNode` Возвращает [ `SiteMapNode` ](https://msdn.microsoft.com/library/system.web.sitemapnode.aspx) экземпляра в карте узла, соответствующий текущей запрошенной страницы. При условии, что в данный момент Запрошенная страница найдена в карты веб-узла `SiteMapNode`в `Title` свойство присваивается заголовок страницы. Если в данный момент Запрошенная страница не карты веб-узла `CurrentNode` возвращает `null` и имени файла запрошенной страницы используется в качестве заголовка (как это было сделано в шаге 2).

Рис. 12 показан `MultipleContentPlaceHolders.aspx` страниц при просмотре через браузер. Так как заголовок этой страницы не задано явно, вместо этого используется заголовок его соответствующий узел карты узла.


![Заголовок страницы MultipleContentPlaceHolders.aspx извлекается из карты сайта](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/_static/image22.png)

**Рис. 12**: `MultipleContentPlaceHolders.aspx` заголовок страницы извлекается из карты сайта


## <a name="step-4-adding-other-page-specific-markup-to-theheadsection"></a>Шаг 4: Добавление других разметку страницы для`<head>`раздела

Шаги 1, 2 и 3 рассказывали Настройка `<title>` элемент на основе страницу за страницей. В дополнение к `<title>`, `<head>` раздел может содержать `<meta>` элементы и `<link>` элементы. Как упоминалось ранее в этом учебнике `Site.master` `<head>` раздел содержит `<link>` элемент `Styles.css`. Так как это `<link>` элемент определен в главной страницы, она включается в `<head>` раздела для всех страниц содержимого. Но как здесь о добавлении `<meta>` и `<link>` элементы на основе страницу по?

Самый простой способ добавить содержимое конкретной странице `<head>` раздел является создание элемента управления ContentPlaceHolder на главной странице. У нас уже есть такие ContentPlaceHolder (с именем `head`). Таким образом Чтобы добавить пользовательские `<head>` разметки, создания соответствующего содержимого элемента управления на странице и установить на нем разметку.

Чтобы продемонстрировать добавление пользовательских `<head>` разметки на страницу включим `<meta>` элемент описания нашей текущим набором страниц содержимого. `<meta>` Элемент description предоставляет краткое описание веб-страницы, большинство поисковых интегрировать эти данные в определенной форме, при отображении результатов поиска.

Объект `<meta>` элемент описания имеет следующий вид:


[!code-html[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample13.html)]

Чтобы добавить Эта разметка страницы содержимого, добавьте выше текст элемента управления содержимым, который сопоставляется главную страницу головной ContentPlaceHolder. Например, чтобы определить `<meta>` элемент описания для `Default.aspx`, добавьте следующую разметку:


[!code-aspx[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample14.aspx)]

Так как заголовок ContentPlaceHolder не в теле HTML-страницы, разметки, добавленный к элементу управления содержимым не отображается в представлении конструирования. Чтобы увидеть `<meta>` описание элемента посещение `Default.aspx` через браузер. После загрузки страницы, просмотрите исходный код и обратите внимание, что `<head>` раздел содержит разметки, заданные в элементе управления содержимым.

Теперь пора добавить `<meta>` описание элементов `About.aspx`, `MultipleContentPlaceHolders.aspx`, и `Login.aspx`.

### <a name="programmatically-adding-markup-to-theheadregion"></a>Программное добавление разметки для`<head>`области

Head ContentPlaceHolder позволяет декларативно добавить пользовательской разметки на главную страницу `<head>` области. Также можно программно добавить пользовательской разметки. Помните, что `Page` класса `Header` возвращает `HtmlHead` экземпляр, определенный на главной странице ( `<head runat="server">`).

Возможность программно добавлять содержимое в `<head>` области полезно, когда содержимое для добавления является динамическим. Возможно, он основан на пользователя, посетив страницу; Возможно он извлекаются из базы данных. Независимо от причины, можно добавить содержимое к `HtmlHead` путем добавления элементов управления в его коллекцию элементов управления следующим образом:


[!code-csharp[Main](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs/samples/sample15.cs)]

Этот код добавляет `<meta>` элемент ключевые слова для `<head>` области, которая предоставляет разделенный запятыми список ключевых слов, описывающих страницы. Обратите внимание, что добавление `<meta>` тег создается [ `HtmlMeta` ](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmlmeta.aspx) экземпляра, установите его `Name` и `Content` свойства и затем добавить его в `Header` `Controls` коллекции. Аналогичным образом программным способом добавить `<link>` элемент, создайте [ `HtmlLink` ](https://msdn.microsoft.com/library/system.web.ui.htmlcontrols.htmllink.aspx) , задать его свойства и затем добавить его в `Header` `Controls` коллекции.

> [!NOTE]
> Добавление произвольного разметки, создайте [ `LiteralControl` ](https://msdn.microsoft.com/library/system.web.ui.literalcontrol.aspx) экземпляра, установите его `Text` свойство и затем добавить его в `Header` `Controls` коллекции.


## <a name="summary"></a>Сводка

В этом учебнике мы рассмотрели различные способы добавления `<head>` области разметки на основе страницу за страницей. Главная страница должно включать `HtmlHead` экземпляра (`<head runat="server">`) с ContentPlaceHolder. `HtmlHead` Экземпляр разрешает страницы содержимого, чтобы программно получить доступ к `<head>` область декларативно и программно задать страницу элемента title; управления ContentPlaceHolder дает пользовательской разметки для добавления `<head>` раздел декларативно с помощью элемента управления содержимым.

Программирование довольны!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:

- [Динамическое задание заголовка страницы в ASP.NET](http://aspnet.4guysfromrolla.com/articles/051006-1.aspx)
- [Проверка ASP. В NET навигации веб-узла](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [Как использовать HTML-теги Meta](http://searchenginewatch.com/showPage.html?page=2167931)
- [Главные страницы в ASP.NET](http://www.odetocode.com/articles/419.aspx)
- [С помощью ASP.NET 3.5 элемента ListView и элементы управления DataPager](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx)
- [С помощью другого базового класса для классов кода страницы ASP.NET](http://aspnet.4guysfromrolla.com/articles/041305-1.aspx)

### <a name="about-the-author"></a>Об авторе

[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор по ASP/ASP.NET и основатель 4GuysFromRolla.com, работает с веб-технологиями Майкрософт с 1998 года. Скотт — независимый консультант, trainer и записи. Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 3.5 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco). Скотт может быть достигнута по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) или через его блог по [ http://ScottOnWriting.NET ](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Благодарности

Этот учебник ряд прошел проверку многие полезные рецензентов. Основными редакторами этого учебника были Зак Джонс и Банерджи Suchi. Объясняются моих последующих статей для MSDN? Если Да, напишите мне по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).

> [!div class="step-by-step"]
> [Назад](multiple-contentplaceholders-and-default-content-cs.md)
> [Вперед](urls-in-master-pages-cs.md)
