---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Приступая к работе с базой данных Entity Framework 4.0 сначала и ASP.NET 4, веб-формы - часть 5 | Документы Microsoft
author: tdykstra
description: Contoso университета примера веб-приложения показано, как для создания приложений веб-форм ASP.NET, использующий Entity Framework. Это образец приложения...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 7f351718123e881e832f4ac95af506ed601d3337
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30886515"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="4d7bd-104">Приступая к работе с базой данных Entity Framework 4.0 сначала и форм ASP.NET 4 веб - часть 5</span><span class="sxs-lookup"><span data-stu-id="4d7bd-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>
====================
<span data-ttu-id="4d7bd-105">по [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="4d7bd-106">Contoso университета примера веб-приложения показано, как для создания приложений веб-форм ASP.NET, с помощью Entity Framework 4.0 и Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="4d7bd-107">Сведения о учебника серии см [в первом учебнике ряда](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="working-with-related-data-continued"></a><span data-ttu-id="4d7bd-108">Продолжение работы со связанными данными</span><span class="sxs-lookup"><span data-stu-id="4d7bd-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="4d7bd-109">В предыдущем учебнике вы начали использовать `EntityDataSource` для работы со связанными данными управления.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="4d7bd-110">Отображения нескольких уровней иерархии и изменения данных в свойствах навигации.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="4d7bd-111">В этом учебнике будет продолжать работать со связанными данными путем добавления и удаления связей, а также посредством добавления новой сущности, имеющий отношение к существующей сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="4d7bd-112">Вы создадите страницу, которая добавляет курсов, назначенные отделов.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="4d7bd-113">Отделы уже существует, и при создании нового курса, в то же время будет установления связи между ним и отдела.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="4d7bd-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="4d7bd-115">Вы также создадите страницы, которая работает с отношением «многие ко многим», назначив инструктор курса (Добавление отношения между двумя сущностями, выбранными) или инструктор убирая курса (удаление связи между двумя сущностями, которые Выберите).</span><span class="sxs-lookup"><span data-stu-id="4d7bd-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="4d7bd-116">В базе данных, Добавление отношения между инструктор и курса приводит к новой строки, добавляемые `CourseInstructor` таблице ассоциации; удаление связи включает в себя удаление строки из `CourseInstructor` связи таблицы.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="4d7bd-117">Тем не менее, это делается на платформе Entity Framework, установив свойства навигации, не обращаясь к `CourseInstructor` таблицы явным образом.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="4d7bd-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="4d7bd-119">Добавление сущности со связью существующей сущности</span><span class="sxs-lookup"><span data-stu-id="4d7bd-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="4d7bd-120">Создать новый веб-страницу с именем *CoursesAdd.aspx* , использующий *Site.Master* главную страницу и добавьте следующую разметку, чтобы `Content` управления с именем `Content2`:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="4d7bd-121">Эта разметка создает `EntityDataSource` элемента управления, выбирающий курсов, который позволяет включить и, указывающий обработчик для `Inserting` события.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="4d7bd-122">Обработчик будет использоваться для обновления `Department` свойство навигации, при создании нового `Course` создания сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="4d7bd-123">Также создает разметку `DetailsView` управления, используемые для добавления новых `Course` сущностей.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="4d7bd-124">Разметка использует связанных полей для `Course` свойства сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="4d7bd-125">Необходимо ввести `CourseID` значение, так как это не является полем созданный системой идентификатор.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="4d7bd-126">Вместо этого он является курса число, которое необходимо указать вручную, при создании курса.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="4d7bd-127">Используйте поле шаблона для `Department` свойство навигации, так как свойства навигации не может использоваться с `BoundField` элементов управления.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="4d7bd-128">Поле шаблон предоставляет раскрывающегося списка для выбора подразделение.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="4d7bd-129">Раскрывающегося списка привязан к `Departments` сущности устанавливается с помощью `Eval` вместо `Bind`, снова поскольку напрямую привязать свойства навигации для их обновления.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="4d7bd-130">Укажите обработчик для `DropDownList` элемента управления `Init` событий, чтобы можно было сохранить ссылку на элемент управления для использования, код, который обновляет `DepartmentID` внешнего ключа.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="4d7bd-131">В *CoursesAdd.aspx.cs* сразу после объявления разделяемого класса, добавьте поле класса для хранения ссылки на `DepartmentsDropDownList` управления:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="4d7bd-132">Добавление обработчика для `DepartmentsDropDownList` элемента управления `Init` событий, чтобы можно было хранить ссылку на элемент управления.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="4d7bd-133">Это позволяет получить значение, введенное пользователем и использовать его для обновления `DepartmentID` значение `Course` сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="4d7bd-134">Добавление обработчика для `DetailsView` элемента управления `Inserting` событий:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="4d7bd-135">Когда пользователь щелкает `Insert`, `Inserting` событие возникает перед вставкой новой записи.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="4d7bd-136">Возвращает код в обработчике `DepartmentID` из `DropDownList` управления и использует его, чтобы задать значение, которое будет использоваться для `DepartmentID` свойство `Course` сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="4d7bd-137">Платформа Entity Framework позаботится о добавлении этот курс для `Courses` свойство навигации связанного `Department` сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="4d7bd-138">Он также добавляет в отдел `Department` свойство навигации `Course` сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="4d7bd-139">Запустите страницу.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-139">Run the page.</span></span>

<span data-ttu-id="4d7bd-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="4d7bd-141">Введите идентификатор, заголовок, количество кредиты и подразделения, а затем нажмите кнопку **вставить**.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="4d7bd-142">Запустите *Courses.aspx* и выберите того же отдела, чтобы увидеть новый курс.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="4d7bd-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="4d7bd-144">Работа со связями многие ко многим</span><span class="sxs-lookup"><span data-stu-id="4d7bd-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="4d7bd-145">Связь между `Courses` набора сущностей и `People` набор сущностей представляет отношение многие ко многим.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="4d7bd-146">Объект `Course` сущность имеет свойство навигации с именем `People` , может содержать ноль, один или несколько связанных `Person` сущностей (представляющий инструкторов, назначенный для изучения этого курса).</span><span class="sxs-lookup"><span data-stu-id="4d7bd-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="4d7bd-147">И `Person` сущность имеет свойство навигации с именем `Courses` , может содержать ноль, один или несколько связанных `Course` сущностей (представляющий курсов, инструктора назначается обучение).</span><span class="sxs-lookup"><span data-stu-id="4d7bd-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="4d7bd-148">Один инструктора может обучения нескольких курсах, и один может обучения по нескольким инструкторов.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="4d7bd-149">В этом разделе пошагового руководства будет добавлять и удалять связи между `Person` и `Course` сущности путем обновления свойств навигации связанных сущностей.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="4d7bd-150">Создать новый веб-страницу с именем *InstructorsCourses.aspx* , использующий *Site.Master* главную страницу и добавьте следующую разметку, чтобы `Content` управления с именем `Content2`:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="4d7bd-151">Эта разметка создает `EntityDataSource` управления, который получает имя и `PersonID` из `Person` сущностей для инструкторов.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="4d7bd-152">Объект `DropDrownList` элемент управления привязан к `EntityDataSource` элемента управления.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="4d7bd-153">`DropDownList` Управления задает обработчик для `DataBound` события.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="4d7bd-154">Вы будете использовать этот обработчик в databind два раскрывающихся списков, отображающие курсов.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="4d7bd-155">Разметка также создает следующую группу элементов управления, используемых для присвоения курса выбранных инструктора:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="4d7bd-156">Объект `DropDownList` управления для выбора курса для назначения.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="4d7bd-157">Этот элемент управления будет заполняться курсов, которые в настоящее время не назначены выбранной инструктора.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="4d7bd-158">Объект `Button` управления для инициирования назначения.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="4d7bd-159">Объект `Label` элемента управления, чтобы отобразить сообщение об ошибке, если произойдет сбой назначения.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="4d7bd-160">Наконец разметку также создает группу элементов управления, используемых для удаления из выбранной инструктора курса.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="4d7bd-161">В *InstructorsCourses.aspx.cs*, добавить с помощью инструкции:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="4d7bd-162">Добавьте метод для заполнения два раскрывающихся списков, отображающие курсы:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="4d7bd-163">Этот код получает все курсами `Courses` сущности набор и возвращает курсы из `Courses` свойство навигации `Person` сущность для выбранного инструктора.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="4d7bd-164">Он определяет, какие курсы назначены этой инструктора и заполняет раскрывающиеся списки соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="4d7bd-165">Добавление обработчика для `Assign` кнопки `Click` событий:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="4d7bd-166">Этот код получает `Person` получает сущность для выбранного инструктора `Course` сущность для выбранного курса и добавляет выбранного курса для `Courses` свойство навигации инструктора `Person` сущности.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="4d7bd-167">Он сохраняет изменения в базу данных и повторно заполняет раскрывающиеся списки, можно сразу же увидеть результаты.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="4d7bd-168">Добавление обработчика для `Remove` кнопки `Click` событий:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="4d7bd-169">Этот код получает `Person` получает сущность для выбранного инструктора `Course` сущность для выбранного курса и удаляет из выбранного курса `Person` сущности `Courses` свойство навигации.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="4d7bd-170">Он сохраняет изменения в базу данных и повторно заполняет раскрывающиеся списки, можно сразу же увидеть результаты.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="4d7bd-171">Добавьте код для `Page_Load` метод, который гарантирует, что сообщения об ошибках не отображаются ошибки, нет отчетов, и добавьте обработчики для `DataBound` и `SelectedIndexChanged` события инструкторов раскрывающегося списка для заполнения курсы раскрывающиеся списки:</span><span class="sxs-lookup"><span data-stu-id="4d7bd-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="4d7bd-172">Запустите страницу.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-172">Run the page.</span></span>

<span data-ttu-id="4d7bd-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="4d7bd-174">Выберите инструктор.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-174">Select an instructor.</span></span> <span data-ttu-id="4d7bd-175"><strong>Назначить курса</strong> раскрывающемся списке отображаются курсах, инструктора не предназначено для обучения, и <strong>удалить курс</strong> курсов, которым уже назначен инструктора отображает раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="4d7bd-176">В <strong>назначить курса</strong> выберите курс и нажмите кнопку <strong>назначить</strong>.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="4d7bd-177">Перемещает курса <strong>удалить курс</strong> раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="4d7bd-178">Выберите курс в <strong>удалить курс</strong> и нажмите кнопку <strong>удалить</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="4d7bd-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="4d7bd-179">Перемещает курса <strong>назначить курса</strong> раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="4d7bd-180">Теперь вы знаете, некоторые дополнительные способы работы со связанными данными.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="4d7bd-181">В этом руководстве вы узнаете, как использовать наследование в модели данных для повышения удобства поддержки приложения.</span><span class="sxs-lookup"><span data-stu-id="4d7bd-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4d7bd-182">[Назад](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Вперед](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="4d7bd-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>
