---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-debugging-capabilities
title: Основные сведения о возможности отладки ASP.NET AJAX | Документы Microsoft
author: scottcate
description: Возможность отладки кода — квалификации, который должен иметь каждый разработчик в их арсенале независимо от технологии, которые они используют. Хотя многие разработчики...
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/28/2008
ms.topic: article
ms.assetid: 7f9380c6-19f7-4c82-a019-916ec6dffc9c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-debugging-capabilities
msc.type: authoredcontent
ms.openlocfilehash: f082e2206f5e691579670e42634f30b57e3b3593
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="understanding-aspnet-ajax-debugging-capabilities"></a>Основные сведения о возможности отладки ASP.NET AJAX
====================
по [Scott кате](https://github.com/scottcate)

[Скачать PDF](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial06_Debugging_MS_Ajax_Applications_cs.pdf)

> Возможность отладки кода — квалификации, который должен иметь каждый разработчик в их арсенале независимо от технологии, которые они используют. Многие разработчики привыкли отладка приложений ASP.NET, использующих код VB.NET или C# с помощью Visual Studio .NET или Web Developer Express, каких не знает, что он также чрезвычайно полезна для отладки клиентского кода, таких как JavaScript. Тот же тип приемы, используемые для отладки приложений .NET могут также применяться для приложений с поддержкой AJAX и точнее приложения ASP.NET AJAX.


## <a name="debugging-aspnet-ajax-applications"></a>Отладка приложений AJAX ASP.NET

Дэн Wahlin

Возможность отладки кода — квалификации, который должен иметь каждый разработчик в их арсенале независимо от технологии, которые они используют. Безусловно, основные сведения об отладке различные доступные параметры можно сохранить огромного количества времени для проекта и даже несколько проблем. Многие разработчики привыкли отладка приложений ASP.NET, использующих код VB.NET или C# с помощью Visual Studio .NET или Web Developer Express, каких не знает, что он также чрезвычайно полезна для отладки клиентского кода, таких как JavaScript. Тот же тип приемы, используемые для отладки приложений .NET могут также применяться для приложений с поддержкой AJAX и точнее приложения ASP.NET AJAX.

В этой статье вы увидите, как можно использовать Visual Studio 2008 и другие средства для отладки приложений ASP.NET AJAX позволяет быстро находить ошибки и другие проблемы. Сведения о включении Internet Explorer 6 или более поздней версии для отладки, с помощью Visual Studio 2008 и обозревателя сценариев для пошагового выполнения кода, а также с помощью других бесплатных средств, таких как Web Development Helper будут обсуждаться. Вы также узнаете, как отлаживать приложения ASP.NET AJAX в Firefox, используя расширение с именем Firebug позволяет пошаговое выполнение кода JavaScript непосредственно в браузере без любые другие инструменты. Наконец вы познакомитесь классы в библиотеке AJAX ASP.NET, что позволяет выполнять различные задачи отладки, например трассировки и операторы утверждений кода.

Прежде чем пытаться выполнить отладку страницы, просматриваемые в обозревателе Internet Explorer существует несколько простых действий, которые необходимо выполнить, чтобы включить его для отладки. Давайте рассмотрим некоторые основные настройки требования, которые необходимо выполнить, чтобы приступить к работе.

## <a name="configuring-internet-explorer-for-debugging"></a>Настройка Internet Explorer для отладки

Большинство пользователей не интересуют JavaScript, возникающие на веб-сайте, просмотреть с помощью Internet Explorer. На самом деле средний пользователь даже не знает, что делать, если им увидеть сообщение об ошибке. В результате параметры отладки отключены по умолчанию в браузере. Однако это очень просто включить отладку и поместить его для использования при разработке новых приложений AJAX.

Включение средств отладки, перейдите в параметры средства браузера Internet Explorer в меню и выберите вкладку "Дополнительно". В разделе Обзор убедитесь, что следующие элементы unchecked:

- Отключить отладку сценариев (Internet Explorer)
- Отключить отладку сценариев (другие)

Несмотря на то что не требуется, если вы пытаетесь отладить приложение, вы, вероятно, захотите все ошибки JavaScript на страницу, чтобы немедленно быть видимым и очевидным. Вы можете принудительно все ошибки, который будет отображаться в окне сообщения, установив флажок «Показывать уведомление о любой ошибке скрипта». Это удобно для включения во время разработки приложения, он может быстро стать досадных, если просто просмотра других веб-сайтов, поскольку вероятность возникновения ошибки JavaScript существует большая.

Рис. 1 показано какие Internet Explorer диалоговое окно расширенного должны выглядеть после его правильно настроен для отладки.


[![Настройка Internet Explorer для отладки.](understanding-asp-net-ajax-debugging-capabilities/_static/image2.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image1.png)

**Рис. 1**: Настройка Internet Explorer для отладки.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image3.png))


После отладки был включен, вы увидите новый пункт меню отображаются в меню «Вид» с именем отладчик сценариев. Он имеет два параметра, которые доступны, включая Open, а также переход на следующем операторе. При выборе открыть будет предложено отладку страницы в Visual Studio 2008 (Обратите внимание, что Visual Web Developer Express можно также использовать для отладки). Если в данный момент работает Visual Studio .NET можно использовать этот экземпляр или создать новый экземпляр. При выборе разрыв в следующий оператор будет предложено отладки на странице при исполнении кода JavaScript. Если код JavaScript выполняется в обработчике события onLoad страницы можно обновить страницу, чтобы запустить сеанс отладки. Если код JavaScript выполняется после нажатия кнопки отладчик будет выполняться сразу после нажатии кнопки.

> *> [!NOTE] При запуске в Windows Vista с пользователя Access Control (UAC) включена и у вас есть Visual Studio 2008, для запуска от имени администратора, Visual Studio не удается присоединиться к процессу, когда вам будет предложено присоединить. Чтобы обойти эту проблему, сначала запустите Visual Studio и использовать его для отладки.*


Несмотря на то, что следующий раздел покажем, как выполнить отладку страницы ASP.NET AJAX из непосредственно в Visual Studio 2008, используя параметр отладчик скриптов Internet Explorer полезно при страница уже открыта, и вы хотите более подробно исследовать ее.

## <a name="debugging-with-visual-studio-2008"></a>Отладка в Visual Studio 2008

Visual Studio 2008 отладки функциональная возможность разработчикам во всем мире полагаться на каждый день для отладки приложений .NET. Встроенный отладчик можно осуществлять пошаговое выполнение кода, представления, которые отслеживают данные объекта, Контрольные значения для определенных переменных, стек вызова, а также многое другое. В дополнение к отладке кода VB.NET или C# отладчик также полезна для отладки приложений ASP.NET AJAX и позволит осуществлять пошаговое выполнение кода JavaScript по одной строке. Подробные сведения, выполните фокус на методы, которые могут использоваться для отладки файлов клиентского скрипта, а не предоставляя discourse на процесс отладки приложений с помощью Visual Studio 2008.

Процесс отладки страницы Visual Studio 2008 можно запустить несколькими способами. Во-первых можно использовать параметр отладчик скриптов Internet Explorer, упомянутых в предыдущем разделе. Это удобно использовать, когда страница уже загружен в браузере и вы хотите начать ее отладку. Кроме того можно щелкните правой кнопкой мыши на странице ASPX в обозревателе решений и выберите в меню команду задать в качестве начальной страницы. Если вы привыкли к отладке страниц ASP.NET затем, возможно, этого до. После нажатия F5 можно производить отладку страницы. Тем не менее как правило, можно задать точки останова в любом хотелось бы в коде VB.NET или C#, который не всегда происходит с помощью JavaScript вы увидите Далее.

*Встроенные шрифты и внешних скриптов*

Отладчик Visual Studio 2008 в языке JavaScript, встроенный в страницу отличается от внешних файлов JavaScript. С файлами внешних скриптов можно открыть файл и установить точку останова в любой строке, выбрать. Точки останова можно задать, щелкнув в области серую область слева от окна редактора кода. Когда JavaScript внедряется непосредственно в страницу с использованием `<script>` тег, установить точку останова, щелкнув в области серой панели задач не представляется возможным. Предупреждение о том, «Это не является допустимым расположением точки останова» приведет к попытки установить точку останова на строке внедренный скрипт.

Можно обойти эту проблему, переместив код в на внешний файл .js и ссылки на него с помощью атрибута src &lt;сценарий&gt; тег:


[!code-html[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample1.html)]

Что делать, если переместив код в файл внешнего не является параметром или сложнее, чем он стоит? Хотя нельзя задать точку останова с помощью редактора, можно добавить оператор отладчика непосредственно в коде, где вы хотите начать отладку. Также можно использовать класс Sys.Debug доступные библиотеки ASP.NET AJAX для отладки для запуска. Вы узнаете, Дополнительные сведения о классе Sys.Debug далее в этой статье.

Пример использования `debugger` показано ключевое слово в список 1. В этом примере заставляет отладчик на прерывание вправо до вызова функции update.

**Пример 1. С помощью ключевого слова отладчик, чтобы принудительно установить отладчик Visual Studio .NET для прерывания.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample2.js)]

После попадания оператор debugger вам будет предложено отладку страницы, с помощью Visual Studio .NET и можно начать пошаговое выполнение кода. При выполнении этого значения можно может возникнуть проблема с доступом к файлы библиотеки скриптов ASP.NET AJAX, так что давайте используется на странице ознакомитесь с помощью Visual Studio. Обозреватель скриптов в NET.

## <a name="using-visual-studio-net-windows-to-debug"></a>Отладка с помощью Visual Studio .NET Windows

После запуска сеанса отладки и началом последовательное выполнение кода с помощью клавиши F11 по умолчанию, может возникнуть ошибка диалоговое окно, показанное в представлена на рисунке 2, если не используется на странице все файлы сценариев открыт и доступен для отладки.


[![Показано, когда исходный код доступен для отладки диалогового окна об ошибке.](understanding-asp-net-ajax-debugging-capabilities/_static/image5.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image4.png)

**На рисунке 2**: диалогового окна об ошибке отображается, когда исходный код доступен для отладки.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image6.png))


Это диалоговое окно отображается, так как Visual Studio .NET не уверена в том, как получить исходный код некоторые из сценариев, ссылается страница. Хотя это может быть довольно утомительным сначала является простой способ исправить. После запуска сеанса отладки и установки точки останова, перейдите в окно отладки скрипта проводника Windows в меню Visual Studio 2008 или используйте сочетание клавиш Ctrl + Alt + N.

> *> [!NOTE] Если в меню обозревателя скриптов в списке не отображается, перейдите в меню* *Настройка* *команды в меню Visual Studio .NET. Найдите запись отладки в разделе «категории» и щелкните его, чтобы показать все доступные меню операции. В списке команды прокрутите скрипт обозревателя и перетащите его отладочные* *в меню Windows приведенные выше. Таким образом будет доступна запись меню обозревателя скриптов каждый раз при запуске Visual Studio .NET.*


Обозреватель скриптов можно использовать для просмотра всех скриптов на странице и открыть их в редакторе кода. После открытия обозревателя скриптов дважды щелкните на странице ASPX отлаживаемых чтобы открыть его в окне редактора кода. Выполните те же действия для всех других скриптов в обозревателе скрипта. Как только все сценарии открыты в окне кода, вы можете нажмите клавишу F11 (и использовать другие сочетания клавиш отладки), для пошагового выполнения кода. На рисунке 3 показан пример обозревателя скриптов. В нем перечислены текущего отлаживаемой (Demo.aspx), а также два пользовательских сценариев и два скрипта, динамически вставлен на страницу с ASP.NET AJAX ScriptManager.


[![Обозреватель скриптов предоставляет доступ к скриптах, используемых на странице.](understanding-asp-net-ajax-debugging-capabilities/_static/image8.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image7.png)

**Рис. 3**. Обозреватель скриптов предоставляет доступ к скриптах, используемых на странице.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image9.png))


Несколько других windows также могут использоваться для получения полезных сведений при пошаговом выполнении кода на странице. Например окно локальных значений можно использовать для просмотра значений переменных используется на странице, окно "Интерпретация" для вычисления определенных переменных или условий и просмотреть выходные данные. Также можно использовать окно вывода для просмотра записанных с помощью функции Sys.Debug.trace (который будет рассматриваться далее в этой статье) или функция Debug.writeln Internet Explorer операторов трассировки.

При пошаговом выполнении кода с помощью отладчика можно указатель мыши находится над переменных в коде, чтобы просмотреть, им назначается значение. Тем не менее отладчик сценариев иногда не отображаются, что-либо как указатель мыши находится над заданной переменной JavaScript. Чтобы увидеть значения, выделите инструкции или переменной, которую вы пытаетесь см. в окне редактора кода и затем наведении мыши. Несмотря на то, что этот метод не работает в любой ситуации, сколько раз можно увидеть значение без поиска в окно другой отладки, таких как окно локальных переменных.

Видеоматериалы, демонстрирующие применение некоторых из функции, описанные здесь можно просмотреть на [ http://www.xmlforasp.net ](http://www.xmlforasp.net).

## <a name="debugging-with-web-development-helper"></a>Отладка с помощью Web Development Helper

Хотя Visual Studio 2008 (и Visual Web Developer Express 2008) способны очень средства отладки, существуют дополнительные параметры, которые можно использовать также которые являются более недоступно. Одна из новейшие средства снятия — Web Development Helper. Нихилом Котари корпорации Майкрософт (один из ключей архитекторы ASP.NET AJAX корпорации Майкрософт) написал это отличное средство которого можно выполнять множество различных задач из операции отладки для просмотра сообщений запросов и ответов HTTP. Web Development Helper можно загрузить по адресу [ http://projects.nikhilk.net/Projects/WebDevHelper.aspx ](http://projects.nikhilk.net/Projects/WebDevHelper.aspx).

Web Development helper можно использовать непосредственно в обозревателе Internet Explorer, поэтому его удобно использовать. Он запускается с помощью команды средства Web Development Helper меню Internet Explorer. Откроется средство в нижней части окна браузера, который удобно, поскольку не нужно оставить браузер для выполнения нескольких задач, таких как регистрация сообщений запросов и ответов HTTP. Рис. 4 показано, как выглядит Web Development Helper в действие.


[![Web Development Helper](understanding-asp-net-ajax-debugging-capabilities/_static/image11.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image10.png)

**Рис. 4**: Web Development Helper ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image12.png))


Web Development helper не будем использовать средство для пошагового выполнения кода построчно, как с помощью Visual Studio 2008. Тем не менее, он может использоваться для просмотра выходных данных трассировки, легко оценки переменных в сценарии или исследовать данные-внутри объекта JSON. Также очень полезно для просмотра данных, передаваемых из страницы ASP.NET AJAX и сервере.

После открытия в Internet Explorer Web Development Helper отладка скриптов должна быть включена с помощью команды сценария Включение отладки скрипта меню вспомогательные веб-разработки, как показано на рис. Это позволяет средству intercept ошибки, возникающие при запуске страницы. Она также позволяет легко доступа для трассировки сообщений, которые выводятся на странице. Чтобы просмотреть сведения о трассировке или выполнение команды сценария для тестирования различных функций на странице, выберите в меню Web Development Helper консоли скрипт Показать скрипт. Это обеспечивает доступ к окно командной строки и простого окна интерпретации.

*Просмотр сообщения трассировки и данных объектов JSON*

Окно "Интерпретация" можно использовать для выполнения команды сценария или даже загрузку или Сохранение скриптов, которые используются для проверки различных функций на странице. Командное окно отображает сообщения трассировки или отладки, написанном просматриваемую страницу. Листинг 2 показано, как записать сообщения трассировки с помощью функция Debug.writeln Internet Explorer.

**Пример 2. Запись сообщений трассировки на стороне клиента, с помощью класса Debug.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample3.js)]

Если свойство «фамилия» содержит значение Doe, Web Development Helper будет отображено сообщение «имя пользователя: Doe» в окне консоли сценария командной строки (при условии, что отладка включена). Web Development Helper также добавляет объект верхнего уровня debugService на страниц, которые можно использовать для записи данных трассировки или просматривать содержимое объектов JSON. Листинг 3 показан пример использования функции трассировки debugService класса.

**Пример 3. Записываемое сообщение трассировки с помощью Web Development Helper debugService класса.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample4.js)]

Удобная функция класса debugService — что он будет работать, даже если не включить отладку в Internet Explorer, упрощая всегда получить доступ к данным трассировки при запуске Web Development Helper. Если средство не используется для отладки на странице, операторы трассировки будет игнорироваться, так как вызов window.debugService будет возвращать значение false.

Класс debugService также позволяет JSON объект данные можно просмотреть при помощи Web Development Helper окна инспектора. Листинг 4 создает простой объект JSON, содержащий данные пользователя. После создания объекта выполняется вызов для debugService класса проверки функция позволяет визуально проверить объект JSON.

**Пример 4. Используя функцию debugService.inspect для просмотра данных объекта JSON.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample5.js)]

Вызов функции GetPerson() на странице или через окно "Интерпретация" приведет к в диалоговом окне инспектора объекта, отображаются, как показано на рис. 5. Свойства в объекте может быть изменена динамически, выделите их, измените значение в текстовом поле значение и нажмите кнопку Обновить связь. С помощью инспектора объекта упрощает процедуру для просмотра данных объекта JSON и поэкспериментировать с применением разные значения для свойства.

*Ошибки отладки*

Помимо выдачи данные трассировки и объектов JSON для отображения, вспомогательные веб-разработки также может помочь в отладке ошибок на странице. Если возникает ошибка, вам будет предложено перейти на следующую строку кода или отладки скриптов (см. рис. 6). Ошибка сценария диалоговое окно показано в то полный стек вызовов и номера строк, можно легко определить, где находятся проблемы в скрипте.


[![С помощью окна инспектора объектов для просмотра объекта JSON.](understanding-asp-net-ajax-debugging-capabilities/_static/image14.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image13.png)

**Рис. 5**: с помощью окна инспектора объектов для просмотра объекта JSON.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image15.png))


При выборе параметра отладки позволяет выполнять инструкции скриптов непосредственно в Web Development Helper проверки для просмотра значений переменных, записывают объектов JSON и многое другое. Если снова выполняется то же действие, вызвавшей ошибку, и Visual Studio 2008 доступен на компьютере, будет предложено запустить сеанс отладки, чтобы при пошаговом выполнении кода построчно, как описано в предыдущем разделе.


[![Веб-разработки вспомогательный диалогового окна об ошибке сценария](understanding-asp-net-ajax-debugging-capabilities/_static/image17.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image16.png)

**Рис. 6**: диалоговое окно ошибки скрипта Web Development Helper ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image18.png))


*Проверка запросов и ответных сообщений*

При отладке страниц ASP.NET AJAX часто полезно для просмотра сообщений запросов и ответов, передаваемых между сервером и страницы. Просмотр содержимого внутри сообщений позволяет просматривать, при передаче соответствующие данные и размер сообщений. Web Development Helper позволяет отлично HTTP сообщения средства ведения журнала, позволяет легко просматривать данные в виде необработанного текста или в более удобном для чтения формате.

Чтобы просмотреть сообщения запроса и ответа ASP.NET AJAX, необходимо включить средство ведения журнала HTTP, выбрав в меню Web Development Helper HTTP включить ведение журнала HTTP. После включения всех сообщений, отправленных из текущей страницы можно просмотреть в средстве просмотра журнала HTTP, к которому можно получить, выбрав Показать журналы HTTP для HTTP.

Несмотря на то, что просмотр необработанный текст, отправляемый в каждое сообщение запроса и ответа несомненно полезен (и параметр в Web Development Helper), часто бывает удобнее для чтения данных сообщения в более графическом формате. Когда включено ведение журнала HTTP и записи сообщений, данные сообщения можно просмотреть, дважды щелкните сообщение в средство просмотра журнала HTTP. Таким образом можно просмотреть все заголовки, связанные с сообщения, а также фактического сообщения содержимого. Рис. 7 показано пример сообщения запроса и ответного сообщения в окне средства просмотра журналов HTTP.


[![Используя средство просмотра журнала HTTP, чтобы просмотреть данные сообщения запроса и ответа.](understanding-asp-net-ajax-debugging-capabilities/_static/image20.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image19.png)

**Рис. 7**: используя средство просмотра журнала HTTP для просмотра данных сообщения запроса и ответа.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image21.png))


Средство просмотра журнала HTTP автоматически анализирует объекты JSON и отображает их с помощью представления дерева, что позволяет быстро и легко просматривать данные свойства объекта. При использовании элемента управления UpdatePanel в страницы ASP.NET AJAX, средство просмотра разрывов каждой части сообщения на отдельные части, как показано на рисунке 8. Это прекрасная возможность, которая затрудняет гораздо проще просмотреть и понять содержимое сообщений по сравнению с Просмотр необработанные данные сообщений.


[![Сообщение ответа UpdatePanel, просматривать с помощью средства просмотра журналов HTTP.](understanding-asp-net-ajax-debugging-capabilities/_static/image23.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image22.png)

**Рис. 8**: UpdatePanel ответное сообщение просматривать с помощью средства просмотра журналов HTTP.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image24.png))


Существует несколько средств, которые могут использоваться для просмотра сообщений запросов и ответов в дополнение к Web Development Helper. Еще один хороший вариант — Fiddler, которая доступна бесплатно по [ http://www.fiddlertool.com ](http://www.fiddlertool.com). Несмотря на то, что Fiddler не обсуждаются здесь, это также хорошим вариантом при необходимо тщательно проверять заголовки сообщений и данных.

## <a name="debugging-with-firefox-and-firebug"></a>Отладка с помощью Firefox и Firebug

Хотя Internet Explorer по-прежнему широко используемые браузера, другие браузеры, таких как Firefox становится весьма популярна и используется более. В результате может потребоваться просмотр и отладку страницы ASP.NET AJAX в Firefox, а также Internet Explorer для обеспечения правильной работы приложения. Несмотря на то, что Firefox нельзя связать непосредственно в Visual Studio 2008 для отладки, он имеет расширение вызывается Firebug, который может использоваться для отладки страниц. Firebug можно загрузить бесплатно, перейдя к [ http://www.getfirebug.com ](http://www.getfirebug.com).

Firebug предоставляет полнофункциональную среду отладки, можно использовать для пошагового выполнения кода по одной строке, доступ все скрипты, используемые в пределах одной страницы, просмотра структуры DOM, отображения стилей CSS и даже отслеживают события, возникающие на страницах. После установки Firebug может осуществляться с помощью команды Открыть Firebug Firebug средства меню Firefox. Как Web Development Helper Firebug несмотря на то, что он может использоваться также в виде изолированного приложения используется непосредственно в браузере.

После запуска Firebug точки останова можно задать в любой строке файла JavaScript ли скрипт встроенный в страницу, или нет. Чтобы задать точку останова, необходимо сначала загрузите соответствующая страница, которую вы хотите отладить, в Firefox. После загрузки страницы, выберите сценарий для отладки из раскрывающегося списка в Firebug скриптов. Будут показаны все сценарии, используемые этой страницей. Задается точка останова, нажав кнопку области Firebug в серой области в строке куда должен, как и в Visual Studio 2008, в точке останова.

После установки точки останова в Firebug можно выполнять действия, необходимые для выполнения сценария, который требуется для отладки, например нажатие кнопки или обновить браузер для инициирования события onLoad. Автоматическое выполнение останавливается в строке, содержащей точку останова. Рис. 9 показан пример точки останова, которое было инициировано в Firebug.


[![Обработка точки останова в Firebug.](understanding-asp-net-ajax-debugging-capabilities/_static/image26.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image25.png)

**Рис. 9**: обработка точки останова в Firebug.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image27.png))


После достижения точки останова можно шаг с заходом, шаг с обходом или шаг с выходом из кода с помощью кнопок со стрелками. При пошаговом выполнении кода скрипта переменные отображаются в правой части отладчик, что позволяет просмотреть значения и перехода в объекты. Firebug также включает список раскрывающегося списка стек вызовов для просмотра шаги выполнения скриптов, которые привели к текущей строке которого выполняется отладка.

Firebug также включает окно консоли, который может использоваться для проверки другой скрипт инструкции, оценки переменных и просмотреть выходные данные трассировки. Он нажав на вкладку консоли в верхней части окна Firebug. Странице отлаживаемый можно также «проверить» для просмотра его DOM структуру и содержимое, нажав на вкладке «проверить». В ходе различных элементов DOM, показываемый в окне инспектора соответствующую часть страницы при наведении будут выделены, что позволяет легко увидеть, где используется элемент на странице. «Live» поэкспериментировать с применение к элементу разной ширины, стили, т. д. можно изменить значения атрибутов, связанных с данного элемента. Это удобно, избавляет от необходимости постоянно переключаться между редактора исходного кода и браузер Firefox для просмотра как простые изменения влияют на страницы.

Рис. 10 показан пример с помощью инспектора DOM для поиска в текстовое поле с именем txtCountry на странице. Инспектор Firebug может также использоваться для просмотра стилей CSS, используемых в страницы, а также события, возникающие, такие как отслеживание движения мыши, нажатия кнопки и многое другое.


[![С помощью инспектора DOM Firebug элемента.](understanding-asp-net-ajax-debugging-capabilities/_static/image29.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image28.png)

**Рис. 10**: с помощью Firebug DOM инспектора.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image30.png))


Firebug предоставляет легкий способ быстро отладки-страница непосредственно в Firefox, а также отличным средством для проверки различных элементов на странице.

## <a name="debugging-support-in-aspnet-ajax"></a>Поддержка отладки в ASP.NET AJAX

Библиотека ASP.NET AJAX включает многих классах, которые могут использоваться для упрощения процесса добавления возможности AJAX в веб-страницы. Эти классы можно использовать для поиска элементов на странице и управлять ими, добавлять новые элементы управления, вызывать веб-службы и даже обработки событий. Библиотека ASP.NET AJAX также содержит классы, которые могут использоваться для улучшения процесса отладки страниц. В этом разделе познакомитесь класс Sys.Debug и показано, как его использовать в приложениях.

*С помощью класса Sys.Debug*

Класс Sys.Debug (класс JavaScript, расположенных в пространстве имен Sys) можно использовать для выполнения нескольких различных функций, включая записи выходных данных трассировки, выполнение кода утверждения и принудительного сбой, чтобы его можно производить отладку кода. Он широко используется в отладочные файлы библиотеки ASP.NET AJAX (устанавливается в C:\Program Files\Microsoft ASP.NET\ASP.NET 2.0 AJAX Extensions\v1.0.61025\MicrosoftAjaxLibrary\System.Web.Extensions\1.0.61025.0 по умолчанию) для выполнения проверок условий) вызывается утверждения), убедитесь, что правильно передачи параметров для функции, что объекты содержат ожидаемые данные и для записи операторов трассировки.

Класс Sys.Debug предоставляет несколько различных функций, которые можно использовать для обработки трассировки, код утверждения или сбои, как показано в таблице 1.

**Таблица 1. Функции Sys.Debug класса.**

| **Имя функции** | **Описание** |
| --- | --- |
| Assert (условие, сообщение, displayCaller) | Подтверждает, что параметр условие имеет значение true. Если тестируется условие равно false, окно сообщения будет использоваться для отображения значения параметра сообщения. Если параметр displayCaller имеет значение true, метод также отображает сведения о вызывающем. |
| clearTrace() | Удаляет выходные данные операторов трассировки операций. |
| Fail(Message) | Программа для остановки выполнения и переключиться в режим отладчика. Параметр message можно использовать для предоставления причину сбоя. |
| Trace(Message) | Записывает выходные данные трассировки параметр message. |
| traceDump (объекта, имя) | Выводит данных объекта в формате, удобном для чтения. Параметр name можно использовать для предоставления метку дамп трассировки. Вложенные объекты создается дамп объекта записываются по умолчанию. |

Трассировки на стороне клиента можно использовать в так же, как функциональные возможности трассировки, доступные в ASP.NET. Он позволяет легко просматривать без прерывания потока приложения различные сообщения. Список 5 показан пример использования функции Sys.Debug.trace для записи в журнал трассировки. Эта функция просто принимает сообщение, которое должен быть сохранен как параметр.

**Пример 5. С помощью функции Sys.Debug.trace.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample6.js)]

Если выполнить код, показанный в листинге 5 вы не увидите все выходные данные трассировки на странице. Использование окна консоли, доступные в Visual Studio .NET, Web Development Helper или Firebug является единственным способом, чтобы увидеть его. Если требуется просмотреть выходные данные трассировки на странице, вам потребуется добавить тег TextArea и присвоить ему идентификатор TraceConsole, как показано далее:


[!code-html[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample7.html)]

Все Sys.Debug.trace инструкции на странице будут записаны в TraceConsole TextArea.

В случаях, где требуется просматривать данные, содержащиеся в объекте JSON можно использовать класс Sys.Debug traceDump функции. Эта функция принимает два параметра, включая объект, который должен указывать на консоль трассировки и имя, которое может использоваться для идентификации объекта в выходные данные трассировки. Перечисление 6 показан пример использования функции traceDump.

**Пример 6. С помощью функции Sys.Debug.traceDump.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample8.js)]

Рис. 11 показана выходные данные вызова функции Sys.Debug.traceDump. Обратите внимание, что в дополнение к записи данных объекта Person, также записывают данные адреса sub объекта.

Помимо трассировок, класс Sys.Debug также может использоваться для выполнения утверждений коду. Утверждения используются для проверки того, что определенных условий во время выполнения приложения. Отладочная версия библиотеки скриптов ASP.NET AJAX содержать несколько операторов для тестирования различных условий assert.

Листинг 7 показан пример использования функции Sys.Debug.assert для проверки условия. В коде проверяется ли объект адреса имеет значение null перед обновлением объекта Person.


[![Выходные данные функции Sys.Debug.traceDump.](understanding-asp-net-ajax-debugging-capabilities/_static/image32.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image31.png)

**Рис. 11**: выходные данные функции Sys.Debug.traceDump.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image33.png))


**Листинг 7. С помощью функции debug.assert.**


[!code-javascript[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample9.js)]

Три параметры передаются в том числе условия для вычисления, сообщение, отображаемое, если утверждение возвращает значение false, а также того, является ли отображать сведения о вызывающем. В случаях, когда утверждение ложно появится сообщение и сведения о вызывающем объекте Если третий параметр имел значение true. Рис. 12 показан пример сбоя диалогового окна, которое появляется, если в листинг 7 утверждение не выполняется.

Конечная функция описать — Sys.Debug.fail. Если вы хотите принудительно применить сбой определенной строке в сценарии кода можно добавить вызов Sys.Debug.fail, а не оператор отладчика, обычно используется в приложениях JavaScript. Функция Sys.Debug.fail принимает один строковый параметр, который представляет причину ошибки, как показано далее:


[!code-css[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample10.css)]


[![Сообщение о сбое Sys.Debug.assert.](understanding-asp-net-ajax-debugging-capabilities/_static/image35.png)](understanding-asp-net-ajax-debugging-capabilities/_static/image34.png)

**Рис. 12**: Sys.Debug.assert сообщение о сбое.  ([Просмотр полноразмерное изображение](understanding-asp-net-ajax-debugging-capabilities/_static/image36.png))


При появлении Sys.Debug.fail инструкции во время выполнения скрипта значение параметра сообщения будет отображаться в консоли отладки приложения, например Visual Studio 2008 и вас попросят отладку приложения. Один вариант, это может быть весьма полезно при нельзя задать точку останова в Visual Studio 2008 на встроенный сценарий, но требуется код, чтобы остановить в конкретной строке, чтобы можно было проверить значения переменных.

*Основные сведения о ScriptMode свойства элемента управления ScriptManager*

Библиотека ASP.NET AJAX включает отладочные и выпускные скрипт версиями, установленными на C:\Program Files\Microsoft ASP.NET\ASP.NET 2.0 AJAX Extensions\v1.0.61025\MicrosoftAjaxLibrary\System.Web.Extensions\1.0.61025.0 по умолчанию. Сценарии отладки, отформатированное, удобном для чтения и иметь несколько вызовов Sys.Debug.assert, разбросанных по их в сценарии выпуска установлены пробелов, теряются и использовать класс Sys.Debug только в случае необходимости, чтобы свести к минимуму их общий размер.

Элемент управления ScriptManager, добавленный к страницам ASP.NET AJAX считывает атрибут элемент compilation debug в файле web.config, чтобы определить, какие версии библиотеки скриптов для загрузки. Тем не менее, можно выбрать, если отладка или выпуск сценарии являются загружена (библиотеки скриптов или собственных настраиваемых сценариев), изменив свойство ScriptMode. ScriptMode принимает ScriptMode перечисления, члены которого включают Auto, отладки, выпуска и наследование.

Значение по умолчанию ScriptMode значение Auto, это означает, что ScriptManager будет проверять атрибут debug в файле web.config. После отладки ложно ScriptManager загрузит версии библиотеки скриптов ASP.NET AJAX. Если выполняется отладка отладочной версии скрипты будут загружены. Изменение свойства ScriptMode для выпуска и отладки заставляет ScriptManager загружать скрипты, соответствующие независимо от того, какое значение имеет атрибут debug в файле web.config. Перечисление 8 показан пример использования элемента управления ScriptManager загружать скрипты отладки из библиотеки ASP.NET AJAX.

**Пример 8. Загрузка отладки сценариев с помощью ScriptManager**.


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample11.aspx)]

Также можно загрузить различных версий собственных настраиваемых сценариев (Отладка или выпуск) с помощью свойства ScriptManager скриптов вместе с компонентом ScriptReference, как показано в Листинг 9.

**Листинг 9. Загрузка пользовательских сценариев, с помощью ScriptManager.**


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample12.aspx)]

> [!NOTE]
> Если вы загружаете пользовательские сценарии, с помощью компонента ScriptReference ScriptManager необходимо уведомить при окончании загрузки скрипта, добавив следующий код в конце скрипта:


[!code-csharp[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample13.cs)]

Код, показанный в Листинг 9 указывает ScriptManager для поиска для отладочной версии сценария пользователя, поэтому автоматически будет искать Person.debug.js вместо Person.js. Если файл Person.debug.js не найден, возникает ошибка.

В случаях, где требуется отладочной или окончательной версии пользовательского скрипта для загрузки в зависимости от значения свойства ScriptMode задайте для элемента управления ScriptManager управления ScriptReference ScriptMode свойству можно присвоить наследовать. Это приведет к нужной версии пользовательского скрипта для загрузки на основе свойства ScriptMode ScriptManager, как показано на 10 со списком. Так как свойства элемента управления ScriptManager ScriptMode присвоено отладки, сценарий Person.debug.js будут загружаться и используется на странице.

**Список 10. Наследование ScriptMode ScriptManager для пользовательских сценариев.**


[!code-aspx[Main](understanding-asp-net-ajax-debugging-capabilities/samples/sample14.aspx)]

С помощью свойства ScriptMode соответствующим образом можно легко отлаживать приложения и упрощают процесс общего. Скрипты выпуска библиотеки ASP.NET AJAX довольно трудно пошаговое выполнение и прочитать, поскольку форматирование кода был удален во время отладки скриптов форматируются специально для целей отладки.

## <a name="conclusion"></a>Заключение

Технология ASP.NET AJAX корпорации Майкрософт обеспечивает надежную основу для построения приложений с поддержкой AJAX, которые повышают общей работы конечного пользователя. Тем не менее как к любой другой технологии программирования, ошибок и других проблем, приложение наверняка возникнет. Узнать о различных функций отладки, доступных много времени и результат можно сохранить в более стабильные продукта.

В этой статье вы познакомились с понятием несколькими способами для отладки страниц ASP.NET AJAX, включая Internet Explorer с Visual Studio 2008, Web Development Helper и Firebug. Эти средства можно упростить общий процесс отладки, так как доступ к переменной данных, перемещайтесь по одной строке кода и просмотр операторов трассировки. Помимо различных средств отладки обсуждается вы также узнали, как можно использовать класс Sys.Debug библиотеки ASP.NET AJAX в приложении и как ScriptManager класс может использоваться для загрузки отладка или выпуск версии сценариев.

## <a name="bio"></a>Биография

Дэн Wahlin (наиболее ценные Майкрософт для ASP.NET и веб-служб XML) — .NET разработки инструктора и архитектура консультант по технической подготовке интерфейса ([www.interfacett.com)](http://www.interfacett.com). Дэн основал XML для разработчиков веб-сайт ASP.NET ([www.XMLforASP.NET](http://www.XMLforASP.NET)), на динамик является бюро и выступает на конференции несколько. Dan, выпущенной ДНК Windows Professional (Wrox) ASP.NET: советы, учебники и код (SAM), ASP.NET 1.1 предварительной оценки решений, Professional ASP.NET 2.0 AJAX (Wrox), взломает MVP ASP.NET 2.0 и XML, созданные для разработчиков на ASP.NET (SAM). Когда он не записывает код, статей или книг, Dan получает записи и записи музыки и воспроизведения Гольф и Баскетбольная с его жена и детей.

Скотт кате работает с веб-технологиями Майкрософт с 1997 и – президент myKB.com ([www.myKB.com](http://www.myKB.com)) приложений, основное внимание уделено базы знаний программные решения, где он специализируется на написание ASP.NET на основе. Скотт можно обратиться по электронной почте [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) или его блог по [ScottCate.com](http://ScottCate.com)

> [!div class="step-by-step"]
> [Назад](understanding-asp-net-ajax-web-services.md)
