---
uid: web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
title: "Борьбе с программы-роботы (C#) | Документы Microsoft"
author: wenz
description: "Автоматические программы-роботы Гипс блоги и другие веб-сайты с нежелательной почты, отправки форм комментарий без вмешательства пользователя. Элемент управления NoBot в ASP.NET AJAX Con..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/02/2008
ms.topic: article
ms.assetid: 0a1917e0-884a-4576-8e93-9ed660faae51
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/ajax-control-toolkit/nobot/fighting-bots-cs
msc.type: authoredcontent
ms.openlocfilehash: b8eedff4691c1115e242be884f9e74663dc0b4f9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="fighting-bots-c"></a>Борьбе с программы-роботы (C#)
====================
по [Кристиан Wenz](https://github.com/wenz)

[Загрузить код](http://download.microsoft.com/download/9/3/f/93f8daea-bebd-4821-833b-95205389c7d0/NoBot0.cs.zip) или [скачать PDF](http://download.microsoft.com/download/b/6/a/b6ae89ee-df69-4c87-9bfb-ad1eb2b23373/nobot0CS.pdf)

> Автоматические программы-роботы Гипс блоги и другие веб-сайты с нежелательной почты, отправки форм комментарий без вмешательства пользователя. Элемент управления NoBot в наборе элементов управления ASP.NET AJAX борьбы эти программы-роботы.


## <a name="overview"></a>Обзор

Автоматические программы-роботы Гипс блоги и другие веб-сайты с нежелательной почты, отправки форм комментарий без вмешательства пользователя. Элемент управления NoBot в наборе элементов управления ASP.NET AJAX борьбы эти программы-роботы.

## <a name="steps"></a>Шаги

Распространенный подход для предотвращения программы-роботы является использование теста CAPTCHAs полностью автоматизировать открытый Тьюринга о компьютерах и люди расстоянии друг от друга. Тест Тьюринга изначально теста где кто-то требуются решить, верна ли связь партнера человек или на компьютере. В веб-тест CAPTCHA обычно состоит из изображения на нем некоторые искаженный буквами. Идея состоит, что только человек может прочитать буквы в образе, в то время как алгоритмы OCR завершится ошибкой.

Некоторые преимущества и недостатки этого подхода, но с обсуждением выходит за рамки данного руководства. Однако элемент управления в набор элементов управления ASP.NET AJAX, который предоставляет подобный подход: `NoBot`. Это проще, чем тест CAPTCHA преодолеть, но очень прост в использовании и цен очень хорошо на веб-сайты, такие как блоги, где он считается пройденной, если большинство нежелательной почты попыток нарушается, который `NoBot` можно сделать элемент управления.

`NoBot`перехватывает обратной передачи текущего веб-формы ASP.NET, если соблюдается по крайней мере одно из следующих условий:

- Браузер не удается решить головоломку JavaScript (например при JavaScript отключена)
- Форму, чтобы быстро отправленные пользователем
- IP-адрес клиента отправки формы слишком часто в течение определенного периода времени.

Чтобы проверить выполнение этих условий `NoBot` управления требует этих атрибутов (все они необязательно):

- `ResponseMinimumDelaySeconds`Минимальное количество секунд между обратными передачами
- `CutoffWindowSeconds`Продолжительность интервала времени, в котором обратных передач с одного IP-адреса являются мерами
- `CutoffMaximumInstances`Максимальное количество секунд в интервал времени

Следующие требования разметки, по крайней мере двух секунд должно пройти между обратными передачами и существуют только пять обратной передачи или меньше в пределах 30-секундного интервала:

[!code-aspx[Main](fighting-bots-cs/samples/sample1.aspx)]

Затем обычным образом Убедитесь, что для включения `ScriptManager` на странице, чтобы загрузить библиотеки ASP.NET AJAX и может использоваться набор элементов управления:

[!code-aspx[Main](fighting-bots-cs/samples/sample2.aspx)]

Поскольку большинство проверок `NoBot` выполняет возникают на стороне сервера, необходимо проверить результат этих проверок. Это можно сделать путем вызова `NoBot` `IsValid()` метод. Он имеет один аргумент (как `out` параметр /`ByRef` параметров) типа `NoBotState`. Строковое представление содержит по причине, если проверка завершается неудачно и `Valid` в противном случае. Следующий код выводит сообщение в соответствии с `NoBot`в результате:

[!code-aspx[Main](fighting-bots-cs/samples/sample3.aspx)]

Наконец требуются формы для отправки и элемент label для вывода сообщения, и все готово!

[!code-aspx[Main](fighting-bots-cs/samples/sample4.aspx)]

При выполнении этого сценария и деактивировать JavaScript или отправить форму в течение первых двух секунд или отправки формы семь раз в течение 30 секунд, вы получите сообщение об ошибке. Однако рационально использовать этот элемент управления, поскольку лишь около 90-95% пользователей JavaScript активирован, 5 – 10% от пользователей не будут применены `NoBot`этого теста.


[![Это сообщение об ошибке вызвано программа-робот](fighting-bots-cs/_static/image2.png)](fighting-bots-cs/_static/image1.png)

Это сообщение об ошибке вызвано программа-робот ([Просмотр полноразмерное изображение](fighting-bots-cs/_static/image3.png))

>[!div class="step-by-step"]
[Вперед](fighting-bots-vb.md)
