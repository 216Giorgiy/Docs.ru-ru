---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
title: "Фильтрация на двух страницах (C#) иерархического | Документы Microsoft"
author: rick-anderson
description: "В этом учебнике мы рассмотрим, как для разделения главного и подчиненного представлений отчета на двух страницах. На странице «master» для отображения списка categ мы используем управления повторителем..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/30/2010
ms.topic: article
ms.assetid: 68b8c023-92fa-4df6-9563-1764e16e4b04
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-filtering-acess-two-pages-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: bb86db509ca26dde0c24341dee402e7af4355507
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="masterdetail-filtering-across-two-pages-c"></a><span data-ttu-id="f8ea9-104">Иерархического фильтрации на двух страницах (C#)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-104">Master/Detail Filtering Across Two Pages (C#)</span></span>
====================
<span data-ttu-id="f8ea9-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f8ea9-106">[Загрузить пример приложения](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) или [скачать PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_34_CS.exe) or [Download PDF](master-detail-filtering-acess-two-pages-datalist-cs/_static/datatutorial34cs1.pdf)</span></span>

> <span data-ttu-id="f8ea9-107">В этом учебнике мы рассмотрим, как для разделения главного и подчиненного представлений отчета на двух страницах.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-107">In this tutorial we look at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="f8ea9-108">На странице «главный» мы используем управления повторителем для подготовки к просмотру список категорий, если он выбран, чтобы начать на странице «сведения» где DataList двух столбцов показывает этих продуктов, принадлежащих выбранной категории.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-108">In the "master" page we use a Repeater control to render a list of categories that, when clicked, will take the user to the "details" page where a two-column DataList shows those products belonging to the selected category.</span></span>


## <a name="introduction"></a><span data-ttu-id="f8ea9-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="f8ea9-109">Introduction</span></span>

<span data-ttu-id="f8ea9-110">В [предыдущего учебника](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) мы узнали, как отображать отчеты главного и подчиненного представлений одной веб-странице с помощью элементами управления DropDownList для отображения записей «главный» и DataList для отображения «подробности».</span><span class="sxs-lookup"><span data-stu-id="f8ea9-110">In the [preceding tutorial](master-detail-filtering-with-a-dropdownlist-datalist-cs.md) we saw how to display master/detail reports in a single web page using DropDownLists to display the "master" records and a DataList to display the "details."</span></span> <span data-ttu-id="f8ea9-111">Другой распространенный подход используется для главного и подчиненного представлений отчетов является основных записей в одной веб-страницы и сведений на другом.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-111">Another common pattern used for master/detail reports is to have the master records on one web page and the details on another.</span></span> <span data-ttu-id="f8ea9-112">В предыдущем [иерархического фильтрации по две страницы](../masterdetail/master-detail-filtering-across-two-pages-cs.md) учебнике мы рассмотрели этот шаблон, с помощью элемента управления GridView для отображения всех поставщиков в системе.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-112">In the earlier [Master/Detail Filtering Across Two Pages](../masterdetail/master-detail-filtering-across-two-pages-cs.md) tutorial, we examined this pattern using a GridView to display all of the suppliers in the system.</span></span> <span data-ttu-id="f8ea9-113">Это GridView включены HyperLinkField, который подготовлен к просмотру как ссылка на второй странице, передавая `SupplierID` в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-113">This GridView included a HyperLinkField, which rendered as a link to a second page, passing along the `SupplierID` in the querystring.</span></span> <span data-ttu-id="f8ea9-114">Второй странице используется элемент управления GridView отображены продукты, предоставляемые выбранного поставщика.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-114">The second page used a GridView to list those products provided by the selected supplier.</span></span>

<span data-ttu-id="f8ea9-115">Такие отчеты двухстраничный главного и подчиненного представлений можно выполнить при помощи управления DataList и повторителя.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-115">Such two-page master/detail reports can be accomplished using DataList and Repeater controls as well.</span></span> <span data-ttu-id="f8ea9-116">Единственное различие — что DataList ни повторителя обеспечивает поддержку управления HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-116">The only difference is that neither the DataList nor the Repeater provides support for the HyperLinkField control.</span></span> <span data-ttu-id="f8ea9-117">Вместо этого необходимо добавить гиперссылку веб-элемент управления или элемент привязки HTML (`<a>`) в элементе управления `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-117">Instead, we must add a HyperLink Web control or an anchor HTML element (`<a>`) within the control's `ItemTemplate`.</span></span> <span data-ttu-id="f8ea9-118">По гиперссылке `NavigateUrl` свойство или точку привязки `href` атрибут легко настроить с помощью декларативной или программного подхода.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-118">The HyperLink's `NavigateUrl` property or the anchor's `href` attribute can then be customized using declarative or programmatic approaches.</span></span>

<span data-ttu-id="f8ea9-119">В этом учебнике мы рассмотрим пример, в котором перечислены категории в виде маркированного списка на одной странице с помощью элемента управления повторителем.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-119">In this tutorial we'll explore an example that lists the categories in a bulleted list on one page using a Repeater control.</span></span> <span data-ttu-id="f8ea9-120">Каждый элемент списка будет включать имя и описание, категории с именем категории отображаются в виде ссылки на вторую страницу.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-120">Each list item will include the category's name and description, with the category name displayed as a link to a second page.</span></span> <span data-ttu-id="f8ea9-121">Щелкните эту ссылку будет whisk пользователя на вторую страницу, где DataList покажет эти продукты, которые принадлежат выбранной категории.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-121">Clicking on this link will whisk the user to the second page, where a DataList will show those products that belong to the selected category.</span></span>

## <a name="step-1-displaying-the-categories-in-a-bulleted-list"></a><span data-ttu-id="f8ea9-122">Шаг 1: Отображение категорий в виде маркированного списка</span><span class="sxs-lookup"><span data-stu-id="f8ea9-122">Step 1: Displaying the Categories in a Bulleted List</span></span>

<span data-ttu-id="f8ea9-123">Первым шагом при создании любого главного и подчиненного представлений отчета является запуск по отображению записей «главный».</span><span class="sxs-lookup"><span data-stu-id="f8ea9-123">The first step in creating any master/detail report is to start by displaying the "master" records.</span></span> <span data-ttu-id="f8ea9-124">Таким образом нашей первой задачей является отображение категории в странице «главный».</span><span class="sxs-lookup"><span data-stu-id="f8ea9-124">Therefore, our first task is to display the categories in the "master" page.</span></span> <span data-ttu-id="f8ea9-125">Откройте `CategoryListMaster.aspx` страницы в `DataListRepeaterFiltering` , добавьте элемент управления повторителем, а, смарт-теге, необязательно, чтобы добавить новый элемент управления ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-125">Open the `CategoryListMaster.aspx` page in the `DataListRepeaterFiltering` folder, add a Repeater control, and, from the smart tag, opt to add a new ObjectDataSource.</span></span> <span data-ttu-id="f8ea9-126">Настройте новый элемент управления ObjectDataSource таким образом, чтобы он обращается к своим данным из `CategoriesBLL` класса `GetCategories` метод (см. рис. 1).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-126">Configure the new ObjectDataSource so that it accesses its data from the `CategoriesBLL` class's `GetCategories` method (see Figure 1).</span></span>


<span data-ttu-id="f8ea9-127">[![Настройка ObjectDataSource использовать метод GetCategories класса CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-127">[![Configure the ObjectDataSource to Use the CategoriesBLL Class's GetCategories Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image2.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="f8ea9-128">**Рис. 1**: Настройка ObjectDataSource для использования `CategoriesBLL` класса `GetCategories` метод ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-128">**Figure 1**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class's `GetCategories` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image3.png))</span></span>


<span data-ttu-id="f8ea9-129">Затем определите шаблоны повторителя таким образом, что каждый название и описание категории отображается как элемент в виде маркированного списка.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-129">Next, define the Repeater's templates such that it displays each category name and description as an item in a bulleted list.</span></span> <span data-ttu-id="f8ea9-130">Давайте еще не беспокоиться о получении каждой категории ссылка на страницу сведений.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-130">Let's not yet worry about having each category link to the details page.</span></span> <span data-ttu-id="f8ea9-131">Ниже показана декларативная разметка для повторителя и ObjectDataSource:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-131">The following shows the declarative markup for the Repeater and ObjectDataSource:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="f8ea9-132">С этой разметкой завершения мгновение просмотрите ход работы через браузер.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-132">With this markup complete, take a moment to view our progress through a browser.</span></span> <span data-ttu-id="f8ea9-133">Как показано на рисунке 2, повторителя выводится в виде маркированного списка отображаются имя и описание каждой категории.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-133">As Figure 2 shows, the Repeater renders as a bulleted list showing each category's name and description.</span></span>


<span data-ttu-id="f8ea9-134">[![Каждая категория будет отображена как элемент маркированного списка](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-134">[![Each Category is Displayed as a Bulleted List Item](master-detail-filtering-acess-two-pages-datalist-cs/_static/image5.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="f8ea9-135">**На рисунке 2**: каждый категория будет отображена как элемент маркированного списка ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-135">**Figure 2**: Each Category is Displayed as a Bulleted List Item ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-turning-the-category-name-into-a-link-to-the-details-page"></a><span data-ttu-id="f8ea9-136">Шаг 2: Имя категории превращается в ссылку на страницу сведений</span><span class="sxs-lookup"><span data-stu-id="f8ea9-136">Step 2: Turning the Category Name into a Link to the Details Page</span></span>

<span data-ttu-id="f8ea9-137">Чтобы предоставить пользователю для отображения информации «подробности» для данной категории, необходимо добавить ссылку к каждому маркированный список элементом, к которому, если он выбран, чтобы начать на вторую страницу (`ProductsForCategoryDetails.aspx`).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-137">To allow a user to display the "details" information for a given category, we need to add a link to each bulleted list item that, when clicked, will take the user to the second page (`ProductsForCategoryDetails.aspx`).</span></span> <span data-ttu-id="f8ea9-138">Второй страницы, будет выведено продуктов для выбранной категории с помощью DataList.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-138">This second page will then display the products for the selected category using a DataList.</span></span> <span data-ttu-id="f8ea9-139">Чтобы определить категории, в которой связь была нажата, нам нужно передать выбранной категории `CategoryID` на вторую страницу через некоторый механизм.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-139">In order to determine the category whose link was clicked, we need to pass the clicked category's `CategoryID` to the second page through some mechanism.</span></span> <span data-ttu-id="f8ea9-140">Простой и самый простой способ передачи скалярные данные из одной страницы в другой — через строку запроса, — параметром, который будет использоваться в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-140">The simplest, most straightforward way to transfer scalar data from one page to another is through the querystring, which is the option we'll use in this tutorial.</span></span> <span data-ttu-id="f8ea9-141">В частности `ProductsForCategoryDetails.aspx` страницы будет ожидать, что выбранный  *`categoryID`*  значение должен передаваться querystring поле с именем `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-141">In particular, the `ProductsForCategoryDetails.aspx` page will expect the selected *`categoryID`* value to be passed through a querystring field named `CategoryID`.</span></span> <span data-ttu-id="f8ea9-142">Например, чтобы просмотреть продукты категории напитков, который имеет `CategoryID` 1, пользователю будет посетить `ProductsForCategoryDetails.aspx?CategoryID=1`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-142">For example, to view the products for the Beverages category, which has a `CategoryID` of 1, a user would visit `ProductsForCategoryDetails.aspx?CategoryID=1`.</span></span>

<span data-ttu-id="f8ea9-143">Создание гиперссылки для каждого элемента маркированного списка в Повторителе, то необходимо либо добавить гиперссылку веб-элемент управления или элемент привязки HTML (`<a>`) для `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-143">To create a hyperlink for each bulleted list item in the Repeater we need to either add a HyperLink Web control or an HTML anchor element (`<a>`) to the `ItemTemplate`.</span></span> <span data-ttu-id="f8ea9-144">В сценарии, где гиперссылки отображается одинаково для каждой строки, подойдет любой из этих подходов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-144">In scenarios where the hyperlink is displayed the same for each row, either approach will suffice.</span></span> <span data-ttu-id="f8ea9-145">Знаки повторения я предпочитаю, с помощью элемента привязки.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-145">For Repeaters, I prefer using the anchor element.</span></span> <span data-ttu-id="f8ea9-146">Чтобы использовать элемент привязки, обновите ItemTemplate повторителя:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-146">To use the anchor element, update the Repeater's ItemTemplate to:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample2.aspx)]

<span data-ttu-id="f8ea9-147">Обратите внимание, что `CategoryID` могут быть добавлены непосредственно в элемент привязки `href` по умолчанию однако для поэтому обязательно разделения `href` значение атрибута в апострофы (и Примечание кавычки) с момента `Eval` метод в пределах `href` атрибут разделяет его строки (`"CategoryID"`) в кавычки.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-147">Note that the `CategoryID` can be injected directly within the anchor element's `href` attribute; however, to do so be certain to delimit the `href` attribute's value with apostrophes (and note quotation marks) since the `Eval` method within the `href` attribute delimits its string (`"CategoryID"`) with quotation marks.</span></span> <span data-ttu-id="f8ea9-148">Кроме того гиперссылку веб-элемент управления может использоваться вместо:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-148">Alternatively, a HyperLink Web control can be used instead:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample3.aspx)]

<span data-ttu-id="f8ea9-149">Обратите внимание как статические часть URL-адрес — `ProductsForCategoryDetails.aspx?CategoryID` — добавляется к результату `Eval("CategoryID")` непосредственно в синтаксис привязки данных, с помощью объединения строк.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-149">Note how the static portion of the URL — `ProductsForCategoryDetails.aspx?CategoryID` — is appended to the result of `Eval("CategoryID")` directly within the databinding syntax using string concatenation.</span></span>

<span data-ttu-id="f8ea9-150">Одно из преимуществ использования HyperLink — что его можно программным образом доступ повторителя `ItemDataBound` обработчика событий, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-150">One benefit of using the HyperLink control is that it can be programmatically accessed from the Repeater's `ItemDataBound` event handler, if needed.</span></span> <span data-ttu-id="f8ea9-151">Например можно отображать имя категории, как текст, а не как ссылки на категории с нет соответствующих продуктов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-151">For example, you might want to display the category name as text rather than as a link for categories with no associated products.</span></span> <span data-ttu-id="f8ea9-152">Такой контроль может осуществляться программными средствами в `ItemDataBound` обработчика события; для категорий нет связанных продуктов, гиперссылки `NavigateUrl` свойство может принимать значение содержит пустую строку, тем самым в результате чего это имя определенной категории Подготовка к просмотру как обычный текст (а не как ссылки).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-152">Such a check could be programmatically performed in the `ItemDataBound` event handler; for categories with no associated products, the HyperLink's `NavigateUrl` property could be set to a blank string, thereby resulting in that particular category name rendering as plain text (rather than as a link).</span></span> <span data-ttu-id="f8ea9-153">Обращаться к [форматирование DataList и повторителя после данных](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) учебника Дополнительные сведения о форматировании содержимого DataList и повторителя элемента на основании программная логика через `ItemDataBound` обработчика событий.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-153">Refer back to the [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorial for more information on formatting the DataList and Repeater's contents based on programmatic logic through the `ItemDataBound` event handler.</span></span>

<span data-ttu-id="f8ea9-154">Если вы следуете, вы можете использовать элемент привязки или подход элемента управления HyperLink на странице.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-154">If you are following along, feel free to use either the anchor element or HyperLink control approach in your page.</span></span> <span data-ttu-id="f8ea9-155">Независимо от подхода, при просмотре страницы через браузер, имена категорий должны отображаться как ссылка на `ProductsForCategoryDetails.aspx`, передавая применимый `CategoryID` значение (см. рис. 3).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-155">Regardless of the approach, when viewing the page through a browser each category name should be rendered as a link to `ProductsForCategoryDetails.aspx`, passing in the applicable `CategoryID` value (see Figure 3).</span></span>


<span data-ttu-id="f8ea9-156">[![Имена категорий связывать с ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-156">[![The Category Names Now Link to ProductsForCategoryDetails.aspx](master-detail-filtering-acess-two-pages-datalist-cs/_static/image8.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="f8ea9-157">**Рис. 3**: категория имена теперь ссылку, чтобы `ProductsForCategoryDetails.aspx` ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-157">**Figure 3**: The Category Names Now Link to `ProductsForCategoryDetails.aspx` ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image9.png))</span></span>


## <a name="step-3-listing-the-products-that-belong-to-the-selected-category"></a><span data-ttu-id="f8ea9-158">Шаг 3: Список продуктов, которые принадлежат выбранной категории</span><span class="sxs-lookup"><span data-stu-id="f8ea9-158">Step 3: Listing the Products that Belong to the Selected Category</span></span>

<span data-ttu-id="f8ea9-159">С `CategoryListMaster.aspx` страница полностью, мы готовы к можем обратиться к реализации странице «Подробности» `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-159">With the `CategoryListMaster.aspx` page complete, we're ready to turn our attention to implementing the "details" page, `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="f8ea9-160">Открыть эту страницу, перетащите DataList из области элементов в конструктор и задайте его `ID` свойства `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-160">Open this page, drag a DataList from the Toolbox onto the Designer, and set its `ID` property to `ProductsInCategory`.</span></span> <span data-ttu-id="f8ea9-161">Затем выберите элемент управления DataList смарт-теге для добавления новых ObjectDataSource на страницу, присвоив ему имя `ProductsInCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-161">Next, from the DataList's smart tag choose to add a new ObjectDataSource to the page, naming it `ProductsInCategoryDataSource`.</span></span> <span data-ttu-id="f8ea9-162">Настройте его таким образом, что она вызывает `ProductsBLL` класса `GetProductsByCategoryID(categoryID)` метод; набор, перечислены в раскрывающемся списке на вкладках INSERT, UPDATE и DELETE (нет).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-162">Configure it such that it calls the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method; set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="f8ea9-163">[![Настройка ObjectDataSource использовать метод GetProductsByCategoryID(categoryID) класса ProductsBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-163">[![Configure the ObjectDataSource to Use the ProductsBLL Class's GetProductsByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image11.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="f8ea9-164">**Рис. 4**: Настройка ObjectDataSource для использования `ProductsBLL` класса `GetProductsByCategoryID(categoryID)` метод ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-164">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class's `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image12.png))</span></span>


<span data-ttu-id="f8ea9-165">Поскольку `GetProductsByCategoryID(categoryID)` метод принимает входной параметр (*`categoryID`*), мастер источников данных выберите дает нам возможность указать источник параметров.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-165">Since the `GetProductsByCategoryID(categoryID)` method accepts an input parameter (*`categoryID`*), the Choose Data Source wizard offers us an opportunity to specify the parameter's source.</span></span> <span data-ttu-id="f8ea9-166">Задайте источник параметра строки запроса с помощью QueryStringField `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-166">Set the parameter source to QueryString using the QueryStringField `CategoryID`.</span></span>


<span data-ttu-id="f8ea9-167">[![Использовать CategoryID поля строки запроса в качестве источника параметра](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-167">[![Use the Querystring Field CategoryID as the Parameter's Source](master-detail-filtering-acess-two-pages-datalist-cs/_static/image14.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="f8ea9-168">**Рис. 5**: используйте поле Querystring `CategoryID` как параметр источника ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-168">**Figure 5**: Use the Querystring Field `CategoryID` as the Parameter's Source ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="f8ea9-169">Как видно из предыдущих занятий, после завершения работы мастера выберите источник данных, Visual Studio автоматически создает `ItemTemplate` для DataList списком каждого имени поля данных и значение.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-169">As we've seen in previous tutorials, after completing the Choose Data Source wizard, Visual Studio automatically creates an `ItemTemplate` for the DataList that lists each data field name and value.</span></span> <span data-ttu-id="f8ea9-170">Замените этот шаблон, содержащий только имя, поставщик и цену продукта.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-170">Replace this template with one that lists only the product's name, supplier, and price.</span></span> <span data-ttu-id="f8ea9-171">Кроме того, задать элемент управления DataList `RepeatColumns` равным 2.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-171">Also, set the DataList's `RepeatColumns` property to 2.</span></span> <span data-ttu-id="f8ea9-172">После внесения этих изменений DataList и ObjectDataSource должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-172">After these changes, your DataList and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample4.aspx)]

<span data-ttu-id="f8ea9-173">Чтобы просмотреть эту страницу в действии, запустите `CategoryListMaster.aspx` страницы, затем щелкните ссылку в маркированный список категорий.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-173">To view this page in action, start from the `CategoryListMaster.aspx` page; next, click on a link in the categories bulleted list.</span></span> <span data-ttu-id="f8ea9-174">Таким образом вы перейдете на `ProductsForCategoryDetails.aspx`, передав вдоль `CategoryID` через строку запроса.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-174">Doing so will take you to `ProductsForCategoryDetails.aspx`, passing along the `CategoryID` through the querystring.</span></span> <span data-ttu-id="f8ea9-175">`ProductsInCategoryDataSource` ObjectDataSource в `ProductsForCategoryDetails.aspx` затем получить только те продукты, для указанной категории и их отображения в DataList, который отображает два продукта для каждой строки.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-175">The `ProductsInCategoryDataSource` ObjectDataSource in `ProductsForCategoryDetails.aspx` will then get just those products for the specified category and display them in the DataList, which renders two products per row.</span></span> <span data-ttu-id="f8ea9-176">Рис. 6 показан снимок экрана `ProductsForCategoryDetails.aspx` при просмотре напитков.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-176">Figure 6 shows a screenshot of `ProductsForCategoryDetails.aspx` when viewing the Beverages.</span></span>


<span data-ttu-id="f8ea9-177">[![Отображаются напитков, два каждой строки](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-177">[![The Beverages are Displayed, Two per Row](master-detail-filtering-acess-two-pages-datalist-cs/_static/image17.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image16.png)</span></span>

<span data-ttu-id="f8ea9-178">**Рис. 6**: отображаются напитков, два каждой строки ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-178">**Figure 6**: The Beverages are Displayed, Two per Row ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image18.png))</span></span>


## <a name="step-4-displaying-category-information-on-productsforcategorydetailsaspx"></a><span data-ttu-id="f8ea9-179">Шаг 4: Отображение сведений о категории на ProductsForCategoryDetails.aspx</span><span class="sxs-lookup"><span data-stu-id="f8ea9-179">Step 4: Displaying Category Information on ProductsForCategoryDetails.aspx</span></span>

<span data-ttu-id="f8ea9-180">Когда пользователь выбирает категорию в `CategoryListMaster.aspx`, они направляются `ProductsForCategoryDetails.aspx` и отображаются продукты, которые принадлежат выбранной категории.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-180">When a user clicks on a category in `CategoryListMaster.aspx`, they are taken to `ProductsForCategoryDetails.aspx` and shown the products that belong to the selected category.</span></span> <span data-ttu-id="f8ea9-181">Однако в `ProductsForCategoryDetails.aspx` существуют не визуальные подсказки о том, какая категория выбрана.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-181">However, in `ProductsForCategoryDetails.aspx` there are no visual cues as to what category was selected.</span></span> <span data-ttu-id="f8ea9-182">Пользователь, который предназначен для щелкните напитков, но случайно выбранная приправы никак не реализации свои ошибки после попадания `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-182">A user that meant to click Beverages, but accidentally clicked Condiments, has no way of realizing their mistake once they reach `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="f8ea9-183">Чтобы устранить эту проблему, потенциальные, можно отобразить сведения о выбранной категории, его имя и описание — в верхней части `ProductsForCategoryDetails.aspx` страницы.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-183">To alleviate this potential problem, we can display information about the selected category — its name and description — at the top of the `ProductsForCategoryDetails.aspx` page.</span></span>

<span data-ttu-id="f8ea9-184">Для этого добавьте FormView над элементом управления повторителем в `ProductsForCategoryDetails.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-184">To accomplish this, add a FormView above the Repeater control in `ProductsForCategoryDetails.aspx`.</span></span> <span data-ttu-id="f8ea9-185">Добавьте новый элемент управления ObjectDataSource страницы FormView смарт-теге с именем `CategoryDataSource` и настройте его для использования `CategoriesBLL` класса `GetCategoryByCategoryID(categoryID)` метод.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-185">Next, add a new ObjectDataSource to the page from the FormView's smart tag named `CategoryDataSource` and configure it to use the `CategoriesBLL` class's `GetCategoryByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="f8ea9-186">[![Доступ к сведениям о категории через метод GetCategoryByCategoryID(categoryID) класса CategoriesBLL](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-186">[![Access Information about the Category through the CategoriesBLL Class's GetCategoryByCategoryID(categoryID) Method](master-detail-filtering-acess-two-pages-datalist-cs/_static/image20.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image19.png)</span></span>

<span data-ttu-id="f8ea9-187">**Рис. 7**: доступ к сведениям о категории через `CategoriesBLL` класса `GetCategoryByCategoryID(categoryID)` метод ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-187">**Figure 7**: Access Information about the Category through the `CategoriesBLL` Class's `GetCategoryByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image21.png))</span></span>


<span data-ttu-id="f8ea9-188">Как и в `ProductsInCategoryDataSource` ObjectDataSource добавлен на шаге 3 `CategoryDataSource`в мастер настройки источника данных запрашивает источник для `GetCategoryByCategoryID(categoryID)` метод входных параметров.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-188">As with the `ProductsInCategoryDataSource` ObjectDataSource added in Step 3, the `CategoryDataSource`'s Configure Data Source wizard prompts us for a source for the `GetCategoryByCategoryID(categoryID)` method's input parameter.</span></span> <span data-ttu-id="f8ea9-189">Использовать одинаковые параметры как до, источника параметра установите значение строки запроса и значение QueryStringField `CategoryID` (указывают назад на рис. 5).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-189">Use the exact same settings as before, setting the parameter source to QueryString and the QueryStringField value to `CategoryID` (refer back to Figure 5).</span></span>

<span data-ttu-id="f8ea9-190">По завершении работы мастера Visual Studio автоматически создает `ItemTemplate`, `EditItemTemplate`, и `InsertItemTemplate` для FormView.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-190">After completing the wizard, Visual Studio automatically creates an `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate` for the FormView.</span></span> <span data-ttu-id="f8ea9-191">Так как мы предлагаем интерфейс только для чтения, вы можете удалить `EditItemTemplate` и `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-191">Since we're providing a read-only interface, feel free to remove the `EditItemTemplate` and `InsertItemTemplate`.</span></span> <span data-ttu-id="f8ea9-192">Кроме того, вы можете настроить FormView `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-192">Also, feel free to customize the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="f8ea9-193">После удаления неиспользуемых шаблоны и настройка ItemTemplate, ваши FormView и ObjectDataSource должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-193">After removing the superfluous templates and customizing the ItemTemplate, your FormView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="f8ea9-194">На рисунке 8 показан пример при просмотре эту страницу через браузер.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-194">Figure 8 shows a screen shot when viewing this page through a browser.</span></span>

> [!NOTE]
> <span data-ttu-id="f8ea9-195">В дополнение к FormView, были также добавлены элемента управления HyperLink выше FormView, которое будет перенаправлять пользователя обратно в список категорий (`CategoryListMaster.aspx`).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-195">In addition to the FormView, I've also added a HyperLink control above the FormView that will take the user back to the list of categories (`CategoryListMaster.aspx`).</span></span> <span data-ttu-id="f8ea9-196">Вы можете разместить эту ссылку в другом месте или удалите его вообще.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-196">Feel free to place this link elsewhere or to omit it altogether.</span></span>


<span data-ttu-id="f8ea9-197">[![Сведения о категории — теперь отображаются в верхней части страницы](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-197">[![Category Information is Now Displayed at the Top of the Page](master-detail-filtering-acess-two-pages-datalist-cs/_static/image23.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image22.png)</span></span>

<span data-ttu-id="f8ea9-198">**Рис. 8**: сведения о категории — теперь отображаются в верхней части страницы ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-198">**Figure 8**: Category Information is Now Displayed at the Top of the Page ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image24.png))</span></span>


## <a name="step-5-displaying-a-message-if-no-products-belong-to-the-selected-category"></a><span data-ttu-id="f8ea9-199">Шаг 5: Отображение сообщения, если продукты не принадлежат к выбранной категории</span><span class="sxs-lookup"><span data-stu-id="f8ea9-199">Step 5: Displaying a Message if No Products Belong to the Selected Category</span></span>

<span data-ttu-id="f8ea9-200">`CategoryListMaster.aspx` Странице перечислены все категории в системе, независимо от них связанных продуктов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-200">The `CategoryListMaster.aspx` page lists all categories in the system, regardless of whether there are any associated products.</span></span> <span data-ttu-id="f8ea9-201">Если пользователь щелкает категорию с нет соответствующих продуктов, элемент управления DataList в `ProductsForCategoryDetails.aspx` не отображается, как источника данных не будет иметь элементов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-201">If a user clicks on a category with no associated products, the DataList in `ProductsForCategoryDetails.aspx` will not be rendered, as its data source will not have any items.</span></span> <span data-ttu-id="f8ea9-202">Как видно в предыдущих учебных GridView предоставляет `EmptyDataText` свойство, которое может использоваться для указания текстовое сообщение для отображения, если нет записей в источник данных.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-202">As we've seen in past tutorials, the GridView provides an `EmptyDataText` property that can be used to specify a text message to display if there are no records in its data source.</span></span> <span data-ttu-id="f8ea9-203">К сожалению ни DataList, ни повторителя не имеют такого свойства.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-203">Unfortunately, neither the DataList nor Repeater has such a property.</span></span>

<span data-ttu-id="f8ea9-204">Для отображения сообщения, информирующего пользователя о том, что нет ни одного сопоставления продукта для выбранной категории, необходимо добавить метку элемент управления на страницу `Text` присваивается сообщение, отображаемое в случае, если нет ни одного соответствующего продукта.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-204">In order to display a message informing the user that there are no matching products for the selected category, we need to add a Label control to the page whose `Text` property is assigned the message to display in the event that there are no matching products.</span></span> <span data-ttu-id="f8ea9-205">Затем необходимо программно задать его `Visible` свойство зависимости от того, является ли элемент управления DataList содержит какие-либо элементы.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-205">We then need to programmatically set its `Visible` property based on whether or not the DataList contains any items.</span></span>

<span data-ttu-id="f8ea9-206">Чтобы сделать это, начните с добавления метку под DataList.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-206">To accomplish this, start by adding a Label beneath the DataList.</span></span> <span data-ttu-id="f8ea9-207">Задайте его `ID` свойства `NoProductsMessage` и его `Text` значение «Нет ни одного продукта для выбранной категории...»</span><span class="sxs-lookup"><span data-stu-id="f8ea9-207">Set its `ID` property to `NoProductsMessage` and its `Text` property to "There are no products for the selected category…"</span></span> <span data-ttu-id="f8ea9-208">Теперь нам нужны программно задать эту метку `Visible` свойство зависимости ли все данные были привязаны к `ProductsInCategory` DataList.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-208">Next, we need to programmatically set this Label's `Visible` property based on whether or not any data was bound to the `ProductsInCategory` DataList.</span></span> <span data-ttu-id="f8ea9-209">Это назначение должно выполняться после привязки данных к элементу управления DataList.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-209">This assignment must be made after the data has been bound to the DataList.</span></span> <span data-ttu-id="f8ea9-210">GridView, DetailsView и FormView удалось создать обработчик событий для элемента управления `DataBound` события, который вызывается после завершения привязки данных.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-210">For the GridView, DetailsView, and FormView, we could create an event handler for the control's `DataBound` event, which fires after databinding has completed.</span></span> <span data-ttu-id="f8ea9-211">Однако элемент управления DataList ни повторителя имеет `DataBound` доступные события.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-211">However, neither the DataList nor the Repeater has a `DataBound` event available.</span></span>

<span data-ttu-id="f8ea9-212">В данном конкретном примере можно назначить метку `Visible` свойство в `Page_Load` обработчика событий, так как данные будут назначены DataList до страницы `Load` событий.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-212">For this particular example we can assign the Label's `Visible` property in the `Page_Load` event handler, since the data will have been assigned to the DataList prior to the page's `Load` event.</span></span> <span data-ttu-id="f8ea9-213">Однако такой подход не будет работать в общем случае, как данные из ObjectDataSource может быть привязан к элементу управления DataList позднее в жизненном цикле страницы.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-213">However, this approach would not work in the general case, as the data from the ObjectDataSource might be bound to the DataList later in the page's lifecycle.</span></span> <span data-ttu-id="f8ea9-214">Например, если отображаемых данных основана на значение другого элемента управления, такие как если бы отображение главного и подчиненного представлений отчетов при помощи DropDownList для хранения записей «главный», данные могут не привязывается веб-управления данными до `PreRender` этап в жизненного цикла страницы.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-214">For example, if the displayed data is based upon the value in another control, such as it is when displaying a master/detail report using a DropDownList to hold the "master" records, the data may not rebound to the data Web control until the `PreRender` stage in the page's life cycle.</span></span>

<span data-ttu-id="f8ea9-215">Одно решение, которое будет работать для всех вариантов, — присвоить `Visible` свойства `False` в элемент управления DataList `ItemDataBound` (или `ItemCreated`) обработчик событий при привязке элемент `Item` или `AlternatingItem`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-215">One solution which will work for all cases is to assign the `Visible` property to `False` in the DataList's `ItemDataBound` (or `ItemCreated`) event handler when binding an item type of `Item` or `AlternatingItem`.</span></span> <span data-ttu-id="f8ea9-216">В этом случае мы знаем, что имеется по крайней мере один данные элемента в источнике данных и таким образом можно скрыть `NoProductsMessage` метки.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-216">In such a case we know that there is at least one data item in the data source and therefore can hide the `NoProductsMessage` Label.</span></span> <span data-ttu-id="f8ea9-217">Помимо этого обработчика событий, заключаются в обработчик событий для DataList `DataBinding` событий, где инициализации метки `Visible` свойства `True`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-217">In addition to this event handler, we also need an event handler for the DataList's `DataBinding` event, where we initialize the Label's `Visible` property to `True`.</span></span> <span data-ttu-id="f8ea9-218">С момента `DataBinding` событие возникает перед `ItemDataBound` события, метки `Visible` начальные значения свойств `True`; Если все элементы данных, тем не менее, оно будет иметь значение `False`.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-218">Since the `DataBinding` event fires before the `ItemDataBound` events, the Label's `Visible` property will initially be set to `True`; if there are any data items, however, it will be set to `False`.</span></span> <span data-ttu-id="f8ea9-219">Следующий код реализует следующую логику:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-219">The following code implements this logic:</span></span>

[!code-csharp[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="f8ea9-220">Все категории в базе данных Northwind связаны с одного или нескольких продуктов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-220">All of the categories in the Northwind database are associated with one or more products.</span></span> <span data-ttu-id="f8ea9-221">Для тестирования этого компонента, я изменен вручную, базы данных Northwind в этом учебнике переназначение все продукты, связанные с категорией фруктов (`CategoryID` = 7) в категорию Морепродукты (`CategoryID` = 8).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-221">To test this feature, I've manually adjusted the Northwind database for this tutorial, reassigning all products associated with the Produce category (`CategoryID` = 7) to the Seafood category (`CategoryID` = 8).</span></span> <span data-ttu-id="f8ea9-222">Это можно сделать из обозревателя серверов, выбрав новый запрос и с помощью следующих `UPDATE` инструкции:</span><span class="sxs-lookup"><span data-stu-id="f8ea9-222">This can be accomplished from the Server Explorer by choosing New Query and using the following `UPDATE` statement:</span></span>

[!code-sql[Main](master-detail-filtering-acess-two-pages-datalist-cs/samples/sample7.sql)]

<span data-ttu-id="f8ea9-223">После обновления базы данных соответствующим образом, вернуться на `CategoryListMaster.aspx` и щелкните ссылку, создают.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-223">After updating the database accordingly, return to the `CategoryListMaster.aspx` page and click on the Produce link.</span></span> <span data-ttu-id="f8ea9-224">Так как больше не существуют какие-либо продукты, принадлежащие к категории фруктов, вы увидите «Нет ни одного продукта для выбранной категории...»</span><span class="sxs-lookup"><span data-stu-id="f8ea9-224">Since there are no longer any products belonging to the Produce category, you should see the "There are no products for the selected category…"</span></span> <span data-ttu-id="f8ea9-225">сообщение, как показано на рис. 9.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-225">message, as shown in Figure 9.</span></span>


<span data-ttu-id="f8ea9-226">[![Сообщение отображается, если нет продукты, принадлежащие к категории выбранного](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-226">[![A Message is Displayed if there are No Products Belonging to the Selected Category](master-detail-filtering-acess-two-pages-datalist-cs/_static/image26.png)](master-detail-filtering-acess-two-pages-datalist-cs/_static/image25.png)</span></span>

<span data-ttu-id="f8ea9-227">**Рис. 9**: отображается сообщение, если нет продукты, принадлежащие к категории выбран ([Просмотр полноразмерное изображение](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="f8ea9-227">**Figure 9**: A Message is Displayed if there are No Products Belonging to the Selected Category ([Click to view full-size image](master-detail-filtering-acess-two-pages-datalist-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="f8ea9-228">Сводка</span><span class="sxs-lookup"><span data-stu-id="f8ea9-228">Summary</span></span>

<span data-ttu-id="f8ea9-229">Хотя отчеты главного и подчиненного представлений можно отобразить основные и подробные записи на одной странице, на многих веб-сайтах они размещены на двух веб-страниц.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-229">While master/detail reports can display both the master and detail records on a single page, in many websites they are separated out across two web pages.</span></span> <span data-ttu-id="f8ea9-230">В этом учебнике мы рассмотрели способы реализации такого отчета иерархического наличием категорий, перечисленных в виде маркированного списка, используя повторитель «главный» веб-странице и соответствующих продуктов, перечисленные на странице «Подробности».</span><span class="sxs-lookup"><span data-stu-id="f8ea9-230">In this tutorial we looked at how to implement such a master/detail report by having the categories listed in a bulleted list using a Repeater in the "master" web page and the associated products listed in the "details" page.</span></span> <span data-ttu-id="f8ea9-231">Каждый элемент списка на основной веб-странице содержится ссылка на страницу сведений, который передается строка `CategoryID` значение.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-231">Each list item in the master web page contained a link to the details page that passed along the row's `CategoryID` value.</span></span>

<span data-ttu-id="f8ea9-232">На странице сведений о получении этих продуктов для указанного поставщика выполнялось через `ProductsBLL` класса `GetProductsByCategoryID(categoryID)` метод.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-232">In the details page retrieving those products for the specified supplier was accomplished through the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="f8ea9-233"> *`categoryID`*  Было указано значение параметра декларативно с помощью `CategoryID` значение строки запроса в виде источника параметра.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-233">The *`categoryID`* parameter value was specified declaratively using the `CategoryID` querystring value as the parameter source.</span></span> <span data-ttu-id="f8ea9-234">Также мы рассмотрели способы отображения сведений о категории в странице сведений с помощью FormView и отображать сообщение, если бы не принадлежащие к выбранной категории продуктов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-234">We also looked at how to display category details in the details page using a FormView and how to display a message if there were no products belonging to the selected category.</span></span>

<span data-ttu-id="f8ea9-235">Программирование довольны!</span><span class="sxs-lookup"><span data-stu-id="f8ea9-235">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f8ea9-236">Об авторе</span><span class="sxs-lookup"><span data-stu-id="f8ea9-236">About the Author</span></span>

<span data-ttu-id="f8ea9-237">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи ASP/ASP.NET и основателя из [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Майкрософт с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-237">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f8ea9-238">Скотт — независимый консультант, trainer и записи.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-238">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f8ea9-239">Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 2.0 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-239">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f8ea9-240">Он может быть достигнута по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) или через его блог, который можно найти в [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-240">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f8ea9-241">Особая благодарность</span><span class="sxs-lookup"><span data-stu-id="f8ea9-241">Special Thanks To…</span></span>

<span data-ttu-id="f8ea9-242">Этот учебник ряд прошел проверку многие полезные рецензентов.</span><span class="sxs-lookup"><span data-stu-id="f8ea9-242">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f8ea9-243">Основными редакторами этого учебника были Зак Джонс и (Liz Shulok).</span><span class="sxs-lookup"><span data-stu-id="f8ea9-243">Lead reviewers for this tutorial were Zack Jones and Liz Shulok.</span></span> <span data-ttu-id="f8ea9-244">Объясняются моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="f8ea9-244">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f8ea9-245">Если Да, напишите мне по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-245">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="f8ea9-246">[Назад](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Вперед](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f8ea9-246">[Previous](master-detail-filtering-with-a-dropdownlist-datalist-cs.md)
[Next](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs.md)</span></span>
