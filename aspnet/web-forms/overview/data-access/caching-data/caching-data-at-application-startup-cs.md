---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: "Кэширование данных при запуске приложения (C#) | Документы Microsoft"
author: rick-anderson
description: "В любой веб-приложения некоторые данные будут часто использоваться и некоторые данные будут использоваться редко. Мы можем улучшить производительность приложения в нашем ASP.NET..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/30/2007
ms.topic: article
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: 3a618ad702763a59b87336784afd1cb74de06d4c
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
<a name="caching-data-at-application-startup-c"></a><span data-ttu-id="b4b13-104">Кэширование данных при запуске приложения (C#)</span><span class="sxs-lookup"><span data-stu-id="b4b13-104">Caching Data at Application Startup (C#)</span></span>
====================
<span data-ttu-id="b4b13-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b4b13-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="b4b13-106">Скачать PDF</span><span class="sxs-lookup"><span data-stu-id="b4b13-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="b4b13-107">В любой веб-приложения некоторые данные будут часто использоваться и некоторые данные будут использоваться редко.</span><span class="sxs-lookup"><span data-stu-id="b4b13-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="b4b13-108">Мы можем улучшить производительность приложения ASP.NET с помощью загрузки часто используемых данных, этот способ называется заранее.</span><span class="sxs-lookup"><span data-stu-id="b4b13-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as.</span></span> <span data-ttu-id="b4b13-109">Этот учебник демонстрирует один подход к упреждающего загрузки, которая является для загрузки данных в кэш при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>


## <a name="introduction"></a><span data-ttu-id="b4b13-110">Вступление</span><span class="sxs-lookup"><span data-stu-id="b4b13-110">Introduction</span></span>

<span data-ttu-id="b4b13-111">Два предыдущих учебниках рассматривали кэширования данных в презентации и слои кэширования.</span><span class="sxs-lookup"><span data-stu-id="b4b13-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="b4b13-112">В [кэширование данных с помощью ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), мы рассмотрели использование ObjectDataSource s, кэширование функций для кэширования данных на уровне представления данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource s caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="b4b13-113">[Кэширование данных в архитектуре](caching-data-in-the-architecture-cs.md) проверить кэширования в новый, отдельный уровень кэширования.</span><span class="sxs-lookup"><span data-stu-id="b4b13-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="b4b13-114">Оба этих учебников используются *реактивный загрузки* при работе с кэшем данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="b4b13-115">При загрузке реактивный, при каждом запросе данных система сначала проверяет его s в кэше.</span><span class="sxs-lookup"><span data-stu-id="b4b13-115">With reactive loading, each time the data is requested, the system first checks if it s in the cache.</span></span> <span data-ttu-id="b4b13-116">В противном случае он извлекает данные из исходного источника, например базы данных, а затем сохраняет его в кэше.</span><span class="sxs-lookup"><span data-stu-id="b4b13-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="b4b13-117">Главным преимуществом реактивный загрузки является его Простота реализации.</span><span class="sxs-lookup"><span data-stu-id="b4b13-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="b4b13-118">Одним из ее недостатки является его неравномерной производительность различных запросов.</span><span class="sxs-lookup"><span data-stu-id="b4b13-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="b4b13-119">Представьте себе страницы, использующей уровень кэширования из предыдущего учебника для отображения сведений о продукте.</span><span class="sxs-lookup"><span data-stu-id="b4b13-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="b4b13-120">Когда эта страница посетит в первый раз или посетит в первый раз после извлекается из-за нехватки памяти или достигнут указанный срок действия кэшированных данных, данные должны извлекаться из базы данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="b4b13-121">Таким образом эти запросы пользователей займет больше времени, чем запросы пользователей, которые могут быть получены с кэшем.</span><span class="sxs-lookup"><span data-stu-id="b4b13-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="b4b13-122">*Загрузка упреждающего* предоставляет кэш альтернативные стратегии управления, позволяет сгладить производительность различных запросов путем загрузки перед ним кэшированные данные, необходимые.</span><span class="sxs-lookup"><span data-stu-id="b4b13-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it s needed.</span></span> <span data-ttu-id="b4b13-123">Как правило упреждающее загрузки использует какой-либо процесс, который периодически проверяет или уведомляется, после обновления в базовые данные.</span><span class="sxs-lookup"><span data-stu-id="b4b13-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="b4b13-124">Затем этот процесс обновляет кэш, чтобы сохранить новую.</span><span class="sxs-lookup"><span data-stu-id="b4b13-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="b4b13-125">Упреждающее загрузки особенно полезна в тех случаях, если базовые данные поступают из подключения к базе данных медленно, веб-службы или другого источника данных, особенно медленным.</span><span class="sxs-lookup"><span data-stu-id="b4b13-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="b4b13-126">Но этот подход к загрузке упреждающего сложнее, для его выполнения требуется создание, управление и развертывание процесса для проверки изменений и обновления кэша.</span><span class="sxs-lookup"><span data-stu-id="b4b13-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="b4b13-127">Другого вида упреждающего загрузки и типом, который в этом учебнике мы будем изучать загружает данные в кэш при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="b4b13-128">Этот подход особенно полезен для кэширования статических данных, например записи в таблицах базы данных поиска.</span><span class="sxs-lookup"><span data-stu-id="b4b13-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="b4b13-129">Более подробное рассмотрение различия между проактивное и реактивное загрузки, а также списки специалистов, недостатков и рекомендации по реализации, см. в разделе [управление содержимое кэша](https://msdn.microsoft.com/library/ms978503.aspx) раздел [ Кэширование руководство по архитектуре для приложений .NET Framework](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="b4b13-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>


## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="b4b13-130">Шаг 1: Определение данных в кэш при запуске приложения</span><span class="sxs-lookup"><span data-stu-id="b4b13-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="b4b13-131">Примеры кэширования, с помощью реактивный загрузке мы рассмотрели предыдущие два учебника работу с данными, может периодически изменять и не долго exorbitantly для создания.</span><span class="sxs-lookup"><span data-stu-id="b4b13-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="b4b13-132">Но если кэшированные данные никогда не изменяется, срок действия, используемые реактивный загрузки является избыточным.</span><span class="sxs-lookup"><span data-stu-id="b4b13-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="b4b13-133">Аналогичным образом Если выполняется кэширование данных занимает очень много времени для создания, затем этих пользователей, которых запросы поиска очищать кэш будет выдержать длительное время ожидания при базовых данных извлекаются.</span><span class="sxs-lookup"><span data-stu-id="b4b13-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="b4b13-134">Рассмотрите возможность кэширования статические данные и данные, которые принимает слишком долго для создания при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="b4b13-135">Базы данных имеют много динамической, часто изменяющиеся значения, большинство также создать изрядное статических данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="b4b13-136">Например практически все модели данных имеют один или несколько столбцов, содержащих определенное значение из основного набора вариантов.</span><span class="sxs-lookup"><span data-stu-id="b4b13-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="b4b13-137">Объект `Patients` таблицы базы данных может иметь `PrimaryLanguage` столбец, значения которого набор может быть английский, испанский, французский, русский, японский и т. д.</span><span class="sxs-lookup"><span data-stu-id="b4b13-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="b4b13-138">Очень часто этих типов столбцов реализуются с помощью *таблиц подстановки*.</span><span class="sxs-lookup"><span data-stu-id="b4b13-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="b4b13-139">Вместо того чтобы хранить строки английский или французский в `Patients` , второй таблицы создается таблица с, как правило, двумя столбцами - уникальный идентификатор и строковое описание - запись для каждого возможного значения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="b4b13-140">`PrimaryLanguage` Столбца в `Patients` таблице хранятся соответствующие уникальный идентификатор в таблице уточняющих запросов.</span><span class="sxs-lookup"><span data-stu-id="b4b13-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="b4b13-141">На рис. 1 patient John Doe s основной язык — английский, а Джонсон Ed s — русский.</span><span class="sxs-lookup"><span data-stu-id="b4b13-141">In Figure 1, patient John Doe s primary language is English, while Ed Johnson s is Russian.</span></span>


![В таблице языков предназначена Уточняющий запрос таблицы в таблице сведений о пациентах](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="b4b13-143">**Рис. 1**: `Languages` таблица предназначена Уточняющий запрос таблицы `Patients` таблицы</span><span class="sxs-lookup"><span data-stu-id="b4b13-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>


<span data-ttu-id="b4b13-144">Пользовательский интерфейс для редактирования или для создания нового пациента включит в раскрывающемся списке допустимых языков, заполняет ее записи в `Languages` таблицы.</span><span class="sxs-lookup"><span data-stu-id="b4b13-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="b4b13-145">Без кэширования, каждый раз, этот интерфейс является посетил система должна запрос `Languages` таблицы.</span><span class="sxs-lookup"><span data-stu-id="b4b13-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="b4b13-146">Это затратные и ненужных так как значения таблицы подстановки очень редко изменяются вообще.</span><span class="sxs-lookup"><span data-stu-id="b4b13-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="b4b13-147">Нам удалось кэшировать `Languages` данных, используя те же техники реактивный загрузке проверяются в предыдущих учебниках.</span><span class="sxs-lookup"><span data-stu-id="b4b13-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="b4b13-148">Тем не менее, реагирующий загрузка использует срока действия на основе времени, которой не требуется для статических поиск таблицы данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="b4b13-149">Во время кэширования с помощью реактивный загрузки будет лучше, чем отсутствие кэширования вообще, лучше будет заблаговременного данные таблицы подстановки в кэш при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="b4b13-150">В этом учебнике мы рассмотрим данные таблицы подстановки кэша и другие сведения о статических.</span><span class="sxs-lookup"><span data-stu-id="b4b13-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="b4b13-151">Шаг 2: Проверка различные способы для кэширования данных</span><span class="sxs-lookup"><span data-stu-id="b4b13-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="b4b13-152">Сведения могут кэшироваться программным способом в приложении ASP.NET, с помощью различных подходов.</span><span class="sxs-lookup"><span data-stu-id="b4b13-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="b4b13-153">Мы хранять уже изучили, как использовать кэш данных в предыдущих учебниках.</span><span class="sxs-lookup"><span data-stu-id="b4b13-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="b4b13-154">Кроме того, объекты можно программно кэшировать с помощью *статические члены* или *состояние приложения*.</span><span class="sxs-lookup"><span data-stu-id="b4b13-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="b4b13-155">При работе с классом, обычно класса необходимо сначала создать экземпляры можно получить доступ к его членам.</span><span class="sxs-lookup"><span data-stu-id="b4b13-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="b4b13-156">Например для вызова метода от одного из классов в нашем уровня бизнес-логики, необходимо сначала создать экземпляр класса:</span><span class="sxs-lookup"><span data-stu-id="b4b13-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="b4b13-157">Прежде чем мы можно вызвать *SomeMethod* или работы с *SomeProperty*, сначала необходимо создать экземпляр класса с помощью `new` ключевое слово.</span><span class="sxs-lookup"><span data-stu-id="b4b13-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="b4b13-158">*SomeMethod* и *SomeProperty* связаны с конкретным экземпляром.</span><span class="sxs-lookup"><span data-stu-id="b4b13-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="b4b13-159">Время существования этих членов привязывается к времени существования их связанного объекта.</span><span class="sxs-lookup"><span data-stu-id="b4b13-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="b4b13-160">*Статические члены*, с другой стороны, переменные, свойства и методы, которые являются общими для *все* экземпляры класса и, следовательно, имеют время жизни, при условии, что и класс.</span><span class="sxs-lookup"><span data-stu-id="b4b13-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="b4b13-161">Статические члены, обозначаются с помощью ключевого слова `static`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="b4b13-162">Помимо статические элементы данных могут кэшироваться использования состояния приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="b4b13-163">Каждое приложение ASP.NET поддерживает коллекцию имя/значение, s, общими для всех пользователей и страницы приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-163">Each ASP.NET application maintains a name/value collection that s shared across all users and pages of the application.</span></span> <span data-ttu-id="b4b13-164">Эта коллекция может осуществляться с использованием [ `HttpContext` класса](https://msdn.microsoft.com/library/system.web.httpcontext.aspx) s [ `Application` свойство](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)и использования из кода класса страницы s ASP.NET следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b4b13-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx) s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page s code-behind class like so:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="b4b13-165">Кэш данных предоставляет гораздо более широкие API для кэширования данных, предоставляя механизмы для кэше на основе времени и зависимостей, приоритеты элемента кэша и т. д.</span><span class="sxs-lookup"><span data-stu-id="b4b13-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="b4b13-166">Статические члены и состояния приложения таких компонентов, необходимо вручную добавить разработчиком страницы.</span><span class="sxs-lookup"><span data-stu-id="b4b13-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="b4b13-167">При кэшировании данных при запуске приложения в течение времени существования приложения, однако преимущества s кэш данных, получается.</span><span class="sxs-lookup"><span data-stu-id="b4b13-167">When caching data at application startup for the lifetime of the application, however, the data cache s advantages are moot.</span></span> <span data-ttu-id="b4b13-168">В этом учебнике мы рассмотрим код, который использует все три метода для кэширования статических данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="b4b13-169">Шаг 3: Кэширование`Suppliers`таблицы данных</span><span class="sxs-lookup"><span data-stu-id="b4b13-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="b4b13-170">Northwind, таблицы базы данных мы хранять реализован для даты не включают все традиционные Уточняющий запрос таблицы.</span><span class="sxs-lookup"><span data-stu-id="b4b13-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="b4b13-171">Четыре DataTables реализован в DAL все таблицы модели, значения которого не являются статическими.</span><span class="sxs-lookup"><span data-stu-id="b4b13-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="b4b13-172">Вместо того чтобы тратить время, чтобы добавить новую таблицу данных DAL новый класс и методы для МЕТОДА, для этого учебника просто позволить s представьте, что `Suppliers` таблицу s данные являются статическими.</span><span class="sxs-lookup"><span data-stu-id="b4b13-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let s just pretend that the `Suppliers` table s data is static.</span></span> <span data-ttu-id="b4b13-173">Таким образом мы кэшировать эти данные при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="b4b13-174">Чтобы начать, создайте новый класс с именем `StaticCache.cs` в `CL` папки.</span><span class="sxs-lookup"><span data-stu-id="b4b13-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>


![Создайте класс StaticCache.cs в папке CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="b4b13-176">**На рисунке 2**: создание `StaticCache.cs` в класс `CL` папки</span><span class="sxs-lookup"><span data-stu-id="b4b13-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>


<span data-ttu-id="b4b13-177">Необходимо добавить метод, который загружает данные во время запуска в хранилище соответствующие кэша, а также методы, возвращающие данные из этого кэша.</span><span class="sxs-lookup"><span data-stu-id="b4b13-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="b4b13-178">Приведенный выше код использует статическая переменная-член, `suppliers`, для хранения результатов `SuppliersBLL` класса s `GetSuppliers()` метод, который вызывается из `LoadStaticCache()` метод.</span><span class="sxs-lookup"><span data-stu-id="b4b13-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class s `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="b4b13-179">`LoadStaticCache()` Метод должен вызываться во время запуска приложения s.</span><span class="sxs-lookup"><span data-stu-id="b4b13-179">The `LoadStaticCache()` method is meant to be called during the application s start.</span></span> <span data-ttu-id="b4b13-180">После загрузки данных при запуске приложения можно вызвать любой страницы, которая требуется для работы с данными о поставщиках `StaticCache` класса s `GetSuppliers()` метод.</span><span class="sxs-lookup"><span data-stu-id="b4b13-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="b4b13-181">Таким образом вызов к базе данных для получения поставщиков происходит только один раз, при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="b4b13-182">Вместо использования статической переменной-члена как хранилище кэша, можно было бы также использовать состояние приложения или в кэше данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="b4b13-183">В следующем коде показано класс retooled использовать состояние приложения:</span><span class="sxs-lookup"><span data-stu-id="b4b13-183">The following code shows the class retooled to use application state:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="b4b13-184">В `LoadStaticCache()`, сведения о поставщиках хранятся в переменной приложения *ключ*.</span><span class="sxs-lookup"><span data-stu-id="b4b13-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="b4b13-185">Он s возвращаются в виде соответствующего типа (`Northwind.SuppliersDataTable`) из `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-185">It s returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="b4b13-186">Хотя можно получить состояние приложения в классах кода страниц ASP.NET с помощью `Application["key"]`, в архитектуре, необходимо использовать `HttpContext.Current.Application["key"]` для получения текущего `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="b4b13-187">Аналогичным образом кэш данных может использоваться как хранилище кэша, как показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="b4b13-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="b4b13-188">Чтобы добавить элемент в кэш данных и без срока действия на основе времени, используйте `System.Web.Caching.Cache.NoAbsoluteExpiration` и `System.Web.Caching.Cache.NoSlidingExpiration` значения в качестве входных параметров.</span><span class="sxs-lookup"><span data-stu-id="b4b13-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="b4b13-189">Данная конкретная перегрузка кэш данных s `Insert` был выбран метод, чтобы указать, мы *приоритет* элемента кэша.</span><span class="sxs-lookup"><span data-stu-id="b4b13-189">This particular overload of the data cache s `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="b4b13-190">Приоритет используется, чтобы определить, какие элементы нужно удалить из кэша, когда не хватает доступной памяти.</span><span class="sxs-lookup"><span data-stu-id="b4b13-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="b4b13-191">Здесь мы используем приоритет `NotRemovable`, который гарантирует, что этот элемент кэша выиграл t очистку.</span><span class="sxs-lookup"><span data-stu-id="b4b13-191">Here we use the priority `NotRemovable`, which ensures that this cache item won t be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="b4b13-192">Этот учебник s загрузки реализует `StaticCache` подход переменной статический член класса.</span><span class="sxs-lookup"><span data-stu-id="b4b13-192">This tutorial s download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="b4b13-193">Код для методов кэша состояния и данных приложения находится в комментарии в файле класса.</span><span class="sxs-lookup"><span data-stu-id="b4b13-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>


## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="b4b13-194">Шаг 4: Выполнение кода при запуске приложения</span><span class="sxs-lookup"><span data-stu-id="b4b13-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="b4b13-195">Для выполнения кода при первом запуске веб-приложения, необходимо создать специальный файл с именем `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="b4b13-196">Этот файл может содержать обработчики событий для приложения-, сеанс- и события на уровне запроса, который здесь где можно добавить код, который будет выполняться при каждом запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="b4b13-197">Добавить `Global.asax` файл web s корневой каталог приложения, щелкнув правой кнопкой мыши имя проекта веб-сайта в Visual Studio s обозревателе решений и выбрав команду Добавить новый элемент.</span><span class="sxs-lookup"><span data-stu-id="b4b13-197">Add the `Global.asax` file to your web application s root directory by right-clicking on the website project name in Visual Studio s Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="b4b13-198">В диалоговом окне Добавление нового элемента выберите тип элемента глобальный класс приложения и нажмите кнопку "Добавить".</span><span class="sxs-lookup"><span data-stu-id="b4b13-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="b4b13-199">Если у вас уже есть `Global.asax` в вашем проекте глобальный класс приложения, тип элемента не будет отображаться в диалоговом окне Добавление нового элемента.</span><span class="sxs-lookup"><span data-stu-id="b4b13-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>


<span data-ttu-id="b4b13-200">[![Добавьте его в корневую папку веб-приложения s](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b4b13-200">[![Add the Global.asax File to Your Web Application s Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="b4b13-201">**Рис. 3**: добавление `Global.asax` файла в ваш веб-приложение s корневой каталог ([Просмотр полноразмерное изображение](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="b4b13-201">**Figure 3**: Add the `Global.asax` File to Your Web Application s Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>


<span data-ttu-id="b4b13-202">Значение по умолчанию `Global.asax` файл шаблона содержит пять методов на стороне сервера `<script>` тег:</span><span class="sxs-lookup"><span data-stu-id="b4b13-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="b4b13-203">**`Application_Start`**выполняется при первом запуске веб-приложения</span><span class="sxs-lookup"><span data-stu-id="b4b13-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="b4b13-204">**`Application_End`**выполняется, когда приложение завершает работу</span><span class="sxs-lookup"><span data-stu-id="b4b13-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="b4b13-205">**`Application_Error`**выполняется всегда, когда приложение встречает необработанное исключение</span><span class="sxs-lookup"><span data-stu-id="b4b13-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="b4b13-206">**`Session_Start`**выполняется, когда создается новый сеанс</span><span class="sxs-lookup"><span data-stu-id="b4b13-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="b4b13-207">**`Session_End`**выполняется, когда сеанс истек или прервана</span><span class="sxs-lookup"><span data-stu-id="b4b13-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="b4b13-208">`Application_Start` Обработчик событий вызывается только один раз во время жизненного цикла приложения s.</span><span class="sxs-lookup"><span data-stu-id="b4b13-208">The `Application_Start` event handler is called only once during an application s life cycle.</span></span> <span data-ttu-id="b4b13-209">Приложение запускается в первый раз ресурса ASP.NET запросе от приложения и продолжает работать до перезапуска приложения, что может произойти, изменяя содержимое `/Bin` папки, изменение `Global.asax`, изменение содержимое в `App_Code` папки или изменение `Web.config` файл, другими причинами.</span><span class="sxs-lookup"><span data-stu-id="b4b13-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="b4b13-210">Ссылаться на [Общие сведения о жизненном цикле приложения ASP.NET](https://msdn.microsoft.com/library/ms178473.aspx) более подробные сведения о жизненном цикле приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="b4b13-211">Для этих учебников нам требуется только добавить код для `Application_Start` метод, поэтому теперь можете удалить остальные.</span><span class="sxs-lookup"><span data-stu-id="b4b13-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="b4b13-212">В `Application_Start`, просто вызвать `StaticCache` класса s `LoadStaticCache()` метод, который будет загружен и кэшировать информацию поставщика:</span><span class="sxs-lookup"><span data-stu-id="b4b13-212">In `Application_Start`, simply call the `StaticCache` class s `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="b4b13-213">Все, что s — его!</span><span class="sxs-lookup"><span data-stu-id="b4b13-213">That s all there is to it!</span></span> <span data-ttu-id="b4b13-214">При запуске приложения `LoadStaticCache()` метод захватите сведения о поставщиках из МЕТОДА и сохранить его в переменной статического элемента (или хранить независимо от кэша, вы в итоге использование в `StaticCache` класса).</span><span class="sxs-lookup"><span data-stu-id="b4b13-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="b4b13-215">Чтобы проверить это, установите точку останова `Application_Start` метод и запустите приложение.</span><span class="sxs-lookup"><span data-stu-id="b4b13-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="b4b13-216">Обратите внимание, что останова при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="b4b13-217">Последующие запросы, но не вызывают `Application_Start` для выполнения метода.</span><span class="sxs-lookup"><span data-stu-id="b4b13-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>


<span data-ttu-id="b4b13-218">[![Использовать точки останова в убедитесь, что обработчик событий Application_Start является выполняемой](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="b4b13-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="b4b13-219">**Рис. 4**: использовать точку останова, чтобы проверить, `Application_Start` обработчик событий — выполняемой ([Просмотр полноразмерное изображение](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="b4b13-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b4b13-220">Если не нажать `Application_Start` останова при первом запуске отладки, это означает, что приложение уже запущена.</span><span class="sxs-lookup"><span data-stu-id="b4b13-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="b4b13-221">Принудительный перезапуск, изменив приложения вашей `Global.asax` или `Web.config` файлы, а затем повторите попытку.</span><span class="sxs-lookup"><span data-stu-id="b4b13-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="b4b13-222">Можно просто добавить (или удалить) пустую строку в конце один из этих файлов, чтобы быстро перезапустить приложение.</span><span class="sxs-lookup"><span data-stu-id="b4b13-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>


## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="b4b13-223">Шаг 5: Отображение всех кэшированных данных</span><span class="sxs-lookup"><span data-stu-id="b4b13-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="b4b13-224">На этом этапе `StaticCache` класс имеет версию поставщика данных, кэшированных при запуске приложения, можно получить с помощью его `GetSuppliers()` метод.</span><span class="sxs-lookup"><span data-stu-id="b4b13-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="b4b13-225">Для работы с данными от уровня представления можно использовать элемент управления ObjectDataSource или программный вызов `StaticCache` класса s `GetSuppliers()` метода из кода класса страницы s ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b4b13-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class s `GetSuppliers()` method from an ASP.NET page s code-behind class.</span></span> <span data-ttu-id="b4b13-226">Разрешить s рассмотреть использование элементов управления ObjectDataSource и GridView для отображения информации кэшированных поставщика.</span><span class="sxs-lookup"><span data-stu-id="b4b13-226">Let s look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="b4b13-227">Сначала откройте `AtApplicationStartup.aspx` страницы в `Caching` папки.</span><span class="sxs-lookup"><span data-stu-id="b4b13-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="b4b13-228">Перетащите элемент управления GridView с панели элементов в конструктор параметр его `ID` свойства `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="b4b13-229">Затем из GridView s смарт-тегов выберите Создание нового ObjectDataSource с именем `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-229">Next, from the GridView s smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="b4b13-230">Настройка ObjectDataSource для использования `StaticCache` класса s `GetSuppliers()` метод.</span><span class="sxs-lookup"><span data-stu-id="b4b13-230">Configure the ObjectDataSource to use the `StaticCache` class s `GetSuppliers()` method.</span></span>


<span data-ttu-id="b4b13-231">[![Настройка ObjectDataSource с помощью класса StaticCache](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b4b13-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="b4b13-232">**Рис. 5**: Настройка ObjectDataSource для использования `StaticCache` класса ([Просмотр полноразмерное изображение](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="b4b13-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>


<span data-ttu-id="b4b13-233">[![Метод GetSuppliers() используется для получения кэшированных поставщика данных](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="b4b13-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="b4b13-234">**Рис. 6**: использование `GetSuppliers()` метод для извлечения данных в кэше поставщика ([Просмотр полноразмерное изображение](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="b4b13-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>


<span data-ttu-id="b4b13-235">По завершении работы мастера Visual Studio автоматически добавит стояли для каждого поля данных в `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="b4b13-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="b4b13-236">К GridView и ObjectDataSource s должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b4b13-236">Your GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="b4b13-237">Рис. 7 показана страница при просмотре через браузер.</span><span class="sxs-lookup"><span data-stu-id="b4b13-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="b4b13-238">Выходные данные одинаково мы убрали данные из МЕТОДА s `SuppliersBLL` класса, но с использованием `StaticCache` класса возвращает данные поставщика в виде кэшированных при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-238">The output is the same had we pulled the data from the BLL s `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="b4b13-239">Можно установить точки останова `StaticCache` класса s `GetSuppliers()` метод для проверки этого поведения.</span><span class="sxs-lookup"><span data-stu-id="b4b13-239">You can set breakpoints in the `StaticCache` class s `GetSuppliers()` method to verify this behavior.</span></span>


<span data-ttu-id="b4b13-240">[![Данные в кэше поставщиков отображается в элементе управления GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b4b13-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="b4b13-241">**Рис. 7**: в кэше данных поставщика отображается в элементе управления GridView ([Просмотр полноразмерное изображение](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="b4b13-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="b4b13-242">Сводка</span><span class="sxs-lookup"><span data-stu-id="b4b13-242">Summary</span></span>

<span data-ttu-id="b4b13-243">Большинство каждая модель данных содержит изрядное статические данные, обычно реализуется в виде таблиц подстановки.</span><span class="sxs-lookup"><span data-stu-id="b4b13-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="b4b13-244">Поскольку эта информация является статическим, s здесь нет необходимости постоянного доступа к базе данных каждый раз, эти данные должны отображаться.</span><span class="sxs-lookup"><span data-stu-id="b4b13-244">Since this information is static, there s no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="b4b13-245">Кроме того, из-за его статического характера при кэшировании данных существует s срока действия не требуются.</span><span class="sxs-lookup"><span data-stu-id="b4b13-245">Furthermore, due to its static nature, when caching the data there s no need for an expiry.</span></span> <span data-ttu-id="b4b13-246">В этом учебнике мы узнали, как такие данные и кэшировать его в кэш данных, состояние приложения и с помощью статической переменной-члена.</span><span class="sxs-lookup"><span data-stu-id="b4b13-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="b4b13-247">Эта информация кэшируется при запуске приложения и остается в кэше на протяжении существования приложения s.</span><span class="sxs-lookup"><span data-stu-id="b4b13-247">This information is cached at application startup and remains in the cache throughout the application s lifetime.</span></span>

<span data-ttu-id="b4b13-248">В этом учебнике и последние два мы рассмотрели хранять кэширования данных в течение всего времени существования s приложения, а также с помощью кэше на основе времени.</span><span class="sxs-lookup"><span data-stu-id="b4b13-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application s lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="b4b13-249">При кэшировании данных базы данных, однако может быть меньше, чем идеальным решением на основе времени окончания срока действия.</span><span class="sxs-lookup"><span data-stu-id="b4b13-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="b4b13-250">Вместо того чтобы периодически очистки кэша, будет оптимальным решением будет удалить кэшированного элемента только при изменении основной базы данных.</span><span class="sxs-lookup"><span data-stu-id="b4b13-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="b4b13-251">Выполнение идеальных возможна за счет использования зависимости кэша SQL, которые будет рассмотрен в следующем учебном курсе.</span><span class="sxs-lookup"><span data-stu-id="b4b13-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="b4b13-252">Программирование довольны!</span><span class="sxs-lookup"><span data-stu-id="b4b13-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b4b13-253">Об авторе</span><span class="sxs-lookup"><span data-stu-id="b4b13-253">About the Author</span></span>

<span data-ttu-id="b4b13-254">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи ASP/ASP.NET и основателя из [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Майкрософт с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="b4b13-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b4b13-255">Скотт — независимый консультант, trainer и записи.</span><span class="sxs-lookup"><span data-stu-id="b4b13-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b4b13-256">Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 2.0 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b4b13-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b4b13-257">Он может быть достигнута по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) или через его блог, который можно найти в [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b4b13-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="b4b13-258">Благодарности</span><span class="sxs-lookup"><span data-stu-id="b4b13-258">Special Thanks To</span></span>

<span data-ttu-id="b4b13-259">Этот учебник ряд прошел проверку многие полезные рецензентов.</span><span class="sxs-lookup"><span data-stu-id="b4b13-259">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b4b13-260">Основными редакторами этого учебника были Мерфи Тереза д и Зак Джонс.</span><span class="sxs-lookup"><span data-stu-id="b4b13-260">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="b4b13-261">Объясняются моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="b4b13-261">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b4b13-262">Если Да, напишите мне по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b4b13-262">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="b4b13-263">[Назад](caching-data-in-the-architecture-cs.md)
[Вперед](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b4b13-263">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>
