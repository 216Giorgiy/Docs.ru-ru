---
uid: web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
title: "Главного и подчиненного представлений с помощью выбираемого основного элемента GridView с DetailView (C#) | Документы Microsoft"
author: rick-anderson
description: "Этот учебник будет GridView, строки которого необходимо указать имя и цены каждого продукта, а также кнопка выбора. При нажатии кнопки Select для particu..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/31/2010
ms.topic: article
ms.assetid: 0f982827-f8f9-420d-b36b-57b23f5aa519
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs
msc.type: authoredcontent
ms.openlocfilehash: badf9da0e9a26d185e7532b02f53a8acea60ea91
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="masterdetail-using-a-selectable-master-gridview-with-a-details-detailview-c"></a><span data-ttu-id="ea91f-104">Главного и подчиненного представлений с помощью выбираемого основного элемента GridView с DetailView (C#)</span><span class="sxs-lookup"><span data-stu-id="ea91f-104">Master/Detail Using a Selectable Master GridView with a Details DetailView (C#)</span></span>
====================
<span data-ttu-id="ea91f-105">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ea91f-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ea91f-106">[Загрузить пример приложения](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) или [скачать PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ea91f-106">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_10_CS.exe) or [Download PDF](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/datatutorial10cs1.pdf)</span></span>

> <span data-ttu-id="ea91f-107">Этот учебник будет GridView, строки которого необходимо указать имя и цены каждого продукта, а также кнопка выбора.</span><span class="sxs-lookup"><span data-stu-id="ea91f-107">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="ea91f-108">При нажатии кнопки "Select" для конкретного продукта приведет к его полные сведения для отображения в элементе управления DetailsView на одной странице.</span><span class="sxs-lookup"><span data-stu-id="ea91f-108">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>


## <a name="introduction"></a><span data-ttu-id="ea91f-109">Вступление</span><span class="sxs-lookup"><span data-stu-id="ea91f-109">Introduction</span></span>

<span data-ttu-id="ea91f-110">В [с предыдущим учебником](master-detail-filtering-across-two-pages-cs.md) мы узнали, как создание главного и подчиненного представлений отчета с помощью двух веб-страницы: «главный» веб-страницы, из которой мы отображается список поставщиков; и веб-страницы «подробности», эти продукты, предоставляемые выбранного в списке Поставщик.</span><span class="sxs-lookup"><span data-stu-id="ea91f-110">In the [previous tutorial](master-detail-filtering-across-two-pages-cs.md) we saw how to create a master/detail report using two web pages: a "master" web page, from which we displayed the list of suppliers; and a "details" web page that listed those products provided by the selected supplier.</span></span> <span data-ttu-id="ea91f-111">Данный формат отчета на две страницы могут включены в одну страницу.</span><span class="sxs-lookup"><span data-stu-id="ea91f-111">This two page report format can be condensed into one page.</span></span> <span data-ttu-id="ea91f-112">Этот учебник будет GridView, строки которого необходимо указать имя и цены каждого продукта, а также кнопка выбора.</span><span class="sxs-lookup"><span data-stu-id="ea91f-112">This tutorial will have a GridView whose rows include the name and price of each product along with a Select button.</span></span> <span data-ttu-id="ea91f-113">При нажатии кнопки "Select" для конкретного продукта приведет к его полные сведения для отображения в элементе управления DetailsView на одной странице.</span><span class="sxs-lookup"><span data-stu-id="ea91f-113">Clicking the Select button for a particular product will cause its full details to be displayed in a DetailsView control on the same page.</span></span>


<span data-ttu-id="ea91f-114">[![При нажатии кнопки Select отображает сведения о продукте](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-114">[![Clicking the Select Button Displays the Product's Details](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image2.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image1.png)</span></span>

<span data-ttu-id="ea91f-115">**Рис. 1**: при нажатии кнопки Select отображает сведения о продукте ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-115">**Figure 1**: Clicking the Select Button Displays the Product's Details ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image3.png))</span></span>


## <a name="step-1-creating-a-selectable-gridview"></a><span data-ttu-id="ea91f-116">Шаг 1: Создание выбираемым GridView</span><span class="sxs-lookup"><span data-stu-id="ea91f-116">Step 1: Creating a Selectable GridView</span></span>

<span data-ttu-id="ea91f-117">Напомним, что две страницы главного и подчиненного представлений отчета, каждый главный запись включена гиперссылка, при нажатии отправлено пользователя на страницу сведений, передав имя выбранной строки `SupplierID` значение в строке запроса.</span><span class="sxs-lookup"><span data-stu-id="ea91f-117">Recall that in the two-page master/detail report that each master record included a hyperlink that, when clicked, sent the user to the details page passing the clicked row's `SupplierID` value in the querystring.</span></span> <span data-ttu-id="ea91f-118">Такие гиперссылки был добавлен к каждой строке GridView, с помощью HyperLinkField.</span><span class="sxs-lookup"><span data-stu-id="ea91f-118">Such a hyperlink was added to each GridView row using a HyperLinkField.</span></span> <span data-ttu-id="ea91f-119">Для одной страницы основной/подробности отчета, мы должны кнопка для каждого GridView строк, при нажатии показывает подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="ea91f-119">For the single page master/details report, we will need a Button for each GridView row that, when clicked, shows the details.</span></span> <span data-ttu-id="ea91f-120">Чтобы включить кнопку выбора для каждой строки, которая вызывает обратную передачу и помечает эту строку как GridView можно настроить элемента управления GridView [SelectedRow](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea91f-120">The GridView control can be configured to include a Select button for each row that causes a postback and marks that row as the GridView's [SelectedRow](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx).</span></span>

<span data-ttu-id="ea91f-121">Начните с добавления элемента управления GridView для `DetailsBySelecting.aspx` страницы в `Filtering` папки, установка его `ID` свойства `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-121">Start by adding a GridView control to the `DetailsBySelecting.aspx` page in the `Filtering` folder, setting its `ID` property to `ProductsGrid`.</span></span> <span data-ttu-id="ea91f-122">Добавьте новый элемент управления ObjectDataSource с именем `AllProductsDataSource` , вызывающий `ProductsBLL` класса `GetProducts()` метод.</span><span class="sxs-lookup"><span data-stu-id="ea91f-122">Next, add a new ObjectDataSource named `AllProductsDataSource` that invokes the `ProductsBLL` class's `GetProducts()` method.</span></span>


<span data-ttu-id="ea91f-123">[![Создайте элемент управления ObjectDataSource AllProductsDataSource с именем](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-123">[![Create an ObjectDataSource Named AllProductsDataSource](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image5.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image4.png)</span></span>

<span data-ttu-id="ea91f-124">**На рисунке 2**: создание ObjectDataSource с именем `AllProductsDataSource` ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-124">**Figure 2**: Create an ObjectDataSource Named `AllProductsDataSource` ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image6.png))</span></span>


<span data-ttu-id="ea91f-125">[![Используйте класс ProductsBLL](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-125">[![Use the ProductsBLL Class](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image8.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image7.png)</span></span>

<span data-ttu-id="ea91f-126">**Рис. 3**: использование `ProductsBLL` класса ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-126">**Figure 3**: Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image9.png))</span></span>


<span data-ttu-id="ea91f-127">[![Настройка ObjectDataSource для вызова метода GetProducts()](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-127">[![Configure the ObjectDataSource to Invoke the GetProducts() Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image11.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image10.png)</span></span>

<span data-ttu-id="ea91f-128">**Рис. 4**: настройте элемент управления ObjectDataSource Invoke `GetProducts()` метод ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-128">**Figure 4**: Configure the ObjectDataSource to Invoke the `GetProducts()` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image12.png))</span></span>


<span data-ttu-id="ea91f-129">Изменить поля элемента GridView удаление всех, за исключением `ProductName` и `UnitPrice` стояли.</span><span class="sxs-lookup"><span data-stu-id="ea91f-129">Edit the GridView's fields removing all but the `ProductName` and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="ea91f-130">Кроме того, вы можете настроить эти стояли, при необходимости, таких как формат `UnitPrice` BoundField виде валюты и изменение `HeaderText` свойства стояли.</span><span class="sxs-lookup"><span data-stu-id="ea91f-130">Also, feel free to customize these BoundFields as needed, such as formatting the `UnitPrice` BoundField as a currency and changing the `HeaderText` properties of the BoundFields.</span></span> <span data-ttu-id="ea91f-131">Эти действия могут быть выполнены в графическом виде, щелкнув ссылку Правка столбцов GridView смарт-теге или вручную настроив декларативного синтаксиса.</span><span class="sxs-lookup"><span data-stu-id="ea91f-131">These steps can be accomplished graphically, by clicking the Edit Columns link from the GridView's smart tag, or by manually configuring the declarative syntax.</span></span>


<span data-ttu-id="ea91f-132">[![Удалите все, кроме ProductName и UnitPrice стояли](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-132">[![Remove All But the ProductName and UnitPrice BoundFields](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image14.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image13.png)</span></span>

<span data-ttu-id="ea91f-133">**Рис. 5**: удалите все, кроме `ProductName` и `UnitPrice` стояли ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-133">**Figure 5**: Remove All But the `ProductName` and `UnitPrice` BoundFields ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image15.png))</span></span>


<span data-ttu-id="ea91f-134">Окончательную разметку элемента GridView является:</span><span class="sxs-lookup"><span data-stu-id="ea91f-134">The final markup for the GridView is:</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample1.aspx)]

<span data-ttu-id="ea91f-135">Далее нам нужно пометить как доступный для выбора, GridView, который будет добавлять кнопку выбора для каждой строки.</span><span class="sxs-lookup"><span data-stu-id="ea91f-135">Next, we need to mark the GridView as selectable, which will add a Select button to each row.</span></span> <span data-ttu-id="ea91f-136">Чтобы сделать это, просто установите флажок Разрешить выделение в смарт-теге элемента GridView.</span><span class="sxs-lookup"><span data-stu-id="ea91f-136">To accomplish this, simply check the Enable Selection checkbox in the GridView's smart tag.</span></span>


<span data-ttu-id="ea91f-137">[![Сделать доступным для выбора строки GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-137">[![Make the GridView's Rows Selectable](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image17.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image16.png)</span></span>

<span data-ttu-id="ea91f-138">**Рис. 6**: Убедитесь, выбираемых строк GridView ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-138">**Figure 6**: Make the GridView's Rows Selectable ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image18.png))</span></span>


<span data-ttu-id="ea91f-139">Проверка включения пункта добавляет CommandField для `ProductsGrid` GridView с его `ShowSelectButton` свойством, имеющим значение True.</span><span class="sxs-lookup"><span data-stu-id="ea91f-139">Checking the Enabling Selection option adds a CommandField to the `ProductsGrid` GridView with its `ShowSelectButton` property set to True.</span></span> <span data-ttu-id="ea91f-140">В результате кнопка выбора для каждой строки GridView, как показано на рис. 6.</span><span class="sxs-lookup"><span data-stu-id="ea91f-140">This results in a Select button for each row of the GridView, as Figure 6 illustrates.</span></span> <span data-ttu-id="ea91f-141">По умолчанию, выберите кнопки отображаются как элементов управления LinkButton, но также можно использовать кнопки или ImageButtons через CommandField `ButtonType` свойство.</span><span class="sxs-lookup"><span data-stu-id="ea91f-141">By default, the Select buttons are rendered as LinkButtons, but you can use Buttons or ImageButtons instead through the CommandField's `ButtonType` property.</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample2.aspx)]

<span data-ttu-id="ea91f-142">При нажатии кнопки выберите строке GridView выполняется обратная и GridView `SelectedRow` свойство обновляется.</span><span class="sxs-lookup"><span data-stu-id="ea91f-142">When a GridView row's Select button is clicked a postback ensues and the GridView's `SelectedRow` property is updated.</span></span> <span data-ttu-id="ea91f-143">В дополнение к `SelectedRow` предоставляет свойство, GridView [SelectedIndex](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), и [SelectedDataKey](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) свойства.</span><span class="sxs-lookup"><span data-stu-id="ea91f-143">In addition to the `SelectedRow` property, the GridView provides the [SelectedIndex](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindex%28VS.80%29.aspx), [SelectedValue](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedvalue%28VS.80%29.aspx), and [SelectedDataKey](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selecteddatakey%28VS.80%29.aspx) properties.</span></span> <span data-ttu-id="ea91f-144">`SelectedIndex` Свойство возвращает индекс выбранной строки, тогда как `SelectedValue` и `SelectedDataKey` свойства возвращают значений на основе GridView [свойство DataKeyNames](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea91f-144">The `SelectedIndex` property returns the index of the selected row, whereas the `SelectedValue` and `SelectedDataKey` properties return values based upon the GridView's [DataKeyNames property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames%28VS.80%29.aspx).</span></span>

<span data-ttu-id="ea91f-145">`DataKeyNames` Свойство используется для связывания одного или несколько полей данных значения с каждой строкой и обычно используется для атрибута, однозначно идентифицирующие сведения из базовых данных с каждой строки в GridView.</span><span class="sxs-lookup"><span data-stu-id="ea91f-145">The `DataKeyNames` property is used to associate one or more data field values with each row and is commonly used to attribute uniquely identifying information from the underlying data with each GridView row.</span></span> <span data-ttu-id="ea91f-146">`SelectedValue` Свойство возвращает значение первого `DataKeyNames` поля данных для выбранной строки при этом `SelectedDataKey` свойство возвращает выбранную строку `DataKey` объект, который содержит все значения для ключевых полей, указанные данные для этой строки.</span><span class="sxs-lookup"><span data-stu-id="ea91f-146">The `SelectedValue` property returns the value of the first `DataKeyNames` data field for the selected row where as the `SelectedDataKey` property returns the selected row's `DataKey` object, which contains all of the values for the specified data key fields for that row.</span></span>

<span data-ttu-id="ea91f-147">`DataKeyNames` Свойству автоматически присваивается уникальное определение полей данных при привязке источника данных к GridView, DetailsView и FormView через конструктор.</span><span class="sxs-lookup"><span data-stu-id="ea91f-147">The `DataKeyNames` property is automatically set to the uniquely-identifying data field(s) when you bind a data source to a GridView, DetailsView, or FormView through the Designer.</span></span> <span data-ttu-id="ea91f-148">Пока это свойство задана нам автоматически в предыдущем учебники, примеры могло бы работать без `DataKeyNames` указанное свойство.</span><span class="sxs-lookup"><span data-stu-id="ea91f-148">While this property has been set for us automatically in the preceding tutorials, the examples would have worked without the `DataKeyNames` property specified.</span></span> <span data-ttu-id="ea91f-149">Однако для GridView, доступный для выбора в этом учебнике, а также для будущих учебников, в которых мы будем подробнее вставки, обновления и удаления `DataKeyNames` свойства должен быть задан правильно.</span><span class="sxs-lookup"><span data-stu-id="ea91f-149">However, for the selectable GridView in this tutorial, as well as for future tutorials in which we'll be examining inserting, updating, and deleting, the `DataKeyNames` property must be set properly.</span></span> <span data-ttu-id="ea91f-150">Теперь пора убедитесь, что к GridView `DataKeyNames` свойству `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-150">Take a moment to ensure that your GridView's `DataKeyNames` property is set to `ProductID`.</span></span>

<span data-ttu-id="ea91f-151">Давайте просмотрите ход работы сих через браузер.</span><span class="sxs-lookup"><span data-stu-id="ea91f-151">Let's view our progress thus far through a browser.</span></span> <span data-ttu-id="ea91f-152">Обратите внимание, что GridView указаны имя и цену всех продуктов вместе с LinkButton выберите.</span><span class="sxs-lookup"><span data-stu-id="ea91f-152">Note that the GridView lists the name and price for all of the products along with a Select LinkButton.</span></span> <span data-ttu-id="ea91f-153">При нажатии кнопки Select вызывает обратную передачу.</span><span class="sxs-lookup"><span data-stu-id="ea91f-153">Clicking the Select button causes a postback.</span></span> <span data-ttu-id="ea91f-154">На шаге 2 будет рассмотрена возможность DetailsView отвечают на этом обратной передачи, отображая сведения для выбранного продукта.</span><span class="sxs-lookup"><span data-stu-id="ea91f-154">In Step 2 we'll see how to have a DetailsView respond to this postback by displaying the details for the selected product.</span></span>


<span data-ttu-id="ea91f-155">[![Каждая строка продукта содержит выберите LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-155">[![Each Product Row Contains a Select LinkButton](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image20.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image19.png)</span></span>

<span data-ttu-id="ea91f-156">**Рис. 7**: каждая строка продукта содержит LinkButton выберите ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-156">**Figure 7**: Each Product Row Contains a Select LinkButton ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image21.png))</span></span>


### <a name="highlighting-the-selected-row"></a><span data-ttu-id="ea91f-157">Выделение цветом выбранной строки</span><span class="sxs-lookup"><span data-stu-id="ea91f-157">Highlighting the Selected Row</span></span>

<span data-ttu-id="ea91f-158">`ProductsGrid` GridView имеет `SelectedRowStyle` свойство, которое может использоваться для диктовки визуальный стиль для выбранной строки.</span><span class="sxs-lookup"><span data-stu-id="ea91f-158">The `ProductsGrid` GridView has a `SelectedRowStyle` property that can be used to dictate the visual style for the selected row.</span></span> <span data-ttu-id="ea91f-159">Используется неправильно, это может улучшить взаимодействие с пользователем отображая более четко выбранные какие строки GridView.</span><span class="sxs-lookup"><span data-stu-id="ea91f-159">Used properly, this can improve the user's experience by more clearly showing which row of the GridView is currently selected.</span></span> <span data-ttu-id="ea91f-160">В этом учебнике давайте выбранного строка была выделена с желтым фоном.</span><span class="sxs-lookup"><span data-stu-id="ea91f-160">For this tutorial, let's have the selected row be highlighted with a yellow background.</span></span>

<span data-ttu-id="ea91f-161">Как и в более ранних учебные видеоматериалы, давайте стараться, чтобы уровень улучшения внешнего вида связанные параметры, определенные как классы CSS.</span><span class="sxs-lookup"><span data-stu-id="ea91f-161">As with our earlier tutorials, let's strive to keep the aesthetic-related settings defined as CSS classes.</span></span> <span data-ttu-id="ea91f-162">Таким образом, создайте новый класс CSS в `Styles.css` с именем `SelectedRowStyle`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-162">Therefore, create a new CSS class in `Styles.css` named `SelectedRowStyle`.</span></span>


[!code-css[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample3.css)]

<span data-ttu-id="ea91f-163">Чтобы применить этот класс CSS для `SelectedRowStyle` свойство *все* изменить GridViews в серии учебника `GridView.skin` обложки в `DataWebControls` темы для включения `SelectedRowStyle` параметры, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="ea91f-163">To apply this CSS class to the `SelectedRowStyle` property of *all* GridViews in our tutorial series, edit the `GridView.skin` Skin in the `DataWebControls` Theme to include the `SelectedRowStyle` settings as shown below:</span></span>


[!code-aspx[Main](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/samples/sample4.aspx)]

<span data-ttu-id="ea91f-164">В результате этого добавления выбранной строки GridView теперь выделено на желтом фоне.</span><span class="sxs-lookup"><span data-stu-id="ea91f-164">With this addition, the selected GridView row is now highlighted with a yellow background color.</span></span>


<span data-ttu-id="ea91f-165">[![Настройка внешнего вида выбранной строки с помощью свойства SelectedRowStyle GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-165">[![Customize the Selected Row's Appearance Using the GridView's SelectedRowStyle Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image23.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image22.png)</span></span>

<span data-ttu-id="ea91f-166">**Рис. 8**: Настройка выбранные строки с помощью внешнего вида элемента GridView `SelectedRowStyle` свойство ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-166">**Figure 8**: Customize the Selected Row's Appearance Using the GridView's `SelectedRowStyle` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image24.png))</span></span>


## <a name="step-2-displaying-the-selected-products-details-in-a-detailsview"></a><span data-ttu-id="ea91f-167">Шаг 2: Вывод сведений о выбранном продукте в элементе управления DetailsView</span><span class="sxs-lookup"><span data-stu-id="ea91f-167">Step 2: Displaying the Selected Product's Details in a DetailsView</span></span>

<span data-ttu-id="ea91f-168">С `ProductsGrid` завершить GridView, все, что остается только добавление DetailsView, в которой отображаются сведения о выбранных конкретного продукта.</span><span class="sxs-lookup"><span data-stu-id="ea91f-168">With the `ProductsGrid` GridView complete, all that remains is to add a DetailsView that displays information about the particular product selected.</span></span> <span data-ttu-id="ea91f-169">Добавление элемента управления DetailsView над элементом управления GridView и создать новый элемент управления ObjectDataSource с именем `ProductDetailsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-169">Add a DetailsView control above the GridView and create a new ObjectDataSource named `ProductDetailsDataSource`.</span></span> <span data-ttu-id="ea91f-170">Поскольку мы хотим этого DetailsView для отображения определенного сведений о выбранного продукта, настройте `ProductDetailsDataSource` использовать `ProductsBLL` класса `GetProductByProductID(productID)` метод.</span><span class="sxs-lookup"><span data-stu-id="ea91f-170">Since we want this DetailsView to display particular information about the selected product, configure the `ProductDetailsDataSource` to use the `ProductsBLL` class's `GetProductByProductID(productID)` method.</span></span>


<span data-ttu-id="ea91f-171">[![Вызвать метод GetProductByProductID(productID) класса ProductsBLL](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-171">[![Invoke the ProductsBLL Class's GetProductByProductID(productID) Method](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image26.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image25.png)</span></span>

<span data-ttu-id="ea91f-172">**Рис. 9**: вызов `ProductsBLL` класса `GetProductByProductID(productID)` метод ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-172">**Figure 9**: Invoke the `ProductsBLL` Class's `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image27.png))</span></span>


<span data-ttu-id="ea91f-173">У  *`productID`*  значение параметра, полученное из элемента управления GridView `SelectedValue` свойство.</span><span class="sxs-lookup"><span data-stu-id="ea91f-173">Have the *`productID`* parameter's value obtained from the GridView control's `SelectedValue` property.</span></span> <span data-ttu-id="ea91f-174">Как мы уже упоминали, GridView `SelectedValue` свойство возвращает значение для выбранной строки ключа первых данных.</span><span class="sxs-lookup"><span data-stu-id="ea91f-174">As we discussed earlier, the GridView's `SelectedValue` property returns the first data key value for the selected row.</span></span> <span data-ttu-id="ea91f-175">Таким образом, важно, GridView `DataKeyNames` свойству `ProductID`, после чего выбранную строку `ProductID` возвращается значение `SelectedValue`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-175">Therefore, it's imperative that the GridView's `DataKeyNames` property is set to `ProductID`, so that the selected row's `ProductID` value is returned by `SelectedValue`.</span></span>


<span data-ttu-id="ea91f-176">[![Значение productID параметра к свойству SelectedValue GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-176">[![Set the productID Parameter to the GridView's SelectedValue Property](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image29.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image28.png)</span></span>

<span data-ttu-id="ea91f-177">**Рис. 10**: задать  *`productID`*  параметр к GridView `SelectedValue` свойство ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-177">**Figure 10**: Set the *`productID`* Parameter to the GridView's `SelectedValue` Property ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image30.png))</span></span>


<span data-ttu-id="ea91f-178">Один раз `productDetailsDataSource` ObjectDataSource был настроен правильно и привязан к DetailsView, завершения этого учебника!</span><span class="sxs-lookup"><span data-stu-id="ea91f-178">Once the `productDetailsDataSource` ObjectDataSource has been configured correctly and bound to the DetailsView, this tutorial is complete!</span></span> <span data-ttu-id="ea91f-179">При первом посещении страницы не выбрана строка, поэтому элемента GridView `SelectedValue` возвращает `null`.</span><span class="sxs-lookup"><span data-stu-id="ea91f-179">When the page is first visited no row is selected, so the GridView's `SelectedValue` property returns `null`.</span></span> <span data-ttu-id="ea91f-180">Поскольку нет ни одного продукта с `NULL` `ProductID` значение, записи не возвращаются `GetProductByProductID(productID)` метод, это означает, что не отображается DetailsView (см. рис. 11).</span><span class="sxs-lookup"><span data-stu-id="ea91f-180">Since there are no products with a `NULL` `ProductID` value, no records are returned by the `GetProductByProductID(productID)` method, meaning that the DetailsView isn't displayed (see Figure 11).</span></span> <span data-ttu-id="ea91f-181">После нажатия кнопки "Select" строке GridView обратная передача и обновлении DetailsView.</span><span class="sxs-lookup"><span data-stu-id="ea91f-181">Upon clicking a GridView row's Select button, a postback ensues and the DetailsView is refreshed.</span></span> <span data-ttu-id="ea91f-182">Это время GridView `SelectedValue` возвращает `ProductID` выбранной строки `GetProductByProductID(productID)` возвращает метод `ProductsDataTable` с информацией об этом конкретного продукта и DetailsView отображает эти подробные сведения (см. рис. 12).</span><span class="sxs-lookup"><span data-stu-id="ea91f-182">This time the GridView's `SelectedValue` property returns the `ProductID` of the selected row, the `GetProductByProductID(productID)` method returns a `ProductsDataTable` with information about that particular product, and the DetailsView shows these details (see Figure 12).</span></span>


<span data-ttu-id="ea91f-183">[![При отображении первой посещением только GridView](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-183">[![When First Visited, Only the GridView is Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image32.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image31.png)</span></span>

<span data-ttu-id="ea91f-184">**Рис. 11**: отображается при первом посещении только GridView ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-184">**Figure 11**: When First Visited, Only the GridView is Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image33.png))</span></span>


<span data-ttu-id="ea91f-185">[![После выбора строки, отображаются сведения о продукте](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="ea91f-185">[![Upon Selecting a Row, the Product's Details are Displayed](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image35.png)](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image34.png)</span></span>

<span data-ttu-id="ea91f-186">**Рис. 12**: после выбора строки, отображаются сведения о продукте ([Просмотр полноразмерное изображение](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="ea91f-186">**Figure 12**: Upon Selecting a Row, the Product's Details are Displayed ([Click to view full-size image](master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs/_static/image36.png))</span></span>


## <a name="summary"></a><span data-ttu-id="ea91f-187">Сводка</span><span class="sxs-lookup"><span data-stu-id="ea91f-187">Summary</span></span>

<span data-ttu-id="ea91f-188">В этом и предыдущем три учебника мы видели ряд методов для отображения иерархического отчеты.</span><span class="sxs-lookup"><span data-stu-id="ea91f-188">In this and the preceding three tutorials we've seen a number of techniques for displaying master/detail reports.</span></span> <span data-ttu-id="ea91f-189">В данном руководстве, мы рассмотрели использование выбираемым GridView для размещения основных записей и DetailsView для отображения сведений о выбранной записи master на одной странице.</span><span class="sxs-lookup"><span data-stu-id="ea91f-189">In this tutorial we examined using a selectable GridView to house the master records and a DetailsView to display details about the selected master record on the same page.</span></span> <span data-ttu-id="ea91f-190">В предыдущих учебниках мы рассматривали как отобразить сведения об образце отчеты с помощью элементами управления DropDownList и отображение основных записей в одной веб-страницы и записи в области данных на другом.</span><span class="sxs-lookup"><span data-stu-id="ea91f-190">In the earlier tutorials we looked at how to display master/details reports using DropDownLists and displaying master records on one web page and detail records on another.</span></span>

<span data-ttu-id="ea91f-191">Этот учебник завершает изучение главного и подчиненного представлений отчетов.</span><span class="sxs-lookup"><span data-stu-id="ea91f-191">This tutorial concludes our examination of master/detail reports.</span></span> <span data-ttu-id="ea91f-192">Начиная с Далее tutorialwe для начала рассмотрим наши исследования настраиваемого форматирования с GridView, DetailsView и FormView.</span><span class="sxs-lookup"><span data-stu-id="ea91f-192">Starting with the next tutorialwe'll begin our exploration of customized formatting with the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="ea91f-193">Мы рассмотрим, как для настройки отображения этих элементов управления на основе данных, связанных с ними, как создать сводку данных в нижнем колонтитуле GridView и использование шаблонов для получения повышенный контроль над макетом.</span><span class="sxs-lookup"><span data-stu-id="ea91f-193">We'll see how to customize the appearance of these controls based on the data bound to them, how to summarize data in the GridView's footer, and how to use templates to obtain a greater degree of control over the layout.</span></span>

<span data-ttu-id="ea91f-194">Программирование довольны!</span><span class="sxs-lookup"><span data-stu-id="ea91f-194">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="ea91f-195">Об авторе</span><span class="sxs-lookup"><span data-stu-id="ea91f-195">About the Author</span></span>

<span data-ttu-id="ea91f-196">[Скотт Митчелл](http://www.4guysfromrolla.com/ScottMitchell.shtml), автор семи ASP/ASP.NET и основателя из [4GuysFromRolla.com](http://www.4guysfromrolla.com), работает с веб-технологиями Майкрософт с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="ea91f-196">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ea91f-197">Скотт — независимый консультант, trainer и записи.</span><span class="sxs-lookup"><span data-stu-id="ea91f-197">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ea91f-198">Его последняя книга — [ *диспетчерами учат самостоятельно ASP.NET 2.0 в течение 24 часов*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="ea91f-198">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ea91f-199">Он может быть достигнута по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) или через его блог, который можно найти в [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="ea91f-199">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ea91f-200">Благодарности</span><span class="sxs-lookup"><span data-stu-id="ea91f-200">Special Thanks To</span></span>

<span data-ttu-id="ea91f-201">Этот учебник ряд прошел проверку многие полезные рецензентов.</span><span class="sxs-lookup"><span data-stu-id="ea91f-201">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ea91f-202">Основной рецензент этого учебника было – Хилтон Гизнау.</span><span class="sxs-lookup"><span data-stu-id="ea91f-202">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="ea91f-203">Объясняются моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="ea91f-203">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ea91f-204">Если Да, напишите мне по [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ea91f-204">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ea91f-205">[Назад](master-detail-filtering-across-two-pages-cs.md)
[Вперед](master-detail-filtering-with-a-dropdownlist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="ea91f-205">[Previous](master-detail-filtering-across-two-pages-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-vb.md)</span></span>
