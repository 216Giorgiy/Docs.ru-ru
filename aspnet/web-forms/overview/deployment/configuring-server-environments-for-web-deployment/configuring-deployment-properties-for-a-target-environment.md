---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: "Настройка свойств развертывания для целевой среды | Документы Microsoft"
author: jrjlee
description: "В этом разделе описываются способы настройки свойств, относящихся к среде для развертывания в конкретной среде образец решения диспетчера контактов..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: f27b8376b332ff21185be0fd5c00ced7d40a20bd
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="configuring-deployment-properties-for-a-target-environment"></a><span data-ttu-id="38007-103">Настройка свойств развертывания для целевой среды</span><span class="sxs-lookup"><span data-stu-id="38007-103">Configuring Deployment Properties for a Target Environment</span></span>
====================
<span data-ttu-id="38007-104">по [Джейсон Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="38007-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="38007-105">Скачать PDF</span><span class="sxs-lookup"><span data-stu-id="38007-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="38007-106">В этом разделе описываются способы настройки свойств, относящихся к среде для развертывания диспетчера контактов образец решения в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="38007-106">This topic describes how to configure environment-specific properties in order to deploy the sample Contact Manager solution to a specific target environment.</span></span>


<span data-ttu-id="38007-107">Этот раздел входит в состав серию учебников, исходя из требования к развертыванию enterprise вымышленная компания Fabrikam, Inc. Этот учебник ряд использует образец решения & #x 2014; [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) решения & #x 2014; для представления веб-приложения с реалистичных уровень сложности, включая приложения ASP.NET MVC 3, Windows Службы Communication Foundation (WCF) и проект базы данных.</span><span class="sxs-lookup"><span data-stu-id="38007-107">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) solution&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="38007-108">Метод развертывания, в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о процессе сборки](../web-deployment-in-the-enterprise/understanding-the-build-process.md), в которой процесс построения управляется двух проектов файлы & #x 2014; один с построение инструкции, которые применяются для каждой целевой среде и, содержащий параметры построения и развертывания конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="38007-108">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="38007-109">Во время построения файла проекта среды объединяется в файл проекта зависит от среды, образуют полный набор инструкций построения.</span><span class="sxs-lookup"><span data-stu-id="38007-109">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="process-overview"></a><span data-ttu-id="38007-110">Общие сведения о процессе</span><span class="sxs-lookup"><span data-stu-id="38007-110">Process Overview</span></span>

<span data-ttu-id="38007-111">Файл проекта, которое будет использоваться для построения и развертывания решений диспетчера контактов разделено на два физических файлов:</span><span class="sxs-lookup"><span data-stu-id="38007-111">The project file that you'll use to build and deploy the Contact Manager solution is split into two physical files:</span></span>

- <span data-ttu-id="38007-112">Содержащий универсальный сборки настройки и инструкции ( *Publish.proj* файла).</span><span class="sxs-lookup"><span data-stu-id="38007-112">One that contains universal build settings and instructions (the *Publish.proj* file).</span></span>
- <span data-ttu-id="38007-113">Содержащий конкретных параметров построения (*Env Dev.proj*, *Env Stage.proj*и так далее).</span><span class="sxs-lookup"><span data-stu-id="38007-113">One that contains environment-specific build settings (*Env-Dev.proj*, *Env-Stage.proj*, and so on).</span></span>

<span data-ttu-id="38007-114">Во время сборки, соответствующий определенной среде файл проекта объединяются universal *Publish.proj* файл, чтобы полный набор инструкций построения.</span><span class="sxs-lookup"><span data-stu-id="38007-114">At build time, the appropriate environment-specific project file is merged into the universal *Publish.proj* file to form a complete set of build instructions.</span></span> <span data-ttu-id="38007-115">Можно настроить развертывание на указанном конечном среды путем создания или настройки файлов проекта конкретную среду с параметрами, которые описывают сценария развертывания.</span><span class="sxs-lookup"><span data-stu-id="38007-115">You can configure deployment to specific destination environments by creating or customizing environment-specific project files with settings that describe your own deployment scenario.</span></span>

<span data-ttu-id="38007-116">Большое количество эти значения определяются как настроить среду назначения & #x 2014, в частности, является ли целевой веб-сервера должен содержать службу агента веб-развертывания (удаленный агент) или веб-развертывания обработчик.</span><span class="sxs-lookup"><span data-stu-id="38007-116">Lots of these values are determined by how your destination environment is configured&#x2014;in particular, whether your target web server is configured to use the Web Deployment Agent Service (the remote agent) or the Web Deploy Handler.</span></span> <span data-ttu-id="38007-117">Дополнительные сведения об этих подходах и рекомендации по выбору правильного подхода для собственной среде см. раздел [Выбор оптимального подхода справа для веб-развертывания](choosing-the-right-approach-to-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="38007-117">For more information on these approaches, and for guidance on choosing the right approach for your own environment, see [Choosing the Right Approach to Web Deployment](choosing-the-right-approach-to-web-deployment.md).</span></span>

<span data-ttu-id="38007-118">[Сценарии диспетчера контактов](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) требуется два файла проекта для конкретной среды:</span><span class="sxs-lookup"><span data-stu-id="38007-118">The [Contact Manager scenario](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) requires two environment-specific project files:</span></span>

- <span data-ttu-id="38007-119">Развертывание в тестовой среде разработчика (*Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="38007-119">Deployment to a developer test environment (*Env-Dev.proj*).</span></span> <span data-ttu-id="38007-120">Среды разработки тест настроен для приема удаленных развертываний с помощью удаленного агента, как описано в [сценарий: Настройка тестовой среды для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="38007-120">The developer test environment is configured to accept remote deployments using the remote agent, as described in [Scenario: Configuring a Test Environment for Web Deployment](scenario-configuring-a-test-environment-for-web-deployment.md).</span></span> <span data-ttu-id="38007-121">Этот файл должен содержать удаленного агента, адрес конечной точки, а также связанные с расположением параметры, такие как строки соединения и конечных точек службы.</span><span class="sxs-lookup"><span data-stu-id="38007-121">This file needs to provide the remote agent endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>
- <span data-ttu-id="38007-122">Развертывание в промежуточной среде (*Env Stage.proj*).</span><span class="sxs-lookup"><span data-stu-id="38007-122">Deployment to a staging environment (*Env-Stage.proj*).</span></span> <span data-ttu-id="38007-123">Промежуточной среде настроен для приема удаленных развертываний с помощью обработчика развертывание Web, как описано в [сценарий: настройка для веб-развертывания в промежуточной среде](scenario-configuring-a-staging-environment-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="38007-123">The staging environment is configured to accept remote deployments using the Web Deploy Handler, as described in [Scenario: Configuring a Staging Environment for Web Deployment](scenario-configuring-a-staging-environment-for-web-deployment.md).</span></span> <span data-ttu-id="38007-124">Этот файл необходимо указать адрес конечной точки веб-обработчик развертывания, а также относящиеся к размещению таких параметров, как строки подключения и конечных точек службы.</span><span class="sxs-lookup"><span data-stu-id="38007-124">This file needs to provide the Web Deploy Handler endpoint address as well as location-specific settings like connection strings and service endpoints.</span></span>

<span data-ttu-id="38007-125">Очень важно, чтобы Обратите внимание, что не влияют на параметры, настроенные в файле проекта для конкретной среды содержимое веб-пакет сам & #x 2014; вместо этого они управляют развертывание пакета и какие значения параметров предоставляются пакет будет извлечен.</span><span class="sxs-lookup"><span data-stu-id="38007-125">It's important to note that the settings you configure in the environment-specific project file don't affect the contents of the web package itself&#x2014;instead, they control how the package is deployed and what parameter values are provided when the package is extracted.</span></span> <span data-ttu-id="38007-126">Вы импортируете веб-пакета в рабочей среде вручную, как описано в [сценарий: Настройка рабочей среде для развертывания веб-](scenario-configuring-a-production-environment-for-web-deployment.md) и [вручную Установка веб-пакеты](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), Поэтому неважно, какие параметры вы использовали в файле проекта среды при создании пакета.</span><span class="sxs-lookup"><span data-stu-id="38007-126">You're importing the web package into the production environment manually, as described in [Scenario: Configuring a Production Environment for Web Deployment](scenario-configuring-a-production-environment-for-web-deployment.md) and [Manually Installing Web Packages](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), so it doesn't matter what settings you used in the environment-specific project file when you generated the package.</span></span> <span data-ttu-id="38007-127">Диспетчер Internet Information Services (IIS) предложит ввести любое параметризованные значения, такие как строки соединения и конечные точки службы, при импорте пакета.</span><span class="sxs-lookup"><span data-stu-id="38007-127">Internet Information Services (IIS) Manager will prompt you for any parameterized values, like connection strings and service endpoints, when you import the package.</span></span>

<span data-ttu-id="38007-128">Развернуть решение диспетчера контактов в целевой среде, можно либо настроить этот файл, или использовать в качестве шаблона и создать свой собственный файл.</span><span class="sxs-lookup"><span data-stu-id="38007-128">To deploy the Contact Manager solution to your own target environment, you can either customize this file or use it as a template and create your own file.</span></span>

<span data-ttu-id="38007-129">**Настройка параметров конкретной среды развертывания для решения диспетчера контактов**</span><span class="sxs-lookup"><span data-stu-id="38007-129">**To configure environment-specific deployment settings for the Contact Manager solution**</span></span>

1. <span data-ttu-id="38007-130">Откройте решение ContactManager WCF в Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="38007-130">Open the ContactManager-WCF solution in Visual Studio 2010.</span></span>
2. <span data-ttu-id="38007-131">В **обозревателе решений** окна, разверните **публикации** папку, разверните **EnvConfig** папку и дважды щелкните **Env-Dev.proj**.</span><span class="sxs-lookup"><span data-stu-id="38007-131">In the **Solution Explorer** window, expand the **Publish** folder, expand the **EnvConfig** folder, and then double-click **Env-Dev.proj**.</span></span>

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. <span data-ttu-id="38007-132">Замените значения свойств в *Env Dev.proj* файлов с правильными значениями для тестовой среды.</span><span class="sxs-lookup"><span data-stu-id="38007-132">Replace the property values in the *Env-Dev.proj* file with the correct values for your own test environment.</span></span>

    > [!NOTE]
    > <span data-ttu-id="38007-133">Дополнительные сведения о каждое из этих свойств таблицы, следующим за этой процедурой.</span><span class="sxs-lookup"><span data-stu-id="38007-133">The table that follows this procedure provides more information on each of these properties.</span></span>
4. <span data-ttu-id="38007-134">Сохраните работу и закройте *Env Dev.proj* файла.</span><span class="sxs-lookup"><span data-stu-id="38007-134">Save your work, and then close the *Env-Dev.proj* file.</span></span>

## <a name="choosing-the-right-deployment-properties"></a><span data-ttu-id="38007-135">Выбор свойств справа развертывания</span><span class="sxs-lookup"><span data-stu-id="38007-135">Choosing the Right Deployment Properties</span></span>

<span data-ttu-id="38007-136">Эта таблица описывает назначение каждого свойства в файле проекта среды образец *Env Dev.proj*и даются рекомендации по значениям, необходимо предоставить.</span><span class="sxs-lookup"><span data-stu-id="38007-136">This table describes the purpose of each property in the sample environment-specific project file, *Env-Dev.proj*, and provides some guidance on the values you should provide.</span></span>

| <span data-ttu-id="38007-137">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="38007-137">Property Name</span></span> | <span data-ttu-id="38007-138">Подробные сведения</span><span class="sxs-lookup"><span data-stu-id="38007-138">Details</span></span> |
| --- | --- |
| <span data-ttu-id="38007-139">**MSDeployComputerName** имя конечной точки сервера или службы веб-назначения.</span><span class="sxs-lookup"><span data-stu-id="38007-139">**MSDeployComputerName** The name of the destination web server or service endpoint.</span></span> | <span data-ttu-id="38007-140">Если вы развертываете к службе удаленного агента на веб-сервере назначения, можно указать имя конечного компьютера (например, **TESTWEB1** или **TESTWEB1.fabrikam.net**), или указать удаленный агент конечной точки (например, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span><span class="sxs-lookup"><span data-stu-id="38007-140">If you're deploying to the remote agent service on the destination web server, you can specify the target computer name (for example, **TESTWEB1** or **TESTWEB1.fabrikam.net**), or you can specify the remote agent endpoint (for example, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`).</span></span> <span data-ttu-id="38007-141">Развертывание выполняется так же, как в каждом случае.</span><span class="sxs-lookup"><span data-stu-id="38007-141">The deployment works the same way in each case.</span></span> <span data-ttu-id="38007-142">При развертывании веб-развертывания обработчик на веб-сервере назначения должен укажите конечную точку службы и укажите имя веб-сайта IIS в качестве параметра строки запроса (например, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span><span class="sxs-lookup"><span data-stu-id="38007-142">If you're deploying to the Web Deploy Handler on the destination web server, you should specify the service endpoint and include the name of the IIS website as a query string parameter (for example, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).</span></span> |
| <span data-ttu-id="38007-143">**MSDeployAuth** метод, который веб-развертывания следует использовать для проверки подлинности на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="38007-143">**MSDeployAuth** The method that Web Deploy should use to authenticate to the remote computer.</span></span> | <span data-ttu-id="38007-144">Это свойство должно иметь значение **NTLM** или **основные**.</span><span class="sxs-lookup"><span data-stu-id="38007-144">This should be set to **NTLM** or **Basic**.</span></span> <span data-ttu-id="38007-145">Как правило, вы воспользуетесь **NTLM** при развертывании в службу удаленного агента и **основные** при развертывании на веб-развертывания обработчик.</span><span class="sxs-lookup"><span data-stu-id="38007-145">Typically, you'll use **NTLM** if you're deploying to the remote agent service and **Basic** if you're deploying to the Web Deploy Handler.</span></span> <span data-ttu-id="38007-146">При использовании обычной проверки подлинности, необходимо также указать имя пользователя и пароль, которая должна олицетворяться средство IIS веб-развертывания (Web Deploy) для выполнения развертывания.</span><span class="sxs-lookup"><span data-stu-id="38007-146">If you use basic authentication, you also need to specify the user name and password that the IIS Web Deployment Tool (Web Deploy) should impersonate in order to perform the deployment.</span></span> <span data-ttu-id="38007-147">В этом примере эти значения предоставляются через **MSDeployUsername** и **MSDeployPassword** свойства.</span><span class="sxs-lookup"><span data-stu-id="38007-147">In this example, these values are provided through the **MSDeployUsername** and **MSDeployPassword** properties.</span></span> <span data-ttu-id="38007-148">Если используется проверка подлинности NTLM, можно пропустить эти свойства или оставить пустыми.</span><span class="sxs-lookup"><span data-stu-id="38007-148">If you use NTLM authentication, you can omit these properties or leave them blank.</span></span> |
| <span data-ttu-id="38007-149">**MSDeployUsername** при использовании обычной проверки подлинности веб-развертывания будет использовать эту учетную запись на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="38007-149">**MSDeployUsername** If you use basic authentication, Web Deploy will use this account on the remote computer.</span></span> | <span data-ttu-id="38007-150">Это должно задаваться в виде *домена*\*имя_пользователя * (например, **FABRIKAM\matt**).</span><span class="sxs-lookup"><span data-stu-id="38007-150">This should take the form *DOMAIN*\*username* (for example, **FABRIKAM\matt**).</span></span> <span data-ttu-id="38007-151">Это значение используется только при указании обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="38007-151">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="38007-152">Если используется проверка подлинности NTLM, свойство может быть опущено.</span><span class="sxs-lookup"><span data-stu-id="38007-152">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="38007-153">Если значение задано, оно будет игнорироваться.</span><span class="sxs-lookup"><span data-stu-id="38007-153">If a value is supplied, it will be ignored.</span></span> |
| <span data-ttu-id="38007-154">**MSDeployPassword** при использовании обычной проверки подлинности веб-развертывания будет использовать этот пароль на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="38007-154">**MSDeployPassword** If you use basic authentication, Web Deploy will use this password on the remote computer.</span></span> | <span data-ttu-id="38007-155">Это пароль для учетной записи пользователя, указанной в **MSDeployUsername** свойство.</span><span class="sxs-lookup"><span data-stu-id="38007-155">This is the password for the user account you specified in the **MSDeployUsername** property.</span></span> <span data-ttu-id="38007-156">Это значение используется только при указании обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="38007-156">This value is only used if you specify basic authentication.</span></span> <span data-ttu-id="38007-157">Если используется проверка подлинности NTLM, свойство может быть опущено.</span><span class="sxs-lookup"><span data-stu-id="38007-157">If you use NTLM authentication, the property can be omitted.</span></span> <span data-ttu-id="38007-158">Если значение задано, оно будет игнорироваться.</span><span class="sxs-lookup"><span data-stu-id="38007-158">If a value is supplied, it will be ignored.</span></span> |
| <span data-ttu-id="38007-159">**ContactManagerIisPath** путь IIS, на котором требуется развернуть приложение диспетчера контактов MVC.</span><span class="sxs-lookup"><span data-stu-id="38007-159">**ContactManagerIisPath** The IIS path on which you want to deploy the Contact Manager MVC application.</span></span> | <span data-ttu-id="38007-160">Это должен быть путь, как оно отображается в диспетчере служб IIS в форме [*имя веб-сайта IIS*] / [*web**имя_приложения*].</span><span class="sxs-lookup"><span data-stu-id="38007-160">This should be the path as it appears in IIS Manager, in the form [*IIS website name*]/[*web**application name*].</span></span> <span data-ttu-id="38007-161">Помните, что веб-сайт IIS должна существовать перед развертыванием приложения.</span><span class="sxs-lookup"><span data-stu-id="38007-161">Remember that the IIS website needs to exist before you deploy your application.</span></span> <span data-ttu-id="38007-162">Например при создании веб-сайт IIS с именем DemoSite можно указать путь IIS для приложения MVC как DemoSite/ContactManager.</span><span class="sxs-lookup"><span data-stu-id="38007-162">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the MVC application as DemoSite/ContactManager.</span></span> |
| <span data-ttu-id="38007-163">**ContactManagerServiceIisPath** путь IIS, на котором требуется выполнить развертывание службы WCF диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="38007-163">**ContactManagerServiceIisPath** The IIS path on which you want to deploy the Contact Manager WCF service.</span></span> | <span data-ttu-id="38007-164">Например, если вы создали веб-сайт IIS с именем DemoSite, можно указать путь IIS для службы WCF в качестве **DemoSite/ContactManagerService**.</span><span class="sxs-lookup"><span data-stu-id="38007-164">For example, if you've created an IIS website named DemoSite, you could specify the IIS path for the WCF service as **DemoSite/ContactManagerService**.</span></span> |
| <span data-ttu-id="38007-165">**ContactManagerTargetUrl** URL-адрес, по которому можно связаться со службой WCF.</span><span class="sxs-lookup"><span data-stu-id="38007-165">**ContactManagerTargetUrl** The URL at which the WCF service can be reached.</span></span> | <span data-ttu-id="38007-166">Это будет иметь вид [*URL-адрес корневого веб-сайта IIS*] / [*имя приложения службы*] / [*конечной точки службы*].</span><span class="sxs-lookup"><span data-stu-id="38007-166">This will take the form [*IIS website root URL*]/[*service application name*]/[*service endpoint*].</span></span> <span data-ttu-id="38007-167">Например, при создании веб-сайт IIS на порту 85 URL-адрес потребуется формы `http://localhost:85/ContactManagerService/ContactService.svc`.</span><span class="sxs-lookup"><span data-stu-id="38007-167">For example, if you've created an IIS website on port 85, the URL would take the form `http://localhost:85/ContactManagerService/ContactService.svc`.</span></span> <span data-ttu-id="38007-168">Помните, MVC-приложения и службы WCF развертываются на том же сервере.</span><span class="sxs-lookup"><span data-stu-id="38007-168">Remember that the MVC application and the WCF service are deployed to the same server.</span></span> <span data-ttu-id="38007-169">В результате этот URL-адрес осуществляется только с компьютера, на котором он установлен.</span><span class="sxs-lookup"><span data-stu-id="38007-169">As a result, this URL is only ever accessed from the machine on which it's installed.</span></span> <span data-ttu-id="38007-170">По этой причине лучше использовать localhost или IP-адрес, а не имя компьютера или заголовка узла, в URL-АДРЕСЕ.</span><span class="sxs-lookup"><span data-stu-id="38007-170">Because of this, it's better to use localhost or the IP address, rather than the machine name or a host header, in the URL.</span></span> <span data-ttu-id="38007-171">Если используется имя компьютера или заголовок узла, [проверки замыкания на себя](https://go.microsoft.com/?linkid=9805131) функция безопасности в службах IIS могут блокировать URL-адрес и возвращать **HTTP 401.1 - доступ запрещен** ошибки.</span><span class="sxs-lookup"><span data-stu-id="38007-171">If you use the machine name or a host header, the [loopback check](https://go.microsoft.com/?linkid=9805131) security feature in IIS may block the URL and return an **HTTP 401.1 - Unauthorized** error.</span></span> |
| <span data-ttu-id="38007-172">**CmDatabaseConnectionString** строку подключения для сервера базы данных.</span><span class="sxs-lookup"><span data-stu-id="38007-172">**CmDatabaseConnectionString** The connection string for the database server.</span></span> | <span data-ttu-id="38007-173">Строка соединения использует оба учетные данные, которые VSDBCMD будет использоваться для связи с сервером базы данных и создания базы данных и учетные данные, которые пула веб-сервера приложений будет использоваться для связи с сервером базы данных и взаимодействия с базой данных.</span><span class="sxs-lookup"><span data-stu-id="38007-173">The connection string determines both the credentials that VSDBCMD will use to contact the database server and create the database and the credentials that the web server application pool will use to contact the database server and interact with the database.</span></span> <span data-ttu-id="38007-174">По существу имеется два варианта здесь.</span><span class="sxs-lookup"><span data-stu-id="38007-174">Essentially you have two choices here.</span></span> <span data-ttu-id="38007-175">Можно указать **Integrated Security = true**, в этом случае используется встроенная проверка подлинности Windows: **источник данных = TESTDB1; Integrated Security = true** таким образом, то она будет создана с помощью учетные данные пользователя, запустившего VSDBCMD исполняемый файл и приложение будет доступ к базе данных с использованием удостоверения учетной записи компьютера сервера web.</span><span class="sxs-lookup"><span data-stu-id="38007-175">You can specify **Integrated Security=true**, in which case integrated Windows authentication is used: **Data Source=TESTDB1;Integrated Security=true** In this case, the database will be created using the credentials of the user who runs the VSDBCMD executable, and the application will access the database using the identity of the web server machine account.</span></span> <span data-ttu-id="38007-176">Кроме того можно указать имя пользователя и пароль учетной записи SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38007-176">Alternatively, you can specify the user name and password of a SQL Server account.</span></span> <span data-ttu-id="38007-177">В этом случае используются учетные данные SQL Server VSDBCMD, чтобы создать базу данных и пул приложений для взаимодействия с базой данных: **источник данных = TESTDB1; ИД пользователя = ASqlUser; Пароль = Pa$ $w0rd** пошаговых инструкций в этом разделе предполагается, вы сможете использовать встроенную проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="38007-177">In this case, the SQL Server credentials are used both by VSDBCMD to create the database and by the application pool to interact with the database: **Data Source=TESTDB1;User Id=ASqlUser; Password=Pa$$w0rd** The walkthroughs in this topic assume that you'll use integrated Windows authentication.</span></span> |
| <span data-ttu-id="38007-178">**CmTargetDatabase** имя, которое будет присвоено базе данных создается на сервере базы данных.</span><span class="sxs-lookup"><span data-stu-id="38007-178">**CmTargetDatabase** The name you want to give the database you'll create on the database server.</span></span> | <span data-ttu-id="38007-179">Указанное здесь значение добавляется к команде VSDBCMD как параметр.</span><span class="sxs-lookup"><span data-stu-id="38007-179">The value you provide here is added to the VSDBCMD command as a parameter.</span></span> <span data-ttu-id="38007-180">Он также используется для сборки полную строку соединения, пул приложений на веб-сервере можно использовать для взаимодействия с базой данных.</span><span class="sxs-lookup"><span data-stu-id="38007-180">It's also used to build a full connection string that the application pool on the web server can use to interact with the database.</span></span> |
  

<span data-ttu-id="38007-181">Эти примеры показывают, как можно настроить эти свойства для конкретных сценариях развертывания.</span><span class="sxs-lookup"><span data-stu-id="38007-181">These examples show how you might configure these properties for specific deployment scenarios.</span></span>

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a><span data-ttu-id="38007-182">Пример 1 & #x 2014; развертывания к службе удаленного агента</span><span class="sxs-lookup"><span data-stu-id="38007-182">Example 1&#x2014;Deployment to the Remote Agent Service</span></span>

<span data-ttu-id="38007-183">В этом примере:</span><span class="sxs-lookup"><span data-stu-id="38007-183">In this example:</span></span>

- <span data-ttu-id="38007-184">Необходимо развернуть службу удаленного агента на TESTWEB1.</span><span class="sxs-lookup"><span data-stu-id="38007-184">You're deploying to the remote agent service on TESTWEB1.</span></span>
- <span data-ttu-id="38007-185">Указывающей веб-развертывания на использование проверки подлинности NTLM.</span><span class="sxs-lookup"><span data-stu-id="38007-185">You're instructing Web Deploy to use NTLM authentication.</span></span> <span data-ttu-id="38007-186">Веб-развертывание будет выполняться с использованием учетных данных, который используется для вызова Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="38007-186">Web Deploy will run using the credentials you used to invoke the Microsoft Build Engine (MSBuild).</span></span>
- <span data-ttu-id="38007-187">Для развертывания используется встроенная проверка подлинности **ContactManager** базы данных в базу данных TESTDB1.</span><span class="sxs-lookup"><span data-stu-id="38007-187">You're using integrated authentication to deploy the **ContactManager** database to TESTDB1.</span></span> <span data-ttu-id="38007-188">База данных будет развернута с помощью учетных данных, который используется для вызова MSBuild.</span><span class="sxs-lookup"><span data-stu-id="38007-188">The database will be deployed using the credentials you used to invoke MSBuild.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]


### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a><span data-ttu-id="38007-189">Пример 2 & #x 2014; развертывания в веб-развертывание обработчика конечной точки</span><span class="sxs-lookup"><span data-stu-id="38007-189">Example 2&#x2014;Deployment to the Web Deploy Handler Endpoint</span></span>

<span data-ttu-id="38007-190">В этом примере:</span><span class="sxs-lookup"><span data-stu-id="38007-190">In this example:</span></span>

- <span data-ttu-id="38007-191">Необходимо развернуть конечную точку службы веб-развертывания обработчик на STAGEWEB1.</span><span class="sxs-lookup"><span data-stu-id="38007-191">You're deploying to the Web Deploy Handler service endpoint on STAGEWEB1.</span></span>
- <span data-ttu-id="38007-192">Указывающей веб-развертывания для обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="38007-192">You're instructing Web Deploy to use basic authentication.</span></span>
- <span data-ttu-id="38007-193">Можно будет определить, что веб-развертывания следует выполнять олицетворение учетную запись FABRIKAM\stagingdeployer на удаленном компьютере.</span><span class="sxs-lookup"><span data-stu-id="38007-193">You're specifying that Web Deploy should impersonate the FABRIKAM\stagingdeployer account on the remote computer.</span></span>
- <span data-ttu-id="38007-194">Вы используете проверку подлинности SQL Server для развертывания **ContactManager** STAGEDB1 базы данных.</span><span class="sxs-lookup"><span data-stu-id="38007-194">You're using SQL Server authentication to deploy the **ContactManager** database to STAGEDB1.</span></span>


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]


## <a name="conclusion"></a><span data-ttu-id="38007-195">Заключение</span><span class="sxs-lookup"><span data-stu-id="38007-195">Conclusion</span></span>

<span data-ttu-id="38007-196">На этом этапе файлы проекта будут полностью настроены для построения и развертывания решений диспетчера контактов для одного или нескольких средах назначения.</span><span class="sxs-lookup"><span data-stu-id="38007-196">At this point, your project files are fully configured to build and deploy the Contact Manager solution to one or more destination environments.</span></span>

<span data-ttu-id="38007-197">Чтобы использовать эти файлы проектов в рамках процесса развертывания один шаг, repeatable, необходимо выполнить *Publish.proj* текстовый файл с помощью MSBuild и передавать в расположение файла проекта для конкретной среды, как параметр.</span><span class="sxs-lookup"><span data-stu-id="38007-197">To use these project files as part of a single-step, repeatable deployment process, you need to execute the *Publish.proj* file using MSBuild and pass in the location of the environment-specific project file as a parameter.</span></span> <span data-ttu-id="38007-198">Это можно сделать различными способами:</span><span class="sxs-lookup"><span data-stu-id="38007-198">You can do this in various ways:</span></span>

- <span data-ttu-id="38007-199">Обзор MSBuild и общие сведения о настраиваемом проекте файлов см. в разделе [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="38007-199">For an overview of MSBuild and an introduction to custom project files, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="38007-200">Сведения для создания команды MSBuild, которая осуществляет файлы пользовательского проекта см. в разделе [веб-развертывание пакетов](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="38007-200">For information on how to formulate an MSBuild command that executes your custom project files, see [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md).</span></span>
- <span data-ttu-id="38007-201">Сведения о том, как включить MSBuild команды в командный файл для развертывания на один шаг, repeatable см. в разделе [Создание и запуск развертывания командный файл](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span><span class="sxs-lookup"><span data-stu-id="38007-201">For information on how to incorporate your MSBuild commands into a command file for single-step, repeatable deployments, see [Creating and Running a Deployment Command File](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).</span></span>
- <span data-ttu-id="38007-202">Сведения о том, как выполнять файлы пользовательского проекта из Team Build см. в разделе [создание определение построения, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="38007-202">For information on how to execute your custom project files from Team Build, see [Creating a Build Definition that Supports Deployment](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="38007-203">Назад</span><span class="sxs-lookup"><span data-stu-id="38007-203">Previous</span></span>](creating-a-server-farm-with-the-web-farm-framework.md)
