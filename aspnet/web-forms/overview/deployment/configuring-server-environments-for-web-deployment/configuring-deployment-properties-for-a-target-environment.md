---
uid: web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
title: Настройка свойств развертывания для целевой среды | Документы Microsoft
author: jrjlee
description: В этом разделе описываются способы настройки свойств, относящихся к среде для развертывания в конкретной среде образец решения диспетчера контактов...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: b5b86e03-b8ed-46e6-90fa-e1da88ef34e9
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment
msc.type: authoredcontent
ms.openlocfilehash: ae9e220d1284bcc3aefed09a3f64cceac604fb73
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="configuring-deployment-properties-for-a-target-environment"></a>Настройка свойств развертывания для целевой среды
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описываются способы настройки свойств, относящихся к среде для развертывания диспетчера контактов образец решения в целевой среде.


Этот раздел входит в состав серию учебников, исходя из требования к развертыванию enterprise вымышленная компания Fabrikam, Inc. Этот учебник ряд использует образец решения&#x2014; [диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) решения&#x2014;для представления веб-приложения с реалистичных уровень сложности, включая приложения ASP.NET MVC 3, Windows Communication Служба Foundation (WCF) и проект базы данных.

Метод развертывания, в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о процессе построения](../web-deployment-in-the-enterprise/understanding-the-build-process.md), в которой процесс построения управляется двух файлов проекта&#x2014;один с построение инструкции, которые применяются для каждой целевой среде и, содержащий параметры построения и развертывания конкретной среды. Во время построения файла проекта среды объединяется в файл проекта зависит от среды, образуют полный набор инструкций построения.

## <a name="process-overview"></a>Общие сведения о процессе

Файл проекта, которое будет использоваться для построения и развертывания решений диспетчера контактов разделено на два физических файлов:

- Содержащий универсальный сборки настройки и инструкции ( *Publish.proj* файла).
- Содержащий конкретных параметров построения (*Env Dev.proj*, *Env Stage.proj*и так далее).

Во время сборки, соответствующий определенной среде файл проекта объединяются universal *Publish.proj* файл, чтобы полный набор инструкций построения. Можно настроить развертывание на указанном конечном среды путем создания или настройки файлов проекта конкретную среду с параметрами, которые описывают сценария развертывания.

Большое количество эти значения определяются как настроить среду назначения&#x2014;в частности, является ли целевой веб-сервера должен содержать службу агента веб-развертывания (удаленный агент) или веб-развертывания обработчик. Дополнительные сведения об этих подходах и рекомендации по выбору правильного подхода для собственной среде см. раздел [Выбор оптимального подхода справа для веб-развертывания](choosing-the-right-approach-to-web-deployment.md).

[Сценарии диспетчера контактов](../deploying-web-applications-in-enterprise-scenarios/enterprise-web-deployment-scenario-overview.md) требуется два файла проекта для конкретной среды:

- Развертывание в тестовой среде разработчика (*Env Dev.proj*). Среды разработки тест настроен для приема удаленных развертываний с помощью удаленного агента, как описано в [сценарий: Настройка тестовой среды для веб-развертывания](scenario-configuring-a-test-environment-for-web-deployment.md). Этот файл должен содержать удаленного агента, адрес конечной точки, а также связанные с расположением параметры, такие как строки соединения и конечных точек службы.
- Развертывание в промежуточной среде (*Env Stage.proj*). Промежуточной среде настроен для приема удаленных развертываний с помощью обработчика развертывание Web, как описано в [сценарий: настройка для веб-развертывания в промежуточной среде](scenario-configuring-a-staging-environment-for-web-deployment.md). Этот файл необходимо указать адрес конечной точки веб-обработчик развертывания, а также относящиеся к размещению таких параметров, как строки подключения и конечных точек службы.

Очень важно Обратите внимание на значения, которые задаются в файле проекта среды не влияют на содержимое самого пакета web&#x2014;вместо этого они управляют развертывание пакета и какие значения параметров приведены в том случае, если пакет извлечь. Вы импортируете веб-пакета в рабочей среде вручную, как описано в [сценарий: Настройка рабочей среде для развертывания веб-](scenario-configuring-a-production-environment-for-web-deployment.md) и [вручную Установка веб-пакеты](../web-deployment-in-the-enterprise/manually-installing-web-packages.md), Поэтому неважно, какие параметры вы использовали в файле проекта среды при создании пакета. Диспетчер Internet Information Services (IIS) предложит ввести любое параметризованные значения, такие как строки соединения и конечные точки службы, при импорте пакета.

Развернуть решение диспетчера контактов в целевой среде, можно либо настроить этот файл, или использовать в качестве шаблона и создать свой собственный файл.

**Настройка параметров конкретной среды развертывания для решения диспетчера контактов**

1. Откройте решение ContactManager WCF в Visual Studio 2010.
2. В **обозревателе решений** окна, разверните **публикации** папку, разверните **EnvConfig** папку и дважды щелкните **Env-Dev.proj**.

    ![](configuring-deployment-properties-for-a-target-environment/_static/image1.png)
3. Замените значения свойств в *Env Dev.proj* файлов с правильными значениями для тестовой среды.

    > [!NOTE]
    > Дополнительные сведения о каждое из этих свойств таблицы, следующим за этой процедурой.
4. Сохраните работу и закройте *Env Dev.proj* файла.

## <a name="choosing-the-right-deployment-properties"></a>Выбор свойств справа развертывания

Эта таблица описывает назначение каждого свойства в файле проекта среды образец *Env Dev.proj*и даются рекомендации по значениям, необходимо предоставить.


|                                                        Имя свойства                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Подробные сведения                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              <strong>MSDeployComputerName</strong> имя конечной точки сервера или службы веб-назначения.               |                                                                                                                                                                                                                                              Если вы развертываете к службе удаленного агента на веб-сервере назначения, можно указать имя конечного компьютера (например, <strong>TESTWEB1</strong> или <strong>TESTWEB1.fabrikam.net</strong>), или указать удаленный агент конечной точки (например, `http://TESTWEB1/MSDEPLOYAGENTSERVICE`). Развертывание выполняется так же, как в каждом случае. При развертывании веб-развертывания обработчик на веб-сервере назначения должен укажите конечную точку службы и укажите имя веб-сайта IIS в качестве параметра строки запроса (например, `https://STAGEWEB1:8172/MSDeploy.axd?site=DemoSite`).                                                                                                                                                                                                                                              |
|         <strong>MSDeployAuth</strong> метод, который веб-развертывания следует использовать для проверки подлинности на удаленном компьютере.          |                                                                                                                                                                                                                          Это свойство должно иметь значение <strong>NTLM</strong> или <strong>основные</strong>. Как правило, вы воспользуетесь <strong>NTLM</strong> при развертывании в службу удаленного агента и <strong>основные</strong> при развертывании на веб-развертывания обработчик. При использовании обычной проверки подлинности, необходимо также указать имя пользователя и пароль, которая должна олицетворяться средство IIS веб-развертывания (Web Deploy) для выполнения развертывания. В этом примере эти значения предоставляются через <strong>MSDeployUsername</strong> и <strong>MSDeployPassword</strong> свойства. Если используется проверка подлинности NTLM, можно пропустить эти свойства или оставить пустыми.                                                                                                                                                                                                                          |
| <strong>MSDeployUsername</strong> при использовании обычной проверки подлинности веб-развертывания будет использовать эту учетную запись на удаленном компьютере.  |                                                                                                                                                                                                                                                                                                                                                                                                                       Это должно задаваться в виде <em>домена</em>\*имя_пользователя * (например, <strong>FABRIKAM\matt</strong>). Это значение используется только при указании обычной проверки подлинности. Если используется проверка подлинности NTLM, свойство может быть опущено. Если значение задано, оно будет игнорироваться.                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <strong>MSDeployPassword</strong> при использовании обычной проверки подлинности веб-развертывания будет использовать этот пароль на удаленном компьютере. |                                                                                                                                                                                                                                                                                                                                                                                                                    Это пароль для учетной записи пользователя, указанной в <strong>MSDeployUsername</strong> свойство. Это значение используется только при указании обычной проверки подлинности. Если используется проверка подлинности NTLM, свойство может быть опущено. Если значение задано, оно будет игнорироваться.                                                                                                                                                                                                                                                                                                                                                                                                                    |
|     <strong>ContactManagerIisPath</strong> путь IIS, на котором требуется развернуть приложение диспетчера контактов MVC.     |                                                                                                                                                                                                                                                                                                                                                                        Это должен быть путь, как оно отображается в диспетчере служб IIS в форме [<em>имя веб-сайта IIS</em>] / [<em>web</em><em>имя_приложения</em>]. Помните, что веб-сайт IIS должна существовать перед развертыванием приложения. Например при создании веб-сайт IIS с именем DemoSite можно указать путь IIS для приложения MVC как DemoSite/ContactManager.                                                                                                                                                                                                                                                                                                                                                                        |
|   <strong>ContactManagerServiceIisPath</strong> путь IIS, на котором требуется выполнить развертывание службы WCF диспетчера контактов.    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Например, если вы создали веб-сайт IIS с именем DemoSite, можно указать путь IIS для службы WCF в качестве <strong>DemoSite/ContactManagerService</strong>.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|                  <strong>ContactManagerTargetUrl</strong> URL-адрес, по которому можно связаться со службой WCF.                   |                                                                                                                                                     Это будет иметь вид [<em>URL-адрес корневого веб-сайта IIS</em>] / [<em>имя приложения службы</em>] / [<em>конечной точки службы</em>]. Например, при создании веб-сайт IIS на порту 85 URL-адрес потребуется формы `http://localhost:85/ContactManagerService/ContactService.svc`. Помните, MVC-приложения и службы WCF развертываются на том же сервере. В результате этот URL-адрес осуществляется только с компьютера, на котором он установлен. По этой причине лучше использовать localhost или IP-адрес, а не имя компьютера или заголовка узла, в URL-АДРЕСЕ. Если используется имя компьютера или заголовок узла, [проверки замыкания на себя](https://go.microsoft.com/?linkid=9805131) функция безопасности в службах IIS могут блокировать URL-адрес и возвращать <strong>HTTP 401.1 - доступ запрещен</strong> ошибки.                                                                                                                                                     |
|                  <strong>CmDatabaseConnectionString</strong> строку подключения для сервера базы данных.                  | Строка соединения использует оба учетные данные, которые VSDBCMD будет использоваться для связи с сервером базы данных и создания базы данных и учетные данные, которые пула веб-сервера приложений будет использоваться для связи с сервером базы данных и взаимодействия с базой данных. По существу имеется два варианта здесь. Можно указать <strong>Integrated Security = true</strong>, в этом случае используется встроенная проверка подлинности Windows: <strong>источник данных = TESTDB1; Integrated Security = true</strong> таким образом, то она будет создана с помощью учетные данные пользователя, запустившего VSDBCMD исполняемый файл и приложение будет доступ к базе данных с использованием удостоверения учетной записи компьютера сервера web. Кроме того можно указать имя пользователя и пароль учетной записи SQL Server. В этом случае используются учетные данные SQL Server VSDBCMD, чтобы создать базу данных и пул приложений для взаимодействия с базой данных: <strong>источник данных = TESTDB1; ИД пользователя = ASqlUser; Пароль = Pa$ $w0rd</strong> пошаговых инструкций в этом разделе предполагается, вы сможете использовать встроенную проверку подлинности Windows. |
|        <strong>CmTargetDatabase</strong> имя, которое будет присвоено базе данных создается на сервере базы данных.        |                                                                                                                                                                                                                                                                                                                                                                                                                                                     Указанное здесь значение добавляется к команде VSDBCMD как параметр. Он также используется для сборки полную строку соединения, пул приложений на веб-сервере можно использовать для взаимодействия с базой данных.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

Эти примеры показывают, как можно настроить эти свойства для конкретных сценариях развертывания.

### <a name="example-1x2014deployment-to-the-remote-agent-service"></a>Пример 1&#x2014;развертывания к службе удаленного агента

В этом примере:

- Необходимо развернуть службу удаленного агента на TESTWEB1.
- Указывающей веб-развертывания на использование проверки подлинности NTLM. Веб-развертывание будет выполняться с использованием учетных данных, который используется для вызова Microsoft Build Engine (MSBuild).
- Для развертывания используется встроенная проверка подлинности **ContactManager** базы данных в базу данных TESTDB1. База данных будет развернута с помощью учетных данных, который используется для вызова MSBuild.


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample1.xml)]


### <a name="example-2x2014deployment-to-the-web-deploy-handler-endpoint"></a>Пример 2&#x2014;развертывания в веб-развертывание обработчика конечной точки

В этом примере:

- Необходимо развернуть конечную точку службы веб-развертывания обработчик на STAGEWEB1.
- Указывающей веб-развертывания для обычной проверки подлинности.
- Можно будет определить, что веб-развертывания следует выполнять олицетворение учетную запись FABRIKAM\stagingdeployer на удаленном компьютере.
- Вы используете проверку подлинности SQL Server для развертывания **ContactManager** STAGEDB1 базы данных.


[!code-xml[Main](configuring-deployment-properties-for-a-target-environment/samples/sample2.xml)]


## <a name="conclusion"></a>Заключение

На этом этапе файлы проекта будут полностью настроены для построения и развертывания решений диспетчера контактов для одного или нескольких средах назначения.

Чтобы использовать эти файлы проектов в рамках процесса развертывания один шаг, repeatable, необходимо выполнить *Publish.proj* текстовый файл с помощью MSBuild и передавать в расположение файла проекта для конкретной среды, как параметр. Это можно сделать различными способами:

- Обзор MSBuild и общие сведения о настраиваемом проекте файлов см. в разделе [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md).
- Сведения для создания команды MSBuild, которая осуществляет файлы пользовательского проекта см. в разделе [веб-развертывание пакетов](../web-deployment-in-the-enterprise/deploying-web-packages.md).
- Сведения о том, как включить MSBuild команды в командный файл для развертывания на один шаг, repeatable см. в разделе [Создание и запуск развертывания командный файл](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md).
- Сведения о том, как выполнять файлы пользовательского проекта из Team Build см. в разделе [создание определение построения, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).

> [!div class="step-by-step"]
> [Назад](creating-a-server-farm-with-the-web-farm-framework.md)
