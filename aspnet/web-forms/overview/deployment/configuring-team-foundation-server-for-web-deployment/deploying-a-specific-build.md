---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build
title: "Развертывание конкретной сборки | Документы Microsoft"
author: jrjlee
description: "В этом разделе описывается развертывание веб-пакетов и скриптов базы данных из конкретного предыдущей сборки в новое место назначения, например промежуточной или производственной enviro..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: c979535f-48a3-4ec4-a633-a77889b86ddb
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build
msc.type: authoredcontent
ms.openlocfilehash: afac083c96c1396ad60275fcb55a0ec9c4c0bd44
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="deploying-a-specific-build"></a>Развертывание конкретной сборки
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описывается развертывание веб-пакетов и скриптов базы данных из конкретного предыдущей сборки в новое место назначения, как в промежуточной или производственной среде.


Этот раздел входит в состав серию учебников, исходя из требования к развертыванию enterprise вымышленная компания Fabrikam, Inc. Этот учебник ряд использует образец решения & #x 2014; [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; для представления веб-приложения с реалистичных уровень сложности, включая приложения ASP.NET MVC 3, Windows Службы Communication Foundation (WCF) и проект базы данных.

Метод развертывания, в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в которой управляет процессом построения и развертывания двух файлов проекта & #x 2014; o NE, содержащий инструкции сборки, которые применяются для каждой целевой среде и, содержащий параметры построения и развертывания конкретной среды. Во время построения файла проекта среды объединяется в файл проекта зависит от среды, образуют полный набор инструкций построения.

## <a name="task-overview"></a>Общие сведения о задаче

До этого момента в разделах этого учебника набора основное внимание уделено как для сборки, упаковки и развертывания веб-приложений и баз данных в рамках одного шага или автоматизировать процесс. Однако в некоторых распространенных сценариях, может потребоваться выбрать ресурсы, развертываемые из списка сборок в папке сброса. Другими словами последняя сборка может оказаться сборки, которые вы хотите развернуть.

Рассмотрим сценарий непрерывной интеграции (CI), описанные в предыдущем разделе, [Создание сборки определение, поддерживает развертывания](creating-a-build-definition-that-supports-deployment.md). Вы создали определение сборки в Team Foundation Server (TFS) 2010. Каждый раз, когда разработчик вернет код в TFS, Team Build будет построения кода, создания веб-пакетов и скриптов базы данных как часть процесса построения, запустите модульные тесты и развертывание ресурсов в тестовой среде. В зависимости от политики хранения, настроенных при создании определения построения TFS, сохранят определенное число предыдущих сборок.

![](deploying-a-specific-build/_static/image1.png)

Теперь предположим, что вы выполнили проверку и Проверочное тестирование для одного из этих сборок в среде тестирования, вы будете готовы развернуть приложение в промежуточной среде. В то же время разработчики могут иметь возвращенные нового кода. Вы не хотите Перестроить решение и развертывание в промежуточной среде, и вы не хотите развернуть последнюю сборку в промежуточной среде. Вместо этого вы хотите развернуть определенной сборки, были проверены и проверены на тестовых серверах.

Для выполнения этой задачи необходимо указать Microsoft Build Engine (MSBuild), где можно найти веб-пакетов и скриптов баз данных, созданных для конкретного построения.

## <a name="overriding-the-outputroot-property"></a>Переопределения свойства OutputRoot

В [образец решения](../web-deployment-in-the-enterprise/the-contact-manager-solution.md), *Publish.proj* файл объявляет свойство с именем **OutputRoot**. Как видно из имени, это корневой папке, которая содержит все, что процесс построения создает. В *Publish.proj* файл, можно увидеть, **OutputRoot** свойство ссылается на корневой каталог для всех ресурсов развертывания.

> [!NOTE]
> **OutputRoot** — это имя часто используемые свойства. Visual C# и Visual Basic файлы проекта также объявлять это свойство для хранения на корневой каталог для всех выходных данных сборки.


[!code-xml[Main](deploying-a-specific-build/samples/sample1.xml)]


Если требуется, чтобы в файле проекта для развертывания веб-пакетов и скриптов базы данных в другое расположение и #x 2014; например выходные данные предыдущей сборки TFS & #x 2014; необходимо переопределить **OutputRoot** свойство. Следует задать значение свойства в соответствующую папку на сервере Team Build. При запуске MSBuild из командной строки, можно указать значение для **OutputRoot** аргумент командной строки:


[!code-console[Main](deploying-a-specific-build/samples/sample2.cmd)]


На практике, однако также требуется пропустить **построения** целевая & #x 2014; нет смысла при построении решения, если вы не планируете использовать выходные данные сборки. Это можно сделать путем указания целевых объектов, которые необходимо выполнить из командной строки:


[!code-console[Main](deploying-a-specific-build/samples/sample3.cmd)]


Однако в большинстве случаев имеет смысл встраивать логику развертывания в определение сборки TFS. Это позволяет пользователям с **построений в очередь** разрешение для инициации развертывания из любой установки Visual Studio с подключением к серверу TFS.

## <a name="creating-a-build-definition-to-deploy-specific-builds"></a>Создание определения построения для развертывания сборки

Далее описано, как создание определения построения, позволяющий пользователям триггера развертывания в промежуточной среде, с помощью одной команды.

В этом случае необходимо исключить из определения построения, чтобы построить все & #x 2014; можно просто нужно выполнение логики развертывания в файле пользовательского проекта. *Publish.proj* файл включает условную логику, которая пропускает **построения** целевой, если файл работает в Team Build. Это делается путем оценки встроенных **BuildingInTeamBuild** свойство, которое будет автоматически присвоено **true** при запуске файла проекта в Team Build. В результате можно пропустить процесс построения и просто запустите файл проекта, чтобы развертывание существующей сборки.

**Создание определения построения для запуска развертывания вручную**

1. В Visual Studio 2010 в **Team Explorer** окна, разверните узел командного проекта, щелкните правой кнопкой мыши **строит**, а затем нажмите кнопку **создать определение построения**.

    ![](deploying-a-specific-build/_static/image2.png)
2. На **Общие** вкладки, присвойте имя определения сборки (например, **DeployToStaging**) и необязательное описание.
3. На **триггер** выберите **ручной — возвраты не запускают новую сборку**.
4. На **сборки по умолчанию** вкладке **Копировать выходные данные построения в следующую папку сброса** введите путь к папке сброса соглашения об универсальных именах (UNC) (например,  **\\TFSBUILD\Drops**).

    ![](deploying-a-specific-build/_static/image3.png)
5. На **процесс** вкладке **файл процесса построения** раскрывающегося списка, оставьте **DefaultTemplate.xaml** выбранных. Это один из шаблонов процесса сборки по умолчанию, которые добавляются в новые командные проекты.
6. В **параметры процесса построения** таблицы, нажмите кнопку в **элементы для построения** , а затем нажмите **многоточие** кнопки.

    ![](deploying-a-specific-build/_static/image4.png)
7. В **элементы для построения** диалоговое окно, нажмите кнопку **добавить**.
8. В **элементы типа** раскрывающегося списка выберите **файлы проекта MSBuild**.
9. Перейдите к нужному файлу пользовательского проекта с помощью которого контролировать процесс развертывания, выберите файл и нажмите кнопку **ОК**.

    ![](deploying-a-specific-build/_static/image5.png)
10. В **элементы для построения** диалоговое окно, нажмите кнопку **ОК**.
11. В **параметры процесса построения** таблица, разверните **Дополнительно** раздела.
12. В **Аргументы MSBuild** строк, укажите расположение файла проекта в определенной среде и добавить заполнитель для расположения папки сборки:

    [!code-console[Main](deploying-a-specific-build/samples/sample4.cmd)]

    ![](deploying-a-specific-build/_static/image6.png)

    > [!NOTE]
    > Необходимо переопределить **OutputRoot** значение каждый раз при запуске построения. Это рассматривается в следующей процедуре.
13. Нажмите кнопку **Сохранить**.

Если запустить сборку, необходимо обновить **OutputRoot** свойство для указания сборки, которую требуется развернуть.

**Для развертывания конкретной сборки из определения построения**

1. В **Team Explorer** окно, щелкните правой кнопкой мыши определение построения и нажмите кнопку **новую сборку в очередь**.

    ![](deploying-a-specific-build/_static/image7.png)
2. В **поставить в очередь построение** диалогового **параметры** , раскройте **Дополнительно** раздела.
3. В **Аргументы MSBuild** строк, замените значение **OutputRoot** свойство с расположением папки сборки. Пример:

    [!code-console[Main](deploying-a-specific-build/samples/sample5.cmd)]

    ![](deploying-a-specific-build/_static/image8.png)

    > [!NOTE]
    > Не забудьте добавить косую черту в конце пути к папке построения.
4. Нажмите кнопку **очереди**.

Когда построение в очередь, файл проекта будут развернуты скриптов базы данных и web пакеты из папки размещения построений вы указали в **OutputRoot** свойство.

## <a name="conclusion"></a>Заключение

В этом разделе описано, как опубликовать развертывания ресурсов, таких как веб-пакетов и скриптов базы данных, из предыдущей конкретной сборки с помощью модели развертывания проекта файл разбиения. Оно описано, как переопределить **OutputRoot** определение построения и встраивать логику развертывания в TFS.

## <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения о создании определений сборки см. в разделе [создание базового определения сборки](https://msdn.microsoft.com/en-us/library/ms181716.aspx) и [определить процедуру сборки](https://msdn.microsoft.com/en-us/library/ms181715.aspx). Дополнительные рекомендации по очереди сборок см. в разделе [очередь сборку](https://msdn.microsoft.com/en-us/library/ms181722.aspx).

>[!div class="step-by-step"]
[Назад](creating-a-build-definition-that-supports-deployment.md)
[Вперед](configuring-permissions-for-team-build-deployment.md)
