---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/building-and-packaging-web-application-projects
title: Построения и упаковки проектов веб-приложений | Документы Microsoft
author: jrjlee
description: Если вы хотите развернуть проект веб-приложения в среде удаленного сервера, вашей первой задачей является построение проекта и сформировать packa развертывание web...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 94e92f80-a7e3-4d18-9375-ff8be5d666ac
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/building-and-packaging-web-application-projects
msc.type: authoredcontent
ms.openlocfilehash: d630e1776607bd0bd7c61e1f0f7234ef58c7533b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="building-and-packaging-web-application-projects"></a>Построения и упаковки проектов веб-приложений
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> Если вы хотите развернуть проект веб-приложения в среде удаленного сервера, на первой задачей является построение проекта и сформировать пакет веб-развертывания. В этом разделе описано, как процесс построения работает для проектов веб-приложений. В частности его описание.
> 
> - Как конвейер публикации Web (WPP) расширяет процесс построения для включения функции развертывания.
> - Как средство Internet Information Services (IIS) веб-развертывания (Web Deploy) включает веб-приложения в пакет развертывания.
> - То, какие файлы будут созданы и том, как сборка и упаковка процесс.


В Visual Studio 2010 WPP поддерживается процессом построения и развертывания для проектов веб-приложений. WPP предоставляет набор целевых объектов Microsoft Build Engine (MSBuild), расширяющие функциональные возможности MSBuild и включить его для интеграции с веб-развертывания. В среде Visual Studio вы увидите это расширенных функций на страницах свойств для проекта веб-приложения. **Пакет/Публикация веб-сайта** страницы, вместе с **упаковка и публикация SQL** страницы, позволяет настроить способ упаковки проекта веб-приложения для развертывания после завершения процесса построения.

![](building-and-packaging-web-application-projects/_static/image1.png)

## <a name="how-does-the-wpp-work"></a>Как работает WPP?

Если вы взгляните на файл проекта для C#-проекта на основе веб-приложения, можно увидеть, что он импортирует два TARGETS-файлы.


[!code-xml[Main](building-and-packaging-web-application-projects/samples/sample1.xml)]


Первый **импорта** инструкции являются общими для всех проектов Visual C#. Этот файл *Microsoft.CSharp.targets*, содержащий целевые объекты и задачи, относящиеся к Visual C#. Например, компилятор C# (**Csc**) здесь вызове задачи. *Microsoft.CSharp.targets* файл в свою очередь импортирует *Microsoft.Common.targets* файла. Определяет целевые объекты, которые являются общими для всех проектов нравится **построения**, **Перестроить**, **запуска**, **компиляции**, и **очистить** . Второй **импорта** инструкции для проектов веб-приложений. *Microsoft.WebApplication.targets* файл в свою очередь импортирует *Microsoft.Web.Publishing.targets* файла. *Microsoft.Web.Publishing.targets* файл фактически *—* WPP. Определяет целевых объектов, таких как **пакета** и **MSDeployPublish**, который вызова веб-развертывания для выполнения различных задач развертывания.

Чтобы понять, как используются эти дополнительные целевые объекты в образец решения диспетчера контактов, откройте *Publish.proj* файл и взгляните на **BuildProjects** цели.


[!code-xml[Main](building-and-packaging-web-application-projects/samples/sample2.xml)]


Этот целевой объект использует **MSBuild** задач для создания различных проектов. Обратите внимание **DeployOnBuild** и **DeployTarget** свойства:

- **DeployOnBuild = true** фактически означает «Требуется выполнение дополнительных целевого объекта при успешном построении.»
- **DeployTarget** свойство, обозначающее имя назначения, которую требуется выполнить при **DeployOnBuild** свойства равен **true**. В этом случае можно будет определить, что требуется MSBuild для выполнения **пакета** целевой после построения проекта.

**Пакета** целевой объект определен в *Microsoft.Web.Publishing.targets* файла. По сути этот целевой объект принимает выходные данные построения проекта веб-приложения и преобразует его в пакет веб-развертывания, которые могут быть опубликованы на веб-сервере IIS.

> [!NOTE]
> Чтобы просмотреть файл проекта (например, <em>ContactManager.Mvc.csproj</em>) в Visual Studio 2010, сначала необходимо выгрузить проект из решения. В <strong>обозревателе решений</strong> окно, щелкните правой кнопкой мыши узел проекта, затем щелкните <strong>выгрузить проект</strong>. Щелкните правой кнопкой мыши узел проекта и нажмите кнопку <strong>изменить</strong><em>[файл проекта]</em>). Файл проекта будет открыт в необработанном виде XML. Не забудьте перезагрузить проект после завершения.  
> Дополнительные сведения о целевых объектов MSBuild, задачи, и <strong>импорта</strong> см. инструкции, [основные сведения о файле проекта](understanding-the-project-file.md). Более подробные сведения о файлы проекта и WPP см. в разделе [внутри Microsoft Build Engine: с помощью MSBuild и Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi и Bartholomew Уильям, ISBN: 978-0-7356-4524-0.


## <a name="what-is-a-web-deployment-package"></a>Что такое пакет веб-развертывания

При построении и развертывании проекта веб-приложения с помощью Visual Studio 2010 или напрямую с помощью MSBuild конечным результатом является обычно *пакета веб-развертывания*. Пакет веб-развертывания является ZIP-файл. Он содержит все компоненты служб IIS и веб-развертывания требуют для повторного создания веб-приложения, включая:

- Выходные данные компиляции веб-приложения, включая содержимое, файлы ресурсов, файлы конфигурации, JavaScript и каскадных стилей (CSS) ресурсы стиля и т. д.
- Сборки для проекта веб-приложения и для любой ссылки на проекты в решении.
- Скрипты SQL для создания базы данных, которые вы развертываете с веб-приложения.

После создания пакета веб-развертывания, его можно опубликовать веб-сервере IIS различными способами. Например вы сможете развернуть его удаленно, обращаясь к службу агента веб-развертывания удаленных или веб-развертывания обработчик на веб-сервере назначения или можно использовать диспетчер служб IIS вручную импортировать пакет на веб-сервере назначения. Дополнительные сведения об этих подходов к развертыванию см. в разделе [Выбор оптимального подхода справа для веб-развертывания](../configuring-server-environments-for-web-deployment/choosing-the-right-approach-to-web-deployment.md).

## <a name="how-does-the-build-process-work"></a>Как работает процесс построения

Это показывает, что происходит при построении и упаковать проект веб-приложения:

![](building-and-packaging-web-application-projects/_static/image2.png)

При создании проекта веб-приложения, процесс построения создает файл с именем *[имя проекта]. SourceManifest.xml*. А также файл проекта и выходные данные сборки это *. SourceManifest.xml* файл указывает веб-развертывания его необходимо включить в пакет веб-развертывания. С помощью этих входных данных, веб-развертывания создает пакет веб-развертывания с именем *[имя проекта] .zip*.

Наряду с пакет веб-развертывания процесс построения создает два файла, которые могут помочь с помощью этого пакета:

- *. Deploy.cmd* файл включает ряд параметризованные команды, Web Deploy (MSDeploy.exe), которые публикуют веб-пакет развертывания на удаленном веб-сервере IIS. Под управлением *. deploy.cmd* файла с соответствующими параметрами обычно предоставляет быстрее и проще альтернативные для вручную создав MSDeploy.exe команд самостоятельно.
- *SetParameters.xml* файл предоставляет набор значений параметров для команды MSDeploy.exe. Эти значения включают свойства, такие как имя веб-приложения IIS, к которому вы хотите развернуть пакет значения конечные точки службы и строки соединения, определенные в *web.config* файла и любые свойства развертывания значения, определенные на страницах свойств проекта.

*SetParameters.xml* файла является ключом к управлению процесс развертывания. Этот файл создается динамически в соответствии с содержимым проекта веб-приложения. Например, если добавить строку подключения к вашей *web.config* файл, процесс построения будет автоматически определить строку подключения, соответствующим образом параметризовать развертывания и создать запись в  *SetParameters.xml* файл, чтобы можно было изменить строку подключения в рамках процесса развертывания. Следующий раздел [Настройка параметров для пакета развертывания веб-](configuring-parameters-for-web-package-deployment.md), объясняется роль этого файла более подробно и описание различных способов, в котором ее можно изменить во время построения и развертывания.

> [!NOTE]
> В Visual Studio 2010 WPP не поддерживает предварительную компиляцию страницы в веб-приложении перед упаковкой. Следующей версии Visual Studio и WPP включит возможность предварительной компиляции веб-приложения, как средство упаковки.


## <a name="conclusion"></a>Заключение

В этом разделе предоставлены общие сведения о сборке и обработки пакетов для проектов веб-приложений в Visual Studio 2010. Описано, как WPP позволяет вызывать веб-развертывания команды из MSBuild, и объясняется, как сборки и упаковки процесс.

После создания пакет веб-развертывания, следующим шагом является его развертывание. Дополнительные сведения см. в разделе [Настройка параметров для пакета развертывания веб-](configuring-parameters-for-web-package-deployment.md) и [веб-развертывание пакетов](deploying-web-packages.md).

## <a name="further-reading"></a>Дополнительные сведения

Далее разделы в этом учебнике [Настройка параметров для пакета развертывания веб-](configuring-parameters-for-web-package-deployment.md) и [веб-развертывание пакетов](deploying-web-packages.md), рекомендации по использованию веб-пакета, вы создали. Это последний учебник, в этой серии [Advanced корпоративного веб-развертывания](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md), предоставляет рекомендации по настройке и об устранении процесс упаковки.

Более подробные сведения о файлы проекта и WPP см. в разделе [внутри Microsoft Build Engine: с помощью MSBuild и Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi и Bartholomew Уильям, ISBN: 978-0-7356-4524-0.

> [!div class="step-by-step"]
> [Назад](understanding-the-build-process.md)
> [Вперед](configuring-parameters-for-web-package-deployment.md)
