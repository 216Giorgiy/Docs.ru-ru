---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: "Основные сведения о процессе построения | Документы Microsoft"
author: jrjlee
description: "В этом разделе Пошаговое руководство по процессом построения и развертывания корпоративного уровня. Подход, описанный в этом разделе использует пользовательские Денис сборки Microsoft..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 3efcefc40dc135ff42f55911036f8b38b5aa13b1
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2018
---
<a name="understanding-the-build-process"></a><span data-ttu-id="b07e4-104">Основные сведения о процессе построения</span><span class="sxs-lookup"><span data-stu-id="b07e4-104">Understanding the Build Process</span></span>
====================
<span data-ttu-id="b07e4-105">по [Джейсон Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="b07e4-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="b07e4-106">Скачать PDF</span><span class="sxs-lookup"><span data-stu-id="b07e4-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="b07e4-107">В этом разделе Пошаговое руководство по процессом построения и развертывания корпоративного уровня.</span><span class="sxs-lookup"><span data-stu-id="b07e4-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="b07e4-108">Подход, описанный в этом разделе использует пользовательские файлы проекта Microsoft Build Engine (MSBuild) для обеспечения точного управления всех аспектов процесса.</span><span class="sxs-lookup"><span data-stu-id="b07e4-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="b07e4-109">В файлах проектов пользовательские целевые объекты MSBuild используются для запуска программы развертывания, как средство веб-развертывания Internet Information Services (IIS) (MSDeploy.exe) и VSDBCMD.exe программы развертывания базы данных.</span><span class="sxs-lookup"><span data-stu-id="b07e4-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="b07e4-110">Предыдущего раздела [основные сведения о файле проекта](understanding-the-project-file.md), описаны основные компоненты файла проекта MSBuild и представляет концепцию разделенные файлы проекта для поддержки развертывания в различных целевых средах.</span><span class="sxs-lookup"><span data-stu-id="b07e4-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="b07e4-111">Если вы не знакомы с этими понятиями, следует просмотреть [основные сведения о файле проекта](understanding-the-project-file.md) перед началом работы с этим разделом.</span><span class="sxs-lookup"><span data-stu-id="b07e4-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>


<span data-ttu-id="b07e4-112">Этот раздел входит в состав серию учебников, исходя из требования к развертыванию enterprise вымышленная компания Fabrikam, Inc. Этот учебник ряд использует образец решения & #x 2014; [решения диспетчера контактов](the-contact-manager-solution.md)& #x 2014; для представления веб-приложения с реалистичных уровень сложности, включая приложения ASP.NET MVC 3, Windows Службы Communication Foundation (WCF) и проект базы данных.</span><span class="sxs-lookup"><span data-stu-id="b07e4-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="b07e4-113">Метод развертывания, в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о файле проекта](understanding-the-project-file.md), в которой процесс построения управляется двух проектов файлы & #x 2014; один с построение инструкции, которые применяются для каждой целевой среде и, содержащий параметры построения и развертывания конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="b07e4-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="b07e4-114">Во время построения файла проекта среды объединяется в файл проекта зависит от среды, образуют полный набор инструкций построения.</span><span class="sxs-lookup"><span data-stu-id="b07e4-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="b07e4-115">Обзор развертывания и сборки</span><span class="sxs-lookup"><span data-stu-id="b07e4-115">Build and Deployment Overview</span></span>

<span data-ttu-id="b07e4-116">В [решения диспетчера контактов](the-contact-manager-solution.md), три файла управления процессом построения и развертывания:</span><span class="sxs-lookup"><span data-stu-id="b07e4-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="b07e4-117">Объект *файл универсального проекта* (*Publish.proj*).</span><span class="sxs-lookup"><span data-stu-id="b07e4-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="b07e4-118">Содержит инструкции построения и развертывания, которые не изменяют между средами назначения.</span><span class="sxs-lookup"><span data-stu-id="b07e4-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="b07e4-119">*Файл проекта среды* (*Env Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="b07e4-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="b07e4-120">Содержит параметры построения и развертывания, которые относятся к определенной целевой среде.</span><span class="sxs-lookup"><span data-stu-id="b07e4-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="b07e4-121">Например, можно использовать *Env Dev.proj* файл, чтобы указать параметры для разработчика или тестовой среде и создать альтернативный файл с именем *Env Stage.proj* для предоставления параметров для промежуточного хранения Среда.</span><span class="sxs-lookup"><span data-stu-id="b07e4-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="b07e4-122">Объект *командный файл* (*Dev.cmd публикации*).</span><span class="sxs-lookup"><span data-stu-id="b07e4-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="b07e4-123">Этот элемент содержит MSBuild.exe команду, которая указывает, какой проект файлами, которые требуется выполнить.</span><span class="sxs-lookup"><span data-stu-id="b07e4-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="b07e4-124">Можно создать командный файл для каждой целевой среде, где каждый файл содержит команду MSBuild.exe, задает файл на другой проект конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="b07e4-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="b07e4-125">Это позволяет разработчикам развертывать в различных средах просто путем запуска файла соответствующую команду.</span><span class="sxs-lookup"><span data-stu-id="b07e4-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="b07e4-126">В образце решения можно найти эти три файла в папке публикации решения.</span><span class="sxs-lookup"><span data-stu-id="b07e4-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="b07e4-127">Прежде чем рассмотреть эти файлы более подробно, давайте взглянем на работе процесс построения при использовании этого подхода.</span><span class="sxs-lookup"><span data-stu-id="b07e4-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="b07e4-128">На высоком уровне в процессе построения и развертывания выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b07e4-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="b07e4-129">Первое, что произойдет, — что два проекта файлы & #x 2014; одна из которых содержит универсальной сборки и инструкции по развертыванию и одна из которых содержит параметры, относящиеся к среде & #x 2014; объединяются в один файл проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="b07e4-130">Затем MSBuild работают, минуя инструкции в файле проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="b07e4-131">Он создает все проекты в решении, с использованием файла проекта для каждого проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="b07e4-132">Затем вызывается для других средств, таких как веб-развертывания (MSDeploy.exe) и служебную программу VSDBCMD для развертывания веб-содержимого и баз данных в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="b07e4-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="b07e4-133">От начала до окончания процесса построения и развертывания выполняет следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="b07e4-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="b07e4-134">Удаляет содержимое в выходной каталог, в процессе подготовки к новой сборки.</span><span class="sxs-lookup"><span data-stu-id="b07e4-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="b07e4-135">Он создает каждый проект в решении:</span><span class="sxs-lookup"><span data-stu-id="b07e4-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="b07e4-136">Для веб-проектов & #x 2014; в этом случае веб-приложение ASP.NET MVC и WCF, веб-службы & #x 2014; процесс построения создает пакет веб-развертывания для каждого проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="b07e4-137">Для проектов баз данных в процесс построения создает манифест развертывания (DEPLOYMANIFEST-файл) для каждого проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="b07e4-138">Он использует служебную программу VSDBCMD.exe развертывание каждого проекта базы данных в решении, с помощью различных свойств из файлов проекта & #x 2014; целевая строка подключения и имя базы данных & #x 2014; а также DEPLOYMANIFEST-файл.</span><span class="sxs-lookup"><span data-stu-id="b07e4-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="b07e4-139">Он использует MSDeploy.exe программы для развертывания каждого веб-проекта в решении, с помощью различных свойств в файлы проекта для управления процессом развертывания.</span><span class="sxs-lookup"><span data-stu-id="b07e4-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="b07e4-140">Пример решения можно использовать для трассировки этот процесс более подробно.</span><span class="sxs-lookup"><span data-stu-id="b07e4-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-141">Рекомендации по настройке файлы проекта, относящихся к среде для серверных сред см. в разделе [настройки свойств развертывания для целевой среды](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="b07e4-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>


## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="b07e4-142">Вызов сборки и процесса развертывания</span><span class="sxs-lookup"><span data-stu-id="b07e4-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="b07e4-143">Для развертывания решения диспетчера контактов в тестовой среде разработчика, разработчик работает *Dev.cmd публикации* командный файл.</span><span class="sxs-lookup"><span data-stu-id="b07e4-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="b07e4-144">При этом вызывается MSBuild.exe, указав *Publish.proj* как файл проекта для выполнения и *Env Dev.proj* как значение параметра.</span><span class="sxs-lookup"><span data-stu-id="b07e4-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>


[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]


> [!NOTE]
> <span data-ttu-id="b07e4-145">**/Fl** переключения (сокращенно **/fileLogger**) записывает выходные данные сборки в файл с именем *msbuild.log* в текущем каталоге.</span><span class="sxs-lookup"><span data-stu-id="b07e4-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="b07e4-146">Дополнительные сведения см. в разделе [Справочник по командной строке MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="b07e4-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>


<span data-ttu-id="b07e4-147">На этом этапе MSBuild запускается, загружает *Publish.proj* файл и начинает обработку инструкции внутри него.</span><span class="sxs-lookup"><span data-stu-id="b07e4-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="b07e4-148">Первая инструкция сообщает MSBuild для импорта в проект файла, который **TargetEnvPropsFile** указывает параметр.</span><span class="sxs-lookup"><span data-stu-id="b07e4-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]


<span data-ttu-id="b07e4-149">**TargetEnvPropsFile** указывает *Env Dev.proj* файл, поэтому MSBuild объединяет содержимое *Env Dev.proj* файла в  *Publish.proj* файл.</span><span class="sxs-lookup"><span data-stu-id="b07e4-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="b07e4-150">Следующие элементы, которые MSBuild находит в файле проекта объединенные являются группы свойств.</span><span class="sxs-lookup"><span data-stu-id="b07e4-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="b07e4-151">Свойства, обрабатываются в порядке, в котором они появляются в файле.</span><span class="sxs-lookup"><span data-stu-id="b07e4-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="b07e4-152">MSBuild создает пару ключ значение для каждого свойства, обеспечивая любой определенных условий.</span><span class="sxs-lookup"><span data-stu-id="b07e4-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="b07e4-153">Свойства, определенные в более поздней версии в файле перезапишет любые свойства с тем же именем, ранее определенные в файле.</span><span class="sxs-lookup"><span data-stu-id="b07e4-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="b07e4-154">Например, рассмотрим **OutputRoot** свойства.</span><span class="sxs-lookup"><span data-stu-id="b07e4-154">For example, consider the **OutputRoot** properties.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]


<span data-ttu-id="b07e4-155">Когда MSBuild обрабатывает первый **OutputRoot** элемент, предоставляя таким же именем параметр не задан, он определяет значение **OutputRoot** свойства **... \Publish\Out**. При обнаружении второго **OutputRoot** элемента, если условие принимает значение **true**, будут перезаписаны значение **OutputRoot** свойство со значением **OutDir** параметра.</span><span class="sxs-lookup"><span data-stu-id="b07e4-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="b07e4-156">На элемент, который обнаруживает MSBuild — группа один элемент, содержащий элемент с именем **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="b07e4-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]


<span data-ttu-id="b07e4-157">MSBuild обрабатывает эту инструкцию, построение списка элементов с именем **ProjectsToBuild**.</span><span class="sxs-lookup"><span data-stu-id="b07e4-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="b07e4-158">В этом случае в списке элементов содержит одно значение & #x 2014; путь и имя файла решения.</span><span class="sxs-lookup"><span data-stu-id="b07e4-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="b07e4-159">На этом этапе оставшиеся элементы, целевые объекты.</span><span class="sxs-lookup"><span data-stu-id="b07e4-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="b07e4-160">Целевые объекты обрабатываются по-разному из & #x 2014 свойства и элементы, по существу, целевые объекты, не обрабатываются так, если они являются явно заданное пользователем или вызван другой конструкции в файле проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="b07e4-161">Помните, что открывающий **проекта** тег содержит **DefaultTargets** атрибута.</span><span class="sxs-lookup"><span data-stu-id="b07e4-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]


<span data-ttu-id="b07e4-162">Это указывает, что MSBuild для вызова **FullPublish** целевой объект, если целевые объекты не задан вызова MSBuild.exe.</span><span class="sxs-lookup"><span data-stu-id="b07e4-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="b07e4-163">**FullPublish** цели не содержит каких-либо задач; вместо этого оно просто определяет список зависимостей.</span><span class="sxs-lookup"><span data-stu-id="b07e4-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]


<span data-ttu-id="b07e4-164">Эта зависимость сообщает MSBuild, чтобы выполнить **FullPublish** целевого объекта, он должен вызывать этот список целевых объектов в указанном порядке:</span><span class="sxs-lookup"><span data-stu-id="b07e4-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="b07e4-165">Он должен вызывать **Очистить** цели.</span><span class="sxs-lookup"><span data-stu-id="b07e4-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="b07e4-166">Он должен вызывать **BuildProjects** цели.</span><span class="sxs-lookup"><span data-stu-id="b07e4-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="b07e4-167">Он должен вызывать **GatherPackagesForPublishing** цели.</span><span class="sxs-lookup"><span data-stu-id="b07e4-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="b07e4-168">Он должен вызывать **PublishDbPackages** цели.</span><span class="sxs-lookup"><span data-stu-id="b07e4-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="b07e4-169">Он должен вызывать **PublishWebPackages** цели.</span><span class="sxs-lookup"><span data-stu-id="b07e4-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="b07e4-170">Цели "Очистить"</span><span class="sxs-lookup"><span data-stu-id="b07e4-170">The Clean Target</span></span>

<span data-ttu-id="b07e4-171">**Очистить** целевой сущности удаляет выходную папку и все ее содержимое при подготовке к новой сборки.</span><span class="sxs-lookup"><span data-stu-id="b07e4-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]


<span data-ttu-id="b07e4-172">Обратите внимание, что целевой объект включает **ItemGroup** элемента.</span><span class="sxs-lookup"><span data-stu-id="b07e4-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="b07e4-173">При определении свойств или элементов в пределах **целевой** элемент, которую вы создаете *динамическое* свойства и элементы.</span><span class="sxs-lookup"><span data-stu-id="b07e4-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="b07e4-174">Другими словами свойств или элементов не обрабатываться, пока целевой объект выполняется.</span><span class="sxs-lookup"><span data-stu-id="b07e4-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="b07e4-175">Выходной каталог не может существовать или содержать все файлы до начала процесса построения, поэтому не может создать  **\_FilesToDelete** списка в качестве статического элемента, вам нужно подождать, пока идет выполнение.</span><span class="sxs-lookup"><span data-stu-id="b07e4-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="b07e4-176">Таким образом можно составить список как динамический элемент в целевой объект.</span><span class="sxs-lookup"><span data-stu-id="b07e4-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-177">В этом случае из-за **Очистить** целевой является первым для выполнения, нет необходимости в использовании динамических элементов группы real.</span><span class="sxs-lookup"><span data-stu-id="b07e4-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="b07e4-178">Тем не менее рекомендуется использовать динамические свойства и элементы в таких случаях, как может потребоваться запустить выполнение целевых объектов в другом порядке, в определенный момент.</span><span class="sxs-lookup"><span data-stu-id="b07e4-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="b07e4-179">Также следует стремиться не объявляйте элементы, которые не будут использоваться.</span><span class="sxs-lookup"><span data-stu-id="b07e4-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="b07e4-180">При наличии элементов, которые будут использоваться только для определенной цели, рассмотрите возможность разместить их в целевой объект для удаления любой ненужных затрат ресурсов на процесс построения.</span><span class="sxs-lookup"><span data-stu-id="b07e4-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>


<span data-ttu-id="b07e4-181">Динамические элементы, **Очистить** целевой достаточно прост и используют встроенные **сообщение**, **удаление**, и **RemoveDir**задач:</span><span class="sxs-lookup"><span data-stu-id="b07e4-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="b07e4-182">Отправьте сообщение в средство ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="b07e4-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="b07e4-183">Создает список удаляемых файлов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="b07e4-184">Удалите файлы.</span><span class="sxs-lookup"><span data-stu-id="b07e4-184">Delete the files.</span></span>
4. <span data-ttu-id="b07e4-185">Удалите выходной каталог.</span><span class="sxs-lookup"><span data-stu-id="b07e4-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="b07e4-186">Целевой объект BuildProjects</span><span class="sxs-lookup"><span data-stu-id="b07e4-186">The BuildProjects Target</span></span>

<span data-ttu-id="b07e4-187">**BuildProjects** целевой сущности построение всех проектов в решении образца.</span><span class="sxs-lookup"><span data-stu-id="b07e4-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]


<span data-ttu-id="b07e4-188">Этот целевой объект была описана в предыдущем разделе, некоторые сведения [основные сведения о файле проекта](understanding-the-project-file.md), чтобы продемонстрировать, как задачи и цели ссылки на свойства и элементы.</span><span class="sxs-lookup"><span data-stu-id="b07e4-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="b07e4-189">На этом этапе вы заинтересованы в основном в **MSBuild** задачи.</span><span class="sxs-lookup"><span data-stu-id="b07e4-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="b07e4-190">Эту задачу можно использовать для построения несколько проектов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="b07e4-191">Задача не создает новый экземпляр MSBuild.exe; для построения каждого проекта используется текущего выполняемого экземпляра.</span><span class="sxs-lookup"><span data-stu-id="b07e4-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="b07e4-192">Основные особенности в этом примере приведены свойства развертывания.</span><span class="sxs-lookup"><span data-stu-id="b07e4-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="b07e4-193">**DeployOnBuild** свойство предписывает MSBuild для выполнения любой инструкции по развертыванию в параметрах проекта по завершении сборки каждого проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="b07e4-194">**DeployTarget** свойство идентифицирует целевой объект, который нужно вызывать после построения проекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="b07e4-195">В этом случае **пакета** целевой встраивает выходных файлов проекта в веб-развертывания пакета.</span><span class="sxs-lookup"><span data-stu-id="b07e4-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-196">**Пакета** цель вызывает Web публикации конвейера (WPP), который обеспечивает интеграцию MSBuild и веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="b07e4-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="b07e4-197">Если вы хотите взгляните на встроенные целевые объекты, которые предоставляет WPP, просмотрите *Microsoft.Web.Publishing.targets* файл в папке % PROGRAMFILES (x 86) %\MSBuild\Microsoft\VisualStudio\v10.0\Web.</span><span class="sxs-lookup"><span data-stu-id="b07e4-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>


### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="b07e4-198">Целевой объект GatherPackagesForPublishing</span><span class="sxs-lookup"><span data-stu-id="b07e4-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="b07e4-199">Если изучить **GatherPackagesForPublishing** целевого объекта, вы заметите, что она не содержит фактически все задачи.</span><span class="sxs-lookup"><span data-stu-id="b07e4-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="b07e4-200">Вместо этого он содержит группу один элемент, определяющий три динамических элементов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-200">Instead, it contains a single item group that defines three dynamic items.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]


<span data-ttu-id="b07e4-201">Эти элементы ссылаться на пакеты развертывания, которые были созданы при **BuildProjects** целевой была выполнена.</span><span class="sxs-lookup"><span data-stu-id="b07e4-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="b07e4-202">Не удалось определения этих элементов статически в файле проекта, так как файлы, на которые ссылаются элементы не существуют до **BuildProjects** выполнения целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="b07e4-203">Вместо этого элементы должны быть определены динамически в целевой объект, который не вызывается до после **BuildProjects** выполнения целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="b07e4-204">Элементы не используются в этой цели & #x 2014; этот целевой объект просто создает элементы и метаданные, связанные со значением каждого элемента.</span><span class="sxs-lookup"><span data-stu-id="b07e4-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="b07e4-205">После обработки этих элементов, **PublishPackages** элемента будет содержать два значения, путь к *ContactManager.Mvc.deploy.cmd* файла и путь к  *ContactManager.Service.deploy.cmd* файл.</span><span class="sxs-lookup"><span data-stu-id="b07e4-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="b07e4-206">Веб-развертывания создает эти файлы как часть веб-пакет для каждого проекта, и они представляют собой файлы, которые необходимо выполнить на целевом сервере для развертывания пакетов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="b07e4-207">Если открыть один из этих файлов, по сути появится команда MSDeploy.exe с различных значений параметров, относящихся к сборке.</span><span class="sxs-lookup"><span data-stu-id="b07e4-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="b07e4-208">**DbPublishPackages** элемента будет содержать один символ, путь к *ContactManager.Database.deploymanifest* файла.</span><span class="sxs-lookup"><span data-stu-id="b07e4-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-209">DEPLOYMANIFEST-файл создается при построении проекта базы данных, и она использует ту же схему, что файл проекта MSBuild.</span><span class="sxs-lookup"><span data-stu-id="b07e4-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="b07e4-210">Он содержит все сведения, необходимые для развертывания базы данных, включая расположение схема базы данных (DBSCHEMA) и сведения о любых скриптов до и после развертывания.</span><span class="sxs-lookup"><span data-stu-id="b07e4-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="b07e4-211">Дополнительные сведения см. в разделе [Обзор для построения базы данных и развертывания](https://msdn.microsoft.com/library/aa833165.aspx).</span><span class="sxs-lookup"><span data-stu-id="b07e4-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>


<span data-ttu-id="b07e4-212">Дополнительные сведения о том, как создать и использовать в пакеты развертывания и манифесты развертывания базы данных [построения и упаковки проектов веб-приложений](building-and-packaging-web-application-projects.md) и [развертывание проектов базы данных](deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="b07e4-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="b07e4-213">Целевой объект PublishDbPackages</span><span class="sxs-lookup"><span data-stu-id="b07e4-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="b07e4-214">Кратко говоря, **PublishDbPackages** цель вызывает программу VSDBCMD развертывание **ContactManager** базы данных в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="b07e4-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="b07e4-215">Настройка развертывания базы данных включает в себя множество решений и особенности и Дополнительные сведения об этом [развертывание проектов базы данных](deploying-database-projects.md) и [Настройка развертывания базы данных для нескольких сред](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="b07e4-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="b07e4-216">В этом разделе мы рассмотрим фактически функционирование этот целевой объект.</span><span class="sxs-lookup"><span data-stu-id="b07e4-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="b07e4-217">Во-первых, обратите внимание, что открывающий тег включает **выходов** атрибута.</span><span class="sxs-lookup"><span data-stu-id="b07e4-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]


<span data-ttu-id="b07e4-218">Это пример *Пакетная обработка целевых объектов*.</span><span class="sxs-lookup"><span data-stu-id="b07e4-218">This is an example of *target batching*.</span></span> <span data-ttu-id="b07e4-219">В файлах проектов MSBuild Пакетная обработка — это метод для прохода по коллекции.</span><span class="sxs-lookup"><span data-stu-id="b07e4-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="b07e4-220">Значение **выходов** атрибут, **«% (DbPublishPackages.Identity)»**, ссылается на **удостоверение** свойство метаданных **DbPublishPackages**  список элементов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="b07e4-221">Такая запись **Outputs=%***(ItemList.ItemMetadataName)*, преобразуется следующим образом:</span><span class="sxs-lookup"><span data-stu-id="b07e4-221">This notation, **Outputs=%***(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="b07e4-222">Разделить элементы в **DbPublishPackages** на пакеты элементов, которые содержат одинаковый **удостоверение** значение метаданных.</span><span class="sxs-lookup"><span data-stu-id="b07e4-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="b07e4-223">Выполнение целевого один раз в каждом пакете.</span><span class="sxs-lookup"><span data-stu-id="b07e4-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-224">**Удостоверение** является одним из [встроенные метаданные значения](https://msdn.microsoft.com/library/ms164313.aspx) , которое присваивается при создании каждого элемента.</span><span class="sxs-lookup"><span data-stu-id="b07e4-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="b07e4-225">Он ссылается на значение **Include** атрибута в **элемента** элемент & #x 2014; другими словами, путь и имя элемента.</span><span class="sxs-lookup"><span data-stu-id="b07e4-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>


<span data-ttu-id="b07e4-226">Таким образом так как никогда не должна быть более одного элемента с тем же путь и имя файла, мы фактически работаем с размером пакета одного.</span><span class="sxs-lookup"><span data-stu-id="b07e4-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="b07e4-227">Целевой объект выполняется один раз для каждого пакета базы данных.</span><span class="sxs-lookup"><span data-stu-id="b07e4-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="b07e4-228">Вы увидите примерно нотация в  **\_Cmd** свойство, которое создает команду VSDBCMD с соответствующими параметрами.</span><span class="sxs-lookup"><span data-stu-id="b07e4-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]


<span data-ttu-id="b07e4-229">В этом случае **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, и **%(DbPublishPackages.FullPath)** ссылаются значения метаданных **DbPublishPackages** коллекции элементов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="b07e4-230"> **\_Cmd** используется свойство **Exec** задачу, которая вызывает команду.</span><span class="sxs-lookup"><span data-stu-id="b07e4-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]


<span data-ttu-id="b07e4-231">В результате такой записи **Exec** задача создаст пакеты на основании уникальных комбинаций **DatabaseConnectionString**, **TargetDatabase**и **FullPath** значения метаданных и эта задача выполняется один раз для каждого пакета.</span><span class="sxs-lookup"><span data-stu-id="b07e4-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="b07e4-232">Это пример *Пакетная обработка задач*.</span><span class="sxs-lookup"><span data-stu-id="b07e4-232">This is an example of *task batching*.</span></span> <span data-ttu-id="b07e4-233">Тем не менее, поскольку целевого уровня пакетной обработки уже поделила наш набор элементов на пакеты одним элементом, **Exec** задача будет выполняться только один раз для каждой итерации целевого объекта.</span><span class="sxs-lookup"><span data-stu-id="b07e4-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="b07e4-234">Другими словами эта задача вызывает программу VSDBCMD один раз для каждого пакета базы данных в решении.</span><span class="sxs-lookup"><span data-stu-id="b07e4-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="b07e4-235">Дополнительные сведения о целевой и пакетная обработка задач см. в разделе MSBuild [Пакетная обработка](https://msdn.microsoft.com/library/ms171473.aspx), [метаданные элементов в пакетной обработке целевых объектов](https://msdn.microsoft.com/library/ms228229.aspx), и [метаданные элементов в пакетной обработке задач](https://msdn.microsoft.com/library/ms171474.aspx).</span><span class="sxs-lookup"><span data-stu-id="b07e4-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>


### <a name="the-publishwebpackages-target"></a><span data-ttu-id="b07e4-236">Целевой объект PublishWebPackages</span><span class="sxs-lookup"><span data-stu-id="b07e4-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="b07e4-237">К этому моменту были активированы **BuildProjects** цели, которая создает пакет веб-развертывания для каждого проекта в решении образца.</span><span class="sxs-lookup"><span data-stu-id="b07e4-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="b07e4-238">Каждый пакет, сопровождающие — *deploy.cmd* файл, содержащий MSDeploy.exe команд, необходимых для развертывания пакета в целевой среде, и *SetParameters.xml* файл, который указывает необходимые сведения в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="b07e4-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="b07e4-239">Также были активированы **GatherPackagesForPublishing** целевой объект, который создает элемент коллекция, содержащая *deploy.cmd* файлы, которые вас интересуют.</span><span class="sxs-lookup"><span data-stu-id="b07e4-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="b07e4-240">По существу **PublishWebPackages** целевой выполняет следующие функции:</span><span class="sxs-lookup"><span data-stu-id="b07e4-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="b07e4-241">Он управляет *SetParameters.xml* файл для каждого пакета включить правильные сведения для целевой среды с помощью **XmlPoke** задачи.</span><span class="sxs-lookup"><span data-stu-id="b07e4-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="b07e4-242">Он вызывает *deploy.cmd* файл для каждого пакета, с помощью нужных параметров.</span><span class="sxs-lookup"><span data-stu-id="b07e4-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="b07e4-243">Так же, как **PublishDbPackages** цели, **PublishWebPackages** цель использует Пакетная обработка целевых объектов для убедитесь, что целевой объект выполняется один раз для каждого веб-пакета.</span><span class="sxs-lookup"><span data-stu-id="b07e4-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]


<span data-ttu-id="b07e4-244">В целевом объекте **Exec** задача используется для запуска *deploy.cmd* файл для каждого веб-пакета.</span><span class="sxs-lookup"><span data-stu-id="b07e4-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>


[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]


<span data-ttu-id="b07e4-245">Дополнительные сведения о настройке развертывания веб-пакетов см. в разделе [построения и упаковки проектов веб-приложений](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="b07e4-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="b07e4-246">Заключение</span><span class="sxs-lookup"><span data-stu-id="b07e4-246">Conclusion</span></span>

<span data-ttu-id="b07e4-247">В этом разделе предоставляется пошаговое руководство по использованию разделенные файлы проекта для управления процессом построения и развертывания от начала до конца для примера решения диспетчера контактов.</span><span class="sxs-lookup"><span data-stu-id="b07e4-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="b07e4-248">Этот подход позволяет запуском комплексного, развертывания корпоративного уровня одного repeatable шаг, просто выполнив конкретных командный файл.</span><span class="sxs-lookup"><span data-stu-id="b07e4-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="b07e4-249">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="b07e4-249">Further Reading</span></span>

<span data-ttu-id="b07e4-250">Более подробные сведения о файлы проекта и WPP см. в разделе [внутри Microsoft Build Engine: с помощью MSBuild и Team Foundation Build](http://amzn.com/0735645248) Sayed Ibrahim Hashimi и Bartholomew Уильям, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="b07e4-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="b07e4-251">[Назад](understanding-the-project-file.md)
[Вперед](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="b07e4-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
