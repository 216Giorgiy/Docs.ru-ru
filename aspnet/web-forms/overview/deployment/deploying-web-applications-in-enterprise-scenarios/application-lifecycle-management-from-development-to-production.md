---
uid: web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
title: 'Управление жизненным циклом приложений: От разработки к производству | Документы Microsoft'
author: jrjlee
description: В этом разделе показано, как вымышленная компания управляет развертыванием веб-приложение ASP.NET через тестовой, промежуточной и рабочей средах как par...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: f97a1145-6470-4bca-8f15-ccfb25fb903c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/deploying-web-applications-in-enterprise-scenarios/application-lifecycle-management-from-development-to-production
msc.type: authoredcontent
ms.openlocfilehash: 8beeffb374df09c6695a1845199d30006ddcc1b7
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30887292"
---
<a name="application-lifecycle-management-from-development-to-production"></a>Управление жизненным циклом приложений: От разработки к производству
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе показано, как вымышленная компания управляет развертыванием веб-приложение ASP.NET через тестовой, промежуточной и рабочей сред в рамках процесса постоянную разработку. В разделе приводятся ссылки на дополнительные сведения и пошаговые руководства по выполнению определенных задач.
> 
> Раздел предназначен для предоставления высокоуровневый обзор для [серию учебников,](deploying-web-applications-in-enterprise-scenarios.md) на веб-развертывания в организации. Не беспокойтесь, если вы не знакомы с некоторыми основными понятиями, описанными здесь&#x2014;учебники, выполните предоставляют подробные сведения о всех этих задачах и методиках разработки.
> 
> > [!NOTE]
> > Понимание Forthe простоты, в этом разделе не обсуждаются обновляемых баз данных в рамках процесса развертывания. Тем не менее вносить добавочные обновления функций баз данных является обязательным для различных сценариев развертывания предприятия и можно найти рекомендации о том, как это можно сделать позднее в этот учебник ряд. Дополнительные сведения см. в разделе [развертывание проектов базы данных](../web-deployment-in-the-enterprise/deploying-database-projects.md).


## <a name="overview"></a>Обзор

Процесс развертывания, представленный здесь основан на сценарии развертывания компании Fabrikam, Inc., описанном в [корпоративного веб-развертывания: Обзор сценария](enterprise-web-deployment-scenario-overview.md). Обзор сценария необходимо прочитать перед изучить в этом разделе. По существу, сценарий проверяет как организация управляет развертыванием достаточно сложными веб-приложении [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md), через различные этапы в типичной корпоративной среде.

На высоком уровне диспетчера контактов решение проходит через эти этапы как часть разработки и процесса развертывания:

1. Разработчик возвращает код в Team Foundation Server (TFS) 2010.
2. TFS создает код и выполняет все модульные тесты, связанные с командным проектом.
3. TFS развертывает решение в среде тестирования.
4. Команда разработчиков проверяет и проверяет решение в среде тестирования.
5. Промежуточной среде администратор выполняет развертывание «что, если» в среде промежуточного хранения для установления того, будет ли развертывание проблем.
6. Промежуточной среде администратор выполняет динамическую развертывания в промежуточной среде.
7. Решение проходит приемочного тестирования в промежуточной среде.
8. Пакеты веб-развертывания вручную импортируются в рабочую среду.

Эти этапы являются частью цикла непрерывной разработки.

![](application-lifecycle-management-from-development-to-production/_static/image1.png)

На практике процесс немного более сложным, как можно будет увидеть, когда мы рассмотрим каждый этап более подробно. Компания Fabrikam использует другой подход к развертыванию для каждой целевой среды.

![](application-lifecycle-management-from-development-to-production/_static/image2.png)

В остальной части этого раздела рассматриваются эти ключевых этапах этого жизненного цикла развертывания:

- **Предварительные требования**: как необходимые для настройки инфраструктуры сервера перед включением логику развертывания на месте.
- **Начальной разработки и развертывания**: необходимо выполнить перед развертыванием решения в первый раз.
- **Развертывание, чтобы проверить**: процесса упаковки и развертывания содержимого в тестовой среде автоматически, когда разработчик возвращает в новом коде.
- **Развертывание в промежуточной**: развертывание определенных сборок в промежуточной среде и способы выполнения «что, если» развертываний, чтобы убедиться, что развертывание не приводит к возникновению проблем.
- **Развертывание в рабочей среде**: Импорт веб-пакеты в рабочей среде случае удаленное развертывание сетевой инфраструктуры.

## <a name="prerequisites"></a>Предварительные требования

Первой задачей в любом сценарии развертывания является, серверной инфраструктуры требованиям вашего развертывания средств и приемов. В этом случае Fabrikam, Inc. настроил свою инфраструктуру сервера следующим образом:

- Чтобы включить коллекцию командных проектов, контроллеры и агенты построения настраивается TFS. В разделе [настройки Team Foundation Server для автоматического развертывания веб-](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md) для получения дополнительной информации.
- Тестовая среда настроена для принятия удаленных развертываний с помощью службы агента веб-развертывания («удаленного агента»), как описано в [сценарий: Настройка тестовой среды для веб-развертывания](../configuring-server-environments-for-web-deployment/scenario-configuring-a-test-environment-for-web-deployment.md) и [ Настройка веб-сервер для публикации (удаленный агент) веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-remote-agent.md).
- Промежуточной среде настроен для приема удаленных развертываний с помощью конечной точки веб-обработчик развертывания, как описано в [сценарий: настройка для веб-развертывания в промежуточной среде](../configuring-server-environments-for-web-deployment/scenario-configuring-a-staging-environment-for-web-deployment.md) и [Настройка веб-сервера для веб-развертывания публикации (веб-развертывание обработчика)](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-web-deploy-handler.md).
- В рабочей среде настроена администратором, чтобы вручную импортировать пакеты веб-развертывания в Internet Information Services (IIS), как описано в [сценарий: Настройка рабочей среде для развертывания веб-](../configuring-server-environments-for-web-deployment/scenario-configuring-a-production-environment-for-web-deployment.md) и [настроить веб-сервер для публикации (автономного развертывания) веб-развертывания](../configuring-server-environments-for-web-deployment/configuring-a-web-server-for-web-deploy-publishing-offline-deployment.md).

## <a name="initial-development-and-deployment"></a>Начальной разработки и развертывания

Команда разработчиков компании Fabrikam, Inc. выполнить развертывание решения диспетчера контактов в первый раз, необходимо выполнять следующие задачи:

- Создание нового командного проекта в Team Foundation Server.
- Создание файлов проекта Microsoft Build Engine (MSBuild), которые содержат логику развертывания.
- Создание определений построения TFS, которые запускают процессов развертывания.

### <a name="create-a-new-team-project"></a>Создание нового командного проекта

- Администратор TFS, Rob Walters создает нового командного проекта для приложения, как описано в [создания командного проекта в Team Foundation Server](../configuring-team-foundation-server-for-web-deployment/creating-a-team-project-in-tfs.md). Далее ведущий разработчик Hink Мэтт создает каркас решение. Он проверяет его файлы в новый командный проект в TFS, как описано в [добавления содержимого в систему управления версиями](../configuring-team-foundation-server-for-web-deployment/adding-content-to-source-control.md).

### <a name="create-the-deployment-logic"></a>Создайте логику развертывания

Мэтт Hink создает различные пользовательские файлы проекта MSBuild, используя разбиение проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md). Мэтт создает:

- Файл проекта с именем *Publish.proj* , которое будет выполняться в процессе развертывания. Этот файл содержит целевые объекты MSBuild, построение проектов в решении, создайте веб-пакетов и развернуть пакеты в среде сервера назначения.
- Файлы проекта среды с именем *Env Dev.proj* и *Env Stage.proj*. Они содержат параметры, относящиеся к тестовой среде и промежуточной среды соответственно, как строки подключения, конечные точки службы и сведения об удаленной службы, который получит веб-пакета. Рекомендации по выбору нужные параметры для конкретного конечного сред см. в разделе [настройки свойств развертывания для целевой среды](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).

Чтобы выполнить развертывание, пользователь выполняет *Publish.proj* текстовый файл с помощью MSBuild или Team Build и определяет местоположение файла проекта применимо относящихся к среде (*Env Dev.proj* или *Env Stage.proj*) аргумент командной строки. *Publish.proj* файл затем импортирует файл проекта конкретной среды, чтобы создать полный набор публикации инструкции для каждой целевой среды.

> [!NOTE]
> Эти файлы пользовательских проектов работы независимым от механизма, используемого для вызова MSBuild. Например, можно использовать командную строку MSBuild напрямую, как описано в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md). Файлы проекта можно запустить из командного файла, как описано в [создания и запуска командного файла развертывания](../web-deployment-in-the-enterprise/creating-and-running-a-deployment-command-file.md). Кроме того, файлы проекта можно запустить из определения сборки в TFS, как описано в [создание определение построения, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).  
> В каждом случае результат зависит от того&#x2014;MSBuild выполняет файл объединенных проекта и развертывание решения в целевой среде. Это обеспечивает большую гибкость в том, как запустить процесс публикации.


После он создаст проект пользовательские файлы, Мэтт добавляет их в папку решения и возвращает их в систему управления версиями.

### <a name="create-build-definitions"></a>Создание определений построений

Как задачу окончательной подготовки Мэтт и Роба работают вместе для создания трех определения построения для нового командного проекта.

- **DeployToTest**. Это выполняется построение решения диспетчера контактов и развертывает ее в тестовую среду, каждый раз при возврате.
- **DeployToStaging**. Когда разработчик помещает в очередь построение будет развернута ресурсы из заданного предыдущей сборки в промежуточной среде.
- **DeployToStaging-WhatIf**. Это выполняет «что, если» развертывание в промежуточной среде, когда разработчик ставит в очередь сборки.

В последующих разделах приведены дополнительные сведения о каждой из этих определений сборки.

## <a name="deployment-to-test"></a>Развертывания для тестов

Команда разработчиков компании Fabrikam, Inc. поддерживает тестовых сред для выполнения разнообразных задач, например, проверки и проверки, тестирование удобства использования, работоспособность и нерегламентированные или произвольного тестирования тестирования программного обеспечения.

Команда разработчиков создала определения сборки в Team Foundation Server с именем **DeployToTest**. Триггер непрерывной интеграции, это означает, что процесс построения выполняется каждый раз при членом команды разработчиков компании Fabrikam, Inc. выполняет возврат используется определение сборки. При запуске построения будет определение построения:

- Выполните сборку решения ContactManager.sln. Это в свою очередь, создает каждый проект в решении.
- Запустите модульные тесты в структуре папки решений (если сборка решения выполняется успешно).
- Запустите проект пользовательские файлы, управляющие процессом развертывания (если решение построение выполнено успешно и передает все модульные тесты).

Конечным результатом является то, что если решение построение выполнено успешно и передает модульные тесты, веб-пакеты и другие ресурсы развертывания развертываются в тестовую среду.

![](application-lifecycle-management-from-development-to-production/_static/image3.png)

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

**DeployToTest** сборки следующие аргументы MSBuild предоставляет определения:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample1.cmd)]


**DeployOnBuild = true** и **DeployTarget = пакет** свойства используются, когда Team Build строит проекты в решении. Если проект является проектом веб-приложения, эти свойства указывают MSBuild для создания пакета веб-развертывания для проекта. **TargetEnvPropsFile** свойство сообщает *Publish.proj* где найти файл проекта конкретной среды, чтобы импортировать файл.

> [!NOTE]
> Подробное пошаговое руководство о том, как создать определение построения следующим образом см. в разделе [создание определение построения, развертывания поддерживает](../configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment.md).


*Publish.proj* файл содержит целевые объекты, которые построения каждого проекта в решении. Однако она также включает условную логику, пропускает эти сборки целевых объектов, если файл исполняется в Team Build. Это позволяет воспользоваться преимуществами построения дополнительные функциональные возможности, Team Build предложения, например возможность выполнения модульных тестов. Если построение решения или единице проверяет, сбоя *Publish.proj* файл не будет выполнен, и приложение не будет развернут.

Условная логика выполняется путем оценки **BuildingInTeamBuild** свойство. Это свойство MSBuild, автоматически устанавливается значение **true** при использовании Team Build для построения проектов.

## <a name="deployment-to-staging"></a>Развертывание в промежуточной

Если сборки отвечает всем требованиям команде разработчиков в среде тестирования, может потребоваться дополнительное развертывание одной сборки в среде промежуточного хранения. Промежуточные среды обычно настраивается для сопоставления характеристики производства или как «live» среды, точно, как можно, например, с точки зрения спецификации сервера, операционные системы и программное обеспечение и конфигурации сети. Промежуточные среды часто используются для нагрузочного тестирования пользовательского приемочного тестирования и широкой внутренней проверки. Сборки развертываются в среде промежуточного хранения непосредственно на сервере сборки.

![](application-lifecycle-management-from-development-to-production/_static/image4.png)

Определения сборки, используемые для развертывания решения в промежуточной среде **DeployToStaging-WhatIf** и **DeployToStaging**, имеют следующие характеристики:

- Они не построения фактически ничего. Когда Вадим развертывает решение в промежуточной среде, хочет развернуть определенные, существующие сборку, которая уже проверены и проверить в тестовой среде. Определения сборок следует запускать пользовательский проект файлы, которые управляют процессом развертывания.
- Когда Вадим запускает сборку, чтобы указать, какие сборки содержит ресурсы, которые он хочет развернуть на сервере сборки он использует параметры построения.
- Определения сборки не запускаются автоматически. Вадим вручную помещает в очередь построение, когда он хочет развернуть решение в среде промежуточного хранения.

Это общая процедура развертывания в промежуточной среде:

1. Промежуточной среде администратор Rob Walters ставит в очередь сборки с помощью **DeployToStaging-WhatIf** определение сборки. Вадим использует определение параметров построения для указания какой сборке, ему нужно развернуть.
2. **DeployToStaging-WhatIf** построение выполняется определение файлов проектов в режиме «что, если». Это создает файлы журнала, как в том случае, если Роба выполнением динамической развертывания, но не фактически вносит изменения в целевой среде.
3. Вадим анализирует файлы журналов, чтобы выяснить последствия развертывания в промежуточной среде. В частности Вадим хочет проверить, что будут добавлены, что будет обновляться и что будут удалены.
4. Если Роба выполняется, что развертывание не вносит изменения в нежелательных для существующих ресурсов или данных, он помещает в очередь сборки с помощью **DeployToStaging** определение сборки.
5. **DeployToStaging** построение выполняется определение файлов проектов. Ресурсы развертывания этих опубликовать на основном веб-сервере в промежуточной среде.
6. Контроллер веб-фермы (WFF) синхронизирует веб-серверов в среде промежуточного хранения. Это делает приложение доступным на веб-серверах в ферме серверов.

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

**DeployToStaging** сборки следующие аргументы MSBuild предоставляет определения:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample2.cmd)]


**TargetEnvPropsFile** свойство сообщает *Publish.proj* где найти файл проекта конкретной среды, чтобы импортировать файл. **OutputRoot** свойство переопределяет значение встроенные и указывает расположение папки сборки, содержащего ресурсы, которые вы хотите развернуть. Когда Вадим в очередь построение, он использует **параметры** вкладку для задания обновленного значения **OutputRoot** свойство.

![](application-lifecycle-management-from-development-to-production/_static/image5.png)

> [!NOTE]
> Дополнительные сведения о том, как создать определение построения следующим образом. в разделе [развертывания для конкретного Build](../configuring-team-foundation-server-for-web-deployment/deploying-a-specific-build.md).


**DeployToStaging-WhatIf** определение сборки содержит ту же логику развертывания, **DeployToStaging** определение сборки. Тем не менее, он включает в себя дополнительный аргумент **WhatIf = true**:


[!code-console[Main](application-lifecycle-management-from-development-to-production/samples/sample3.cmd)]


В пределах *Publish.proj* файл **WhatIf** свойство указывает, что все ресурсы развертывания должны публиковаться в режиме «что, если». Другими словами файлы журнала создаются, как если развертывание вышли вперед, но фактически ничего не изменяется в целевой среде. Это позволяет оценить влияние развертывания предложенный&#x2014;в частности, что будет Станьте, что будет обновляться и что будут удалены&#x2014;перед внесением изменений фактически.

> [!NOTE]
> Дополнительные сведения о настройке развертывания «что, если» см. в разделе [для выполнения развертывания «Что, если»](../advanced-enterprise-web-deployment/performing-a-what-if-deployment.md).


После развертывания приложения на основном веб-сервере в промежуточной среде, WFF автоматически синхронизировать приложение на всех серверах в ферме серверов.

> [!NOTE]
> Дополнительные сведения о настройке WFF для синхронизации веб-серверов см. в разделе [Создание фермы серверов с Web Farm Framework](../configuring-server-environments-for-web-deployment/creating-a-server-farm-with-the-web-farm-framework.md).


## <a name="deployment-to-production"></a>Развертывание в рабочей среде

При утверждении сборку в промежуточной среде команда Fabrikam, Inc. можно опубликовать приложение в рабочей среде. В рабочей среде — Если приложение «приближенной», а достигнет целевой аудитории конечных пользователей.

В рабочей среде находится в сети периметра с выходом в Интернет. Это изолированный от внутренней сети, которая содержит сервер сборки. Администратор производственной среды, Лиза Андреева необходимо вручную скопировать пакеты веб-развертывания на сервере сборки и импортировать их в IIS на основном рабочем веб-сервере.

![](application-lifecycle-management-from-development-to-production/_static/image6.png)

Это общая процедура развертывания в рабочей среде:

1. Команда разработчиков рекомендует Лиза сборка готова для развертывания в рабочей среде. Команда будет указано Лиза расположения пакеты веб-развертывания в папке размещения на сервере сборки.
2. Лиза собирает веб-пакетов на сервере сборки и копирования их на основном веб-сервере в рабочей среде.
3. Лиза диспетчера IIS использует для импорта и опубликовать веб-пакеты на основном веб-сервере.
4. Контроллер WFF синхронизирует веб-серверов в рабочей среде. Это делает приложение доступным на веб-серверах в ферме серверов.

### <a name="how-does-the-deployment-process-work"></a>Как работает процесс развертывания?

Диспетчер IIS включает пакет мастер импорта приложений, позволяет легко опубликовать на веб-сайт IIS веб-пакеты. Пошаговые инструкции по выполнению этой процедуры см. в разделе [вручную Установка веб-пакеты](../web-deployment-in-the-enterprise/manually-installing-web-packages.md).

## <a name="conclusion"></a>Заключение

В этом разделе предоставляется пример жизненного цикла развертывания веб-приложения обычно корпоративного уровня.

Этот раздел входит в состав серию учебников, которые дают представление о различных аспектах развертывание веб-приложений. На практике существует множество дополнительных задачи и вопросы на каждом этапе процесса развертывания и описать их все в одном Пошаговое руководство невозможно. Дополнительные сведения см. в этих учебниках:

- [Веб-развертывания на предприятии](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md). Этот учебник содержит полный введение в web методов развертывания, с помощью MSBuild и средство IIS веб-развертывания (Web Deploy).
- [Настройка серверов для развертывания веб-](../configuring-server-environments-for-web-deployment/configuring-server-environments-for-web-deployment.md). Этот учебник руководство по настройке среды Windows server для поддержки различных сценариев развертывания.
- [Настройка Team Foundation Server для автоматического развертывания веб-приложения](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md). Этот учебник руководство о том, как интегрировать процессы сборки TFS логики развертывания.
- [Расширенный корпоративного веб-развертывания](../advanced-enterprise-web-deployment/advanced-enterprise-web-deployment.md). Этот учебник руководство о том, как выполнить некоторые из более сложных проблем развертывания, с которыми сталкиваются организации.

> [!div class="step-by-step"]
> [Назад](enterprise-web-deployment-scenario-overview.md)
