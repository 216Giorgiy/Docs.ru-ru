---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: "Развертывание баз данных членства в корпоративных средах | Документы Microsoft"
author: jrjlee
description: "В этом разделе описываются основные рекомендации и проверок, которые необходимо преодолеть при подготовке базы данных служб приложения ASP.NET (чаще..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 27fade9fc5cae917579d4963da7bca12f6a5cda1
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2018
---
<a name="deploying-membership-databases-to-enterprise-environments"></a>Развертывание баз данных членства в корпоративных средах
====================
по [Джейсон Lee](https://github.com/jrjlee)

[Скачать PDF](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> В этом разделе описываются основные рекомендации и проблем, с которой необходимо преодолеть при базы данных (более часто называют членства баз данных) в тестовой, промежуточной или производственной среде служб подготовки приложения ASP.NET. Он также описывает подходов, которые можно использовать для выполнения этих задач.


Этот раздел входит в состав серию учебников, исходя из требования к развертыванию enterprise вымышленная компания Fabrikam, Inc. Этот учебник ряд использует образец решения & #x 2014; [решения диспетчера контактов](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; для представления веб-приложения с реалистичных уровень сложности, включая приложения ASP.NET MVC 3, Windows Службы Communication Foundation (WCF) и проект базы данных.

Метод развертывания, в основе этих учебников основан на разбиение проекта файл подход, описанный в [основные сведения о файле проекта](../web-deployment-in-the-enterprise/understanding-the-project-file.md), в которой процесс построения управляется двух проектов файлы & #x 2014; один с построение инструкции, которые применяются для каждой целевой среде и, содержащий параметры построения и развертывания конкретной среды. Во время построения файла проекта среды объединяется в файл проекта зависит от среды, образуют полный набор инструкций построения.

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a>При развертывании базы данных членства с какими проблемами?

В большинстве случаев при разработке стратегии развертывания для базы данных, необходимо принимать во внимание в первую очередь является данных вы хотите развернуть. В среде разработки или тестирования может потребоваться развернуть данных учетных записей пользователей для тестирования быстро и удобно. В промежуточной или рабочей среде в крайне редких случаях может потребоваться развернуть данные учетной записи пользователя.

К сожалению базы данных членства ASP.NET представляют некоторые определенные проблемы, которые при принятии гораздо сложнее.

- Только схема развертывания будет оставить базу данных членства в нерабочем состоянии. Это, поскольку база данных членства включает в себя некоторые данные конфигурации (в **aspnet\_SchemaVersions** таблицы), необходимый для своей работы в базе данных. Таким образом Если выполнить развертывание только со схемой базы данных членства для исключения данных учетной записи пользователя, необходимо выполнить скрипт после развертывания для добавления данных обязательной настройки.
- В зависимости от настроек базы данных членства поставщик может использовать ключ компьютера для шифрования паролей и сохранять их в базе данных. В этом случае данные учетных записей пользователей, развертываемого с базой данных, станет недоступным для использования на конечном сервере. По этой причине развертывание данных учетных записей пользователей не поддерживается.

## <a name="choosing-a-membership-database-strategy"></a>Выбор стратегии базы данных членства

Используйте следующие рекомендации при подготовке базы данных членства в корпоративной среде сервера:

- Везде, где это возможно, не развертывание базы данных членства. Создайте базу данных членства вручную на целевом сервере базы данных. Если вы не настроили схему базы данных членства, можно просто создать новую в situ по назначения с использованием [средство регистрации SQL Server ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).
- Если у вас нет, но на развертывание базы данных членства & #x 2014; например, если вы внесли расширенные изменения в схему базы данных & #x 2014; необходимые схемой развертывания членства в базе данных, чтобы исключить данные учетной записи пользователя, и затем запустите сценарий после развертывания для добавляют все необходимые данные. Широкие инструкции можно найти на этих способов [как: развертывание ASP.NET членства базы данных без включая учетные записи пользователей](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).

Важно помнить, что *схемы базы данных членства может оказаться довольно статические вероятнее*. Даже если вы настроили базы данных членства, маловероятно, что вам потребуется обновить схему на регулярной основе & #x 2014; он не будет изменяться с такой же частотой, как код в веб-приложение или проект базы данных. Не следует таким образом, необходимо включить в любой процессов автоматической или один шаг развертывания базы данных членства.

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a>С помощью VSDBCMD, чтобы обновить схему базы данных членства

При изменении структуры базы данных членства после первого развертывания, можно не использовать средство Internet Information Services (IIS) веб-развертывания (Web Deploy) для повторного развертывания базы данных. Функциональность развертывания базы данных в веб-развертывание не включает возможность сделать разностные обновления в целевой базе данных & #x 2014; вместо этого веб-развертывания необходимо удалить и воссоздать базу данных. Это означает, что вы потеряны все существующие данные учетной записи пользователя, обычно нежелательных в промежуточной или рабочей среде.

Альтернативой является использование служебную программу VSDBCMD для обновления схемы целевой базы данных. VSDBCMD включает две важные возможности. Во-первых его можно импортировать схему из существующей базы данных в файл DBSCHEMA. Во-вторых его можно развернуть файл DBSCHEMA существующую базу данных как разностные обновления, это означает, что упрощает изменений, необходимых для приведения целевой базы данных в актуальном состоянии, и все данные не потеряны.

Чтобы обновить схему базы данных членства можно использовать следующие общие действия:

1. Использование инструмента VSDBCMD **импорта** действия для создания DBSCHEMA-файл для исходной базы данных членства. Эта процедура описана в [как: Импорт схемы из командной строки](https://msdn.microsoft.com/library/dd172135.aspx).
2. Использование инструмента VSDBCMD **развернуть** действия для развертывания DBSCHEMA-файл на целевой базы данных членства. Эта процедура описана в [Справочник по командной строке для VSDBCMD. EXE (развертывание и импорт схемы)](https://msdn.microsoft.com/library/dd193283.aspx).

## <a name="conclusion"></a>Заключение

В этом разделе описываются некоторые проблемы, которые могут возникнуть, когда необходимо подготовить базы данных членства ASP.NET в различных целевых средах. В частности объясняется, почему оставить только схема развертывания базы данных членства в нерабочем состоянии и почему развертывание данных учетных записей пользователей не поддерживается. Раздел также предоставляются инструкции о том, как подготовить, развертывание и обновление баз данных членства в различных сценариях.

## <a name="further-reading"></a>Дополнительные сведения

Дополнительные рекомендации и примеры использования VSDBCMD см. в разделе [Справочник по командной строке для VSDBCMD. EXE (развертывание и импорт схемы)](https://msdn.microsoft.com/library/dd193283.aspx) и [как: Импорт схемы из командной строки](https://msdn.microsoft.com/library/dd172135.aspx). Дополнительные сведения об использовании aspnet\_regsql.exe для создания баз данных членства, в разделе [средство регистрации SQL Server ASP.NET (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx). Дополнительные общие рекомендации по развертыванию базы данных членства. в разделе [как: развертывание ASP.NET членства базы данных без включая учетные записи пользователей](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).

>[!div class="step-by-step"]
[Назад](deploying-database-role-memberships-to-test-environments.md)
[Вперед](excluding-files-and-folders-from-deployment.md)
