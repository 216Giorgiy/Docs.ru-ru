---
uid: web-forms/overview/deployment/visual-studio-web-deployment/command-line-deployment
title: "ASP.NET веб-развертывания с помощью Visual Studio: развертывание командной строки | Документы Microsoft"
author: tdykstra
description: "Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, Пол..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/15/2013
ms.topic: article
ms.assetid: 82b8dea0-f062-4ee4-8784-3ffa30fbb1ca
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/command-line-deployment
msc.type: authoredcontent
ms.openlocfilehash: 8446b3fc05e3ef4a5a30c753c989252fd7f1a56f
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="aspnet-web-deployment-using-visual-studio-command-line-deployment"></a>ASP.NET веб-развертывания с помощью Visual Studio: развертывание командной строки
====================
По [Tom Dykstra](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения о последовательности см. в разделе [в первом учебнике ряда](introduction.md).


## <a name="overview"></a>Обзор

Этого учебника показано, как вызвать веб-сайте Visual Studio опубликовать конвейера из командной строки. Это полезно в сценариях, где вы хотите [автоматизации процесса развертывания](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery.md) вы не используете его вручную в Visual Studio, обычно с помощью [исходной системы управления версиями кода](../../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control.md).

## <a name="make-a-change-to-deploy"></a>Изменения для развертывания

В данный момент страницу About отображаются код шаблона.

![О странице с кодом шаблона](command-line-deployment/_static/image1.png)

Вы замените, код, который отображает сводку по регистрации учащихся.

Откройте *About.aspx* страницы, удалите все разметки внутри `MainContent` `Content` элемент и вставить следующую разметку, вместо него:

[!code-aspx[Main](command-line-deployment/samples/sample1.aspx)]

Запустите проект и выберите **о** страницы.

![О странице](command-line-deployment/_static/image2.png)

## <a name="deploy-to-test-by-using-the-command-line"></a>Развертывание для тестирования с помощью командной строки

Вы не развертывать другое изменение базы данных, поэтому отключить развертывание базы данных dbDacFx для aspnet ContosoUniversity базы данных. Откройте **веб-публикация** мастер и в каждом из трех профилей, снимите флажок публикации **обновление базы данных** флажок на **параметры** вкладки.

В Windows 8 начальную страницу, поиск **Командная строка разработчика для VS2012**.

Щелкните правой кнопкой мыши значок **Командная строка разработчика для VS2012** и нажмите кнопку **Запуск от имени администратора**.

Введите следующую команду в командной строке, заменив путь к файлу решения с путем к файлу решения:

[!code-console[Main](command-line-deployment/samples/sample2.cmd)]

MSBuild выполняется построение решения и развертывает ее в тестовую среду.

![Данные, выводимые в командной строке](command-line-deployment/_static/image3.png)

Откройте браузер и перейдите к `http://localhost/ContosoUniversity`, нажмите кнопку **о** страницу, чтобы проверить успешность развертывания.

Если вы еще не создали любой студентов в тесте, вы увидите пустой страницы в разделе **статистики текст студента** заголовок. Последовательно выберите пункты **учащихся** щелкните **студента добавить**, добавлять некоторые студентов и затем вернитесь к **о** страницу, чтобы просмотреть статистику студента.

![О странице в тестовой среде](command-line-deployment/_static/image4.png)

## <a name="key-command-line-options"></a>Параметры ключа командной строки

Команда введенный путь к файлу решения и два свойства, передаваемые в MSBuild:

[!code-console[Main](command-line-deployment/samples/sample3.cmd)]

### <a name="deploying-the-solution-versus-deploying-individual-projects"></a>При развертывании решения сравнению с развертыванием отдельных проектов

Задание файла решения приводит все проекты в решении для построения. Если имеется несколько веб-проектов в решении, применяется следующее поведение MSBuild:

- Свойства, которые можно указать в командной строке, передаются на каждый проект. Таким образом каждый веб-проект должен иметь профиль публикации с указанным именем. При указании `/p:PublishProfile=Test`, каждый веб-проект должен иметь профиль публикации с именем *теста*.
- Когда сборка еще один даже не может успешной публикации одного проекта. Дополнительные сведения см. в разделе поток stackoverflow [MSBuild завершается два пакета](http://stackoverflow.com/questions/14226451/msbuild-fails-with-two-packages).

При указании отдельного проекта вместо решения, необходимо добавить параметр, задающий версию Visual Studio. Если вы используете Visual Studio 2012 из командной строки будет выглядеть следующим образом:

[!code-console[Main](command-line-deployment/samples/sample4.cmd?highlight=1)]

Номер версии для Visual Studio 2010 — 10,0. Дополнительные сведения см. в разделе [совместимость проекта Visual Studio и VisualStudioVersion](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx) Sayed Hashimi блога.

### <a name="specifying-the-publish-profile"></a>Указание профиля публикации

Профиль публикации можно указать по имени или полный путь к *.pubxml* файла, как показано в следующем примере:

[!code-console[Main](command-line-deployment/samples/sample5.cmd?highlight=1)]

### <a name="web-publish-methods-supported-for-command-line-publishing"></a>Публикация веб-методов, поддерживаемых для публикации командной строки

Три публикации методы поддерживаются для публикация из командной строки:

- `MSDeploy`-Публикации с помощью веб-развертывания.
- `Package`-Публикации, создав пакет веб-развертывания. Необходимо отдельно установить пакет с помощью команды MSBuild, который его создал.
- `FileSystem`-Публикации путем копирования файлов в указанную папку.

### <a name="specifying-the-build-configuration-and-platform"></a>Указание конфигурации сборки и платформы

Необходимо задать конфигурацию сборки и платформу, в Visual Studio или в командной строке. Профили публикации включают свойства, которые называются `LastUsedBuildConfiguration` и `LastUsedPlatform`, не удается установить эти свойства, чтобы определить, как создать проект. Дополнительные сведения см. в разделе [MSBuild: как задать свойство конфигурации](http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx) Sayed Hashimi блога.

## <a name="deploy-to-staging"></a>Развертывание для промежуточного хранения

Для развертывания в Azure, необходимо добавить пароль в командную строку. Если пароль был сохранен в профиле публикации в Visual Studio, он был сохранен в зашифрованном виде в вашей *. pubxml.user* файл. Этот файл не обращаются MSBuild, при этом развертывание командной строки, необходимо передать пароль в параметре командной строки.

1. Скопируйте пароль, из *.publishsettings* файл, загруженный ранее для размещения веб-сайта. Пароль является значением `userPWD` атрибут для веб-развертывания `publishProfile` элемента.

    ![Веб-развертывание пароль](command-line-deployment/_static/image5.png)
2. В Windows 8 начальную страницу, поиск **Командная строка разработчика для VS2012**и щелкните значок, чтобы открыть окно командной строки. (Не нужно открыть его от имени администратора этого времени, так как не развертывание в IIS на локальном компьютере.)
3. Введите следующую команду в командной строке, заменив путь к файлу решения путь файл решения и пароль с паролем:

    [!code-console[Main](command-line-deployment/samples/sample6.cmd)]

    Обратите внимание, что эта команда включает дополнительный параметр: `/p:AllowUntrustedCertificate=true`. Записи этого учебника `AllowUntrustedCertificate` свойство должно быть задано при публикации в Azure из командной строки. Когда освобождается для исправления этой ошибки, нет необходимости этого параметра.
4. Откройте браузер и перейдите на URL-адрес промежуточного сайта и нажмите кнопку **о** страницу, чтобы проверить успешность развертывания.

    Как было показано ранее для тестовой среды, возможно, потребуется создать некоторые учащихся, чтобы просмотреть статистику на **о** страницы.

## <a name="deploy-to-production"></a>Развертывание в рабочей среде

Процесс развертывания в рабочей среде аналогичен процессу для промежуточного хранения.

1. Скопируйте пароль, из *.publishsettings* файл, загруженный ранее для производственного веб-сайта.
2. Откройте **Командная строка разработчика для VS2012**.
3. Введите следующую команду в командной строке, заменив путь к файлу решения путь файл решения и пароль с паролем:

    [!code-console[Main](command-line-deployment/samples/sample7.cmd)]

    Для реальных рабочего веб-сайта, если был также изменение базы данных, обычно копируются *приложения\_offline.htm* файл на сайт перед развертыванием и удалите его после успешного развертывания.
4. Откройте браузер и перейдите на URL-адрес промежуточного сайта и нажмите кнопку **о** страницу, чтобы проверить успешность развертывания.

## <a name="summary"></a>Сводка

Теперь вы развернули обновления приложения с помощью командной строки.

![О странице в тестовой среде](command-line-deployment/_static/image6.png)

В следующем уроке вы увидите пример расширения веб-сайте конвейера публикации. В примере показано, как развернуть файлы, которые не включены в проект.

>[!div class="step-by-step"]
[Назад](deploying-a-database-update.md)
[Вперед](deploying-extra-files.md)
