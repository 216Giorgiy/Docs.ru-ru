---
uid: web-forms/overview/deployment/visual-studio-web-deployment/setting-folder-permissions
title: "ASP.NET веб-развертывания с помощью Visual Studio: задании разрешений для папок | Документы Microsoft"
author: tdykstra
description: "Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, Пол..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/15/2013
ms.topic: article
ms.assetid: 9715a121-fa55-4f1b-a5d2-fb3f6cd8be8f
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/setting-folder-permissions
msc.type: authoredcontent
ms.openlocfilehash: 19bef5ff97fd5b79135df8ca9bd6bd316594cc5e
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="aspnet-web-deployment-using-visual-studio-setting-folder-permissions"></a>ASP.NET веб-развертывания с помощью Visual Studio: параметр разрешения папки
====================
По [Tom Dykstra](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения о последовательности см. в разделе [в первом учебнике ряда](introduction.md).


## <a name="overview"></a>Обзор

В этом учебнике вы установите разрешения для *Elmah* папки в развернутой веб-сайта, чтобы приложения могли создавать файлы журналов в этой папке.

При тестировании веб-приложения в Visual Studio с помощью Visual Studio Development Server (Cassini) или IIS Express, то приложение запущено под вашей личности. Скорее всего являетесь администратором на компьютере разработчика и имеют полный право выполнять в любой файл в любую папку. Однако при выполнении приложения в службах IIS, он выполняется с удостоверением, определенных для пула приложений, назначенный сайт. Обычно это системные учетную запись с ограниченными разрешениями. По умолчанию он разрешения чтение и выполнение для файлов и папок веб-приложения, но он не имеет доступа на запись.

Это становится проблемой, если приложение создает или файлы обновлений, которые обычное требуется в веб-приложениях. В приложении университета Contoso Elmah создает XML-файлы в *Elmah* папку для сохранения сведений об ошибках. Даже если вы не используете примерно Elmah, веб-узла может позволяет пользователям загружать файлы или выполнять другие задачи, которые записывают данные в папку на узле.

Напоминание: Если вы получаете сообщение об ошибке или что-то не работает, как пройти учебник, не забудьте проверить [страницу устранения неполадок](troubleshooting.md).

## <a name="test-error-logging-and-reporting"></a>Ведение журнала ошибок теста и создания отчетов

Чтобы увидеть, как приложение не работает правильно в службах IIS (несмотря на то, что и при его тестировании в Visual Studio), может вызвать ошибку, которая обычно регистрируется Elmah, а затем откройте журнал ошибок Elmah, чтобы просмотреть подробные сведения. Если Elmah не удалось создать XML-файл и сохранить сведения об ошибке, можно увидеть отчет об ошибке пустым.

Откройте браузер и перейдите к `http://localhost/ContosoUniversity`, и запросите недопустимый URL-адрес вида *Studentsxxx.aspx*. Отображается страница ошибки, созданные системой вместо *GenericErrorPage.aspx* страницы, так как `customErrors` параметр в файле Web.config «RemoteOnly» и службы IIS выполняются локально:

![Страница ошибки 404 HTTP](setting-folder-permissions/_static/image1.png)

Теперь запустите *Elmah.axd* Чтобы просмотреть отчет об ошибке. После входа в систему с учетными данными учетной записи администратора (&quot;администратора&quot; и &quot;devpwd&quot;), см на странице журнала пустой ошибки, так как не удалось создать XML-файл в Elmah *Elmah*папки:

![Пустой журнала ошибок](setting-folder-permissions/_static/image2.png)

## <a name="set-write-permission-on-the-elmah-folder"></a>Установить разрешения на запись для папки Elmah

Можно вручную задать разрешения для папки или его можно сделать автоматически в процессе развертывания. Делая автоматического требуется сложный код MSBuild, и поскольку только для этого при первом развертывании, следующие шаги как это делать вручную. (Сведения о том, как делать этого этапа процесса развертывания см. в разделе [установку разрешений на папку на веб-публикация](http://sedodream.com/2011/11/08/SettingFolderPermissionsOnWebPublish.aspx) в блоге Sayed Hashimi.)

1. В **проводнике**, перейдите к *C:\inetpub\wwwroot\ContosoUniversity*. Щелкните правой кнопкой мыши *Elmah* выберите **свойства**, а затем выберите **безопасности** вкладку.
2. Нажмите кнопку **Правка**.
3. В **разрешения для Elmah** установите флажок **DefaultAppPool**, а затем выберите **записи** флажок в **Разрешить** столбца.

    ![Разрешения для папки ELMAH](setting-folder-permissions/_static/image3.png)

    (Если вы не видите **DefaultAppPool** в **имена групп или пользователей** список, возможно, используется другой метод, отличный от указанного в этом учебнике для настройки IIS и ASP.NET 4 на вашем компьютере. В этом случае Узнайте, какие учетные данные, используемые выделенной приложение Contoso университета и предоставить разрешение на запись с этим удостоверением пула приложений. См. по ссылкам о удостоверений пула приложений в конце данного руководства.) Нажмите кнопку **ОК** в обоих диалоговых окнах.

## <a name="retest-error-logging-and-reporting"></a>Повторное тестирование ведения журнала ошибок и отчеты

Проверьте, вызывающей ошибку снова таким же образом (запрос Неверный URL-адрес) и запустите **журнал ошибок** страницы. Это время, то ошибка появится на странице.

![Страница журнала ошибок ELMAH](setting-folder-permissions/_static/image4.png)

## <a name="summary"></a>Сводка

Теперь завершена все задачи, необходимые для подготовки университета Contoso работает должным образом в IIS на локальном компьютере. В следующем уроке будет сделать общедоступными сайта с его развертыванием в Azure.

## <a name="more-information"></a>Дополнительные сведения

В этом примере причина, почему не удалось сохранить файлы журнала Elmah был довольно очевидным. Трассировку IIS можно использовать в случаях, когда причиной проблемы не столь очевидны; в разделе [устранения неполадок запросов с помощью сбойных в IIS 7](https://www.iis.net/learn/troubleshoot/using-failed-request-tracing/troubleshooting-failed-requests-using-tracing-in-iis) на сайте IIS.net.

Дополнительные сведения о том, как предоставить разрешения для удостоверения пула приложений см. в разделе [удостоверений пула приложений](https://www.iis.net/learn/manage/configuring-security/application-pool-identities) и [безопасный контент в IIS через файл списки управления доступом системы](https://www.iis.net/learn/get-started/planning-for-security/secure-content-in-iis-through-file-system-acls) на сайте IIS.net.

>[!div class="step-by-step"]
[Назад](deploying-to-iis.md)
[Вперед](deploying-to-production.md)
