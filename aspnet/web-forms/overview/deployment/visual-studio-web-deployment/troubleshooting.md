---
uid: web-forms/overview/deployment/visual-studio-web-deployment/troubleshooting
title: 'ASP.NET веб-развертывания с помощью Visual Studio: Устранение неполадок | Документы Microsoft'
author: tdykstra
description: Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, Пол...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/01/2015
ms.topic: article
ms.assetid: c0090595-ab3b-4b9b-9e16-7a1891e8cb2f
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/troubleshooting
msc.type: authoredcontent
ms.openlocfilehash: 15bda09c59afaf9e5449c68c5206bb28de245541
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30889281"
---
<a name="aspnet-web-deployment-using-visual-studio-troubleshooting"></a>ASP.NET веб-развертывания с помощью Visual Studio: Устранение неполадок
====================
по [Tom Dykstra](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения о последовательности см. в разделе [в первом учебнике ряда](introduction.md).


На этой странице описаны некоторые общие проблемы, которые могут возникнуть при развертывании веб-приложения ASP.NET с помощью Visual Studio. Для каждой из них приведены возможные причины ее возникновения и соответствующего решения.

Сценарии, представленные применяются и к Azure и сторонних поставщиков услуг размещения. Дополнительные сведения об устранении неполадок с веб-приложений в службе приложений Azure см. следующие ресурсы:

- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/)
- [Монитор веб-приложений в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-monitor//)
- [Объявляет о выпуске Windows Azure SDK 2.0 для .NET](http://https://weblogs.asp.net/scottgu/announcing-the-release-of-windows-azure-sdk-2-0-for-net) (блог ScottGu показывает способ получения журналов диагностики в Visual Studio)

## <a name="server-error-in--application---current-custom-error-settings-prevent-details-of-the-error-from-being-viewed-remotely"></a>Ошибка сервера в приложении '/' - текущая особая настройка ошибок не сведения об ошибке отображать удаленно

### <a name="scenario"></a>Сценарий

После развертывания узла к удаленному узлу, возникает сообщение об ошибке, указывается параметр customErrors в файле Web.config, но не указывает, было действительную причину ошибки:

[!code-xml[Main](troubleshooting/samples/sample1.xml)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию ASP.NET отображает подробные сведения об ошибке, только если веб-приложение выполняется на локальном компьютере. Обычно не нужно отображать подробные сведения об ошибке, если веб-приложение находится в открытом доступе через Интернет, возможно, злоумышленники могут использовать эти сведения для обнаружения уязвимостей приложения. Однако при развертывании обновления сайта или сайта иногда что-то работает неправильно, и вам необходимо получить реальное сообщение об ошибке.

Чтобы включить приложение для отображения подробных сообщений об ошибках, когда оно работает на удаленном узле, измените файл Web.config, чтобы отключить режим customErrors повторного развертывания приложения и снова запустите приложение.

1. Если файл Web.config приложения acustomErrors элемент в элементе thesystem.web, измените атрибут themode «OFF». В противном случае добавьте acustomErrors элемент в элементе thesystem.web с атрибутом themode, равным «off», как показано в следующем примере: 

    [!code-xml[Main](troubleshooting/samples/sample2.xml)]
2. Развертывание приложения.
3. Запустите приложение и повторите все, что это было ранее, причиной возникновения ошибок. Теперь можно увидеть, что такое реальное сообщение об ошибке.
4. После разрешения ошибки, восстановите исходное значение customErrors и повторного развертывания приложения.

## <a name="cannot-createshadow-copy-contosouniversity-when-that-file-already-exists"></a>Не удается создать теневую копию «ContosoUniversity», так как он уже существует.

### <a name="scenario"></a>Сценарий

При попытке запустить проект в Visual Studio, вы получаете страницу ошибки с сообщением, как в следующем примере:

Ошибка сервера в приложении '/'. Не удается создать теневую копию «ContosoUniversity», так как он уже существует.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Подождите одну минуту и обновить страницу в браузере, или компиляцию узла и попробуйте запустить ее еще раз.

## <a name="access-is-denied-in-a-web-page-that-uses-sql-server-compact"></a>Отказано в доступе на веб-странице, использует SQL Server Compact

### <a name="scenario"></a>Сценарий

При развертывании сайта, использующего SQL Server Compact и страница запускается в развернутом сайте, который обращается к базе данных, отображается следующее сообщение об ошибке:

Отказано в доступе. (Исключение из HRESULT: 0x80070005 (E\_ACCESSDENIED))

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Учетную запись СЕТЕВОЙ службы на сервере должен иметь возможность читать службы SQL Compact собственные двоичные файлы, которые находятся в *bin\amd64* или *bin\x86* папку, но он не имеет разрешения для этих папок. Набор для СЕТЕВОЙ службы на чтение *bin* папки, убедитесь, что предоставить разрешение на вложенные папки.

## <a name="cannot-read-configuration-file-due-to-insufficient-permissions"></a>Не удалось прочитать файл конфигурации из-за недостаточных разрешений

### <a name="scenario"></a>Сценарий

При нажатии кнопки Visual Studio кнопка публикации для развертывания приложения в IIS на локальном компьютере, публикация завершается с ошибкой и **вывода** окне отображается сообщение об ошибке следующего вида:

Произошла ошибка при чтении файла конфигурации IIS «MACHINE/ПЕРЕНАПРАВЛЕНИЯ». Идентификатор этой операцией было... Ошибка: Не удалось прочитать файл конфигурации из-за недостаточных разрешений.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Для использования одним щелчком опубликовать в службах IIS на локальном компьютере, необходимо использовать Visual Studio с правами администратора. Закройте Visual Studio и перезапустите его с разрешениями администратора.

## <a name="could-not-connect-to-the-destination-computer--using-the-specified-process"></a>Не удалось подключиться к целевому компьютеру... С помощью указанного процесса

### <a name="scenario"></a>Сценарий

При нажатии кнопки Visual Studio кнопка публикации для развертывания приложения, публикация завершается с ошибкой и **вывода** окне отображается сообщение об ошибке следующего вида:

[!code-console[Main](troubleshooting/samples/sample3.cmd)]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Прокси-сервер прерывание связи с целевым сервером. С помощью панели управления Windows или в Internet Explorer выберите **обозревателя** и выберите **подключений** вкладки. В **свойства Интернета** диалоговое окно, нажмите кнопку **параметры локальной сети**. В **параметры локальной сети (LAN)** снимите флажок **автоматическое определение параметров** флажок. Нажмите кнопку "Опубликовать".

Если ошибка повторится, обратитесь к системному администратору, чтобы определить, что можно сделать с параметрами прокси-сервера или брандмауэра. Проблема возникает, так как веб-развертывание использует нестандартный порт для развертывания службы веб-управления (8172); для других соединений веб-развертывание использует порт 80. При развертывании стороннего поставщика услуг размещения обычно используется веб-службы управления.

## <a name="default-net-40-application-pool-does-not-exist"></a>По умолчанию .NET 4.0 приложения пул не существует

### <a name="scenario"></a>Сценарий

При развертывании приложения, которое требуется .NET Framework 4, отображается следующее сообщение об ошибке:

Пул приложений .NET 4.0 по умолчанию не существует или не удалось добавить приложение. Убедитесь, что ASP.NET 4.0 установлен на этом компьютере.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

В ASP.NET 4 не установлена в службах IIS. Если сервер, который выполняется развертывание находится на компьютере разработчика, Visual Studio 2010 установлена ASP.NET 4 установлена на компьютере, но не может быть установлен в службах IIS. На сервере, где выполняется развертывание откройте командную строку с повышенными привилегиями и установить ASP.NET 4 в службах IIS, выполнив следующие команды:

[!code-console[Main](troubleshooting/samples/sample4.cmd)]

Кроме того, может потребоваться вручную установить версию .NET Framework по умолчанию пула приложений. Дополнительные сведения см. в учебнике этой серии тестовой среде развертывание в IIS.

## <a name="format-of-the-initialization-string-does-not-conform-to-specification-starting-at-index-0"></a>Формат строки инициализации не соответствует спецификации, начиная с индекса 0.

### <a name="scenario"></a>Сценарий

После развертывания приложения с помощью одного щелчка мыши публикации, при запуске страницы, которая обращается к базе данных получить следующее сообщение об ошибке:

Формат строки инициализации не соответствует спецификации, начиная с индекса 0.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Откройте *Web.config* файл в развернутом узле и проверьте, начинаются ли значения строк подключения с $(ReplacableToken\_, как показано в следующем примере:

[!code-xml[Main](troubleshooting/samples/sample5.xml)]

Если строки подключения будет выглядеть как в следующем примере, измените файл проекта и добавьте следующее свойство в элемент PropertyGroup, для всех конфигураций сборки:

[!code-xml[Main](troubleshooting/samples/sample6.xml)]

Затем повторного развертывания приложения.

## <a name="http-500-internal-server-error"></a>HTTP 500 Внутренняя ошибка сервера

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта без конкретных сведений, причину ошибки, позволяющее определить, появится следующее сообщение об ошибке:

Ошибка HTTP 500 - Внутренняя ошибка сервера.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Существует множество причин ошибок 500, но является одной из возможных причин при использовании этих учебников поместить элемент XML, в том месте, в одном из файлов преобразования Web.config. Например, эта ошибка будет получена при поместить преобразование, которое вставляет &lt;расположение&gt; элемента под &lt;system.web&gt; вместо непосредственно под &lt;конфигурации&gt;. Предварительная версия функции преобразования Web.config можно использовать для проверки корректности преобразования должным образом. Исправьте файл преобразования и повторного развертывания является решение, если преобразование, которое было закодировано неправильно. Если ошибка не очевидно, попробуйте закомментировать преобразований и повторного развертывания, чтобы увидеть, какой из них происходит ошибка 500.

## <a name="http-50021-internal-server-error"></a>HTTP 500.21 Внутренняя ошибка сервера

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта, может появиться следующее сообщение об ошибке:

Ошибка HTTP 500.21 - Внутренняя ошибка сервера. Обработчик «Встроенная PageHandlerFactory» содержит поврежденный модуль «ManagedPipelineHandler» в списке модулей.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Узел развертывания целей ASP.NET 4, но ASP.NET 4 не зарегистрирован в службах IIS на сервере. На сервере откройте командную строку с повышенными привилегиями и зарегистрировать ASP.NET 4, выполнив следующие команды:

[!code-console[Main](troubleshooting/samples/sample7.cmd)]

Кроме того, может потребоваться вручную установить версию .NET Framework по умолчанию пула приложений. Дополнительные сведения см. в учебнике этой серии тестовой среде развертывание в IIS.

## <a name="login-failed-opening-sql-server-express-database-in-appdata"></a>Не удалось выполнить вход открытия экспресс базы данных SQL Server в приложении\_данных

### <a name="scenario"></a>Сценарий

Вам о новостях *Web.config* файла строки подключения, чтобы она указывала на базу данных SQL Server Express в качестве *.mdf* файла в вашей *приложения\_данные* папки и первым время запуска приложения, которые вы видите следующее сообщение об ошибке:

System.Data.SqlClient.SqlException: Не удается открыть базу данных «ИмяБазыДанных», запрашиваемую именем входа. Ошибка входа в систему.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Имя *.mdf* файла не может совпадать с именем любой базы данных SQL Server Express, когда-либо существует на компьютере, даже если вы удалили *.mdf* файл ранее существующей базы данных. Измените имя *.mdf* файл имени, которое никогда не используется в качестве имени базы данных и изменение *Web.config* файл для использования нового имени. В качестве альтернативы можно использовать [SQL Server Management Studio Express](https://www.microsoft.com/download/details.aspx?displaylang=en&amp;id=7593) для удаления существующего ранее SQL Server Express баз данных.

## <a name="model-compatibility-cannot-be-checked"></a>Модель совместимости нельзя проверить

### <a name="scenario"></a>Сценарий

Вам о новостях *Web.config* файл строку подключения для указания в новой базе данных SQL Server Express и при первом запуске приложения вы увидите следующее сообщение об ошибке:

Не удается проверить модель на совместимость, поскольку базы данных не содержит метаданные модели. Убедитесь, что IncludeMetadataConvention добавлено DbModelBuilder соглашения.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Если имя базы данных, поместить в файл Web.config когда-либо использовался прежде, чем на компьютере, базы данных могут существовать с некоторые таблицы в ней. Выберите новое имя, которое не используется на компьютере, прежде чем и изменение *Web.config* в файле для использования этого нового имени базы данных. В качестве альтернативы можно использовать [Express служебной программы SQL Server](https://www.microsoft.com/download/details.aspx?DisplayLang=en&amp;id=3990) или [SQL Server Management Studio Express](https://www.microsoft.com/download/details.aspx?displaylang=en&amp;id=7593) для удаления существующей базы данных.

## <a name="sql-error-when-a-script-attempts-to-create-users-or-roles"></a>Ошибка SQL при попытке создания пользователей или ролей сценария

### <a name="scenario"></a>Сценарий

Вы используете развертывания базы данных, настроенные на **упаковка и публикация SQL** вкладке скрипты SQL, которые выполняются во время развертывания включают команды Create User или Create Role и происходит сбой выполнения сценария при выполнении этих команд. Возможны более подробные сообщения, например следующие:

[!code-console[Main](troubleshooting/samples/sample8.cmd)]

Если эта ошибка возникает при настройке развертывания базы данных в **веб-публикация** мастера, а не **упаковка и публикация SQL** создайте поток в [конфигурации и Развертывание](https://forums.asp.net/26.aspx/1?Configuration+and+Deployment) форум и решение будет добавлен на эту страницу по устранению неполадок.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Учетная запись пользователя, которая использовалась для выполнения развертывания не имеет разрешения на создание пользователей или ролей. Например, назначить базы данных поставщика услуг размещения\_datareader, db\_datawriter и db\_ddladmin ролей для учетной записи пользователя, он устанавливает для вас. Это достаточно для создания большинства объектов базы данных, но не для создания пользователей или ролей. Один из способов избежать этой ошибки является, исключив из развертывания базы данных пользователей и ролей. Это можно сделать, изменив элемент PreSource автоматически созданного скрипта базы данных, чтобы он включал следующие атрибуты:

[!code-console[Main](troubleshooting/samples/sample9.cmd)]

Сведения о том, как изменить элемент PreSource в файле проекта см. в разделе [как: изменение параметров развертывания в файле проекта](https://msdn.microsoft.com/library/ff398069(v=vs.100).aspx). Если пользователи или роли в базе данных разработки должны быть в целевой базе данных, обратитесь в службу поставщика услуг размещения для получения помощи.

## <a name="sql-server-timeout-error-when-running-custom-scripts-during-deployment"></a>Ошибка времени ожидания SQL Server при выполнении скриптов во время развертывания

### <a name="scenario"></a>Сценарий

Вы указали пользовательские сценарии SQL для выполнения во время развертывания и веб-развертывания их, запускаемый истечения интервала ожидания.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

При выполнении нескольких скриптов, имеющих режимы другой транзакции может привести к ошибкам времени ожидания. По умолчанию автоматически создаваемые скрипты запускаются в транзакции, но не пользовательские сценарии. При выборе **данных и (или) схему из существующей базы данных по запросу** параметр **упаковка и публикация SQL** вкладку, и при добавлении пользовательского скрипта SQL, необходимо изменить параметры транзакции некоторых скриптов, чтобы все скрипты используют одинаковые параметры транзакции. Дополнительные сведения см. в разделе [как: развертывание базы данных с проектом веб-приложения](https://msdn.microsoft.com/library/dd465343.aspx).

Если настроены параметры транзакции, таким образом, все же, но по-прежнему получить эту ошибку, возможное решение этой проблемы является запуск скриптов отдельно. В **скриптов базы данных** сетки в **упаковка и публикация** очистить вкладку SQL **Include** флажок для сценария, который приводит к возникновению ошибки времени ожидания, Опубликуйте проект. Затем перейдите обратно в **скриптов базы данных** сетки, выберите этот скрипт **Include** флажок и снимите **Include** флажки для других сценариев. Затем опубликуйте проект. Это время, при публикации выбранного пользовательского скрипта выполняется.

## <a name="stream-data-of-site-manifest-is-not-yet-available"></a>Потоковые данные манифеста сайта еще не доступен

### <a name="scenario"></a>Сценарий

При установке пакета с помощью *deploy.cmd* файла с параметром t (test) вы видите следующее сообщение об ошибке:

Ошибка: Поток данных "sitemanifest/dbFullSql [@path= «C:\TEMP\AdventureWorksGrant.sql']/sqlScript» пока недоступен.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Сообщение об ошибке означает, что команда не удалось сформировать отчет теста. Тем не менее команда может выполняться, если используется параметр y (фактическая установка). Данное сообщение указывает только на проблему при выполнении команды в тестовом режиме.

## <a name="this-application-requires-managedruntimeversion-v40"></a>Для этого приложения требуется ManagedRuntimeVersion версии 4.0

### <a name="scenario"></a>Сценарий

При попытке развертывания отображается следующее сообщение об ошибке:

Пул приложений, который вы пытаетесь использовать имеет значение свойства «managedRuntimeVersion» значение «v2.0». Для этого приложения требуется «v4.0».

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

В ASP.NET 4 не установлена в службах IIS. Если сервер, который выполняется развертывание находится на компьютере разработчика, Visual Studio 2010 установлена ASP.NET 4 установлена на компьютере, но не может быть установлен в службах IIS. На сервере, где выполняется развертывание откройте командную строку с повышенными привилегиями и установить ASP.NET 4 в службах IIS, выполнив следующие команды:

[!code-console[Main](troubleshooting/samples/sample10.cmd)]

## <a name="unable-to-cast-microsoftwebdeploymentdeploymentprovideroptions"></a>Невозможно выполнить приведение типа Microsoft.Web.Deployment.DeploymentProviderOptions

### <a name="scenario"></a>Сценарий

При развертывании пакета, отображается следующее сообщение об ошибке:

Не удалось привести объект типа «Microsoft.Web.Deployment.DeploymentProviderOptions» в «Microsoft.Web.Deployment.DeploymentProviderOptions».

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Вы пытаетесь развернуть из диспетчера служб IIS с помощью веб-развертывания 1.1 интерфейса на сервере, где установлена веб-развертывание 2.0. Если вы используете средства удаленного администрирования IIS для развертывания путем импорта пакета, проверка **новые возможности, доступные** диалоговое окно при установлении соединения. (Это диалоговое окно предназначено может будет отображаться только один раз при первой установке подключения. Чтобы очистить подключение и начать заново, закройте диспетчер IIS и запустить его снова, указав inetmgr/сбросить в командной строке.) Если одна из функций в списке является **развертывание веб-интерфейса пользователя**и он имеет номер версии меньше 8, развертываются на сервере может иметь веб-развертывания установлены версии 1.1 и 2.0. Для развертывания из клиент, имеющий 2.0 установлен, сервер должен иметь только Web Deploy 2.0 установлена. Необходимо связаться с поставщиком услуг размещения для решения этой проблемы.

## <a name="unable-to-load-the-native-components-of-sql-server-compact"></a>Не удается загрузить собственные компоненты для SQL Server Compact

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта, может появиться следующее сообщение об ошибке:

Не удалось загрузить собственные компоненты для SQL Server Compact соответствующий поставщик ADO.NET версии 8482. Установите правильную версию SQL Server Compact. См. в статье БАЗЫ знаний 974247 для получения дополнительных сведений.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Развернутые сайт не имеет *amd64* и *x86* подпапки с сборки в машинном коде в их в приложения *bin* папки. На компьютере с SQL Server Compact установлена, машинные сборки находятся в *C:\Program Files\Microsoft SQL Server Compact Edition\v4.0\Private*. Чтобы получить нужные файлы в нужных папках в проекте Visual Studio рекомендуется установить пакет NuGet SqlServerCompact. Установка пакета добавляет скрипт после построения, чтобы скопировать сборки в машинном коде в *amd64* и *x86*. Чтобы они должны быть развернуты тем не менее, необходимо вручную включить их в проект. Дополнительные сведения см. в разделе [развертывание SQL Server Compact](../../older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) учебника.

## <a name="path-is-not-valid-error-after-deploying-an-entity-framework-code-first-application"></a>Ошибка «Недопустимый путь» после развертывания приложения Entity Framework Code First

### <a name="scenario"></a>Сценарий

При развертывании приложения, использующий Entity Framework Code First Migrations и СУБД, такие как SQL Server Compact, который сохраняет свою базу данных в файл в приложении\_папки данных. У вас есть Code First Migrations настроен для создания базы данных после первого развертывания. При запуске приложения вы получаете сообщение об ошибке, как в следующем примере:

Путь не является допустимым. Проверьте каталог для базы данных. [Path = c:\inetpub\wwwroot\App\_Data\DatabaseName.sdf ]

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Код сначала предпринимается попытка создать базы данных, но приложение\_данных папка не существует. Либо не указаны файлы *приложения\_данные* папку при развертывании или выбранных **исключить приложения\_данные** на **Пакет/Публикация веб-сайта** диалогового окна свойств проекта. Процесс развертывания не создайте папку на сервере, если нет файлов в папке для копирования на сервер. Если уже имеется Настройка узла базы данных, процесс развертывания будут удалены файлы и *приложения\_данные* папку, если вы выбрали **удалить дополнительные файлы в месте назначения** в профиль публикации. Устранить неполадки, поместить файл-заполнитель, например TXT-файла в *приложения\_данные* папки, убедитесь, что у вас **исключить приложения\_данные** выбран и повторного развертывания.

## <a name="com-object-that-has-been-separated-from-its-underlying-rcw-cannot-be-used"></a>«Нельзя использовать COM-объект, который был отделен от своего базового RCW.»

### <a name="scenario"></a>Сценарий

Вы успешно созданы с помощью одного щелчка мыши публикации для развертывания приложения и затем запустить получение ошибки:

Не удалось выполнить задачу Web deploy. (Не удалось выполнить запрос URL-адреса удаленного агента "<https://serverurl.com/msdeploy.axd?site=sitename>".)  
 Не удалось выполнить запрос URL-адреса удаленного агента "<https://url/msdeploy.axd?site=sitename>".  
Запрос был прерван: запрос был отменен.  
COM-объект, который был отделен от своего базового RCW, не может использоваться.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Закрытие и перезапустите Visual Studio обычно является все, что необходимо для устранения этой ошибки.

## <a name="deployment-fails-because-user-credentials-used-for-publishing-dont-have-setacl-authority"></a>Развертывание завершается сбоем из-за пользователя учетные данные используются для публикации нет setACL центр

### <a name="scenario"></a>Сценарий

Публикации завершится с ошибкой, указывающей, вы не обладают правами задать разрешения на папки (учетная запись пользователя, которую вы используете не имеет полномочия setACL).

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию Visual Studio задает разрешения для корневой папки сайта разрешения чтения и записи в приложении\_папки данных. Если вы знаете, что указаны правильные разрешения по умолчанию для папки сайта и не требуется задать, это поведение можно отключить, добавив **&lt;назначения IncludeSetACLProviderOn&gt;False&lt;/ IncludeSetACLProviderOnDestination&gt;** файл профиля публикации (устанавливаемого в одном профиле) или файл wpp.targets (чтобы влияет на все профили). Сведения о редактировании этих файлов см. в разделе [как: изменение параметров развертывания в файлах профиля (.pubxml)](https://msdn.microsoft.com/library/ff398069.aspx).

## <a name="access-denied-errors-when-the-application-tries-to-write-to-an-application-folder"></a>Когда приложение пытается выполнить запись в папку приложения, ошибок отказа в доступе

### <a name="scenario"></a>Сценарий

Ошибки приложения при попытке создания или изменения файла в одной из папок приложения, так как он не имеет полномочий на запись для этой папки.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

По умолчанию Visual Studio задает разрешения для корневой папки сайта разрешения чтения и записи в приложении\_папки данных. Если приложению требуется доступ на запись к вложенной папке, можно задать разрешения для этой папки, как показано в задании разрешений для папок и развертывание на учебники рабочей среде, в этой серии. Если приложению требуется доступ на запись к корневой папке сайта, необходимо предотвратить доступ только для чтения установлен на корневую папку путем добавления **&lt;назначения IncludeSetACLProviderOn&gt;False&lt;/ IncludeSetACLProviderOnDestination&gt;** файл профиля публикации (устанавливаемого в одном профиле) или файл wpp.targets (чтобы влияет на все профили). Сведения о редактировании этих файлов см. в разделе [как: изменение параметров развертывания в файлах профиля (.pubxml)](https://msdn.microsoft.com/library/ff398069.aspx).

<a id="aspnet45error"></a>

## <a name="configuration-error---targetframework-attribute-references-a-version-that-is-later-than-the-installed-version-of-the-net-framework"></a>Ошибка конфигурации - атрибут targetFramework ссылается на версию, которая является более поздней, чем установленная версия платформы .NET Framework

### <a name="scenario"></a>Сценарий

Успешно опубликован веб-проекта, предназначенного для ASP.NET 4.5, но при запуске приложения (с режимом customErrors в «off» в файле Web.config), возникнет следующая ошибка:

Атрибут targetFramework &lt;компиляции&gt; элемент файла Web.config используется только для целевой версии 4.0 и более поздней версии платформы .NET Framework (например, "&lt;компиляции targetFramework = «4.0»&gt;'). Атрибут «targetFramework» в настоящее время ссылается на версию, которая является более поздней, чем установленная версия платформы .NET Framework. Укажите допустимый целевой версии платформы .NET Framework или установите необходимую версию платформы .NET Framework.

Поле источника ошибки страницы ошибки перечислены следующие строки из файла Web.config как причина ошибки:

&lt;Компиляция targetFramework = «4.5» /&gt;

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Сервер не поддерживает ASP.NET 4.5. Обратитесь к поставщику услуг, чтобы определить, когда и можно ли добавить поддержку для ASP.NET 4.5. Если обновление сервера не подходит, необходимо развернуть веб-проекта, предназначенного для ASP.NET 4 или более ранней версии вместо нее.

Если в одно назначение развертывания ASP.NET 4 или более ранних веб-проекта, выберите **удалить дополнительные файлы в месте назначения** флажок на **параметры** вкладке **веб-публикация**мастера. Если вы не выбрали **удалить дополнительные файлы в месте назначения**, можно перейти на страницу ошибки конфигурации.

Проект **свойства** windows включает Target framework раскрывающегося списка, но не устраняет эту проблему, просто изменив, из **.NET Framework 4.5** для **платформы.NETFramework4**. Если изменить целевую платформу на более ранней версии framework, проект будет по-прежнему иметь ссылки на сборки в более поздней версии framework и не будет выполняться. Необходимо вручную изменить эти ссылки или создайте новый проект, в платформе .NET Framework 4 или более ранней версии. Дополнительные сведения см. в разделе [.NET Framework для различных версий для веб-сайтов](https://msdn.microsoft.com/library/bb398791(v=vs.100).aspx).

## <a name="medium-trust-errors"></a>Ошибки среднего уровня доверия

### <a name="scenario"></a>Сценарий

При запуске приложения в производственной среде, он получает ошибка, связанная с среднего уровня доверия.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Многие сторонние поставщики услуг размещения запуска веб-узла со средним уровнем доверия, который означает, что он не может сделать следующее. Например код приложения не может получить доступ к реестру Windows и не удается прочесть или записывать файлы, которые находятся вне иерархии папок приложения. По умолчанию приложение запускается *полное доверие* на локальном компьютере, что означает, что приложение можно попытаться выполнить действия, которые будут выполнены при развертывании в рабочей среде.

Можно настроить приложение для запуска на среднем уровне доверия в локальной среде IIS для устранения неполадок. Чтобы сделать это, откройте приложение *Web.config* и добавьте **доверия** элемент в **system.web** элемента, как показано в следующем примере.

[!code-xml[Main](troubleshooting/samples/sample11.xml)]

Приложение будет работать со средним уровнем доверия в службах IIS даже на локальном компьютере.

Не используйте его, если выполняется развертывание службы приложений Azure, поскольку Azure не требует среднего уровня доверия. Во время этого учебника записывается в февраля 2012 г. с помощью этого метода для запуска приложения на среднем уровне доверия приведет к ошибке в Azure.

При использовании Entity Framework Code First Migrations и развертываются на поставщика услуг размещения выполнения приложения со средним уровнем доверия, убедитесь в том, что версии 5.0 или более поздней версии. В Entity Framework версии 4.3 миграции требует полного доверия, чтобы обновить схему базы данных.

## <a name="http-40417-not-found-error"></a>Ошибка HTTP 404.17 не найдена

### <a name="scenario"></a>Сценарий

При запуске развернутого сайта на компьютере разработчика, в службах IIS, может появиться следующее сообщение об ошибке, сообщение о том, что серверу не удается обработать файл Default.aspx:

Ошибка HTTP 404.17 - не найдено

Содержимое запроса является сценарием и не обрабатывается обработчиком статических файлов.

### <a name="possible-cause-and-solution"></a>Возможная причина и решение

Возможно, ASP.NET 4.5 не установлена на компьютере. См. в развертывание в IIS как учебник тестовой среды, объясняется, как установить ASP.NET 4.5 в этой серии.

> [!div class="step-by-step"]
> [Назад](deploying-extra-files.md)
