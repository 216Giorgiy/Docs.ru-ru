---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-production
title: "ASP.NET веб-развертывания с помощью Visual Studio: развертывание в рабочей среде | Документы Microsoft"
author: tdykstra
description: "Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, Пол..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/15/2013
ms.topic: article
ms.assetid: 416438a1-3b2f-4d27-bf53-6b76223c33bf
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-production
msc.type: authoredcontent
ms.openlocfilehash: 2c49e7f6925b1ca172642747c5052ba97d70d036
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2018
---
<a name="aspnet-web-deployment-using-visual-studio-deploying-to-production"></a>ASP.NET веб-развертывания с помощью Visual Studio: развертывание в рабочей среде
====================
По [Tom Dykstra](https://github.com/tdykstra)

[Загрузите начальный проект](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> Этот учебник ряд показано развертывание ASP.NET (публикации) веб-приложения для веб-приложениях службы приложений Azure или стороннего поставщика услуг размещения, с помощью Visual Studio 2012 или Visual Studio 2010. Сведения о последовательности см. в разделе [в первом учебнике ряда](introduction.md).


## <a name="overview"></a>Обзор

В этом учебнике настроить учетную запись Microsoft Azure, Создание промежуточной и производственной средах и развертывании веб-приложения ASP.NET в промежуточном и рабочих сред с помощью Visual Studio одним щелчком публикации компонента.

При желании можно развернуть стороннего поставщика услуг размещения. Большинство процедур, описанных в этом учебнике одинаковы для поставщика услуг размещения или Azure, за исключением того, каждый поставщик имеет свой собственный пользовательский интерфейс для управления учетной записи и веб-сайта. Можно найти поставщика услуг размещения в [коллекции поставщиков](https://www.microsoft.com/web/hosting) на веб-сайте Microsoft.com.

Напоминание: Если вы получаете сообщение об ошибке или что-то не работает, как пройти учебник, обязательно обратитесь к странице Устранение неполадок в данной серии учебных курсов.

## <a name="get-a-microsoft-azure-account"></a>Получить учетную запись Microsoft Azure

Если у вас еще нет учетной записи Azure, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [бесплатная пробная версия](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).

## <a name="create-a-staging-environment"></a>Создать промежуточную среду

> [!NOTE]
> С момента этого учебника была написана, службе приложений Azure добавлен новый компонент для автоматизировать многие процессы для создания промежуточной и производственной средах. В разделе [Настройка промежуточных сред для веб-приложений в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-staged-publishing/).


Как описано в статье [Развернуть Учебник тестовая среда,](deploying-to-iis.md), наиболее надежный тестовой среды является веб-сайте поставщика услуг размещения, как рабочем веб-узле. Во многих поставщиков услуг размещения необходимо взвесить преимущества этого к значительным расходам дополнительных, но в Azure можно создать Дополнительные бесплатные веб-приложение в качестве промежуточного приложения. Необходимо настроить базу данных, а также дополнительные расходы для этого по затрат на рабочей базы данных будут ни одна или минимальным. В Azure оплачивается объема хранилища базы данных, которые можно использовать, а не для каждой базы данных и объем дополнительного хранилища, который будет использоваться в промежуточной будет минимальным.

Как описано в статье [развернуть в тестовой среде Учебник](deploying-to-iis.md), а в промежуточной и производственной сред, которые планируется развернуть двух баз данных в одну базу данных. Если вы хотите сохранить их отдельно, процесс останется прежним, за исключением того, необходимо создать дополнительные базы данных для каждой среды и выбирается строка правильный назначения для каждой базы данных при создании профиля публикации.

В этом разделе учебника вы создадите веб-приложения и базы данных для промежуточной среды и ее будет развернуть в промежуточной и тестировать существует до создания и развертывания в рабочей среде.

> [!NOTE]
> Ниже показано, как создать веб-приложения в службе приложений Azure с помощью портала управления Azure. В последней версии пакета Azure SDK также это можно сделать, не выходя из Visual Studio с помощью обозревателя серверов. В Visual Studio 2013 также можно создать веб-приложения непосредственно из диалогового окна публикации. Дополнительные сведения см. в разделе [создать веб-приложение ASP.NET в службе приложений Azure.](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet)


1. В [портала управления Azure](https://manage.windowsazure.com/), нажмите кнопку **веб-сайтов**, а затем нажмите кнопку **New**.
2. Нажмите кнопку **веб-сайт**, а затем нажмите кнопку **настраиваемое создание**.

    **Новый веб-узел - настраиваемое создание** откроется мастер. **Настраиваемое создание** мастер позволяет создавать веб-сайта и базы данных, в то же время.
3. В **создать веб-сайт** шаг мастера введите строку в **URL-адрес** поле для использования в качестве уникальный URL-адрес для вашего приложения в промежуточной среде. Например введите ContosoUniversity-staging123 (включая случайных чисел в конце, чтобы сделать его уникальным в случае, если берется ContosoUniversity промежуточной).

    Полный URL-адрес будет состоять из, вводимая здесь и суффикса, которое будет отображаться рядом с текстовым полем.
4. В **область** раскрывающегося списка выберите регион, ближайший к вам.

    Этот параметр указывает каком веб-приложение будет выполняться в центре обработки данных.
5. В **базы данных** раскрывающегося списка выберите **создать новую базу данных SQL**.
6. В **имя строки соединения DB** оставьте значение по умолчанию *DefaultConnection*.
7. Щелкните стрелку, указывающую справа внизу окна.

    На следующем рисунке показана **создать веб-сайт** диалоговое окно с образцы значений в нем. URL-адрес и регион, который введен будет отличаться.

    ![Создать шаг веб-сайта](deploying-to-production/_static/image1.png)

    В мастере открывается **указать параметры базы данных** шаг.
8. В **имя** введите *ContosoUniversity* плюс случайное число, чтобы сделать уникальным, например *ContosoUniversity123*.
9. В **сервера** выберите **новый сервер базы данных SQL**.
10. Введите имя и пароль администратора.

    Не ввода существующих имя и пароль для этой учетной записи. Вводите новое имя и пароль, который вы определяете для последующего использования при доступе к базе данных.
11. В **область** выберите том же регионе, выбранное для веб-приложения.

    Поддержание веб-сервером и сервером базы данных в том же регионе обеспечивает наилучшую производительность и сводит к минимуму расходы.
12. Щелкните значок галочки в нижней части используется для указания, что по завершении вы сможете.

    На следующем рисунке показана **указать параметры базы данных** диалоговое окно с образцы значений в нем. Значения, которое вы ввели могут быть другими.

    ![Шаг настройки базы данных создайте новый веб-узел - с помощью мастера баз данных](deploying-to-production/_static/image2.png)

    На портале управления возвращается на страницу веб-сайтов и **состояние** столбец показывает, что создается веб-приложения. Через некоторое время (обычно меньше, чем через минуту) **состояние** столбец показывает, что веб-приложения успешно создан. На панели навигации слева отображается число веб-приложений в вашей учетной записи имеется рядом с **веб-сайтов** значок и число баз данных отображается рядом с **баз данных SQL** значок.

    ![Страницы веб-сайты портала управления, веб-сайт создан](deploying-to-production/_static/image3.png)

    Имя вашего веб-приложения будет отличаться от примера приложения на рисунке.

## <a name="deploy-the-application-to-staging"></a>Развертывание приложения в промежуточной

Теперь, когда вы создали веб-приложения и базы данных для промежуточной среды, чтобы его можно развернуть проект.

> [!NOTE]
> Эти инструкции показано, как создать профиль публикации, загрузив *.publishsettings* файла, но также работает не только для Azure для сторонних поставщиков услуг размещения. Последнюю версию пакета SDK для Azure также позволяет напрямую подключаться к Azure из Visual Studio и выберите из списка веб-приложений, которые у вас есть учетная запись Azure. В Visual Studio 2013, можно войти в Azure из **веб-публикация** диалогового окна или из **обозревателя серверов** окна. Дополнительные сведения см. в разделе [создать веб-приложение ASP.NET в службе приложений Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).


### <a name="download-the-publishsettings-file"></a>Загрузите файл PUBLISHSETTINGS

1. Щелкните имя веб-приложения, который вы только что создали.

    ![Выберите сайт, чтобы перейти к панели мониторинга](deploying-to-production/_static/image4.png)
2. В разделе **быстрый обзор** в **мониторинга** щелкните **загрузить профиль публикации**.

    ![Профиль публикации ссылка для загрузки](deploying-to-production/_static/image5.png)

    На этом шаге загружается файл, содержащий все параметры, необходимые для развертывания приложения на веб-приложения. Этот файл будет импортировать в Visual Studio, поэтому не нужно вручную ввести эти данные.
3. Сохранить *.publishsettings* файл в папке, которую можно открыть из Visual Studio.

    ![Сохранение файла PUBLISHSETTINGS](deploying-to-production/_static/image6.png)

    > [!WARNING]
    > Безопасность — *.publishsettings* файл содержит учетные данные (Незакодированные), которые используются для администрирования подписки Azure и служб. Рекомендациям по безопасности для этого файла требуется временно сохранить за пределами исходных каталогов (например, в папке Libraries\Documents), а затем удалите его после завершения операции импорта. Злоумышленник, получивший доступ к *.publishsettings* файл можно изменять, создавать и удалять служб Azure.

### <a name="create-a-publish-profile"></a>Создание профиля публикации

1. В Visual Studio щелкните правой кнопкой мыши проект ContosoUniversity в **обозревателе решений** и выберите **публикации** в контекстном меню.

    **Веб-публикация** откроется мастер.
2. Нажмите кнопку **профиль** вкладки.
3. Нажмите кнопку **Импортировать**.
4. Перейдите к *.publishsettings* ранее загруженный файл и нажмите кнопку **откройте**.

    ![Диалоговое окно публикации параметров импорта](deploying-to-production/_static/image7.png)
5. В **подключения** щелкните **проверить подключение** чтобы убедиться в том, что настройки указаны верно.

    После проверки подключения отображается рядом с зеленой галочкой **проверить подключение** кнопки.

    Для некоторых поставщиков услуг размещения, при нажатии кнопки **проверить подключение**, может появиться **ошибка сертификата** диалоговое окно. В противном случае убедитесь, что имя сервера указано как ожидалось. Если имя сервера указано правильно, выберите **сохранить сертификат для будущих сеансов Visual Studio** и нажмите кнопку **Accept**. (Эта ошибка означает, что избежать затрат на приобретение SSL-сертификат для URL-адрес, который выполняется развертывание выбрала поставщика услуг размещения. При желании установить безопасное подключение с использованием действительного сертификата, обратитесь к поставщику услуг размещения.)
6. Нажмите кнопку **Далее**.

    ![значок успешного подключения и "Далее" на вкладке Подключение](deploying-to-production/_static/image8.png)
7. В **параметры** , раскройте **параметры публикации файлов**, а затем выберите **исключить файлы из приложения\_папки данных**.

    Сведения о других параметрах в **параметры публикации файлов**, в разделе [развертывание в IIS](deploying-to-iis.md) учебника. На снимке экрана, показывает результат этого шага и следующие действия по настройке базы данных находится в конце действия по настройке базы данных.
8. В разделе **DefaultConnection** в **баз данных** статьи, настройте развертывание базы данных для базы данных членства.
9. 1. Выберите **обновление базы данных**.

        **Строку подключения к удаленному** поле непосредственно под **DefaultConnection** содержит строку подключения из файла PUBLISHSETTINGS. Строка подключения содержит учетные данные SQL Server, которые хранятся в виде обычного текста в *.pubxml* файла. Если вы предпочитаете не храните их там без возможности восстановления, можно удалить их из профиля публикации после развертывания базы данных и хранить их в Azure. Дополнительные сведения см. в разделе [как безопасность ASP.NET базы данных строки подключения при развертывании в Azure из источника](http://www.hanselman.com/blog/HowToKeepYourASPNETDatabaseConnectionStringsSecureWhenDeployingToAzureFromSource.aspx) Скотт Хансельман блога.
    2. Нажмите кнопку **настроить обновление базы данных**.
    3. В **Настройка обновления базы данных** диалоговое окно, нажмите кнопку **добавить скрипт SQL**.
    4. В **добавить скрипт SQL** перейдите к *aspnet данных prod.sql* скрипт, сохраненный ранее в папке решения и нажмите кнопку **откройте**.
    5. Закрыть **Настройка обновления базы данных** диалоговое окно.
10. В разделе **SchoolContext** в **баз данных** выберите **выполнять миграции Code First (запускается при запуске приложения)**.

    Visual Studio отображает **выполнять миграции Code First** вместо **обновление базы данных** для `DbContext` классы. Если вы хотите использовать поставщик dbDacFx вместо миграции для развертывания базы данных, можно получить доступ с помощью `DbContext` см. в описании [как развернуть базу данных Code First без миграции?](https://msdn.microsoft.com/en-us/library/ee942158.aspx#deploy_code_first_without_migrations) в Web часто задаваемые вопросы развертывания для Visual Studio и ASP.NET на сайте MSDN.

    **Параметры** вкладка теперь выглядит как в следующем примере:

    ![Вкладка "Параметры" для промежуточного хранения](deploying-to-production/_static/image9.png)
11. Выполните следующие действия, чтобы сохранить профиль и переименуйте его в *промежуточной*:

    1. Нажмите кнопку **профиль** , а затем щелкните **Управление профилями**.
    2. Импорт созданы два новых профилей, один для FTP-сервера и один для веб-развертывания. Настроить профиль веб-развертывания: переименовать этот профиль для *промежуточной*.

        ![Переименование профиля для промежуточного хранения](deploying-to-production/_static/image10.png)
    3. Закрыть **редактировать профили публикации Web** диалоговое окно.
    4. Закрыть **веб-публикация** мастера.

### <a name="configure-a-publish-profile-transform-for-the-environment-indicator"></a>Настройка преобразования профиля публикации для индикатора среды

> [!NOTE]
> В этом разделе показано, как настроить преобразование файла Web.config для индикатора среды. Поскольку индикатор располагается в `<appSettings>` элемент, у вас есть другой способ для указания преобразование при развертывании службы приложения Azure. Дополнительные сведения см. в разделе [параметры файла Web.config, указав в Azure](web-config-transformations.md#watransforms).


1. В **обозревателе решений**, разверните **свойства**, а затем разверните **PublishProfiles**.
2. Щелкните правой кнопкой мыши *Staging.pubxml*, а затем нажмите кнопку **добавить преобразования конфигурации**.

    ![Добавьте преобразование конфигурации для промежуточного хранения](deploying-to-production/_static/image11.png)

    Visual Studio создает *Web.Staging.config* файла преобразования и открывает его.
3. В *Web.Staging.config* файл преобразования, вставьте следующий код сразу после открывающего `configuration` тег.

    [!code-xml[Main](deploying-to-production/samples/sample1.xml)]

    При использовании промежуточной профиль публикации, это преобразование задает среды индикатора для «Prod». В развернутом веб-приложение вы не увидите любой суффикс, например «(Dev)» или «(Test)» после заголовка H1 «Университета Contoso».
4. Щелкните правой кнопкой мыши *Web.Staging.config* файла и нажмите кнопку **преобразования предварительного просмотра** важно убедиться, что преобразование коде дает ожидаемые изменения.

    **Web.config Preview** окне отображается результат применения обоих *Web.Release.config* преобразует и *Web.Staging.config* преобразования.

### <a name="prevent-public-use-of-the-test-app"></a>Запретить использование общих тестового приложения

Важный аспект для промежуточного приложения — что оно станет доступно в Интернете, но вы не хотите пользоваться его. Чтобы свести к минимуму вероятность того, что люди найдет и использовать его, можно использовать один или несколько из следующих методов:

- Задать правила брандмауэра, разрешающие доступ к промежуточного приложения только из IP-адреса, используемые для тестирования, промежуточного хранения.
- Используйте запутывание URL-адрес, который невозможно выполнить пробное.
- Создание *robots.txt* файл, чтобы убедиться, что поисковые системы не будет обходить тестирования приложения и отчетов ссылки на него в результатах поиска.

Первый из этих методов является наиболее эффективным, но не освещены в учебнике, так как это требует развертывания в Azure облачную службу вместо службы приложений Azure. Дополнительные сведения об облачных службах и ограничения IP-адресов в Azure см. в разделе [вычислений размещение, предоставляемые Azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-choose-me) и [блок определенных IP-адресов от доступа к веб-роли](https://msdn.microsoft.com/en-us/library/windowsazure/jj154098.aspx). При развертывании стороннего поставщика услуг размещения, обратитесь к поставщику, чтобы узнать, как реализовать ограничения IP-адресов.

В этом учебнике вы создадите *robots.txt* файла.

1. В **обозревателе решений**, щелкните правой кнопкой мыши проект ContosoUniversity и нажмите кнопку **Добавление нового элемента**.
2. Создайте новый **текстовый файл** с именем *robots.txt*и поместить в него следующий текст:

    [!code-console[Main](deploying-to-production/samples/sample2.cmd)]

    `User-agent` Укажет поисковые системы, в файле правила применяются все search engine поисковые (роботов) и `Disallow` строка указывает, следует для обхода нет страниц на сайте.

    Вы хотите поисковые системы для создания каталога на рабочее приложение, поэтому необходимо исключить этот файл из рабочего развертывания. Для выполнения, следует настроить профиль публикации параметр в рабочей среде, при ее создании.

### <a name="deploy-to-staging"></a>Развертывание для промежуточного хранения

1. Откройте **веб-публикация** мастера, щелкнув правой кнопкой мыши проект Contoso университета команду **публикации**.
2. Убедитесь, что **промежуточной** выбран профиль.
3. Нажмите кнопку **Опубликовать**.

    **Вывода** окно показывает выполненные действия развертывания и сообщает успешного завершения развертывания. По умолчанию автоматически откроется в браузере URL-адрес развернутой веб-приложения.

## <a name="test-in-the-staging-environment"></a>Тестирование в среде промежуточного хранения

Обратите внимание, что индикатор среды не существует (отсутствует «(тест)» или «(Dev)» после заголовком H1, который показывает, что *Web.config* успешно преобразование для индикатора среды.

![Домашняя страница промежуточного хранения](deploying-to-production/_static/image12.png)

Запустите **учащихся** страницу, чтобы убедиться, что развернутая база данных имеет не учащихся.

Запустите **инструкторов** страницу, чтобы убедиться, что Code First заполнена данными инструктора базы данных:

Выберите **добавьте учащихся** из **учащихся** меню, добавить студент, а затем просмотрите нового студента в **учащихся** страницу, чтобы убедиться, что вы успешно может записывать в базу данных .

Из **курсы** щелкните **обновление кредиты**. **Обновления кредиты** страницы требуются разрешения администратора, поэтому **входа в** отображается страница. Введите учетные данные учетной записи администратора, созданную ранее («admin» и «prodpwd»). **Обновление кредиты** отображается страница, проверяет, что учетная запись администратора, созданную в предыдущем учебнике правильно была развернута в тестовую среду.

Недопустимый URL-адрес ошибки, отслеживать ELMAH и запросите ELMAH отчет об ошибке запроса. При развертывании стороннего поставщика услуг размещения, скорее всего, обнаружится, по той же причине, существовавшее в предыдущем учебнике пустой отчет будет пуст. Необходимо использовать средства управления поставщика услуг размещения учетная запись для настройки разрешений на папки для включения ELMAH на запись в папку журнала.

Созданное приложение теперь работает в облаке веб-приложения, так же, как будет использовать для рабочей среды. Так как все работает правильно, следующим шагом является развертывание в рабочей среде.

## <a name="deploy-to-production"></a>Развертывание в рабочей среде

Для создания рабочего веб-приложения и развертывания в рабочей среде выполняется так же, как промежуточной, за исключением того, чтобы исключить *robots.txt* из развертывания. Для этого требуется изменить файл профиля публикации.

### <a name="create-the-production-environment-and-the-production-publish-profile"></a>Создание рабочей среды и производства профиль публикации

1. Создание рабочего веб-приложения и базы данных в Azure, таким же способом, который использовался для промежуточного хранения.

    При создании базы данных, можно перевести его на том же сервере, который был создан ранее, или создание нового сервера.
2. Загрузить *.publishsettings* файла.
3. Создайте профиль публикации, импортировав производства *.publishsettings* файл с таким же способом, который использовался для промежуточного хранения.

    Не забудьте настроить скрипт развертывания данных в группе **DefaultConnection** в **баз данных** раздел **параметры** вкладки.
4. Переименование профиля публикации для *рабочей*.
5. Настройка преобразования профиля публикации для индикатора среды, ту же процедуру, которая использовалась для промежуточного хранения...

### <a name="edit-the-pubxml-file-to-exclude-robotstxt"></a>Изменить pubxml-файл, чтобы исключить robots.txt

Опубликовать профиль, именование файлов &lt;profilename&gt;*.pubxml* и находятся в *PublishProfiles* папки. *PublishProfiles* осуществляется в папку *свойства* проекта папку в веб-приложение C#, в разделе *Мой проект* папки в проект VB веб-приложения или в разделе *Приложения\_данные* папки в проекте веб-приложения. Каждый *.pubxml* файл содержит параметры, которые применяются к одному профиль публикации. В этих файлах хранятся значения, введенные в мастере публикации веб-сайта, и их можно создать или изменить параметры, которые не являются доступными в пользовательском Интерфейсе Visual Studio можно изменять.

По умолчанию *.pubxml* файлы будут включены в проект при создании профиля публикации, но их можно исключить из проекта Visual Studio по-прежнему использовать их. Visual Studio выполняет поиск в *PublishProfiles* папку для *.pubxml* файлы, независимо от того, включены ли они в проекте.

Для каждого *.pubxml* файла есть *. pubxml.user* файл. *. Pubxml.user* файл содержит зашифрованный пароль, если вы выбрали **сохранить пароль** параметр и по умолчанию, он будет исключен из проекта.

Объект *.pubxml* файл содержит параметры, относящиеся к профилю публикации определенных. Если вы хотите настроить параметры, которые применяются для всех профилей, можно создать *. wpp.targets* файл. Процесс построения импортирует эти файлы в *.csproj* или *.vbproj* файл проекта, поэтому большинство параметров, которые можно настроить в файле проекта может быть настроена в этих файлах. Дополнительные сведения о *.pubxml* файлы и *. wpp.targets* файлов, в разделе [как: изменение параметров развертывания в файлы профилей публикации (.pubxml) и. wpp.targets файл в Visual Studio Веб-проекты](https://msdn.microsoft.com/en-us/library/ff398069.aspx).

1. В **обозревателе решений**, разверните **свойства** и разверните **PublishProfiles**.
2. Щелкните правой кнопкой мыши *Production.pubxml* и нажмите кнопку **откройте**.

    ![Откройте pubxml-файл](deploying-to-production/_static/image13.png)
3. Щелкните правой кнопкой мыши *Production.pubxml* и нажмите кнопку **откройте**.
4. Добавьте следующие строки непосредственно перед закрывающим тегом `PropertyGroup` элемента:

    [!code-xml[Main](deploying-to-production/samples/sample3.xml)]

    Pubxml-файл, теперь выглядит как в следующем примере:

    [!code-xml[Main](deploying-to-production/samples/sample4.xml?highlight=18-20)]

    Дополнительные сведения о том, как исключить файлы и папки в разделе [можно ли исключить определенные файлы или папки из развертывания?](https://msdn.microsoft.com/en-us/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment) в **часто задаваемые вопросы развертывания Web для Visual Studio и ASP.NET** на сайте MSDN.

### <a name="deploy-to-production"></a>Развертывание в рабочей среде

1. Откройте **веб-публикация** мастера убедитесь, что **рабочей** профиль публикации выбран и нажмите кнопку **начать просмотр** на **предварительного просмотра**вкладку, чтобы убедиться, что *robots.txt* не будет скопировать файл к рабочему приложению.

    ![Просмотр файлов, которые будут публиковаться в рабочей среде](deploying-to-production/_static/image14.png)

    Просмотрите список файлов, которые будут скопированы. Вы увидите, что все *.cs* файлы, включая *. aspx.cs*, *. aspx.designer.cs*, *Master.cs*, и  *Master.Designer.cs* файлы пропускаются. Весь этот код был скомпилирован в *ContosoUniversity.dll* и *ContosUniversity.pdb* файлы, которые можно найти в *bin* папки. Так как только *.dll* необходимые для выполнения приложения и указанный ранее должны развертываться только файлы, необходимые для запуска приложения, то никакие *.cs* файлы были скопированы в пункт назначения Среда. *Obj* папки и *ContosoUniversity.csproj* и *. csproj.user* файлы пропускаются по той же причине.

    Нажмите кнопку **публикации** для развертывания в рабочей среде.
2. Тестирование в рабочей среде, ту же процедуру, использованный для промежуточного хранения.

    Все, что идентична промежуточного хранения, за исключением URL-адрес и отсутствие *robots.txt* файла.

## <a name="summary"></a>Сводка

Теперь успешно развернут и тестирование веб-приложения и становится доступным публично через Интернет.

![Домашняя страница производства](deploying-to-production/_static/image15.png)

В следующем уроке будет обновить код приложения и развернуть изменения для тестирования, промежуточного хранения и рабочей среды.

> [!NOTE]
> Приложение во время использования в рабочей среде следует реализация плана восстановления. Т. е вы должны периодически резервное копирование баз данных из рабочего приложения безопасное хранилище, и необходимо сохранение нескольких поколений таких резервных копий. При обновлении базы данных, следует сделать резервную копию из непосредственно перед изменением. Затем Если допущена ошибка и не обнаружит его до, после его развертывания в рабочей среде, по-прежнему можно восстановление базы данных в состояние, в котором она находилась до его был поврежден. Дополнительные сведения см. в разделе [резервной копии базы данных SQL Azure и восстановление](https://msdn.microsoft.com/en-us/library/windowsazure/jj650016.aspx).


> [!NOTE]
> В этом учебнике SQL Server выпуска, который выполняется развертывание является база данных SQL Azure. Пока процесс развертывания сходен с другими выпусками SQL Server, реальные производственного приложения может потребоваться специального кода для базы данных SQL Azure в некоторых сценариях. Дополнительные сведения см. в разделе [работа с базой данных SQL Azure](../../../../whitepapers/aspnet-data-access-content-map.md#ssdb) и [Выбор между SQL Server и базы данных SQL Azure](../../../../whitepapers/aspnet-data-access-content-map.md#ssdbchoosing).

>[!div class="step-by-step"]
[Назад](setting-folder-permissions.md)
[Вперед](deploying-a-code-update.md)
