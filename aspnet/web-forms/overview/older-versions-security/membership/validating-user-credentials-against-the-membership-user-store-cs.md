---
uid: web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
title: Проверка учетных данных пользователя в хранилище данных членства пользователя (C#) | Документы Microsoft
author: rick-anderson
description: В этом учебнике мы рассмотрим, как для проверки учетных данных пользователя в хранилище пользователя членства, с помощью программных средств и управления входом...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: 61aa4e08-aa81-4aeb-8ebe-19ba7a65e04c
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/validating-user-credentials-against-the-membership-user-store-cs
msc.type: authoredcontent
ms.openlocfilehash: 484a0f16265ee2d887ee08f6ae7ada47047f1f04
ms.sourcegitcommit: 6784510cfb589308c3875ccb5113eb31031766b4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/08/2018
ms.locfileid: "30891810"
---
<a name="validating-user-credentials-against-the-membership-user-store-c"></a><span data-ttu-id="fcb17-103">Проверка учетных данных пользователя в хранилище данных членства пользователя (C#)</span><span class="sxs-lookup"><span data-stu-id="fcb17-103">Validating User Credentials Against the Membership User Store (C#)</span></span>
====================
<span data-ttu-id="fcb17-104">по [Скотт Митчелл](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="fcb17-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="fcb17-105">[Загрузить код](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) или [скачать PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="fcb17-105">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_06_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial06_LoggingIn_cs.pdf)</span></span>

> <span data-ttu-id="fcb17-106">В этом учебнике мы рассмотрим, как для проверки учетных данных пользователя в хранилище пользователя членства, с помощью программных средств и управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-106">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="fcb17-107">Кроме того, мы рассмотрим способы настройки внешнего вида и поведения элемента управления имя входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-107">We will also look at how to customize the login control's appearance and behavior.</span></span>


## <a name="introduction"></a><span data-ttu-id="fcb17-108">Вступление</span><span class="sxs-lookup"><span data-stu-id="fcb17-108">Introduction</span></span>

<span data-ttu-id="fcb17-109">В <a id="Tutorial05"> </a> [предыдущего учебника](creating-user-accounts-cs.md) мы рассмотрели создание новой учетной записи пользователя в framework членства.</span><span class="sxs-lookup"><span data-stu-id="fcb17-109">In the <a id="Tutorial05"></a>[preceding tutorial](creating-user-accounts-cs.md) we looked at how to create a new user account in the Membership framework.</span></span> <span data-ttu-id="fcb17-110">Сначала мы рассмотрели программное создание учетных записей пользователей через `Membership` класса `CreateUser` метод и затем просмотреть с помощью элемента управления CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="fcb17-110">We first looked at programmatically creating user accounts via the `Membership` class's `CreateUser` method, and then examined using the CreateUserWizard Web control.</span></span> <span data-ttu-id="fcb17-111">Тем не менее на страницу входа в настоящее время проверяет указанные учетные данные по списку жестко пар имени пользователя и пароля.</span><span class="sxs-lookup"><span data-stu-id="fcb17-111">However, the login page currently validates the supplied credentials against a hard-coded list of username and password pairs.</span></span> <span data-ttu-id="fcb17-112">Нам нужно обновить логику на страницу входа, таким образом, чтобы он проверяет учетные данные к хранилищу framework членства пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-112">We need to update the login page's logic so that it validates credentials against the Membership framework's user store.</span></span>

<span data-ttu-id="fcb17-113">Гораздо как с созданием учетных записей пользователей, учетные данные могут быть проверены программно или декларативно.</span><span class="sxs-lookup"><span data-stu-id="fcb17-113">Much like with creating user accounts, credentials can be validated programmatically or declaratively.</span></span> <span data-ttu-id="fcb17-114">API членства включает метод программным путем проверки учетных данных пользователя в хранилище пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-114">The Membership API includes a method for programmatically validating a user's credentials against the user store.</span></span> <span data-ttu-id="fcb17-115">И ASP.NET поставляется с входа веб-элементе управления, который отрисовывает пользовательский интерфейс с текстовые поля для имени пользователя и пароль, а также кнопку для входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-115">And ASP.NET ships with the Login Web control, which renders a user interface with textboxes for the username and password and a button to log in.</span></span>

<span data-ttu-id="fcb17-116">В этом учебнике мы рассмотрим, как для проверки учетных данных пользователя в хранилище пользователя членства, с помощью программных средств и управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-116">In this tutorial we will examine how to validate a user's credentials against the Membership user store using both programmatic means and the Login control.</span></span> <span data-ttu-id="fcb17-117">Кроме того, мы рассмотрим способы настройки внешнего вида и поведения элемента управления имя входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-117">We will also look at how to customize the login control's appearance and behavior.</span></span> <span data-ttu-id="fcb17-118">Давайте начнем!</span><span class="sxs-lookup"><span data-stu-id="fcb17-118">Let's get started!</span></span>

## <a name="step-1-validating-credentials-against-the-membership-user-store"></a><span data-ttu-id="fcb17-119">Шаг 1: Проверка учетных данных в хранилище данных членства пользователя</span><span class="sxs-lookup"><span data-stu-id="fcb17-119">Step 1: Validating Credentials Against the Membership User Store</span></span>

<span data-ttu-id="fcb17-120">Для веб-сайтов, использующих проверку подлинности форм входе пользователя на веб-сайт, посетив страницу входа и ввода учетных данных.</span><span class="sxs-lookup"><span data-stu-id="fcb17-120">For web sites that use forms authentication, a user logs on to the website by visiting a login page and entering their credentials.</span></span> <span data-ttu-id="fcb17-121">Эти учетные данные затем сравниваться хранилища пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-121">These credentials are then compared against the user store.</span></span> <span data-ttu-id="fcb17-122">Если они являются допустимыми, пользователю предоставляется билета проверки подлинности форм, который является маркером безопасности, который указывает удостоверение и подлинность посетителя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-122">If they are valid, then the user is granted a forms authentication ticket, which is a security token that indicates the identity and authenticity of the visitor.</span></span>

<span data-ttu-id="fcb17-123">Для проверки пользователя к framework членства, используйте `Membership` класса [ `ValidateUser` метод](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcb17-123">To validate a user against the Membership framework, use the `Membership` class's [`ValidateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.validateuser.aspx).</span></span> <span data-ttu-id="fcb17-124">`ValidateUser` Метод принимает два входных параметра - *`username`* и *`password`* — и возвращает логическое значение, указывающее, использовались ли учетные данные.</span><span class="sxs-lookup"><span data-stu-id="fcb17-124">The `ValidateUser` method takes in two input parameters - *`username`* and *`password`* - and returns a Boolean value indicating whether the credentials were valid.</span></span> <span data-ttu-id="fcb17-125">Как и с `CreateUser` метод мы рассмотрели в предыдущем учебнике `ValidateUser` метод делегирует фактическая проверка для настроенного поставщика членства.</span><span class="sxs-lookup"><span data-stu-id="fcb17-125">Like with the `CreateUser` method we examined in the previous tutorial, the `ValidateUser` method delegates the actual validation to the configured Membership provider.</span></span>

<span data-ttu-id="fcb17-126">`SqlMembershipProvider` Проверяет указанные учетные данные, получая пароль заданного пользователя через `aspnet_Membership_GetPasswordWithFormat` хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="fcb17-126">The `SqlMembershipProvider` validates the supplied credentials by obtaining the specified user's password via the `aspnet_Membership_GetPasswordWithFormat` stored procedure.</span></span> <span data-ttu-id="fcb17-127">Помните, что `SqlMembershipProvider` хранит пароли пользователей, используя один из трех форматов: clear зашифрован или хэшируется.</span><span class="sxs-lookup"><span data-stu-id="fcb17-127">Recall that the `SqlMembershipProvider` stores users' passwords using one of three formats: clear, encrypted, or hashed.</span></span> <span data-ttu-id="fcb17-128">`aspnet_Membership_GetPasswordWithFormat` Хранимая процедура возвращает пароль в формате raw.</span><span class="sxs-lookup"><span data-stu-id="fcb17-128">The `aspnet_Membership_GetPasswordWithFormat` stored procedure returns the password in its raw format.</span></span> <span data-ttu-id="fcb17-129">Для зашифрованных или хэшированных паролей `SqlMembershipProvider` преобразует *`password`* значение, переданное `ValidateUser` метода, в эквивалентное ему зашифрованы или хэшируются состояние и затем сравнивает его с что возвратил База данных.</span><span class="sxs-lookup"><span data-stu-id="fcb17-129">For encrypted or hashed passwords, the `SqlMembershipProvider` transforms the *`password`* value passed into the `ValidateUser` method into its equivalent encrypted or hashed state and then compares it with what was returned from the database.</span></span> <span data-ttu-id="fcb17-130">Если пароль, которые хранятся в базе данных соответствует форматированные пароль, введенный пользователем, учетные данные недопустимы.</span><span class="sxs-lookup"><span data-stu-id="fcb17-130">If the password stored in the database matches the formatted password entered by the user, the credentials are valid.</span></span>

<span data-ttu-id="fcb17-131">Давайте обновить нашу страницу входа в систему (~ /`Login.aspx`), чтобы он проверяет указанные учетные данные в хранилище пользователя членства framework.</span><span class="sxs-lookup"><span data-stu-id="fcb17-131">Let's update our login page (~/`Login.aspx`) so that it validates the supplied credentials against the Membership framework user store.</span></span> <span data-ttu-id="fcb17-132">Мы создали эту страницу входа в <a id="Tutorial02"> </a> [ *Общие сведения для проверки подлинности форм* ](../introduction/an-overview-of-forms-authentication-cs.md) учебник, создание интерфейса с помощью двух текстовых полях имя пользователя и пароль, Запомнить меня, флажки и кнопки входа (см. рис. 1).</span><span class="sxs-lookup"><span data-stu-id="fcb17-132">We created this login page back in the <a id="Tutorial02"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, creating an interface with two TextBoxes for the username and password, a Remember Me checkbox, and a Login button (see Figure 1).</span></span> <span data-ttu-id="fcb17-133">Код проверяет введенные учетные данные с жестко список пар имя пользователя и пароль (Scott пароль, Цзисунь и пароля и Sam и пароль).</span><span class="sxs-lookup"><span data-stu-id="fcb17-133">The code validates the entered credentials against a hard-coded list of username and password pairs (Scott/password, Jisun/password, and Sam/password).</span></span> <span data-ttu-id="fcb17-134">В <a id="Tutorial03"> </a> [ *настройки проверки подлинности форм и дополнительные разделы* ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) учебника мы обновили кода на страницу входа для хранения дополнительных сведений в формах билет проверки подлинности `UserData` свойство.</span><span class="sxs-lookup"><span data-stu-id="fcb17-134">In the <a id="Tutorial03"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial we updated the login page's code to store additional information in the forms authentication ticket's `UserData` property.</span></span>


<span data-ttu-id="fcb17-135">[![Интерфейс страницы входа включает два текстовые поля, кнопки и CheckBoxList](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-135">[![The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button](validating-user-credentials-against-the-membership-user-store-cs/_static/image2.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image1.png)</span></span>

<span data-ttu-id="fcb17-136">**Рис. 1**: страницы входа интерфейса включает два текстовые поля, CheckBoxList и кнопка ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-136">**Figure 1**: The Login Page's Interface Includes Two TextBoxes, a CheckBoxList, and a Button  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image3.png))</span></span>


<span data-ttu-id="fcb17-137">Пользовательский интерфейс страницы входа может остаться без изменений, но нужно заменить кнопки входа `Click` обработчик событий с кодом, который проверяет пользователя в хранилище пользователя членства framework.</span><span class="sxs-lookup"><span data-stu-id="fcb17-137">The login page's user interface can remain unchanged, but we need to replace the Login button's `Click` event handler with code that validates the user against the Membership framework user store.</span></span> <span data-ttu-id="fcb17-138">Обновите этот обработчик событий, чтобы ее код имеет следующий вид:</span><span class="sxs-lookup"><span data-stu-id="fcb17-138">Update the event handler so that its code appears as follows:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample1.cs)]

<span data-ttu-id="fcb17-139">Этот код является весьма простым.</span><span class="sxs-lookup"><span data-stu-id="fcb17-139">This code is remarkably simple.</span></span> <span data-ttu-id="fcb17-140">Мы начнем с вызова `Membership.ValidateUser` метод, передавая указанное имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fcb17-140">We start by calling the `Membership.ValidateUser` method, passing in the supplied username and password.</span></span> <span data-ttu-id="fcb17-141">Если этот метод возвращает значение true, то пользователь входит на сайт через `FormsAuthentication` RedirectFromLoginPage метод класса.</span><span class="sxs-lookup"><span data-stu-id="fcb17-141">If that method returns true, then the user is signed into the site via the `FormsAuthentication` class's RedirectFromLoginPage method.</span></span> <span data-ttu-id="fcb17-142">(Как уже говорилось в <a id="Tutorial2"> </a> [ *Общие сведения для проверки подлинности форм* ](../introduction/an-overview-of-forms-authentication-cs.md) учебнике `FormsAuthentication.RedirectFromLoginPage` создает билет проверки подлинности форм и затем перенаправляет пользователя соответствующая страница.) Если учетные данные являются недопустимыми, однако `InvalidCredentialsMessage` метка будет отображаться, сообщая пользователю, что их имя пользователя или пароль неправильный.</span><span class="sxs-lookup"><span data-stu-id="fcb17-142">(As we discussed in the <a id="Tutorial2"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, the `FormsAuthentication.RedirectFromLoginPage` creates the forms authentication ticket and then redirects the user to the appropriate page.) If the credentials are invalid, however, the `InvalidCredentialsMessage` Label is displayed, informing the user that their username or password was incorrect.</span></span>

<span data-ttu-id="fcb17-143">Это все, чтобы он!</span><span class="sxs-lookup"><span data-stu-id="fcb17-143">That's all there is to it!</span></span>

<span data-ttu-id="fcb17-144">Чтобы проверить правильность работы страницы входа, пытаться выполнить вход с одной из учетных записей пользователей, созданных в предыдущем учебнике.</span><span class="sxs-lookup"><span data-stu-id="fcb17-144">To test that the login page works as expected, attempt to login with one of the user accounts you created in the preceding tutorial.</span></span> <span data-ttu-id="fcb17-145">Или, если вы еще не создали учетную запись, загрузив и создать из `~/Membership/CreatingUserAccounts.aspx` страницы.</span><span class="sxs-lookup"><span data-stu-id="fcb17-145">Or, if you have not yet created an account, go ahead and create one from the `~/Membership/CreatingUserAccounts.aspx` page.</span></span>

> [!NOTE]
> <span data-ttu-id="fcb17-146">Когда пользователь вводит свои учетные данные и отправляет форму страницы входа, учетные данные, включая пароль, передаются через Интернет на веб-сервер в *обычный текст*.</span><span class="sxs-lookup"><span data-stu-id="fcb17-146">When the user enters her credentials and submits the login page form, the credentials, including her password, are transmitted over the Internet to the web server in *plain text*.</span></span> <span data-ttu-id="fcb17-147">Это означает, что любой злоумышленник, проанализировать сетевой трафик можно увидеть имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fcb17-147">That means any hacker sniffing the network traffic can see the username and password.</span></span> <span data-ttu-id="fcb17-148">Чтобы избежать этого, очень важно для шифрования сетевого трафика с помощью [Secure слои сокетов (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span><span class="sxs-lookup"><span data-stu-id="fcb17-148">To prevent this, it is essential to encrypt the network traffic by using [Secure Socket Layers (SSL)](http://en.wikipedia.org/wiki/Secure_Sockets_Layer).</span></span> <span data-ttu-id="fcb17-149">Это позволит гарантировать шифровать учетные данные (а также всю страницу HTML-разметка) от момента, когда они покидают браузер, пока они не будут получены веб-сервером.</span><span class="sxs-lookup"><span data-stu-id="fcb17-149">This will ensure that the credentials (as well as the entire page's HTML markup) are encrypted from the moment they leave the browser until they are received by the web server.</span></span>


### <a name="how-the-membership-framework-handles-invalid-login-attempts"></a><span data-ttu-id="fcb17-150">Как Framework членства обрабатывает недопустимые входов</span><span class="sxs-lookup"><span data-stu-id="fcb17-150">How the Membership Framework Handles Invalid Login Attempts</span></span>

<span data-ttu-id="fcb17-151">Когда посетитель достигает страницы входа и отправляет свои учетные данные, их браузер отправляет запрос HTTP на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-151">When a visitor reaches the login page and submits their credentials, their browser makes an HTTP request to the login page.</span></span> <span data-ttu-id="fcb17-152">Если учетные данные являются допустимыми, HTTP-ответа включает билет проверки подлинности в файле cookie.</span><span class="sxs-lookup"><span data-stu-id="fcb17-152">If the credentials are valid, the HTTP response includes the authentication ticket in a cookie.</span></span> <span data-ttu-id="fcb17-153">Таким образом злоумышленник, попытка взлома веб-узла может создать программу, которую досконально отправляет HTTP-запросы на страницу входа с допустимое имя пользователя и пароль предположение.</span><span class="sxs-lookup"><span data-stu-id="fcb17-153">Therefore, a hacker attempting to break into your site could create a program that exhaustively sends HTTP requests to the login page with a valid username and a guess at the password.</span></span> <span data-ttu-id="fcb17-154">Если пароль пробное значение правильным, страницы входа возвращает билет файла cookie проверки подлинности, после чего программа узнает, что он сталкивались со пару допустимое имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fcb17-154">If the password guess is correct, the login page will return the authentication ticket cookie, at which point the program knows it has stumbled upon a valid username/password pair.</span></span> <span data-ttu-id="fcb17-155">Через подбора такой программы можно наткнулись пароля пользователя, особенно в том случае, если пароль является слабым.</span><span class="sxs-lookup"><span data-stu-id="fcb17-155">Through brute force, such a program might be able to stumble upon a user's password, especially if the password is weak.</span></span>

<span data-ttu-id="fcb17-156">Чтобы избежать подобных атак методом подбора, framework членства блокирует работу пользователя при наличии определенного числа попыток неудачной попытки входа в течение определенного периода времени.</span><span class="sxs-lookup"><span data-stu-id="fcb17-156">To prevent such brute force attacks, the Membership framework locks out a user if there are a certain number of unsuccessful login attempts within a certain period of time.</span></span> <span data-ttu-id="fcb17-157">Точные параметры можно настраивать следующие параметры конфигурации два поставщика членства:</span><span class="sxs-lookup"><span data-stu-id="fcb17-157">The exact parameters are configurable through the following two Membership provider configuration settings:</span></span>

- <span data-ttu-id="fcb17-158">`maxInvalidPasswordAttempts` -Указывает, сколько недопустимый пароль попыток разрешены для пользователя в течение периода времени, прежде чем учетная запись заблокирована. Значение по умолчанию — 5.</span><span class="sxs-lookup"><span data-stu-id="fcb17-158">`maxInvalidPasswordAttempts` - specifies how many invalid password attempts are allowed for the user within the time period before the account is locked out. The default value is 5.</span></span>
- <span data-ttu-id="fcb17-159">`passwordAttemptWindow` -Указывает период времени в минутах, в течение которых указанное количество попыток недопустимое имя для входа приведет к учетной записи могут быть заблокированы. Значение по умолчанию — 10.</span><span class="sxs-lookup"><span data-stu-id="fcb17-159">`passwordAttemptWindow` - indicates the time period in minutes during which the specified number of invalid login attempts will cause the account to be locked out. The default value is 10.</span></span>

<span data-ttu-id="fcb17-160">Если пользователь была заблокирована, она не может выполнить вход до снятия блокировки администратором своей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="fcb17-160">If a user has been locked out, she cannot login until an administrator unlocks her account.</span></span> <span data-ttu-id="fcb17-161">Когда пользователь будет заблокирована, `ValidateUser` метод будет *всегда* возвращают `false`, даже если допустимые учетные данные указаны.</span><span class="sxs-lookup"><span data-stu-id="fcb17-161">When a user is locked out, the `ValidateUser` method will *always* return `false`, even if valid credentials are supplied.</span></span> <span data-ttu-id="fcb17-162">Хотя это уменьшает вероятность того, что злоумышленник прервется на свой сайт через методы подбора, может оказаться блокировки действительный пользователь, который просто забыл свой пароль или случайно Caps Lock или является наличие поврежденных ввода день.</span><span class="sxs-lookup"><span data-stu-id="fcb17-162">While this behavior lessens the likelihood that a hacker will break into your site through brute force methods, it can end up locking out a valid user who has simply forgotten her password or accidentally has the Caps Lock on or is having a bad typing day.</span></span>

<span data-ttu-id="fcb17-163">К сожалению нет никаких встроенных средств для разблокировки учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-163">Unfortunately, there is no built-in tool for unlocking a user account.</span></span> <span data-ttu-id="fcb17-164">Чтобы разблокировать учетную запись, можно изменить базу данных непосредственно - изменять `IsLockedOut` в `aspnet_Membership` таблицу для соответствующей учетной записью пользователя — или создать веб-интерфейс, который перечисляет заблокированных учетных записей с параметрами для их разблокировки.</span><span class="sxs-lookup"><span data-stu-id="fcb17-164">In order to unlock an account, you can modify the database directly - change the `IsLockedOut` field in the `aspnet_Membership` table for the appropriate user account - or create a web-based interface that lists locked out accounts with options to unlock them.</span></span> <span data-ttu-id="fcb17-165">Рассмотрим Создание интерфейсов администратора для выполнения общих пользовательских задач, связанных с учетной записью и роли в будущем учебника.</span><span class="sxs-lookup"><span data-stu-id="fcb17-165">We will examine creating administrative interfaces for accomplishing common user account- and role-related tasks in a future tutorial.</span></span>

> [!NOTE]
> <span data-ttu-id="fcb17-166">Один из недостатков из `ValidateUser` в противном случае, если предоставленные учетные данные являются недопустимыми, он не поддерживает все пояснение, почему это происходит.</span><span class="sxs-lookup"><span data-stu-id="fcb17-166">One downside of the `ValidateUser` method is that when the supplied credentials are invalid, it does not provide any explanation as to why.</span></span> <span data-ttu-id="fcb17-167">Учетные данные недопустима, так как в хранилище пользователя, не совпадающую пару имя пользователя и пароль или поскольку пользователь не был утвержден или пользователя была заблокирована. На шаге 4 вы узнаете, как отображать подробные сообщения для пользователя при неудачной попытке их имени входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-167">The credentials may be invalid because there is no matching username/password pair in the user store, or because the user has not yet been approved, or because the user has been locked out. In Step 4 we will see how to show a more detailed message to the user when their login attempt fails.</span></span>


## <a name="step-2-collecting-credentials-through-the-login-web-control"></a><span data-ttu-id="fcb17-168">Шаг 2: Сбор учетных данных через веб-элемент управления входа</span><span class="sxs-lookup"><span data-stu-id="fcb17-168">Step 2: Collecting Credentials through the Login Web Control</span></span>

<span data-ttu-id="fcb17-169">[Входа веб-элемент управления](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) Отрисовывает пользовательский интерфейс по умолчанию очень похожий на тот, который мы создали обратно в <a id="SKM5"> </a> [ *Общие сведения для проверки подлинности форм* ](../introduction/an-overview-of-forms-authentication-cs.md) учебника.</span><span class="sxs-lookup"><span data-stu-id="fcb17-169">The [Login Web control](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx) renders a default user interface very similar to the one we created back in the <a id="SKM5"></a>[*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial.</span></span> <span data-ttu-id="fcb17-170">С помощью управления входом избавляет от необходимости создавать интерфейс для сбора учетных данных s посетитель работу.</span><span class="sxs-lookup"><span data-stu-id="fcb17-170">Using the Login control saves us the work of having to create the interface to collect the visitor�s credentials.</span></span> <span data-ttu-id="fcb17-171">Кроме того управления входом автоматически выполняет вход пользователя (при условии, что отправленные учетные данные действительны), тем самым сохранение нам от необходимости писать код.</span><span class="sxs-lookup"><span data-stu-id="fcb17-171">Moreover, the Login control automatically signs in the user (assuming the submitted credentials are valid), thereby saving us from having to write any code.</span></span>

<span data-ttu-id="fcb17-172">Давайте обновить `Login.aspx`, заменив созданная вручную интерфейса и кода с элементом управления входа в систему.</span><span class="sxs-lookup"><span data-stu-id="fcb17-172">Let's update `Login.aspx`, replacing the manually created interface and code with a Login control.</span></span> <span data-ttu-id="fcb17-173">Удалите существующую разметку и код в `Login.aspx`.</span><span class="sxs-lookup"><span data-stu-id="fcb17-173">Start by removing the existing markup and code in `Login.aspx`.</span></span> <span data-ttu-id="fcb17-174">Можно удалить сразу или просто закомментируйте его. Закомментируйте декларативная разметка, поместите его между `<%--` и `--%>` разделители.</span><span class="sxs-lookup"><span data-stu-id="fcb17-174">You may delete it outright, or simply comment it out. To comment out declarative markup, surround it with the `<%--` and `--%>` delimiters.</span></span> <span data-ttu-id="fcb17-175">Разделители можно ввести вручную или, как показано на рисунке 2, можно выбрать текст, комментарий и нажмите кнопку закомментировать выделенные строки значок на панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="fcb17-175">You can enter these delimiters manually, or, as Figure 2 shows, you may select the text to comment out and then click the Comment out the selected lines icon in the Toolbar.</span></span> <span data-ttu-id="fcb17-176">Аналогично можно использовать закомментируйте значок выбранных строк в комментарий выделенный код в класс кода программной.</span><span class="sxs-lookup"><span data-stu-id="fcb17-176">Similarly, you can use the Comment out the selected lines icon to comment out the selected code in the code-behind class.</span></span>


<span data-ttu-id="fcb17-177">[![Закомментируйте существующую декларативная разметка и исходного кода на страницу Login.aspx](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-177">[![Comment Out the Existing Declarative Markup and Source Code in Login.aspx](validating-user-credentials-against-the-membership-user-store-cs/_static/image5.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image4.png)</span></span>

<span data-ttu-id="fcb17-178">**На рисунке 2**: комментарий Out существующих декларативная разметка и исходный код в `Login.aspx` ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-178">**Figure 2**: Comment Out the Existing Declarative Markup and Source Code in `Login.aspx` ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image6.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fcb17-179">Закомментировать выделенные строки значок недоступен при просмотре декларативная разметка в Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="fcb17-179">The Comment out the selected lines icon is not available when viewing the declarative markup in Visual Studio 2005.</span></span> <span data-ttu-id="fcb17-180">Если вы не используете Visual Studio 2008 необходимо вручную добавить `<%--` и `--%>` разделители.</span><span class="sxs-lookup"><span data-stu-id="fcb17-180">If you are not using Visual Studio 2008 you will need to manually add the `<%--` and `--%>` delimiters.</span></span>


<span data-ttu-id="fcb17-181">Затем перетащите элемент управления Login из области элементов на страницу и установить его `ID` свойства `myLogin`.</span><span class="sxs-lookup"><span data-stu-id="fcb17-181">Next, drag a Login control from the Toolbox on to the page and set its `ID` property to `myLogin`.</span></span> <span data-ttu-id="fcb17-182">На этом этапе экран должен выглядеть примерно на рис. 3.</span><span class="sxs-lookup"><span data-stu-id="fcb17-182">At this point your screen should look similar to Figure 3.</span></span> <span data-ttu-id="fcb17-183">Обратите внимание, что интерфейс управления входа по умолчанию включает элементы управления TextBox для имени пользователя и пароля, Запомнить меня в следующий раз флажок и кнопку в журнал.</span><span class="sxs-lookup"><span data-stu-id="fcb17-183">Note that the Login control's default interface includes TextBox controls for the username and password, a Remember me next time CheckBox, and a Log In Button.</span></span> <span data-ttu-id="fcb17-184">Существуют также `RequiredFieldValidator` элементы управления для двух текстовых полей.</span><span class="sxs-lookup"><span data-stu-id="fcb17-184">There are also `RequiredFieldValidator` controls for the two TextBoxes.</span></span>


<span data-ttu-id="fcb17-185">[![Добавление элемента управления для входа на страницу](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-185">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image8.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image7.png)</span></span>

<span data-ttu-id="fcb17-186">**Рис. 3**: Добавление элемента управления для входа на страницу ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-186">**Figure 3**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image9.png))</span></span>


<span data-ttu-id="fcb17-187">И Готово!</span><span class="sxs-lookup"><span data-stu-id="fcb17-187">And we're done!</span></span> <span data-ttu-id="fcb17-188">При нажатии кнопки входа в управления входом, обратная передача будет выполняться, и управления входом вызовет `Membership.ValidateUser` метод, передавая введенное имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fcb17-188">When the Login control's Log In button is clicked, a postback will occur and the Login control will call the `Membership.ValidateUser` method, passing in the entered username and password.</span></span> <span data-ttu-id="fcb17-189">Если учетные данные являются недопустимыми, элемент управления входа отображает сообщение о том, например.</span><span class="sxs-lookup"><span data-stu-id="fcb17-189">If the credentials are invalid, the Login control displays a message stating such.</span></span> <span data-ttu-id="fcb17-190">Если, однако учетные данные допустимы, управления Login создает билет проверки подлинности форм и перенаправляет пользователя на соответствующую страницу.</span><span class="sxs-lookup"><span data-stu-id="fcb17-190">If, however, the credentials are valid, then the Login control creates the forms authentication ticket and redirects the user to the appropriate page.</span></span>

<span data-ttu-id="fcb17-191">Элемент управления входа использует четыре фактора определить соответствующую страницу, чтобы перенаправить пользователя после успешного входа:</span><span class="sxs-lookup"><span data-stu-id="fcb17-191">The Login control uses four factors to determine the appropriate page to redirect the user to upon a successful login:</span></span>

- <span data-ttu-id="fcb17-192">Ли элемент управления входа находится на странице входа, в соответствии с определением `loginUrl` Настройка проверки подлинности форм; этот параметр по умолчанию — `Login.aspx`</span><span class="sxs-lookup"><span data-stu-id="fcb17-192">Whether the Login control is on the login page as defined by `loginUrl` setting in the forms authentication configuration; this setting's default value is `Login.aspx`</span></span>
- <span data-ttu-id="fcb17-193">Наличие `ReturnUrl` параметр строки запроса</span><span class="sxs-lookup"><span data-stu-id="fcb17-193">The presence of a `ReturnUrl` querystring parameter</span></span>
- <span data-ttu-id="fcb17-194">Значение элемента управления входа [ `DestinationUrl` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span><span class="sxs-lookup"><span data-stu-id="fcb17-194">The value of the Login control's [`DestinationUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.destinationpageurl.aspx)</span></span>
- <span data-ttu-id="fcb17-195">`defaultUrl` Значение указано в формах параметры конфигурации проверки подлинности; значение этого параметра по умолчанию — `Default.aspx`</span><span class="sxs-lookup"><span data-stu-id="fcb17-195">The `defaultUrl` value specified in the forms authentication configuration settings; this setting's default value is `Default.aspx`</span></span>

<span data-ttu-id="fcb17-196">На рисунке 4 показаны как элемент управления входа использует эти четыре параметра для прибытия на соответствующей странице решения.</span><span class="sxs-lookup"><span data-stu-id="fcb17-196">Figure 4 depicts the how the Login control uses these four parameters to arrive at its appropriate page decision.</span></span>


<span data-ttu-id="fcb17-197">[![Добавление элемента управления для входа на страницу](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-197">[![Add a Login Control to the Page](validating-user-credentials-against-the-membership-user-store-cs/_static/image11.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image10.png)</span></span>

<span data-ttu-id="fcb17-198">**Рис. 4**: Добавление элемента управления для входа на страницу ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-198">**Figure 4**: Add a Login Control to the Page  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image12.png))</span></span>


<span data-ttu-id="fcb17-199">Теперь пора проверить элемента управления для входа на узле с помощью браузера, и существующего пользователя в платформе членства.</span><span class="sxs-lookup"><span data-stu-id="fcb17-199">Take a moment to test out the Login control by visiting the site through a browser and logging in as an existing user in the Membership framework.</span></span>

<span data-ttu-id="fcb17-200">Готовый для просмотра интерфейс управления входом широкие возможности настройки.</span><span class="sxs-lookup"><span data-stu-id="fcb17-200">The Login control's rendered interface is highly configurable.</span></span> <span data-ttu-id="fcb17-201">Существует ряд свойств, которые влияют на его внешний вид. Более того управления входом можно преобразовать в шаблон для точного контроля над макета элементов пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="fcb17-201">There are a number of properties that influence its appearance; what's more, the Login control can be converted into a template for precise control over the layout the user interface elements.</span></span> <span data-ttu-id="fcb17-202">В оставшейся части этого шага рассматривается настройка внешнего вида и макета.</span><span class="sxs-lookup"><span data-stu-id="fcb17-202">The remainder of this step examines how to customize the appearance and layout.</span></span>

### <a name="customizing-the-login-controls-appearance"></a><span data-ttu-id="fcb17-203">Настройка внешнего вида элемента управления Login</span><span class="sxs-lookup"><span data-stu-id="fcb17-203">Customizing the Login Control's Appearance</span></span>

<span data-ttu-id="fcb17-204">Параметры свойств по умолчанию для управления входом отрисовки пользовательского интерфейса с заголовком (вход), элементы управления текстового поля и метки для входных данных имя пользователя и пароль, Запомнить мои рядом время, флажки и кнопки входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-204">The Login control's default property settings render a user interface with a title ( Log In ), TextBox and Label controls for the username and password inputs, a Remember me next time CheckBox, and a Log In button.</span></span> <span data-ttu-id="fcb17-205">Внешний вид этих элементов все настраиваются с помощью управления входом множество свойств.</span><span class="sxs-lookup"><span data-stu-id="fcb17-205">The appearances of these elements are all configurable through the Login control's numerous properties.</span></span> <span data-ttu-id="fcb17-206">Кроме того можно добавить дополнительных элементах пользовательского интерфейса — например, укажите ссылку на страницу, чтобы создать новую учетную запись пользователя -, задав свойство или два.</span><span class="sxs-lookup"><span data-stu-id="fcb17-206">Furthermore, additional user interface elements - such as a link to a page to create a new user account - can be added by setting a property or two.</span></span>

<span data-ttu-id="fcb17-207">Давайте потратить некоторое gussy копирование вида нашей управления входом в систему.</span><span class="sxs-lookup"><span data-stu-id="fcb17-207">Let's spend a few moments to gussy up the appearance of our Login control.</span></span> <span data-ttu-id="fcb17-208">Поскольку `Login.aspx` страницы уже содержит текст в верхней части страницы, информирующее о имени входа, заголовок элемента управления имя входа является избыточным.</span><span class="sxs-lookup"><span data-stu-id="fcb17-208">Since the `Login.aspx` page already has text at the top of the page that says Login, the Login control's title is superfluous.</span></span> <span data-ttu-id="fcb17-209">Таким образом, очистить [ `TitleText` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) значение, чтобы удалить заголовок управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-209">Therefore, clear out the [`TitleText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.titletext.aspx) value in order to remove the Login control's title.</span></span>

<span data-ttu-id="fcb17-210">: Имя пользователя и пароль: метки слева от текстовые поля можно настроить с помощью [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) и [ `PasswordLabelText` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx)соответственно.</span><span class="sxs-lookup"><span data-stu-id="fcb17-210">The User Name: and Password: Labels to the left of the two TextBox controls can be customized through the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.usernamelabeltext.aspx) and [`PasswordLabelText` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordlabeltext.aspx), respectively.</span></span> <span data-ttu-id="fcb17-211">Позволяет изменить имя пользователя: метка для чтения имя пользователя:.</span><span class="sxs-lookup"><span data-stu-id="fcb17-211">Let's change the User Name: Label to read Username:.</span></span> <span data-ttu-id="fcb17-212">Стили метку и текстовое поле настраиваются с помощью [ `LabelStyle` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) и [ `TextBoxStyle` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx)соответственно.</span><span class="sxs-lookup"><span data-stu-id="fcb17-212">The Label and TextBox styles are configurable through the [`LabelStyle`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.labelstyle.aspx) and [`TextBoxStyle` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textboxstyle.aspx), respectively.</span></span>

<span data-ttu-id="fcb17-213">Запомнить меня свойства Text далее флажок времени можно задать с помощью управления входом [ `RememberMeText property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), и значение по умолчанию проверки состояния можно настроить через [ `RememberMeSet property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (который по умолчанию используется значение False).</span><span class="sxs-lookup"><span data-stu-id="fcb17-213">The Remember me next time CheckBox's Text property can be set through the Login control's [`RememberMeText property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermetext.aspx), and its default checked state is configurable through the [`RememberMeSet property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.remembermeset.aspx) (which defaults to False).</span></span> <span data-ttu-id="fcb17-214">Продолжить и задать `RememberMeSet` значение True, чтобы Запомнить меня рядом время флажок будет установлен по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="fcb17-214">Go ahead and set the `RememberMeSet` property to True so that the Remember me next time CheckBox will be checked by default.</span></span>

<span data-ttu-id="fcb17-215">Элемент управления входа предоставляет два свойства для подгонки макета ее элементы управления пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="fcb17-215">The Login control offers two properties for adjusting the layout of its user interface controls.</span></span> <span data-ttu-id="fcb17-216">[ `TextLayout property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) Указывает, является ли имя пользователя: и пароль: метки отображаются слева их соответствующие текстовые поля (по умолчанию), либо над ними.</span><span class="sxs-lookup"><span data-stu-id="fcb17-216">The [`TextLayout property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.textlayout.aspx) indicates whether the Username: and Password: Labels appear to the left of their corresponding TextBoxes (the default), or above them.</span></span> <span data-ttu-id="fcb17-217">[ `Orientation property` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) Указывает, расположены ли входные данные пользователя и пароль по вертикали (друг с другом) или по горизонтали.</span><span class="sxs-lookup"><span data-stu-id="fcb17-217">The [`Orientation property`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.orientation.aspx) indicates whether the username and password inputs are situated vertically (one above the other) or horizontally.</span></span> <span data-ttu-id="fcb17-218">Я хочу оставить эти два свойства, значения по умолчанию, но я рекомендую попробовать установить эти два свойства для их значения по умолчанию, чтобы просмотреть результирующий эффект.</span><span class="sxs-lookup"><span data-stu-id="fcb17-218">I am going to leave these two properties set to their defaults, but I encourage you to try setting these two properties to their non-default values to see the resulting effect.</span></span>

> [!NOTE]
> <span data-ttu-id="fcb17-219">В следующем разделе Настройка макета элемента управления имя входа, мы рассмотрим использование шаблонов для определения точного макета элементов макета элемента управления пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="fcb17-219">In the next section, Configuring the Login Control's Layout, we will look at using templates to define the precise layout of the Layout control's user interface elements.</span></span>


<span data-ttu-id="fcb17-220">Подведение параметры свойств управления входом, задав [ `CreateUserText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) и [ `CreateUserUrl` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) для не зарегистрирована?</span><span class="sxs-lookup"><span data-stu-id="fcb17-220">Wrap up the Login control's property settings by setting the [`CreateUserText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createusertext.aspx) and [`CreateUserUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.createuserurl.aspx) to Not registered yet?</span></span> <span data-ttu-id="fcb17-221">Создание учетной записи!</span><span class="sxs-lookup"><span data-stu-id="fcb17-221">Create an account!</span></span> <span data-ttu-id="fcb17-222">и `~/Membership/CreatingUserAccounts.aspx`соответственно.</span><span class="sxs-lookup"><span data-stu-id="fcb17-222">and `~/Membership/CreatingUserAccounts.aspx`, respectively.</span></span> <span data-ttu-id="fcb17-223">Это добавляет гиперссылки к интерфейсу управления входом, указывающий на страницу мы создали в <a id="SKM6"> </a> [предыдущего учебника](creating-user-accounts-cs.md).</span><span class="sxs-lookup"><span data-stu-id="fcb17-223">This adds a hyperlink to the Login control's interface pointing to the page we created in the <a id="SKM6"></a>[preceding tutorial](creating-user-accounts-cs.md).</span></span> <span data-ttu-id="fcb17-224">Элемент управления входа [ `HelpPageText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) и [ `HelpPageUrl` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) и [ `PasswordRecoveryText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) и [ `PasswordRecoveryUrl` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) работают таким же образом, ссылки на страницу справки и страницы восстановления пароля.</span><span class="sxs-lookup"><span data-stu-id="fcb17-224">The Login control's [`HelpPageText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppagetext.aspx) and [`HelpPageUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.helppageurl.aspx) and [`PasswordRecoveryText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoverytext.aspx) and [`PasswordRecoveryUrl` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.passwordrecoveryurl.aspx) work in the same manner, rendering links to a help page and a password recovery page.</span></span>

<span data-ttu-id="fcb17-225">После внесения этих изменений свойств, декларативная разметка и внешний вид элемента управления входа должен выглядеть, как показано на рис. 5.</span><span class="sxs-lookup"><span data-stu-id="fcb17-225">After making these property changes, your Login control's declarative markup and appearance should look similar to that shown in Figure 5.</span></span>


<span data-ttu-id="fcb17-226">[![Значения свойств элемента управления входа определяют его внешний вид](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-226">[![The Login Control's Properties' Values Dictate Its Appearance](validating-user-credentials-against-the-membership-user-store-cs/_static/image14.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image13.png)</span></span>

<span data-ttu-id="fcb17-227">**Рис. 5**: элемент управления входа свойства значения определяют его внешний вид ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-227">**Figure 5**: The Login Control's Properties' Values Dictate Its Appearance  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image15.png))</span></span>


### <a name="configuring-the-login-controls-layout"></a><span data-ttu-id="fcb17-228">Настройка макета элемента управления Login</span><span class="sxs-lookup"><span data-stu-id="fcb17-228">Configuring the Login Control's Layout</span></span>

<span data-ttu-id="fcb17-229">Пользовательский интерфейс входа веб-элемента управления по умолчанию размещает интерфейсе в HTML- `<table>`.</span><span class="sxs-lookup"><span data-stu-id="fcb17-229">The Login Web control's default user interface lays out the interface in an HTML `<table>`.</span></span> <span data-ttu-id="fcb17-230">Но что делать, если требуется более точный контроль выводимых данных?</span><span class="sxs-lookup"><span data-stu-id="fcb17-230">But what if we need finer control over the rendered output?</span></span> <span data-ttu-id="fcb17-231">Допустим, требуется заменить `<table>` ряд `<div>` тегов.</span><span class="sxs-lookup"><span data-stu-id="fcb17-231">Maybe we want to replace the `<table>` with a series of `<div>` tags.</span></span> <span data-ttu-id="fcb17-232">Или, что делать, если приложение требует дополнительные учетные данные для проверки подлинности?</span><span class="sxs-lookup"><span data-stu-id="fcb17-232">Or what if our application requires additional credentials for authentication?</span></span> <span data-ttu-id="fcb17-233">Многие финансовые веб-сайты для экземпляра обязать пользователей вводить не только имя пользователя и пароль, но также личный идентификационный номер (PIN) или другие идентификационные сведения.</span><span class="sxs-lookup"><span data-stu-id="fcb17-233">Many financial websites, for instance, require users to supply not only a username and password, but also a Personal Identification Number (PIN), or other identifying information.</span></span> <span data-ttu-id="fcb17-234">Независимо от причины, возможно, имеется возможность преобразовать в шаблон, из которого можно явным образом определить декларативная разметка интерфейса управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-234">Whatever the reasons may be, it is possible to convert the Login control into a template, from which we can explicitly define the interface's declarative markup.</span></span>

<span data-ttu-id="fcb17-235">Необходимо выполнить два действия, чтобы обновить элемент управления входа в систему для сбора дополнительных учетных данных:</span><span class="sxs-lookup"><span data-stu-id="fcb17-235">We need to do two things in order to update the Login control to collect additional credentials:</span></span>

1. <span data-ttu-id="fcb17-236">Обновление интерфейса управления Login для включения элементов управления Web, чтобы собирать дополнительные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="fcb17-236">Update the Login control's interface to include Web control(s) to collect the additional credentials.</span></span>
2. <span data-ttu-id="fcb17-237">Переопределение логики управления входом внутренней проверки подлинности, чтобы только проверка подлинности пользователя имя пользователя и пароль действителен ли и их дополнительные учетные данные допустимы, слишком.</span><span class="sxs-lookup"><span data-stu-id="fcb17-237">Override the Login control's internal authentication logic so that a user is only authenticated if their username and password is valid and their additional credentials are valid, too.</span></span>

<span data-ttu-id="fcb17-238">Для выполнения первой задачи, необходимо преобразовать в шаблон элемента управления для входа и добавить необходимые веб-элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fcb17-238">To accomplish the first task, we need to convert the Login control into a template and add the necessary Web controls.</span></span> <span data-ttu-id="fcb17-239">Как и для второй задачи управления входом логики проверки подлинности могут быть заменены Создание обработчика событий для элемента управления [ `Authenticate` событие](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcb17-239">As for the second task, the Login control's authentication logic can be superseded by creating an event handler for the control's [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span>

<span data-ttu-id="fcb17-240">Давайте обновляет управления входом, он запрашивает у пользователей ввести имя пользователя, пароль и адрес электронной почты и только проверяет подлинность пользователя, если предоставленный адрес электронной почты соответствует свой адрес электронной почты для файла.</span><span class="sxs-lookup"><span data-stu-id="fcb17-240">Let's update the Login control so that it prompts users for their username, password, and email address and only authenticates the user if the email address supplied matches their email address on file.</span></span> <span data-ttu-id="fcb17-241">Необходимо сначала преобразовать в шаблон интерфейс управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-241">We first need to convert the Login control's interface to a template.</span></span> <span data-ttu-id="fcb17-242">Выберите смарт-тега элемента управления имя входа, преобразовать в шаблон.</span><span class="sxs-lookup"><span data-stu-id="fcb17-242">From the Login control's Smart Tag, choose the Convert to template option.</span></span>


<span data-ttu-id="fcb17-243">[![Преобразовать в шаблон элемента управления для входа](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-243">[![Convert the Login Control to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image17.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image16.png)</span></span>

<span data-ttu-id="fcb17-244">**Рис. 6**: преобразование в шаблон элемента управления для входа ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-244">**Figure 6**: Convert the Login Control to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fcb17-245">Чтобы восстановить состояние элемента управления для входа свою версию предварительно template, по ссылке сброса смарт-теге элемента управления.</span><span class="sxs-lookup"><span data-stu-id="fcb17-245">To revert the Login control to its pre-template version, click the Reset link from the control's Smart Tag.</span></span>


<span data-ttu-id="fcb17-246">Преобразование элемента управления для входа в шаблон добавляет `LayoutTemplate` для декларативная разметка элемента управления с помощью HTML-элементов и определение пользовательского интерфейса в веб-элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fcb17-246">Converting the Login control to a template adds a `LayoutTemplate` to the control's declarative markup with HTML elements and Web controls defining the user interface.</span></span> <span data-ttu-id="fcb17-247">Как показано на рис. 7, преобразование в шаблон элемента управления удаляет ряд свойств из окна свойств, таких как `TitleText`, `CreateUserUrl`, и т. д., так как эти значения игнорируются при использовании шаблона.</span><span class="sxs-lookup"><span data-stu-id="fcb17-247">As Figure 7 shows, converting the control to a template removes a number of properties from the Properties window, such as `TitleText`, `CreateUserUrl`, and so forth, since these property values are ignored when using a template.</span></span>


<span data-ttu-id="fcb17-248">[![Меньше свойств, доступных при элемент управления входа преобразуется в шаблон](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-248">[![Fewer Properties are Available When the Login Control is Converted to a Template](validating-user-credentials-against-the-membership-user-store-cs/_static/image20.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image19.png)</span></span>

<span data-ttu-id="fcb17-249">**Рис. 7**: меньше свойств, доступных при элемент управления входа преобразуется в шаблон ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-249">**Figure 7**: Fewer Properties are Available When the Login Control is Converted to a Template  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image21.png))</span></span>


<span data-ttu-id="fcb17-250">HTML-разметку в `LayoutTemplate` могут редактироваться по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="fcb17-250">The HTML markup in the `LayoutTemplate` may be modified as needed.</span></span> <span data-ttu-id="fcb17-251">Аналогичным образом вы можете добавить любое новое веб-элементов управления в шаблон.</span><span class="sxs-lookup"><span data-stu-id="fcb17-251">Likewise, feel free to add any new Web controls to the template.</span></span> <span data-ttu-id="fcb17-252">Тем не менее, важно управления входом в систему основные веб-элементов управления остаются в шаблон и сохранить назначенных им `ID` значения.</span><span class="sxs-lookup"><span data-stu-id="fcb17-252">However, it is important that Login control's core Web controls remain in the template and keep their assigned `ID` values.</span></span> <span data-ttu-id="fcb17-253">В частности, не удалите или переименуйте `UserName` или `Password` текстовые поля, `RememberMe` флажок `LoginButton` кнопки, `FailureText` метку, или `RequiredFieldValidator` элементов управления.</span><span class="sxs-lookup"><span data-stu-id="fcb17-253">In particular, do not remove or rename the `UserName` or `Password` TextBoxes, the `RememberMe` CheckBox, the `LoginButton` Button, the `FailureText` Label, or the `RequiredFieldValidator` controls.</span></span>

<span data-ttu-id="fcb17-254">Для сбора посетителей адрес электронной почты, необходимо добавить текстовое поле в шаблон.</span><span class="sxs-lookup"><span data-stu-id="fcb17-254">To collect the visitor's email address, we need to add a TextBox to the template.</span></span> <span data-ttu-id="fcb17-255">Добавьте следующую разметку декларативный между строки таблицы (`<tr>`), содержащий `Password` текстового поля и строки таблицы, содержащий Запомнить меня рядом раз флажок:</span><span class="sxs-lookup"><span data-stu-id="fcb17-255">Add the following declarative markup between the table row (`<tr>`) that contains the `Password` TextBox and the table row that holds the Remember me next time CheckBox:</span></span>

[!code-aspx[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample2.aspx)]

<span data-ttu-id="fcb17-256">После добавления `Email` текстовое поле, посетите веб-сайт с помощью браузера.</span><span class="sxs-lookup"><span data-stu-id="fcb17-256">After adding the `Email` TextBox, visit the page through a browser.</span></span> <span data-ttu-id="fcb17-257">Как показано на рис. 8, пользовательский интерфейс входа элемента управления теперь включает третьего текстового поля.</span><span class="sxs-lookup"><span data-stu-id="fcb17-257">As Figure 8 shows, the Login control's user interface now includes a third textbox.</span></span>


<span data-ttu-id="fcb17-258">[![Элемент управления входа теперь включает текстовое поле для адреса электронной почты пользователя](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-258">[![The Login Control Now Includes a Textbox for the User's Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image23.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image22.png)</span></span>

<span data-ttu-id="fcb17-259">**Рис. 8**: элемент управления входа теперь включает текстовое поле для адреса электронной почты пользователя ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-259">**Figure 8**: The Login Control Now Includes a Textbox for the User's Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image24.png))</span></span>


<span data-ttu-id="fcb17-260">На этом этапе управления входом по-прежнему используется `Membership.ValidateUser` метод, чтобы проверить предоставленные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="fcb17-260">At this point, the Login control is still using the `Membership.ValidateUser` method to validate the supplied credentials.</span></span> <span data-ttu-id="fcb17-261">Соответственно, значение, введенное в `Email` TextBox никак не влияет на ли пользователь может войти.</span><span class="sxs-lookup"><span data-stu-id="fcb17-261">Correspondingly, the value entered into the `Email` TextBox has no bearing on whether the user can log in.</span></span> <span data-ttu-id="fcb17-262">На шаге 3 мы рассмотрим переопределение логики проверки подлинности имени входа элемента управления, чтобы учетные данные являются только считается действительным, если имя пользователя и пароль являются допустимыми и адрес электронной почты указанного соответствует адрес электронной почты для файла.</span><span class="sxs-lookup"><span data-stu-id="fcb17-262">In Step 3 we will look at how to override the Login control's authentication logic so that the credentials are only considered valid if the username and password are valid and the supplied email address matches up with the email address on file.</span></span>

## <a name="step-3-modifying-the-login-controls-authentication-logic"></a><span data-ttu-id="fcb17-263">Шаг 3: Изменение логики проверки подлинности управления входом</span><span class="sxs-lookup"><span data-stu-id="fcb17-263">Step 3: Modifying the Login Control's Authentication Logic</span></span>

<span data-ttu-id="fcb17-264">Когда посетитель предоставляет ей учетные данные и щелчков мыши, затем следует кнопку входа, обратную передачу имени входа контроль над и проходит через рабочий процесс проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="fcb17-264">When a visitor supplies her credentials and clicks the Log In button, a postback ensues and the Login control progresses through its authentication workflow.</span></span> <span data-ttu-id="fcb17-265">Рабочий процесс запускается, вызывая [ `LoggingIn` событие](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcb17-265">The workflow starts by raising the [`LoggingIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggingin.aspx).</span></span> <span data-ttu-id="fcb17-266">Все обработчики событий, связанных с этим событием может привести к отмене журнала в операции, установив `e.Cancel` свойства `true`.</span><span class="sxs-lookup"><span data-stu-id="fcb17-266">Any event handlers associated with this event may cancel the log in operation by setting the `e.Cancel` property to `true`.</span></span>

<span data-ttu-id="fcb17-267">Если журнал в операции не отменяется, рабочий процесс продвижения, вызывая [ `Authenticate` событие](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcb17-267">If the log in operation is not cancelled, the workflow progresses by raising the [`Authenticate` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.authenticate.aspx).</span></span> <span data-ttu-id="fcb17-268">Если обработчик событий для `Authenticate` события, то он отвечает за определение ли указанные учетные данные допустимы, или нет.</span><span class="sxs-lookup"><span data-stu-id="fcb17-268">If there is an event handler for the `Authenticate` event, then it is responsible for determining whether the supplied credentials are valid or not.</span></span> <span data-ttu-id="fcb17-269">Если нет обработчика, управления входом использует `Membership.ValidateUser` метод для определения действительности учетных данных.</span><span class="sxs-lookup"><span data-stu-id="fcb17-269">If no event handler is specified, the Login control uses the `Membership.ValidateUser` method to determine the validity of the credentials.</span></span>

<span data-ttu-id="fcb17-270">Если предоставленные учетные данные допустимы, а затем создается билета проверки подлинности с помощью форм, [ `LoggedIn` событие](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) происходит событие, и пользователь перенаправляется на соответствующую страницу.</span><span class="sxs-lookup"><span data-stu-id="fcb17-270">If the supplied credentials are valid, then the forms authentication ticket is created, the [`LoggedIn` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loggedin.aspx) is raised, and the user is redirected to the appropriate page.</span></span> <span data-ttu-id="fcb17-271">Если, однако учетные данные считаются недействительными, а затем [ `LoginError` событие](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) возникает и отображается сообщение, информирующее пользователя, учетные данные были заданы неверно.</span><span class="sxs-lookup"><span data-stu-id="fcb17-271">If, however, the credentials are deemed invalid, then the [`LoginError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.loginerror.aspx) is raised and a message is displayed informing the user that their credentials were invalid.</span></span> <span data-ttu-id="fcb17-272">По умолчанию при сбое входа в систему управления просто устанавливает его `FailureText` метки свойства Text элемента управления, чтобы сообщение об ошибке (попытку входа в систему не выполнена.</span><span class="sxs-lookup"><span data-stu-id="fcb17-272">By default, on failure the Login control simply sets its `FailureText` Label control's Text property to a failure message ( Your login attempt was not successful.</span></span> <span data-ttu-id="fcb17-273">Повторите попытку).</span><span class="sxs-lookup"><span data-stu-id="fcb17-273">Please try again ).</span></span> <span data-ttu-id="fcb17-274">Тем не менее если управления входом [ `FailureAction` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) равно `RedirectToLoginPage`, затем проблем входа в систему управления `Response.Redirect` на страницу входа, добавления параметра строки запроса `loginfailure=1` (что вызывает имени входа элемент управления для отображения сообщения об ошибке).</span><span class="sxs-lookup"><span data-stu-id="fcb17-274">However, if the Login control's [`FailureAction` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failureaction.aspx) is set to `RedirectToLoginPage`, then the Login control issues a `Response.Redirect` to the login page appending the querystring parameter `loginfailure=1` (which causes the Login control to display the failure message).</span></span>

<span data-ttu-id="fcb17-275">Рис. 9 предлагает блок-схема рабочего процесса проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="fcb17-275">Figure 9 offers a flow chart of the authentication workflow.</span></span>


<span data-ttu-id="fcb17-276">[![Рабочий процесс управления входа проверки подлинности](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-276">[![The Login Control's Authentication Workflow](validating-user-credentials-against-the-membership-user-store-cs/_static/image26.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image25.png)</span></span>

<span data-ttu-id="fcb17-277">**Рис. 9**: рабочий процесс управления входом в систему проверки подлинности ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-277">**Figure 9**: The Login Control's Authentication Workflow  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fcb17-278">Если вас интересует, когда используется `FailureAction` `RedirectToLogin` странице параметр, рассмотрим следующий сценарий.</span><span class="sxs-lookup"><span data-stu-id="fcb17-278">If you are wondering when you would use the `FailureAction`'s `RedirectToLogin` page option, consider the following scenario.</span></span> <span data-ttu-id="fcb17-279">В данный момент нашей `Site.master` Главная страница в настоящее время имеет текст, Hello, stranger отображается в левом столбце при посещении анонимных пользователей, но Предположим, мы хотим замените текст элемента управления для входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-279">Right now our `Site.master` master page currently has the text, Hello, stranger displayed in the left column when visited by an anonymous user, but imagine that we wanted to replace that text with a Login control.</span></span> <span data-ttu-id="fcb17-280">Данный подход позволяет анонимным пользователям входить в систему с любой страницы на сайте, не требуя их посетить непосредственно на страницу входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-280">This would allow an anonymous user to log in from any page on the site, instead of requiring them to visit the login page directly.</span></span> <span data-ttu-id="fcb17-281">Тем не менее, если пользователь не удалось выполнить вход через управления входом, подготовки к просмотру в главной страницы, он может быть целесообразно перенаправит их на странице входа (`Login.aspx`), так как эта страница скорее всего, включает дополнительные инструкции, ссылки и другие Справка — например каналов для создания Новая учетная запись или извлечь утраченный пароль -, не были добавлены на главную страницу.</span><span class="sxs-lookup"><span data-stu-id="fcb17-281">However, if a user was unable to log in via the Login control rendered by the master page, it might make sense to redirect them to the login page (`Login.aspx`) because that page likely includes additional instructions, links, and other help - such as links to create a new account or retrieve a lost password - that were not added to the master page.</span></span>


### <a name="creating-theauthenticateevent-handler"></a><span data-ttu-id="fcb17-282">Создание`Authenticate`обработчика событий</span><span class="sxs-lookup"><span data-stu-id="fcb17-282">Creating the`Authenticate`Event Handler</span></span>

<span data-ttu-id="fcb17-283">Чтобы подключить логику нестандартной проверки подлинности, необходимо создать обработчик событий для элемента управления входом `Authenticate` событий.</span><span class="sxs-lookup"><span data-stu-id="fcb17-283">In order to plug in our custom authentication logic, we need to create an event handler for the Login control's `Authenticate` event.</span></span> <span data-ttu-id="fcb17-284">Создание обработчика событий для `Authenticate` событий создаст следующие определения обработчика событий:</span><span class="sxs-lookup"><span data-stu-id="fcb17-284">Creating an event handler for the `Authenticate` event will generate the following event handler definition:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample3.cs)]

<span data-ttu-id="fcb17-285">Как видите, `Authenticate` обработчик событий передается объект типа [ `AuthenticateEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) как второй входной параметр.</span><span class="sxs-lookup"><span data-stu-id="fcb17-285">As you can see, the `Authenticate` event handler is passed an object of type [`AuthenticateEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.authenticateeventargs.aspx) as its second input parameter.</span></span> <span data-ttu-id="fcb17-286">`AuthenticateEventArgs` Класс содержит логическое свойство с именем `Authenticated` , используемый для указания, допустимы ли указанные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="fcb17-286">The `AuthenticateEventArgs` class contains a Boolean property named `Authenticated` that is used to specify whether the supplied credentials are valid.</span></span> <span data-ttu-id="fcb17-287">Наша задача, то необходимо писать код здесь, определяет, допустимы ли указанные учетные данные, а также задания `e.Authenticate` свойство соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-287">Our task, then, is to write code here that determines whether the supplied credentials are valid or not, and to set the `e.Authenticate` property accordingly.</span></span>

### <a name="determining-and-validating-the-supplied-credentials"></a><span data-ttu-id="fcb17-288">Определение и проверка предоставленных учетных данных</span><span class="sxs-lookup"><span data-stu-id="fcb17-288">Determining and Validating the Supplied Credentials</span></span>

<span data-ttu-id="fcb17-289">Используйте элемент управления Login [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) и [ `Password` свойства](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) определить учетные данные пользователя и пароль, введенный пользователем.</span><span class="sxs-lookup"><span data-stu-id="fcb17-289">Use the Login control's [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.password.aspx) to determine the username and password credentials entered by the user.</span></span> <span data-ttu-id="fcb17-290">Для определения значения, введенные в любые дополнительные веб-элементов управления (таких как `Email` TextBox, мы добавили в предыдущем шаге), использовать *`LoginControlID`* `.FindControl`(»*`controlID`*») для получения программную ссылку на веб-элемент управления в шаблоне, `ID` свойства равен *`controlID`*.</span><span class="sxs-lookup"><span data-stu-id="fcb17-290">In order to determine the values entered into any additional Web controls (such as the `Email` TextBox we added in the previous step), use *`LoginControlID`*`.FindControl`("*`controlID`*") to obtain a programmatic reference to the Web control in the template whose `ID` property is equal to *`controlID`*.</span></span> <span data-ttu-id="fcb17-291">Например, чтобы получить ссылку на `Email` текстовое поле, используйте следующий код:</span><span class="sxs-lookup"><span data-stu-id="fcb17-291">For example, to get a reference to the `Email` TextBox, use the following code:</span></span>

`TextBox EmailTextBox = myLogin.FindControl("Email") as TextBox;`

<span data-ttu-id="fcb17-292">Чтобы проверить учетные данные пользователя, необходимо сделать две вещи:</span><span class="sxs-lookup"><span data-stu-id="fcb17-292">In order to validate the user's credentials we need to do two things:</span></span>

1. <span data-ttu-id="fcb17-293">Убедитесь, что указанное имя пользователя и пароль являются допустимыми</span><span class="sxs-lookup"><span data-stu-id="fcb17-293">Ensure that the provided username and password are valid</span></span>
2. <span data-ttu-id="fcb17-294">Убедитесь, что введенный адрес электронной почты соответствует адрес электронной почты для пользователя при входе в файл</span><span class="sxs-lookup"><span data-stu-id="fcb17-294">Ensure that email address entered matches the email address on file for the user attempting to log in</span></span>

<span data-ttu-id="fcb17-295">Для выполнения первой проверки, можно просто использовать `Membership.ValidateUser` метода, как мы видели в шаге 1.</span><span class="sxs-lookup"><span data-stu-id="fcb17-295">To accomplish the first check we can simply use the `Membership.ValidateUser` method like we saw in Step 1.</span></span> <span data-ttu-id="fcb17-296">Вторая проверка необходимо определить адрес электронной почты пользователя, чтобы мы можно сравнить с адресом электронной почты, введенные в элементе управления TextBox.</span><span class="sxs-lookup"><span data-stu-id="fcb17-296">For the second check, we need to determine the user's email address so that we can compare it to the email address they entered into the TextBox control.</span></span> <span data-ttu-id="fcb17-297">Чтобы получить сведения о конкретном пользователе, используйте `Membership` класса [ `GetUser` метод](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="fcb17-297">To get information about a particular user, use the `Membership` class's [`GetUser` method](https://msdn.microsoft.com/library/system.web.security.membership.getuser.aspx).</span></span>

<span data-ttu-id="fcb17-298">`GetUser` Метод имеет несколько перегрузок.</span><span class="sxs-lookup"><span data-stu-id="fcb17-298">The `GetUser` method has a number of overloads.</span></span> <span data-ttu-id="fcb17-299">Если используется без передачи параметров, он возвращает сведения о текущего пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-299">If used without passing in any parameters, it returns information about the currently logged in user.</span></span> <span data-ttu-id="fcb17-300">Чтобы получить сведения о конкретном пользователе, вызовите `GetUser` передав их имена пользователей.</span><span class="sxs-lookup"><span data-stu-id="fcb17-300">To get information about a particular user, call `GetUser` passing in their username.</span></span> <span data-ttu-id="fcb17-301">В любом случае `GetUser` возвращает [ `MembershipUser` объекта](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), который имеет свойства, такие как `UserName`, `Email`, `IsApproved`, `IsOnline`, и т. д.</span><span class="sxs-lookup"><span data-stu-id="fcb17-301">Either way, `GetUser` returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which has properties like `UserName`, `Email`, `IsApproved`, `IsOnline`, and so on.</span></span>

<span data-ttu-id="fcb17-302">Следующий код реализует эти две проверки.</span><span class="sxs-lookup"><span data-stu-id="fcb17-302">The following code implements these two checks.</span></span> <span data-ttu-id="fcb17-303">Если оба передать, затем `e.Authenticate` равно `true`, в противном случае ему назначается `false`.</span><span class="sxs-lookup"><span data-stu-id="fcb17-303">If both pass, then `e.Authenticate` is set to `true`, otherwise it is assigned `false`.</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample4.cs)]

<span data-ttu-id="fcb17-304">Этот код в месте попытка войти качестве допустимого пользователя, введите правильное имя пользователя, пароль и адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="fcb17-304">With this code in place, attempt to log in as a valid user, entering the correct username, password, and email address.</span></span> <span data-ttu-id="fcb17-305">Попробуйте еще раз, но на этот раз намеренно используйте неправильного адреса электронной почты (см. рис. 10).</span><span class="sxs-lookup"><span data-stu-id="fcb17-305">Try it again, but this time purposefully use an incorrect email address (see Figure 10).</span></span> <span data-ttu-id="fcb17-306">Наконец попробуйте его третий раз, используя имя пользователя не существует.</span><span class="sxs-lookup"><span data-stu-id="fcb17-306">Finally, try it a third time using a non-existent username.</span></span> <span data-ttu-id="fcb17-307">В первом случае пользователь должен успешно войти на сайт, но в двух последних случаях должно появиться сообщение недействительные учетные данные управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-307">In the first case you should be successfully logged on to the site, but in the last two cases you should see the Login control's invalid credentials message.</span></span>


<span data-ttu-id="fcb17-308">[![Не удается войти Tito при указании неправильного адреса электронной почты](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-308">[![Tito Cannot Log In When Supplying an Incorrect Email Address](validating-user-credentials-against-the-membership-user-store-cs/_static/image29.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image28.png)</span></span>

<span data-ttu-id="fcb17-309">**Рис. 10**: Tito нельзя журнала в при указав неправильный адрес электронной почты ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-309">**Figure 10**: Tito Cannot Log In When Supplying an Incorrect Email Address  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="fcb17-310">Как описано в разделе как членство Framework обрабатывает недопустимые попыток входа на шаге 1, если `Membership.ValidateUser` вызывается метод и передать недопустимые учетные данные, он отслеживает попытки недопустимое имя для входа и блокирует работу пользователя, если они превышают определенное Пороговое значение попыток в течение указанного интервала времени.</span><span class="sxs-lookup"><span data-stu-id="fcb17-310">As discussed in the How the Membership Framework Handles Invalid Login Attempts section in Step 1, when the `Membership.ValidateUser` method is called and passed invalid credentials, it keeps track of the invalid login attempt and locks out the user if they exceed a certain threshold of invalid attempts within a specified time window.</span></span> <span data-ttu-id="fcb17-311">Поскольку наши вызовы логики настраиваемой проверки подлинности `ValidateUser` метод неправильный пароль для допустимое имя пользователя увеличивает счетчик попыток недопустимое имя для входа, но не этого счетчика увеличивается в случае, когда имя пользователя и пароль являются допустимыми, но Неправильный адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="fcb17-311">Since our custom authentication logic calls the `ValidateUser` method, an incorrect password for a valid username will increment the invalid login attempt counter, but this counter is not incremented in the case where the username and password are valid, but the email address is incorrect.</span></span> <span data-ttu-id="fcb17-312">Скорее всего, это подходит, так как это маловероятно, что злоумышленник будет знать имя пользователя и пароль, что нужно использовать подбора методы для определения адреса электронной почты пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-312">Chances are, this behavior is suitable, since it's unlikely that a hacker will know the username and password, but have to use brute force techniques to determine the user's email address.</span></span>


## <a name="step-4-improving-the-login-controls-invalid-credentials-message"></a><span data-ttu-id="fcb17-313">Шаг 4: Улучшение управления входом недействительные учетные данные сообщения</span><span class="sxs-lookup"><span data-stu-id="fcb17-313">Step 4: Improving the Login Control's Invalid Credentials Message</span></span>

<span data-ttu-id="fcb17-314">Когда пользователь пытается войти в систему с неправильными учетными данными, элемент управления входа отображает сообщение о том, что попытка входа была неудачной.</span><span class="sxs-lookup"><span data-stu-id="fcb17-314">When a user attempts to log on with invalid credentials, the Login control displays a message explaining that the login attempt was unsuccessful.</span></span> <span data-ttu-id="fcb17-315">В частности, элемент управления отображает сообщения, заданного его [ `FailureText` свойство](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), имеющий значение по умолчанию попытку входа не выполнена.</span><span class="sxs-lookup"><span data-stu-id="fcb17-315">In particular, the control displays the message specified by its [`FailureText` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.failuretext.aspx), which has a default value of Your login attempt was not successful.</span></span> <span data-ttu-id="fcb17-316">Повторите попытку.</span><span class="sxs-lookup"><span data-stu-id="fcb17-316">Please try again.</span></span>

<span data-ttu-id="fcb17-317">Помните, что существует множество причин, почему может быть недопустимые учетные данные пользователя:</span><span class="sxs-lookup"><span data-stu-id="fcb17-317">Recall that there are many reasons why a user's credentials may be invalid:</span></span>

- <span data-ttu-id="fcb17-318">Имя пользователя не существует</span><span class="sxs-lookup"><span data-stu-id="fcb17-318">The username may not exist</span></span>
- <span data-ttu-id="fcb17-319">Имя пользователя существует, но пароль является недопустимым</span><span class="sxs-lookup"><span data-stu-id="fcb17-319">The username exists, but the password is invalid</span></span>
- <span data-ttu-id="fcb17-320">Имя пользователя и пароль являются допустимыми, но пользователь еще не утвержденные</span><span class="sxs-lookup"><span data-stu-id="fcb17-320">The username and password are valid, but the user is not yet approved</span></span>
- <span data-ttu-id="fcb17-321">Имя пользователя и пароль являются допустимыми, но пользователь заблокирован out (скорее всего, так как оно превышает число попыток недопустимое имя для входа в течение указанного промежутка времени)</span><span class="sxs-lookup"><span data-stu-id="fcb17-321">The username and password are valid, but the user is locked out (most likely because they exceeded the number of invalid login attempts within the specified time frame)</span></span>

<span data-ttu-id="fcb17-322">И могут быть другие причины при использовании логики настраиваемой проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="fcb17-322">And there may be other reasons when using custom authentication logic.</span></span> <span data-ttu-id="fcb17-323">Например кодом мы писали на шаге 3, имя пользователя и пароль может быть допустимым, но адрес электронной почты может быть неверным.</span><span class="sxs-lookup"><span data-stu-id="fcb17-323">For example, with the code we wrote in Step 3, the username and password may be valid, but the email address may be incorrect.</span></span>

<span data-ttu-id="fcb17-324">Независимо от того, почему учетные данные недействительны элемент управления входа отображает же сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="fcb17-324">Regardless of why the credentials are invalid, the Login control displays the same error message.</span></span> <span data-ttu-id="fcb17-325">Отсутствие обратной связи может запутать пользователя, чья учетная запись не была утверждена или кто была заблокирована. С небольшой работы, мы может иметь более подходящим сообщение элемента управления для входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-325">This lack of feedback can be confusing for a user whose account has not yet been approved or who has been locked out. With a little bit of work, though, we can have the Login control display a more appropriate message.</span></span>

<span data-ttu-id="fcb17-326">Каждый раз, когда пользователь пытается войти в систему с неправильными учетными данными входа в систему управления вызывает его `LoginError` событий.</span><span class="sxs-lookup"><span data-stu-id="fcb17-326">Whenever a user attempts to login with invalid credentials the Login control raises its `LoginError` event.</span></span> <span data-ttu-id="fcb17-327">Теперь создайте обработчик событий для этого события и добавьте следующий код:</span><span class="sxs-lookup"><span data-stu-id="fcb17-327">Go ahead and create an event handler for this event, and add the following code:</span></span>

[!code-csharp[Main](validating-user-credentials-against-the-membership-user-store-cs/samples/sample5.cs)]

<span data-ttu-id="fcb17-328">Приведенный выше код запускается, задав управления входом `FailureText` свойства, значение по умолчанию (попытку входа в систему не выполнена.</span><span class="sxs-lookup"><span data-stu-id="fcb17-328">The above code starts by setting the Login control's `FailureText` property to the default value ( Your login attempt was not successful.</span></span> <span data-ttu-id="fcb17-329">Повторите попытку).</span><span class="sxs-lookup"><span data-stu-id="fcb17-329">Please try again ).</span></span> <span data-ttu-id="fcb17-330">Затем он проверяет, если предоставленное имя пользователя сопоставляется с существующей учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-330">It then checks to see if the username supplied maps to an existing user account.</span></span> <span data-ttu-id="fcb17-331">Если таким образом, он просматривает результирующий `MembershipUser` объекта `IsLockedOut` и `IsApproved` свойства, чтобы определить, если учетная запись заблокирована или не была утверждена.</span><span class="sxs-lookup"><span data-stu-id="fcb17-331">If so, it consults the resulting `MembershipUser` object's `IsLockedOut` and `IsApproved` properties to determine if the account has been locked out or has not yet been approved.</span></span> <span data-ttu-id="fcb17-332">В любом случае `FailureText` свойство обновляется в соответствующее значение.</span><span class="sxs-lookup"><span data-stu-id="fcb17-332">In either case, the `FailureText` property is updated to a corresponding value.</span></span>

<span data-ttu-id="fcb17-333">Чтобы проверить код, намеренно попытайтесь войдите в систему как существующего пользователя, но использовать неправильный пароль.</span><span class="sxs-lookup"><span data-stu-id="fcb17-333">To test this code, purposefully attempt to log in as an existing user, but use an incorrect password.</span></span> <span data-ttu-id="fcb17-334">Выполните это пять раз подряд в течение 10 минут, а учетная запись будет заблокирована. Как показано на рис. 11, входа последующие попытки будут всегда ошибкой (даже с правильным паролем), однако теперь отображения более описательное ваша учетная запись заблокирована из-за слишком большого числа попыток недопустимое имя для входа.</span><span class="sxs-lookup"><span data-stu-id="fcb17-334">Do this five times in a row within a 10 minute time frame and the account will be locked out. As Figure 11 shows, subsequent login attempts will always fail (even with the correct password), but will now display the more descriptive Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="fcb17-335">Обратитесь к администратору, чтобы разблокировать учетную запись сообщения.</span><span class="sxs-lookup"><span data-stu-id="fcb17-335">Please contact the administrator to have your account unlocked message.</span></span>


<span data-ttu-id="fcb17-336">[![Tito выполняется слишком много попыток недопустимое имя для входа и была заблокирована](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="fcb17-336">[![Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out](validating-user-credentials-against-the-membership-user-store-cs/_static/image32.png)](validating-user-credentials-against-the-membership-user-store-cs/_static/image31.png)</span></span>

<span data-ttu-id="fcb17-337">**Рис. 11**: Tito выполняется слишком много недопустимый попыток входа и имеет был заблокирован ([Просмотр полноразмерное изображение](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="fcb17-337">**Figure 11**: Tito Performed Too Many Invalid Login Attempts and Has Been Locked Out  ([Click to view full-size image](validating-user-credentials-against-the-membership-user-store-cs/_static/image33.png))</span></span>


## <a name="summary"></a><span data-ttu-id="fcb17-338">Сводка</span><span class="sxs-lookup"><span data-stu-id="fcb17-338">Summary</span></span>

<span data-ttu-id="fcb17-339">Предыдущий этого учебника нашу страницу входа проверить предоставленные учетные данные по списку жестко пар имени пользователя и пароля.</span><span class="sxs-lookup"><span data-stu-id="fcb17-339">Prior this tutorial, our login page validated the supplied credentials against a hard-coded list of username/password pairs.</span></span> <span data-ttu-id="fcb17-340">В этом учебнике мы обновили страницу для проверки учетных данных для членства framework.</span><span class="sxs-lookup"><span data-stu-id="fcb17-340">In this tutorial, we updated the page to validate credentials against the Membership framework.</span></span> <span data-ttu-id="fcb17-341">На первом шаге мы рассмотрели использование `Membership.ValidateUser` метод программными средствами.</span><span class="sxs-lookup"><span data-stu-id="fcb17-341">In Step 1 we looked at using the `Membership.ValidateUser` method programmatically.</span></span> <span data-ttu-id="fcb17-342">На шаге 2 мы заменили нашей созданная вручную пользовательского интерфейса и кода с помощью управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-342">In Step 2 we replaced our manually created user interface and code with the Login control.</span></span>

<span data-ttu-id="fcb17-343">Элемент управления входа Отрисовывает пользовательский интерфейс стандартное имя входа и автоматически проверяет учетные данные пользователя с framework членства.</span><span class="sxs-lookup"><span data-stu-id="fcb17-343">The Login control renders a standard login user interface and automatically validates the user's credentials against the Membership framework.</span></span> <span data-ttu-id="fcb17-344">Кроме того в случае действительные учетные данные входа в систему управления входе пользователя посредством проверки подлинности форм.</span><span class="sxs-lookup"><span data-stu-id="fcb17-344">Moreover, in the event of valid credentials, the Login control signs the user in via forms authentication.</span></span> <span data-ttu-id="fcb17-345">Иными словами в пользовательском интерфейсе входа полнофункциональным доступен, просто перетащив управления входом на страницы, не очень декларативная разметка или код, необходимый.</span><span class="sxs-lookup"><span data-stu-id="fcb17-345">In short, a fully functional login user experience is available by simply dragging the Login control onto a page, no extra declarative markup or code necessary.</span></span> <span data-ttu-id="fcb17-346">Дополнительные возможности, широкие возможности настройки, позволяя нормально степень контроля над обоих готовый для просмотра пользовательского интерфейса и проверку подлинности логики управления входом.</span><span class="sxs-lookup"><span data-stu-id="fcb17-346">What's more, the Login control is highly customizable, allowing for a fine degree of control over both the rendered user interface and authentication logic.</span></span>

<span data-ttu-id="fcb17-347">На этом этапе посетителей на нашем сайте можно создать новую учетную запись пользователя и журнала на сайт, но у нас есть еще рассмотреть ограничения доступа к страницам, зависящих от пользователя, прошедшего проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="fcb17-347">At this point visitors to our website can create a new user account and log into the site, but we have yet to look at restricting access to pages based on the authenticated user.</span></span> <span data-ttu-id="fcb17-348">В настоящее время любого пользователя, прошедшего проверку подлинности или анонимный доступ, можно просмотреть все страницы на нашем сайте.</span><span class="sxs-lookup"><span data-stu-id="fcb17-348">Currently, any user, authenticated or anonymous, can view any page on our site.</span></span> <span data-ttu-id="fcb17-349">А также управление доступом на нашем сайте страницы на основе пользователя по, возможно некоторые страницы, функциональные возможности которых зависит от пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-349">Along with controlling access to our site's pages on a user-by-user basis, we might have certain pages whose functionality depends on the user.</span></span> <span data-ttu-id="fcb17-350">Далее учебнике рассказывается, как для ограничения доступа и функциональные возможности в страницы на основе зарегистрированного в системе пользователя.</span><span class="sxs-lookup"><span data-stu-id="fcb17-350">The next tutorial looks at how to limit access and in-page functionality based on the logged in user.</span></span>

<span data-ttu-id="fcb17-351">Программирование довольны!</span><span class="sxs-lookup"><span data-stu-id="fcb17-351">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="fcb17-352">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="fcb17-352">Further Reading</span></span>

<span data-ttu-id="fcb17-353">Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="fcb17-353">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="fcb17-354">Отображение сообщений с пользовательскими заблокирован и не утвержденные пользователи</span><span class="sxs-lookup"><span data-stu-id="fcb17-354">Displaying Custom Messages to Locked Out and Non-Approved Users</span></span>](http://aspnet.4guysfromrolla.com/articles/050306-1.aspx)
- [<span data-ttu-id="fcb17-355">Изучение ASP.NET 2.0 членства, ролей и профиля</span><span class="sxs-lookup"><span data-stu-id="fcb17-355">Examining ASP.NET 2.0's Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="fcb17-356">Практическое руководство: Создание имени входа страницы ASP.NET</span><span class="sxs-lookup"><span data-stu-id="fcb17-356">How To: Create an ASP.NET Login Page</span></span>](https://msdn.microsoft.com/library/ms178331.aspx)
- [<span data-ttu-id="fcb17-357">Техническая документация управления входа</span><span class="sxs-lookup"><span data-stu-id="fcb17-357">Login Control Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.ui.webcontrols.login.aspx)
- [<span data-ttu-id="fcb17-358">С помощью элементов управления входом</span><span class="sxs-lookup"><span data-stu-id="fcb17-358">Using the Login Controls</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/security/login.aspx)

### <a name="about-the-author"></a><span data-ttu-id="fcb17-359">Об авторе</span><span class="sxs-lookup"><span data-stu-id="fcb17-359">About the Author</span></span>

<span data-ttu-id="fcb17-360">Скотт Митчелл, автор нескольких ASP/ASP.NET и основатель 4GuysFromRolla.com, работает с веб-технологиями Майкрософт с 1998 года.</span><span class="sxs-lookup"><span data-stu-id="fcb17-360">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="fcb17-361">Скотт — независимый консультант, trainer и записи.</span><span class="sxs-lookup"><span data-stu-id="fcb17-361">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="fcb17-362">Его последняя книга —  *[диспетчерами учат самостоятельно ASP.NET 2.0 в течение 24 часов](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="fcb17-362">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="fcb17-363">Скотт может быть достигнута по [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) или через его блог по [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="fcb17-363">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="fcb17-364">Благодарности</span><span class="sxs-lookup"><span data-stu-id="fcb17-364">Special Thanks To</span></span>

<span data-ttu-id="fcb17-365">Этот учебник ряд прошел проверку многие полезные рецензентов.</span><span class="sxs-lookup"><span data-stu-id="fcb17-365">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="fcb17-366">Основными редакторами этого учебника были Мерфи Тереза д и Майкл Olivero.</span><span class="sxs-lookup"><span data-stu-id="fcb17-366">Lead reviewers for this tutorial were Teresa Murphy and Michael Olivero.</span></span> <span data-ttu-id="fcb17-367">Объясняются моих последующих статей для MSDN?</span><span class="sxs-lookup"><span data-stu-id="fcb17-367">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="fcb17-368">Если Да, напишите мне по [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4guysfromrolla.com).</span><span class="sxs-lookup"><span data-stu-id="fcb17-368">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="fcb17-369">[Назад](creating-user-accounts-cs.md)
> [Вперед](user-based-authorization-cs.md)</span><span class="sxs-lookup"><span data-stu-id="fcb17-369">[Previous](creating-user-accounts-cs.md)
[Next](user-based-authorization-cs.md)</span></span>
