---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Создание интерфейса, чтобы выбрать одну учетную запись пользователя из многих (C#) | Документы Microsoft
author: rick-anderson
description: В этом учебнике будет создан пользовательский интерфейс с сеткой разбитый на страницы, которые можно использовать. В частности наш пользовательский интерфейс будет состоять из последовательности элементов управления LinkButton для...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/01/2008
ms.topic: article
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: 304505b18e330425ea1dc8df87a552f3d8cd15f3
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="building-an-interface-to-select-one-user-account-from-many-c"></a>Создание интерфейса, чтобы выбрать одну учетную запись пользователя из многих (C#)
====================
по [Скотт Митчелл](https://twitter.com/ScottOnWriting)

[Загрузить код](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) или [скачать PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)

> В этом учебнике будет создан пользовательский интерфейс с сеткой разбитый на страницы, которые можно использовать. В частности наш пользовательский интерфейс будет состоять из ряда элементов управления LinkButton для фильтрации результатов на основе начальной буквы имени пользователя и элемента управления GridView для отображения соответствующих пользователей. Мы начнем с перечислением всех учетных записей пользователей в элементе управления GridView. Затем в шаге 3 мы добавим фильтр элементов управления LinkButton. Шаг 4 анализирует подкачки отфильтрованные результаты. Интерфейс, созданный на шагах 2 – 4 будет использоваться в последующих учебники для выполнения административных задач для учетной записи пользователя.


## <a name="introduction"></a>Вступление

В <a id="_msoanchor_1"> </a> [ *назначение ролей пользователям* ](../roles/assigning-roles-to-users-cs.md) учебнике мы создали элементарного интерфейс администратор может выбрать пользователя ролей и управление ими ее. В частности интерфейс предоставлен администратором раскрывается список всех пользователей. Такой интерфейс подходит в том случае, если присутствуют, но меньше пользователь, учетные записи, но неудобным для сайтов с сотнями или тысячами учетных записей. Разбитый на страницы, которые можно использовать сетки — более подходящим, пользовательский интерфейс для веб-сайтов с базовыми классами большое число пользователей.

В этом учебнике будет создан этот пользовательский интерфейс. В частности наш пользовательский интерфейс будет состоять из ряда элементов управления LinkButton для фильтрации результатов на основе начальной буквы имени пользователя и элемента управления GridView для отображения соответствующих пользователей. Мы начнем с перечислением всех учетных записей пользователей в элементе управления GridView. Затем в шаге 3 мы добавим фильтр элементов управления LinkButton. Шаг 4 анализирует подкачки отфильтрованные результаты. Интерфейс, созданный на шагах 2 – 4 будет использоваться в последующих учебники для выполнения административных задач для учетной записи пользователя.

Давайте начнем!

## <a name="step-1-adding-new-aspnet-pages"></a>Шаг 1: Добавление новых страниц ASP.NET

В этом учебнике и двух следующих мы остановимся подробнее различные функции, связанные со администрирования и возможности. Нам потребуется несколько страниц ASP.NET для реализации в разделах, проверяются на протяжении этих учебников. Давайте создайте эти страницы и обновление карты сайта.

Начните с создания новой папки в проект с именем `Administration`. Добавьте две новые страницы ASP.NET в папку, связывание с каждой страницы `Site.master` главной страницы. Имя страницы:

- `ManageUsers.aspx`
- `UserInformation.aspx`

Также добавьте две страницы корневой каталог веб-сайта: `ChangePassword.aspx` и `RecoverPassword.aspx`.

Эти четыре страницы на этом этапе необходимо двух элементов управления содержимым, один для каждого из главной страницы ContentPlaceHolders: `MainContent` и `LoginContent`.

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

Мы хотим Показать разметки главной страницы по умолчанию для `LoginContent` ContentPlaceHolder для этих страниц. Таким образом, удалить декларативная разметка для `Content2` элемент управления содержимым. После этого разметка страницы должен содержать только один элемент управления содержимым.

Страницы ASP.NET в `Administration` папку предназначены исключительно для пользователей с правами администратора. Мы добавили роли администраторов в системе в <a id="_msoanchor_2"> </a> [ *Создание и управление ролями* ](../roles/creating-and-managing-roles-cs.md) учебника; ограничить доступ к этим двум страницам, к этой роли. Для этого добавьте `Web.config` файл `Administration` папки и настроить его `<authorization>` для признать пользователей в роли "Администраторы" и всех других лиц.

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

На этом этапе проекта в обозревателе решений должен выглядеть примерно на рисунке показано на рис. 1.


[![На веб-сайт добавлены четыре новых страниц и файл Web.config](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)

**Рис. 1**: четыре новых страниц и `Web.config` файла были добавлены на веб-сайт ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))


Наконец, обновление карты сайта (`Web.sitemap`) для включения записи для `ManageUsers.aspx` страницы. Добавьте следующий код XML после `<siteMapNode>` мы добавили учебников ролей.

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

С обновить карты веб-узла на узле с помощью браузера. Как показано на рисунке 2, навигации в левой части теперь включает элементы для администрирования учебники.


[![Карта сайта включает узел с названием Администрирование пользователей](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)

**На рисунке 2**: карты узла включает в себя под названием узла пользователя администрирования ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))


## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a>Шаг 2: Перечисление всех учетных записей пользователей в элементе управления GridView

Наша цель окончания для этого учебника — создать сетку разбитый на страницы, которые можно использовать, по которому администратор может выбрать учетную запись пользователя для управления. Давайте начнем с листинг *все* пользователей в элементе управления GridView. После завершения этого мы добавим фильтрации и разбиения на страницы интерфейсы и функциональные возможности.

Откройте `ManageUsers.aspx` страницы в `Administration` папки и добавить GridView, установив его `ID` для `UserAccounts`. Через несколько секунд напишете код для привязки к GridView с использованием нескольких учетных записей пользователя `Membership` класса `GetAllUsers` метод. Как отмечалось в предыдущих учебниках, метод GetAllUsers возвращает `MembershipUserCollection` объект, который представляет собой коллекцию из `MembershipUser` объектов. Каждый `MembershipUser` в коллекции включает такие свойства, как `UserName`, `Email`, `IsApproved`, и т. д.

Чтобы отобразить сведения об учетной записи пользователя в GridView, присвоить свойству `AutoGenerateColumns` свойству значение False и добавьте стояли для `UserName`, `Email`, и `Comment` свойства и CheckBoxFields для `IsApproved`, `IsLockedOut`, и `IsOnline` свойства. Эта конфигурация может применяться через декларативная разметка элемента управления или через диалоговое окно «поля». Рис. 3 показано снимок экрана полей диалоговое окно после автоматического создания полей флажок снят и стояли и CheckBoxFields добавлен и настроен.


[![Добавьте три стояли и три CheckBoxFields к GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)

**Рис. 3**: добавьте три стояли и три CheckBoxFields к GridView ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))


После настройки вашей GridView, убедитесь, что его декларативная разметка будет выглядеть примерно:

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

Далее нам нужно написать код, который связывает учетные записи пользователей к GridView. Создайте метод с именем `BindUserAccounts` для выполнения этой задачи, а затем вызвать его из `Page_Load` обработчик событий при первом посещении страницы.

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

Теперь пора проверить страницу через браузер. Как показано на рис. 4, `UserAccounts` GridView содержит имя пользователя, адрес электронной почты и других соответствующих учетных записей для всех пользователей в системе.


[![Учетные записи пользователей указаны в GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)

**Рис. 4**: учетные записи пользователей указаны в GridView ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))


## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a>Шаг 3: Фильтрация результатов по первой букве имени пользователя

В настоящее время `UserAccounts` показывает GridView *все* учетных записей пользователей. Для веб-сайтов с сотнями или тысячами учетных записей пользователей крайне важно что этот пользователь не сможет быстро сократить отображаемых учетных записей. Это можно сделать, добавив фильтрации элементов управления LinkButton на страницу. Давайте добавим 27 элементов управления LinkButton на страницу: один под названием все вместе с одной LinkButton для каждой буквы алфавита. При выборе всех LinkButton GridView Показать всех пользователей. При нажатии кнопки определенной буквой, будет отображаться только тех пользователей, имена которых начинается с указанной буквы.

Наш первой задачей является добавление элементов управления LinkButton 27. Один из вариантов является создание элементов управления LinkButton 27 декларативно, по одному. Более гибкий подход состоит в использовании управления повторителем с `ItemTemplate` , подготавливает к просмотру LinkButton, а затем связывает параметры фильтрации повторителя как `string` массива.

Запуск, добавив на страницу выше управления повторителем `UserAccounts` GridView. Задать повторителя `ID` свойства `FilteringUI`. Настройка шаблонов повторителя, чтобы его `ItemTemplate` отображает LinkButton которого `Text` и `CommandName` свойства привязаны к текущему элементу массива. Как мы видели в <a id="_msoanchor_3"> </a> [ *назначение ролей пользователям* ](../roles/assigning-roles-to-users-cs.md) учебника, это можно сделать с помощью `Container.DataItem` синтаксис привязки данных. Используйте повторителя `SeparatorTemplate` для отображения вертикальной линии между каждой связи.

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

Чтобы заполнить этот повторителя с нужными параметрами фильтрации, создайте метод с именем `BindFilteringUI`. Вызовите этот метод из `Page_Load` обработчик событий при первой загрузке страницы.

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

Этот метод задает параметры фильтрации в качестве элементов `string` массива `filterOptions`. Для каждого элемента в массиве повторителя сделает LinkButton с его `Text` и `CommandName` свойства, назначенные значение элемента массива.

Рис. 5 показано `ManageUsers.aspx` страниц при просмотре через браузер.


[![Повторителя перечислены 27 фильтрации элементов управления LinkButton](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)

**Рис. 5**: повторителя перечислены 27 фильтрации элементов управления LinkButton ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))


> [!NOTE]
> Имена пользователей могут начинаться с любого символа, включая цифры и знаки препинания. Чтобы просмотреть эти учетные записи, администратор будет использовать параметр все LinkButton. Кроме того можно добавить LinkButton для возврата всех учетных записей пользователей, которые начинаются с цифры. Я это поле оставить в качестве упражнения для модуля чтения.


Нажатие любой фильтрации элементов управления LinkButton обратную передачу, вызывает повторителя `ItemCommand` событий, но нет изменений в сетке, поскольку еще не знаем писать код для фильтрации результатов. `Membership` Класс включает [ `FindUsersByName` метод](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) , возвращает эти учетные записи пользователей, имена которых соответствует указанному шаблону поиска. Этот метод можно использовать для получения только те учетные записи пользователей, имена пользователей начинаются с буквы, определяемое `CommandName` из отфильтрованного LinkButton, который был щелкнут.

Начните с обновления `ManageUser.aspx` класса кода программной части страницы, чтобы оно включало свойство с именем `UsernameToMatch`. Это свойство сохраняет строку фильтра имени пользователя во время обратной передачи:

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

`UsernameToMatch` Свойство сохраняет его значение, ему назначается в `ViewState` коллекции с помощью ключа UsernameToMatch. При чтении значение этого свойства проверяется, существует ли значение в `ViewState` коллекции; в противном случае он возвращает значение по умолчанию — пустая строка. `UsernameToMatch` Свойство будет проявлять общий шаблон, а именно: сохранение значения состояния представления, чтобы любые изменения свойства сохраняются во время обратной передачи. Дополнительные сведения об этой модели см. в статье [основные сведения о состоянии представления ASP.NET](https://msdn.microsoft.com/library/ms972976.aspx).

Затем обновите `BindUserAccounts` таким образом, чтобы вместо вызова метода `Membership.GetAllUsers`, он вызывает `Membership.FindUsersByName`, передавая значение `UsernameToMatch` свойства дополненная SQL подстановочный знак, %.

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

Чтобы отобразить только те пользователи, имена которых начинаются с буквы A, задайте `UsernameToMatch` свойства A и затем вызвать метод `BindUserAccounts`. Это может привести к вызову `Membership.FindUsersByName("A%")`, возвращающий всех пользователей, имена которых начинаются с A. аналогичным образом, чтобы вернуть *все* пустую строку, чтобы назначить пользователей, `UsernameToMatch` свойство, чтобы `BindUserAccounts` будет метод вызов `Membership.FindUsersByName("%")`, тем самым возврат всех учетных записей пользователей.

Создайте обработчик событий для повторителя `ItemCommand` событий. Это событие возникает при нажатии одного из элементов управления LinkButton фильтр; он передается пользователь щелкнул LinkButton `CommandName` значение через `RepeaterCommandEventArgs` объекта. Нам необходимо присвоить соответствующее значение для `UsernameToMatch` свойства, а затем вызовите метод `BindUserAccounts` метод. Если `CommandName` — это все, пустую строку, чтобы назначить `UsernameToMatch` так, чтобы отображались все учетные записи пользователей. В противном случае назначить `CommandName` значение `UsernameToMatch`.

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

Этот код в месте Проверьте функцию фильтра. При первом посещении страницы, отображаются все учетные записи пользователей (см. обратно на рис. 5). При выборе LinkButton вызывает обратную передачу и фильтрует результаты, отображение только эти учетные записи пользователей, которые начинаются с «А».


[![Использование фильтрации элементов управления LinkButton для отображения этих пользователей, имена которых начинаются с определенной буквы](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)

**Рис. 6**: использование элементов управления LinkButton фильтрации для отображения этих пользователей с имя пользователя начинается с буквы некоторые ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))


## <a name="step-4-updating-the-gridview-to-use-paging"></a>Шаг 4: Обновление GridView применение разбиения на страницы

GridView, показанные на рис. 5 и 6 список всех записей, возвращаемых `FindUsersByName` метод. В случае сотен или тысяч учетных записей пользователей это может привести к перегрузке сведения при просмотре всех учетных записей (как в случае при нажатии кнопки все LinkButton или при первоначальном просмотре странице). Чтобы представить учетные записи пользователей в более управляемых фрагментах, настроим GridView для отображения 10 учетных записей пользователей одновременно.

Элемент управления GridView предлагает два типа разбиения на страницы:

- **Разбиение на страницы по умолчанию** — легко реализовать, но неэффективно. По сути, разбиение по страницам GridView по умолчанию ожидает *все* записи из источника данных. Затем отображает только соответствующая страница записей.
- **Пользовательское разбиение по страницам** -требует больше усилий, чтобы реализовать, но является более эффективным, чем разбиение по страницам по умолчанию, так как с помощью пользовательского разбиение по страницам данных источника возвращает только точного набора записей для отображения.

Разница в производительности по умолчанию и пользовательское разбиение по страницам может быть довольно значительной при постраничного просмотра тысячи записей. Так как мы будем строить этот интерфейс, при условии, что существует может быть сотен или тысяч учетные записи пользователей, воспользуемся пользовательское разбиение по страницам.

> [!NOTE]
> Более подробные сведения о различиях между по умолчанию и пользовательское разбиение по страницам, а также трудностей, связанных с реализации пользовательское разбиение по страницам, см. в разделе [эффективно подкачки через большие объемы данных](https://asp.net/learn/data-access/tutorial-25-cs.aspx). Анализ разницу в производительности по умолчанию и пользовательское разбиение по страницам, в разделе [пользовательское разбиение по страницам в ASP.NET с SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).


Чтобы реализовать пользовательское разбиение по страницам, необходимо сначала какого-либо механизма, с помощью которого для получения нужного подмножества записей, отображаемых в GridView. Хорошо то, что `Membership` класса `FindUsersByName` метод имеет перегрузку, которая позволяет указать индекс страницы и размера страницы и возвращает только учетные записи пользователей, попадающих в этот диапазон значений.

В частности, эта перегрузка имеет следующую сигнатуру: [ `FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)` ](https://msdn.microsoft.com/library/fa5st8b2.aspx).

*PageIndex* указывает на страницу учетных записей пользователей для возвращения; *pageSize* указывает число записей, отображаемых на одной странице. *TotalRecords* параметр `out` параметр, возвращающий количество общее учетных записей в хранилище пользователя.

> [!NOTE]
> Данные, возвращенные `FindUsersByName` сортируется по имени пользователя; невозможно настроить критерии сортировки.


Чтобы использовать пользовательское разбиение по страницам, но только при привязке к элементу управления ObjectDataSource можно настроить GridView. Для элемента управления ObjectDataSource реализовать пользовательское разбиение по страницам, требуется два метода: один, передаваемый с начала строки индекса и максимальное число записей для отображения, и возвращает точное подмножество записей, попадающих в этой области. и метод, возвращающий общее количество записей страниц. `FindUsersByName` Перегрузка принимает индекс страницы и размера страницы и возвращает общее количество записей с помощью `out` параметра. Поэтому имеется несоответствие интерфейса.

Один из вариантов является создание прокси-класс, предоставляющий интерфейс ObjectDataSource ожидает и автоматически вызывает `FindUsersByName` метод. Другой вариант — и один, мы будем использовать для данной статьи — заключается в создании собственный интерфейс разбиения по страницам и используют его вместо встроенный интерфейс разбиения на страницы GridView.

### <a name="creating-a-first-previous-next-last-paging-interface"></a>Во-первых, создание предыдущей, затем последняя интерфейс разбиения по страницам

С первым, назад, Далее и последнего элементов управления LinkButton создадим интерфейс разбиения по страницам. Первый LinkButton, при нажатии будет принимать на первую страницу данных, пользователь, тогда как назад вернет его предыдущей страницы. Точно так же Далее» и «Дата последнего переместит пользователя на страницу следующим и последним соответственно. Добавьте четыре элемента управления LinkButton под `UserAccounts` GridView.

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

Создайте обработчик событий для каждого LinkButton `Click` события.

На рисунке 7 показано четыре элементов управления LinkButton при просмотре через представление Visual Web Developer Design.


[![Далее добавьте первой, предыдущей, и последнего элементов управления LinkButton под GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)

**Рис. 7**: Добавление первой, назад, Далее и последнего элементов управления LinkButton под GridView ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))


### <a name="keeping-track-of-the-current-page-index"></a>Позволяет отслеживать их индекса текущей страницы

Когда пользователь посещает в первую очередь `ManageUsers.aspx` страницы или щелчки какого-либо фильтрации кнопок, мы хотим отображения первой страницы данных в GridView. Когда пользователь щелкает один из элементов управления LinkButton навигации, тем не менее, необходимо обновить страницу индекса. Для поддержания индекса страницы и число записей, отображаемых на каждой странице, добавьте следующие два свойства класса с выделенным кодом страницы:

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

Как `UsernameToMatch` свойства `PageIndex` свойство сохраняется его значений в состоянии представления. Только для чтения `PageSize` свойство возвращает значение жестко 10. Пригласить интересующихся обновить это свойство для использования шаблона, аналогичного `PageIndex`, а затем дополнить `ManageUsers.aspx` страницы таким образом, что лицо, посетив страницу можно указать, сколько учетных записей пользователей, которые будут отображаться на странице.

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a>Извлечение только текущую страницу записей, обновление индекса страницы и включение и отключение элементов управления LinkButton интерфейса постраничного просмотра

С помощью интерфейса постраничного просмотра на месте и `PageIndex` и `PageSize` свойства добавляются все готово для обновления `BindUserAccounts` метод использования соответствующего `FindUsersByName` перегрузки. Кроме того необходимо иметь этот метод Включение или отключение интерфейса постраничного просмотра в зависимости от того, какой экран. При просмотре первой страницы данных, должны быть отключены ссылки первого» и «назад; Далее и последнего должна быть отключена, при просмотре на последней странице.

Обновите метод `BindUserAccounts`, используя следующий код:

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

Обратите внимание, что общее число страниц определяется последний параметр `FindUsersByName` метода. Это `out` параметра, поэтому необходимо сначала объявить переменную для хранения этого значения (`totalRecords`) и затем перед ними `out` ключевое слово.

После возвращения указанную страницу учетных записей пользователей, четырех элементов управления LinkButton включены или отключены в зависимости от того, является ли просматриваемый первой или последней странице данных.

Последним шагом является написание кода для четырех элементов управления LinkButton `Click` обработчики событий. Эти обработчики событий необходимо обновить `PageIndex` свойство и затем привяжите данные к GridView через вызов `BindUserAccounts`. Первый, назад и далее обработчики событий очень просты. `Click` Обработчика событий для последней LinkButton, тем не менее, немного сложнее, так как нам нужно определить, сколько записей отображаются позволили бы определить индекс последней страницы.

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

Цифры 8 и 9 Показать пользовательский интерфейс разбиения по страницам в действии. На рисунке 8 показана `ManageUsers.aspx` страницы при просмотре первой страницы данных для всех учетных записей пользователей. Обратите внимание, что отображаются только 10 13 учетных записей. Щелкнув ссылку Далее или последнего вызывает обратную передачу, обновления `PageIndex` 1, а также учетные записи пользователей на второй странице в сетку привязки (см. рис. 9).


[![Отображаются первая учетные записи пользователей 10](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)

**Рис. 8**: отображаются первая 10 учетных записей пользователей ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))


[![Щелкнув ссылку на следующую отображаются на второй странице учетных записей пользователей](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)

**Рис. 9**: щелкнуть ссылку на следующую Откроется вторая страница из учетных записей пользователей ([Просмотр полноразмерное изображение](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))


## <a name="summary"></a>Сводка

Администраторы часто требуется выбрать из списка учетных записей пользователя. В предыдущих уроках мы рассматривали с помощью раскрывающегося списка, заполненный пользователей, но этот подход плохо масштабируется. В этом учебнике мы изучена лучший вариант: фильтруемых интерфейса, результаты которых отображаются в выгружаемом GridView. С этого пользовательского интерфейса администраторы могут быстро и эффективно найдите и выберите одну учетную запись пользователя из тысяч.

Программирование довольны!

### <a name="further-reading"></a>Дополнительные сведения

Дополнительные сведения по темам, рассматриваемые в этом учебнике см. в следующих ресурсах:

- [Пользовательское разбиение по страницам в ASP.NET с помощью SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [Эффективное разбиение больших объемов данных](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [Последовательное собственные средства администрирования веб-сайта](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a>Об авторе

Скотт Митчелл, автор нескольких ASP/ASP.NET и основатель 4GuysFromRolla.com, работает с веб-технологиями Майкрософт с 1998 года. Скотт — независимый консультант, trainer и записи. Его последняя книга —  *[диспетчерами учат самостоятельно ASP.NET 2.0 в течение 24 часов](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*. Скотт может быть достигнута по [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) или через его блог по [ http://ScottOnWriting.NET ](http://scottonwriting.net/).

### <a name="special-thanks-to"></a>Благодарности

Этот учебник ряд прошел проверку многие полезные рецензентов. Основной рецензент этого учебника было Alicja Maziarz. Объясняются моих последующих статей для MSDN? Если Да, напишите мне по [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)

> [!div class="step-by-step"]
> [Вперед](recovering-and-changing-passwords-cs.md)
