---
uid: web-pages/overview/releases/top-features-in-web-pages-2
title: Основные функции веб-страниц ASP.NET 2 | Документы Microsoft
author: microsoft
description: В этом разделе содержится обзор основные новые функции в ASP.NET Web Pages 2, упрощенных веб-программирования платформа, который входит в состав WebMatr...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/13/2012
ms.topic: article
ms.assetid: cc712e72-c3d0-4e43-bc2d-28cc09cd8f71
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/releases/top-features-in-web-pages-2
msc.type: authoredcontent
ms.openlocfilehash: f0d32edd3ab54c55aa06c803cd91e01cbbb8f08a
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="the-top-features-in-aspnet-web-pages-2"></a>Основные функции в веб-страниц ASP.NET 2
====================
по [Microsoft](https://github.com/microsoft)

> В этой статье содержится обзор основные новые функции в RC 2 веб-страниц ASP.NET, упрощенных веб-программирования платформа, который входит в состав [Microsoft WebMatrix 2 RC](https://www.microsoft.com/web/).
> 
> **Содержимое:** 
> 
> - [Установка WebMatrix](#install)
> - [Новые и улучшенные возможности](#New_and_Enhanced_Features)
> 
>     - [Изменения в выпуске версии-КАНДИДАТА](#Changes_for_the_RC_Version)
>     - [Изменения для бета-версии](#Changes_for_the_Beta_Version)
>     - [С помощью сайта новые и обновленные шаблоны](#templates)
>     - [Проверка пользовательского ввода](#validation)
>     - [Включить имена входа из Facebook, а также других узлов, с помощью OAuth и OpenID](#oauthsetup)
>     - [Добавление карты с помощью вспомогательного карты](#maphelper)
>     - [Запуск веб-страниц приложений на одном компьютере](#sidebyside)
>     - [Подготовка к просмотру страниц для мобильных устройств](#mobile)
> - [Дополнительные ресурсы](#resources)
> 
> > [!NOTE]
> > В этом разделе предполагается, что вы используете WebMatrix для работы с кодом веб-страницы ASP.NET 2. Тем не менее как 1 веб-страниц, можно создать веб-сайты Web Pages 2 с помощью Visual Studio, которое позволяет улучшены возможности IntelliSense и отладка. Для работы с веб-страницы в Visual Studio, необходимо установить пакет обновления 1 для Visual Studio 2010, Visual Web Developer Express 2010 с пакетом обновления 1 или бета-версии Visual Studio 11. Затем установите ASP.NET MVC 4 бета-версии, включая шаблоны и средства для создания приложений ASP.NET MVC 4 и 2 веб-страницы в Visual Studio.
> 
> 
> *Последнее обновление: 18 июня 2012 г.*


<a id="install"></a>
## <a name="installing-webmatrix"></a>Установка WebMatrix

Чтобы установить веб-страницы, можно использовать Microsoft Web Platform Installer это бесплатное приложение, которое позволяет легко установить и настроить веб-технологиях. Вы установите WebMatrix 2 бета-версии, включая бета-версии 2 веб-страниц.

1. Перейдите на страницу установки последнюю версию установщика веб-платформы.

    [https://go.microsoft.com/fwlink/?LinkId=226883](https://go.microsoft.com/fwlink/?LinkId=226883)

    > [!NOTE]
    > Уже установлен 1 WebMatrix, установки обновлений до бета-версии 2 WebMatrix. Можно запустить веб-сайты, созданные с помощью версии 1 или 2 на одном компьютере. Дополнительные сведения см в подразделе о [веб-страницы приложения, работающие на одном компьютере](#sidebyside).
2. Выберите **установить сейчас**. 

    Если используется Internet Explorer, перейдите к следующему шагу. Если вы используете другой браузер, такие как Mozilla Firefox и Google Chrome, приглашение сохранить *Webmatrix.exe* файл на компьютер. Сохраните файл и затем щелкните его, чтобы запустить установщик.
3. Запустите программу установки и выбрать **установить** кнопки. При этом устанавливаются WebMatrix и Web Pages.

## <a id="New_and_Enhanced_Features"></a>  Новые и улучшенные возможности

### <a id="Changes_for_the_RC_Version"></a>  Изменения в версии RC (июнь 2012 г.)

В выпуске версии-КАНДИДАТА версии в июне 2012 имеет некоторые изменения из версии обновление бета-версии, выпущенной в марте 2012 г. Эти изменения могут быть:

- Объект `Validation.AddFormError` был добавлен метод `Validation` вспомогательный. Это полезно, если проверка выполняется вручную (например, можно проверять значение, которое передается в строке запроса) и вы хотите добавить сообщение об ошибке, может отображаться по `Html.ValidationSummary` метод. Дополнительные сведения см. в разделе [проверки данных, не берутся непосредственно из пользователей](https://go.microsoft.com/fwlink/?LinkId=253002#Validating_Data_That_Doesnt_Come_Directly_from_Users) в [проверка пользовательского ввода в сайтах ASP.NET Web Pages (Razor)](https://go.microsoft.com/fwlink/?LinkId=253002).
- Функциональные возможности для объединение и Минификация был удален из веб-страницы ASP.NET 2 основных сборок. Как следствие `Assets` недоступности вспомогательного перечисленные далее в этом документе. Вместо этого необходимо установить [оптимизации ASP.NET](http://nuget.org/packages/Microsoft.Web.Optimization/0.1) пакет NuGet. Дополнительные сведения см. в разделе [объединении и Минификация активов на сайте ASP.NET Web Pages (Razor)](https://go.microsoft.com/fwlink/?LinkId=255373).
- Были добавлены дополнительные сборки для поддержки веб-страницы ASP.NET 2. Только заметно это изменение действует так, может видеть дополнительные сборки на сайте *bin* папку после создания сайта или развертывание сайта поставщика услуг размещения.

<a id="Changes_for_the_Beta_Version"></a>
### <a name="changes-for-the-beta-version-february-2012"></a>Изменения для бета-версии (февраль 2012 г.)

Бета-версии, выпущенной в февраль 2012 г. изменилось только несколько бета-версии, выпущенной в декабря 2011 года. Эти изменения могут быть:

- Razor теперь поддерживает условные атрибуты. В HTML-элемент, если значение атрибута значение, разрешается в серверном коде для `false` или `null`, ASP.NET не отображает атрибут вообще. Например предположим, что имеется следующая разметка для типа "флажок":

    [!code-html[Main](top-features-in-web-pages-2/samples/sample1.html)]

    Если значение `checked1` разрешается `false` или `null`, `checked` атрибут не отображается. Это критическое изменение.
- `Validation.GetHtml` Метод был переименован в `Validation.For`. Это критическое изменение; `Validation.GetHtml` не будет работать в бета-версии.
- Теперь можно включить `~` ссылаться корневого каталога сайта без использования оператора в разметке `Href` функции. (То есть, средство синтаксического анализа Razor можно теперь найдите и устраните `~` оператор, не требуя при вызове метода явный метод `Href`.) `Href` Метод по-прежнему работает, поэтому не является критическим изменением.

    Например, если ранее был разметки следующим образом:

    `<a href="@Href("~/Default.cshtml")">Home</a>`

    Теперь можно использовать разметки следующим образом:

    `<a href="~/Default.cshtml">Home</a>`
- `Scripts` Вспомогательный класс для управления активы (ресурс) был заменен `Assets` вспомогательного приложения, имеющего немного разные методы, например следующие:

  - Для `Scripts.Add`, используйте `Assets.AddScript`
  - Для `Scripts.GetScriptTags`, используйте `Assets.GetScripts`

    Это критическое изменение; `Scripts` класс недоступен в бета-версии. В примерах кода в этом документе с помощью средств управления были обновлены с этим изменением.

<a id="templates"></a>
### <a name="using-the-new-and-updated-site-templates"></a>С помощью сайта новые и обновленные шаблоны

**Начального сайта** шаблон был обновлен, чтобы он запускался на 2 веб-страницы по умолчанию. Он также включает следующие новые возможности:

- Отрисовка мобильной страницы. С помощью стилей CSS и `@media` селектор **начального сайта** предоставляет улучшенные подготовки страниц на экране меньшего размера, включая экранов мобильных устройств.
- Улучшенные параметры членства и проверки подлинности. Можно разрешить пользователям входить на сайт, используя свои учетные записи из других сайтов социальных сетей, таких как Twitter, Facebook и Windows Live. Дополнительные сведения см. в разделе [Включение имена входа из Facebook и других сайтов, с помощью OAuth и OpenID](#oauthsetup) раздела.
- Элементы HTML5.

Новый **персональный сайт** шаблон позволяет создавать веб-сайт, содержащий личных блогов, страница фото и страницы Twitter. Можно настроить сайт на основе **персональный сайт** шаблона следующим образом:

- Изменить внешний вид узла, изменив файл макета (*\_SiteLayout.cshtml*) и файл стили (*Site.css*).
- Установите пакеты NuGet, расширяющие функциональные возможности веб-узла. Дополнительные сведения об установке пакетов, включая библиотеку вспомогательных методов ASP.NET Web, см. в учебнике [Установка вспомогательные методы](https://go.microsoft.com/fwlink/?LinkId=202889#webhelpers).

Для доступа к **персональный сайт** шаблона, выберите **шаблоны** на WebMatrix **быстрый запуск** экрана.

[![topseven-personalsite-1](top-features-in-web-pages-2/_static/image2.png)](top-features-in-web-pages-2/_static/image1.png)

В **шаблоны** диалогового окна выберите **персональный сайт** шаблона.

[![topseven-personalsite-2](top-features-in-web-pages-2/_static/image4.png)](top-features-in-web-pages-2/_static/image3.png)

Целевая страница из **персональный сайт** шаблон позволяет переходить по ссылкам в блоге, Twitter, страницы и фотографии.

[![topseven-personalsite-3](top-features-in-web-pages-2/_static/image6.png)](top-features-in-web-pages-2/_static/image5.png)

<a id="validation"></a>
### <a name="validating-user-input"></a>Проверка пользовательского ввода

В веб-страницы 1, для проверки пользовательского ввода для отправленных форм используется `System.Web.WebPages.Html.ModelState` класса. (Это показано в следующих примерах кода в веб-страницы 1 учебника под названием [работа с данными](../data/5-working-with-data.md).) Такой подход по-прежнему можно использовать в веб-страницы 2. Тем не менее Web Pages 2 также предоставляет улучшенные средства для проверки введенных пользователем данных.

- Новые классы проверки, включая `System.Web.WebPages.ValidationHelper` и `System.Web.WebPages.Validator`, которая позволяют выполнять задачи на мощных проверку с помощью нескольких строк кода.
- При необходимости проверки со стороны клиента, который предоставляет оперативные сведения для пользователя, не требуя кругового пути к серверу для проверки ошибок проверки. (По соображениям безопасности проверка выполняется на сервере, даже если проверки выполнялось в клиенте заранее.)

Чтобы использовать новые функции проверки, выполните следующее:

В код страницы регистрации элемента для проверки с помощью методов `Validation` вспомогательный: `Validation.RequireField`, `Validation.RequireFields` (для регистрации нескольких элементов обязательным), или `Validation.Add`. `Add` Метод позволяет указать другие виды проверки допустимости, как тип данных проверку, сравнение записей в различных полей, проверки длины строки и шаблонов (с помощью регулярных выражений). Далее приводятся некоторые примеры.

[!code-html[Main](top-features-in-web-pages-2/samples/sample2.html)]

Чтобы показать ошибку конкретных полей, вызовите `Html.ValidationMessage` разметку для каждого проверяемого элемента:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample3.cshtml)]

Чтобы отобразить сводку (`<ul>` список) всех ошибок на странице `Html.ValidationSummary` разметку:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample4.cshtml)]

Эти действия не достаточно для реализации проверки на стороне сервера. Если вы хотите добавить проверку на стороне клиента, выполните следующие действия в дополнение к этому.

Добавьте следующие ссылки на файл скрипта внутри `<head>` веб-странице раздел. Первые два сценария ссылки указывают на удаленные файлы на сервере доставки содержимого (CDN) сети. Третья ссылка указывает на файл локального сценария. Производственных приложений должны реализовывать переход на резервный ресурс, если CDN недоступен. Проверьте этот резервный механизм.

[!code-html[Main](top-features-in-web-pages-2/samples/sample5.html)]

Самый простой способ получить локальную копию *jquery.validate.unobtrusive.min.js* библиотека является создание нового веб-страниц сайта на основе одного из шаблонов сайта (например, начального сайта). Узел, созданным с помощью шаблона содержит *jquery.validate.unobtrusive.js* файл в папке скриптов, откуда его можно скопировать на сайт.

Если веб-сайт использует<em>\_SiteLayout</em> страницы для управления макетом страницы, ссылки на эти скрипты можно включить в эту страницу, чтобы проверка доступна для всех страниц содержимого. Если вы хотите выполнить проверку только на отдельных страницах, диспетчер ресурсов позволяет регистрировать скрипты на лишь те страницы. Чтобы сделать это, вызовите `Assets.AddScript(path)` на странице, которую требуется проверить и ссылки для каждого из файлов сценариев. Затем добавьте вызов `Assets.GetScripts` в  <em>\_SiteLayout</em> страницы для отображения зарегистрированного `<script>` тегов. Дополнительные сведения см. в разделе [регистрация скриптов с помощью диспетчера ресурсов](#resmanagement).

В разметке для отдельных элементов, вызовите `Validation.For` метод. Этот метод создает атрибуты можно прикрепить, jQuery, чтобы обеспечить проверку на стороне клиента. Пример:

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample6.cshtml)]

Пример страницы для проверки пользовательского ввода для формы. Чтобы запустить и проверить код проверки, для этого:

1. Создайте новый веб-сайт с помощью одного из шаблонов узлов WebMatrix 2, которые включает *сценариев* папки, такие как **начального сайта** шаблона.
2. На новом сайте, создайте новый *.cshtml* страницы и содержимое страницы, замените следующий код.
3. Запустите страницу в браузере. Введите допустимые и недопустимые значения, чтобы увидеть влияние на проверку. Например, не указывайте обязательное поле или введите букву в **кредиты** поля.


[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample7.cshtml)]

Вот страницы, когда пользователь отправляет допустимые входные данные:

[![topSeven допустимым-1](top-features-in-web-pages-2/_static/image8.png)](top-features-in-web-pages-2/_static/image7.png)

Вот страницы, когда пользователь отправляет его с обязательное поле оставлено пустым.

[![topSeven допустимым-2](top-features-in-web-pages-2/_static/image10.png)](top-features-in-web-pages-2/_static/image9.png)

Вот страницы, когда пользователь отправляет его с нечто, отличное от целого числа в **кредиты** поля:

[![topSeven допустимым-3](top-features-in-web-pages-2/_static/image12.png)](top-features-in-web-pages-2/_static/image11.png)

Дополнительные сведения см. в следующих записях блога:

- [Обновление проверки в веб-страницы v2](http://mikepope.com/blog/DisplayBlog.aspx?permalink=2344) основами проверки с помощью `Validation` поддержки (на сервере только)
- [Обновление проверки в веб-страницы v2, часть 2](http://www.mikepope.com/blog/DisplayBlog.aspx?permalink=2347) Добавление клиентской проверки.
- [Обновление проверки в веб-страницы v2, часть 3](http://mikepope.com/blog/DisplayBlog.aspx?permalink=2351) форматирование ошибки проверки.

<a id="resmanagement"></a>
### <a name="registering-scripts-using-the-assets-manager"></a>Регистрация с помощью средств диспетчера скриптов

Диспетчер активы — новый компонент, который можно использовать в коде сервера для регистрации и просмотру клиентских скриптов. Эта возможность очень полезна при работе с кодом из нескольких файлов (например, страниц макетов, страницы содержимого, вспомогательных методов, т. д.), которые были объединены в одну страницу во время выполнения. Диспетчер ресурсов координирует исходные файлы для файлов скриптов правильно указаны ссылки на и эффективно на этой странице, независимо от того, какие файлы кода, они вызываются из или сколько раз они вызываются. Диспетчер ресурсов также отображает `<script>` теги в нужном месте, чтобы страницу можно загрузить быстро (без загрузки скриптов во время подготовки к просмотру) и во избежание ошибок, которые могут возникать, если скрипты вызывается перед отрисовкой завершена.

Например предположим, создается пользовательская вспомогательная, который вызывает файл JavaScript, что вызов этого вспомогательного объекта на трех разных местах в коде страницы содержимого. Если вы не используете диспетчер ресурсов для регистрации сценарий вызывает во вспомогательном методе, три различные `<script>` теги, которые будут отображаться все точки на один и тот же файл скрипта на отображаемой странице. Кроме того, в зависимости от того, где `<script>` теги добавляются в отображаемой страницы, могут возникнуть ошибки, если скрипт пытается получить доступ к определенным элементам страницы, до полной загрузки страницы. При использовании диспетчера ресурсов для регистрации скрипта, можно избежать этих проблем.

Таким образом можно зарегистрировать скрипт с помощью диспетчера ресурсов:

- В коде, который необходимо включить ссылки на скрипт, вызовите `Assets.AddScript` метод.
- В  *\_SiteLayout* страницы, вызовите метод `Assets.GetScripts` метод для отображения `<script>` тегов. 

    > [!NOTE]
    > Поместите вызовы `Assets.GetScripts` как самый последний элемент в `<body>` элемент  *\_SiteLayout* страницы. Это помогает страницы загружаются быстрее и помогает избежать ошибок скрипта.

В следующем примере показано, как работает диспетчер ресурсов. Код содержит следующие элементы:

- Пользовательская вспомогательная с именем `MakeNote`. Этого вспомогательного объекта отображает строку в поле, заключив `div` шрифтом, стилем с границей и путем добавления &quot;Примечание:&quot; к нему. Вспомогательный объект также вызывает файл JavaScript, добавляет поведение во время выполнения в заметку. Вместо ссылки на скрипт с `<script>` тег вспомогательное приложение регистрирует скрипт путем вызова `Assets.AddScript` .
- Файл JavaScript. Это файл, который называется вспомогательный метод, и временно увеличивает размер шрифта Примечание элементов во время `mouseover` событий.
- Страницы содержимого, который ссылается на<em>\_SiteLayout</em> страницы, отображает часть содержимого в тексте, а затем вызывает `MakeNote` вспомогательный.
- Объект  *\_SiteLayout* страницы. Эта страница содержит общие заголовка и структуре макета страницы. Он также включает вызов `Assets.GetScripts`, являющееся как диспетчер ресурсов подготавливает скрипт вызывает на странице.

Запуск образца:

1. Создайте пустой веб-сайт 2 веб-страниц. Вы можете использовать WebMatrix **пустой сайт** шаблона для этого.
2. Создайте папку с именем *сценариев* на сайте.
3. В *сценариев* папки, создайте файл с именем *Test.js*, Копировать *Test.js* содержимого в него из примера и сохраните файл...
4. Создайте папку с именем *приложения\_кода* на сайте.
5. В *приложения\_кода* папки, создайте файл с именем *Helpers.cshtml*, скопируйте код примера и сохраните его в папку с именем *приложения\_кода*в корневой папке.
6. В корневой папке веб-узла, создайте файл с именем  *\_SiteLayout.cshtml,* скопируйте пример в его и сохраните файл.
7. В корневом каталоге сайта, создайте файл с именем *ContentPage.cshtml*, добавьте пример кода и сохраните его.
8. Запустите *ContentPage* в браузере. Строка, передаваемая в `MakeNote` вспомогательный подготавливается к просмотру как упакованный заметки.
9. Наведите указатель мыши на заметку. Скрипт временно увеличивает размер шрифта для заметки.
10. Просмотрите исходный код отображаемой страницы. Из-за которой разместить вызова `Assets.GetScripts`, создаваемые `<script>` тег, который вызывает *Test.js* — самый последний элемент в основной области страницы.

*Test.js*

[!code-javascript[Main](top-features-in-web-pages-2/samples/sample8.js)]

*Helpers.cshtml*

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample9.cshtml)]

*\_SiteLayout.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample10.html)]

*ContentPage.cshtml*

[!code-cshtml[Main](top-features-in-web-pages-2/samples/sample11.cshtml)]

На следующем снимке экрана показано *ContentPage.cshtml* в браузере, если навести указатель мыши на Примечание:

[![topSeven-resmgr-1](top-features-in-web-pages-2/_static/image14.png)](top-features-in-web-pages-2/_static/image13.png)

<a id="oauthsetup"></a>
### <a name="enabling-logins-from-facebook-and-other-sites-using-oauth-and-openid"></a>Включить имена входа из Facebook, а также других узлов, с помощью OAuth и OpenID

Веб-страницы 2 предоставляет улучшенные параметры для проверки подлинности и членства. Основные улучшения предполагает, что новый [OAuth](http://oauth.net/) и [OpenID](http://openid.net/) поставщиков. С помощью этих поставщиков, можно позволить пользователям входить на сайт с помощью существующих учетных данных от Facebook, Twitter, Windows Live, Google и Yahoo. Например выполнить вход с использованием учетной записи Facebook, пользователи так же можно выбрать значок Facebook, который перенаправляет их на страницу входа в Facebook, которой требуется ввести учетные данные. Их можно связать имя входа Facebook с помощью учетной записи на узле. Улучшение для функции членства веб-страницы –, пользователи могут связать несколько учетных записей (в том числе имена входа из сайты социальных сетей), использовать одну учетную запись на веб-сайте.

На данном рисунке показан на страницу входа из **начального сайта** шаблона, где пользователь сможет выбирать значок, Facebook, Twitter или Windows Live, чтобы включить вход внешнюю учетную запись:

[![topSeven-oauth-1](top-features-in-web-pages-2/_static/image16.png)](top-features-in-web-pages-2/_static/image15.png)

Можно включить членство OAuth и OpenID с помощью всего нескольких строк кода. Методы и свойства, которые позволяют работать с OAuth и OpenID поставщики находятся в `WebMatrix.Security.OAuthWebSecurity` класса.

Тем не менее, вместо использования кода, чтобы включить имена входа с других узлов, для Приступая к работе с новых поставщиков рекомендуется использовать новую **начального сайта** шаблон, который входит в состав WebMatrix 2 бета-версии. **Начального сайта** шаблон включает в себя инфраструктуры полнофункционального членства, со страницы входа, база данных членства и весь код необходимо разрешить пользователям входить на сайт, используя учетные данные локального или из другого сайта .

#### <a name="how-to-enable-logins-using-the-oauth-and-openid-providers"></a>Как включить имена входа с помощью OAuth и OpenID поставщиков

В этом разделе приведен пример того, как разрешить пользователям входить в систему с внешних сайтов (Facebook, Twitter, Windows Live, Google или Yahoo) на узел, основанный на **начального сайта** шаблона. После создания начального сайта, выполните (выполните подробные сведения):

- Для узлов, использующих поставщик OAuth (Facebook, Twitter и Windows Live) необходимо создать приложение на внешние веб-узле. Этот метод позволяет приложения ключи, необходимые для вызова компонента имени входа для этих сайтов. Для узлов, использующих поставщик OpenID (Google, Yahoo) у вас для создания приложения. Все эти веб-сайты необходимо настроить учетную запись для входа и создавать приложения для разработчиков. 

    > [!NOTE]
    > Приложений Windows Live могут принимать только динамическую URL-адрес для работающего веб-сайта, поэтому нельзя использовать URL-адрес локального веб-сайта для тестирования имен входа.
- Изменение нескольких файлов веб-сайта для отправки на сайт, который вы хотите использовать имя входа и задайте поставщика проверки подлинности.

**Чтобы включить имена входа Google и Yahoo**:

1. Веб-сайта изменить  *\_AppStart.cshtml* и добавьте две следующие строки кода в блоке кода Razor после вызова `WebSecurity.InitializeDatabaseConnection` метод. Этот код позволяет поставщикам Google и Yahoo OpenID. 

    [!code-css[Main](top-features-in-web-pages-2/samples/sample12.css)]
2. В *~/Account/Login.cshtml* страницы, удалите комментарии из следующей `<fieldset>` блок разметки в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, находящиеся перед и после `<fieldset>` блока. Полученный блок кода выглядит следующим образом:

    [!code-html[Main](top-features-in-web-pages-2/samples/sample13.html)]
3. Добавить `<input>` элемент для поставщика Google или Yahoo `<fieldset>` в группе *~/Account/Login.cshtml* страницы. Обновленный `<fieldset>` группы с `<input>` элементы для Google и Yahoo выглядит как следующий пример: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample14.html)]
4. В *~/Account/AssociateServiceAccount.cshtml* добавьте `<input>` элементы для Google или Yahoo для `<fieldset>` группы ближе к концу файла. Вы можете скопировать же `<input>` элементы, которые вы только что добавили `<fieldset>` раздела *~/Account/Login.cshtml* страницы. 

    *~/Account/AssociateServiceAccount.cshtml* страницы в шаблоне начального сайта можно использовать, если вы хотите создать страницу, на котором пользователи могут связать несколько имен входа с других сайтов с одной учетной записью на веб-сайте.

Теперь можно проверить имена входа Google и Yahoo.

1. Запустите *default.cshtml* страницы веб-узла и выберите **вход** кнопки.
2. На *входа* страницы в **используется другой службой для входа в** выберите либо **Google** или **Yahoo** кнопка отправки. В этом примере используется имя входа Google. 

    Веб-страница перенаправляет запрос на страницу входа Google.

    [![topSeven-oauth-6](top-features-in-web-pages-2/_static/image18.png)](top-features-in-web-pages-2/_static/image17.png)
3. Введите учетные данные существующей учетной записи Google.
4. Если Google вопросом, следует ли разрешить Localhost, чтобы использовать сведения из учетной записи, нажмите кнопку **Разрешить**.

    Код проверки подлинности пользователя с помощью токена Google и возвращается на эту страницу на веб-сайте. Эта страница позволяет связать с существующей учетной записи на веб-сайте своего имени входа Google или они могут зарегистрировать новую учетную запись на сайте, связываемый с внешнее имя входа.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image20.png)](top-features-in-web-pages-2/_static/image19.png)
5. Выберите **связать** кнопки. Браузер возвращается на домашней странице приложения.

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image22.png)](top-features-in-web-pages-2/_static/image21.png)

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image24.png)](top-features-in-web-pages-2/_static/image23.png)

**Чтобы включить имена входа Facebook**:

1. Последовательно выберите пункты [сайт разработчиков Facebook](https://developers.facebook.com/apps) (вход, если вы еще не вошли).
2. Выберите **создать новое приложение** кнопку, а затем следуйте инструкциям на экране, чтобы задать имя и создать новое приложение.
3. В разделе **выберите интеграции приложения с Facebook**, выберите **веб-сайт** раздела.
4. Заполните **URL-адрес сайта** поле URL-адрес веб-узла (например, [ `http://www.example.com` ](http://www.example.com)). **Домена** поле является необязательным; это можно использовать для проверки подлинности для всего домена (например, *example.com*). 

    > [!NOTE]
    > При выполнении на локальном компьютере с URL-адрес сайта, например `http://localhost:12345` (где номер является номером локального порта), можно добавить это значение, чтобы **URL-адрес сайта** для тестирования веб-узла. Однако каждый раз номер порта изменения локального узла, будет необходимо обновить **URL-адрес сайта** поле приложения.
5. Выберите **сохранить изменения** кнопки.
6. Выберите **приложений** вкладку еще раз, а затем просмотрите начальную страницу для приложения.
7. Копировать **идентификатор приложения** и **секрет приложения** значения для вашего приложения и вставьте их в временного текстового файла. Вы передаете эти значения к поставщику Facebook в коде веб-сайта.
8. Выйдите из сайта разработчика Facebook.

Теперь внесении изменений на две страницы веб-сайта, чтобы пользователи смогут войти на сайт, используя учетную запись Facebook.

1. Веб-сайта изменить  *\_AppStart.cshtml* страницы и раскомментируйте код для поставщика Facebook OAuth. Блок uncommented кода выглядит следующим образом: 

    [!code-xml[Main](top-features-in-web-pages-2/samples/sample15.xml)]
2. Копировать **идентификатор приложения** значение из приложения Facebook в качестве значения `consumerKey` параметра (внутри кавычек).
3. Копировать **секрет приложения** значение из приложения Facebook в качестве `consumerSecret` значение параметра.
4. Сохраните и закройте файл.
5. Изменить *~/Account/Login.cshtml* страницы и удалить комментарии из `<fieldset>` блок в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, находящиеся перед и после `<fieldset>` блока. Блок кода с комментариями удалены выглядит следующим образом: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample16.html)]
6. Сохраните и закройте файл.

Теперь можно проверить имя входа Facebook.

1. Запустите на сайте *default.cshtml* странице и выберите **входа** кнопки.
2. На *входа* страницы в **используется другой службой для входа в** выберите **Facebook** значок. 

    Веб-страница перенаправляет запрос на страницу входа в Facebook.

    [![topSeven-oauth-2](top-features-in-web-pages-2/_static/image26.png)](top-features-in-web-pages-2/_static/image25.png)
3. Войдите в учетную запись Facebook. 

    Код использует маркер Facebook для проверки подлинности пользователя и затем возвращает страницы, где можно связать имя входа Facebook с именем входа веб-узла. Адрес электронной почты пользователя заполняется в **электронной почты** поля в форме.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image28.png)](top-features-in-web-pages-2/_static/image27.png)
4. Выберите **связать** кнопки. 

    Вы вошли в браузере возвращает на домашнюю страницу

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image30.png)](top-features-in-web-pages-2/_static/image29.png)

**Чтобы включить имена входа Twitter:** 

1. Перейдите к [сайт разработчиков Twitter](https://dev.twitter.com/).
2. Выберите **создать приложение** связь, а затем войдите на сайт.
3. На **создать приложение** форме, заполните **имя** и **описание** поля.
4. В **веб-сайт** введите URL-адрес веб-узла (например, [ `http://www.example.com` ](http://www.example.com)). 

    > [!NOTE]
    > Если вы тестируете веб-узла локально (с помощью URL-адрес: `http://localhost:12345`), Twitter, не может принимать URL-адрес. Тем не менее, можно будет использовать локальный петлевой IP-адрес (например `http://127.0.0.1:12345`). Это упрощает процесс тестирования приложения локально. Однако каждый раз при изменении номера порта на локальный сайт, необходимо будет обновить **веб-сайт** поле приложения.
5. В **URL-адрес обратного вызова** введите URL-адрес для страницы в веб-сайта, будет отображаться для возвращения к после входа в Twitter. Например, чтобы перенаправить пользователей на домашней странице начального узла (который распознает их состояние вошедшего в систему), введите же URL-адреса, введенного в **веб-сайт** поля.
6. Принять условия соглашения и выбрать **создания приложения Twitter** кнопки.
7. На **Мои приложения** целевой страницы, выберите приложение, вы создали.
8. На **сведения** , прокрутите вниз и выберите **создать токен доступа Мой** кнопки.
9. На **сведения** вкладки, скопируйте **ключ потребителя** и **секрет пользователя** значения для вашего приложения и вставьте их в временного текстового файла. В коде веб-сайт будет передачи этих значений для поставщика Twitter.
10. Выйдите из сайта Twitter.

Теперь можно внести изменения две страницы в веб-сайта, чтобы пользователи смогут Войдите на сайт, используя учетную запись Twitter.

1. Веб-сайта изменить  *\_AppStart.cshtml* страницы и раскомментируйте код для поставщика Twitter OAuth. Блок uncommented кода выглядит следующим образом: 

    [!code-csharp[Main](top-features-in-web-pages-2/samples/sample17.cs)]
2. Копировать **ключ потребителя** значение из приложения Twitter в качестве значения `consumerKey` параметра (внутри кавычек).
3. Копировать **секрет пользователя** значение из приложения Twitter в качестве значения `consumerSecret` параметра.
4. Сохраните и закройте файл.
5. Изменить *~/Account/Login.cshtml* страницы и удалить комментарии из `<fieldset>` блок в конце страницы. Чтобы раскомментируйте код, удалите `@*` символы, находящиеся перед и после `<fieldset>` блока. Блок кода с комментариями удалены выглядит следующим образом: 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample18.html)]
6. Сохраните и закройте файл.

Теперь можно проверить имя входа Twitter.

1. Запустите *default.cshtml* страницы веб-узла и выберите **входа** кнопки.
2. На *входа* страницы в **используется другой службой для входа в** выберите **Twitter** значок. 

    Веб-страница перенаправляет запрос на страницу входа для приложения, которое вы создали Twitter.

    [![topSeven-oauth-4](top-features-in-web-pages-2/_static/image32.png)](top-features-in-web-pages-2/_static/image31.png)
3. Войдите в учетную запись Twitter.
4. Код использует маркер Twitter для проверки подлинности пользователя и последующий возврат на страницу можно связать имя входа с учетной записью веб-сайта. Ваш адрес электронной почты будет заполняться в **электронной почты** поля в форме.

    [![topSeven-oauth-5](top-features-in-web-pages-2/_static/image34.png)](top-features-in-web-pages-2/_static/image33.png)
5. Выберите **связать** кнопки. 

    Вы вошли в браузере возвращает на домашнюю страницу

    [![topSeven-oauth-3](top-features-in-web-pages-2/_static/image36.png)](top-features-in-web-pages-2/_static/image35.png)

<a id="maphelper"></a>
### <a name="adding-maps-using-the-maps-helper"></a>Добавление карты с помощью вспомогательного карты

Web Pages 2 включает дополнения к библиотеке вспомогательных методов ASP.NET Web — пакет дополнений для веб-страниц сайта. Один из них — это компонент сопоставления, предоставляемые `Microsoft.Web.Helpers.Maps` класса. Можно использовать `Maps` класса для создания карты, либо на основе адреса или набор координат широты и долготы. `Maps` Класса позволяет вызывать непосредственно в популярные карты ядер, включая Bing, Google, Yahoo и MapQuest.

Чтобы использовать новую `Maps` класса веб-сайта, необходимо сначала установить версии 2 вспомогательных методов библиотеки Web. Чтобы сделать это, перейдите на инструкции по установке в данный момент версии [библиотека вспомогательных методов ASP.NET Web](https://go.microsoft.com/fwlink/?LinkId=202889#webhelpers) и установите версию 2.

Шаги для добавления сопоставления на странице одинаковы независимо от того, какое ядро карты вызова. Просто добавьте ссылку на файл JavaScript на страницу сопоставления и затем добавить вызов, который подготавливает к просмотру `<script>` теги на странице. Затем на странице сопоставления вызовите обработчик карты, которые вы хотите использовать.

В следующем примере демонстрируется создание страницы, которая подготавливает к просмотру схему по адресам, а другая страница, которая подготавливает к просмотру схему, в зависимости от координаты широты и долготы. Пример сопоставления адресов используется карты Google, а в примере сопоставления координат Bing Maps. Следует отметить следующие элементы в коде.

- Вызов `Assets.AddScript` в верхней части на двух страницах сопоставления. Этот метод добавляет ссылку на *jquery 1.6.2.min.js* файл, который входит в состав **начального сайта** шаблона и, который требуется `Maps` класса.
- Вызов `Assets.GetScripts` метод в файле макета. Этот метод отображает `<script>` тег на двух страницах сопоставления.
- Вызов `@Maps.GetGoogleHtml` и `@Maps.GetBingHtml` методы в страницах сопоставления. Для сопоставления адреса, необходимо передать строка адреса. Чтобы сопоставить координаты, необходимо передать широты и долготы координаты. Для обработчика Bing Maps, необходимо также передать ключ (который бесплатно получить необходимо зарегистрироваться на [сайт Bing Maps разработчиков](https://www.microsoft.com/maps/developers/web.aspx)). Методы для других модулей, карты работают аналогичным образом (`@Maps.GetYahooHtml`, `@Maps.GetMapQuestHtml`).

Чтобы создать сопоставления страниц:

1. Создать веб-сайт на основе **начального сайта** шаблона.
2. Создайте файл с именем *MapAddress.cshtml* в корневом узле. Эта страница будет создать карту, исходя из адреса, который можно передать.
3. Скопируйте следующий код в файл, перезапись существующего содержимого. 

    [!code-cshtml[Main](top-features-in-web-pages-2/samples/sample19.cshtml)]
4. Создайте файл с именем  *\_MapLayout.cshtml* в корневом узле. Эта страница будет страницы макета для сопоставления двух страниц.
5. Скопируйте следующий код в файл, перезапись существующего содержимого. 

    [!code-html[Main](top-features-in-web-pages-2/samples/sample20.html)]
6. Создайте файл с именем *MapCoordinates.cshtml* в корневом узле. Эта страница будет создавать карты на основе набора координат, которые передаются в него.
7. Скопируйте следующий код в файл, перезапись существующего содержимого. 

    [!code-cshtml[Main](top-features-in-web-pages-2/samples/sample21.cshtml)]

Чтобы проверить сопоставление страницы:

1. Запустите страницу *MapAddress.cshtml* файла.
2. Введите полный адрес строки, включая адрес, состояние или провинции и почтовый индекс и нажмите кнопку **Map It** кнопки. Страница отображает карту из карты Google: 

    [![topseven-maphelper-1](top-features-in-web-pages-2/_static/image38.png)](top-features-in-web-pages-2/_static/image37.png)
3. Найти набор координат широты и долготы в определенное место.
4. Запустите страницу *MapCoordinates.cshtml*. Введите координаты, а затем выберите **Map It** кнопки. Страница отображает карты от Bing Maps: 

    [![topseven-maphelper-2](top-features-in-web-pages-2/_static/image40.png)](top-features-in-web-pages-2/_static/image39.png)

<a id="sidebyside"></a>
### <a name="running-web-pages-applications-side-by-side"></a>Запуск веб-страниц приложений на одном компьютере

Web Pages 2 добавляет возможность запуска приложений на одном компьютере. Это позволит вам по-прежнему запускать приложения Web Pages 1, создавать новые приложения Web Pages 2 и выполнить их все на одном компьютере.

Ниже приведены некоторые аспекты, которые следует помнить при установке бета-версии 2 веб-страниц с помощью WebMatrix.

- По умолчанию существующие приложения веб-страниц будет выполняться как приложений версии 2 на компьютере. (Сборки для версии 2, устанавливаются в глобальном кэше СБОРОК и будет использоваться автоматически.)
- Если вы хотите запустить сайт, с помощью веб-страниц версии 1 (а не по умолчанию, как показано выше), можно настроить для этого сайта. Если сайт еще нет *web.config* файл в корневом каталоге узла, создайте новую и скопируйте следующий код XML, перезапись существующего содержимого. Если сайт уже содержит *web.config* файл, добавьте `<appSettings>` элемент, аналогичный приведенному ниже, чтобы `<configuration>` раздела.

    [!code-xml[Main](top-features-in-web-pages-2/samples/sample22.xml)]
  "— Если вы не укажете версии в *web.config* файл, сайт развертывается как сайт версии 2. (Версия 2 сборки копируются в *bin* папки в развернутом узле.)
- Новые приложения, созданный с помощью шаблоны сайтов в Web Matrix версии 2 Beta включают сборки версии 2 веб-страниц на сайте *bin* папки.

Как правило, всегда можно управлять версии веб-страниц для использования с веб-узла с помощью NuGet, чтобы установить соответствующие сборки на веб-узел *bin* папки. Чтобы найти пакеты, посетите [NuGet.org](http://NuGet.org).

<a id="mobile"></a>
### <a name="rendering-pages-for-mobile-devices"></a>Подготовка к просмотру страниц для мобильных устройств

Web Pages 2 позволяет создавать настраиваемого отображения для отображения содержимого для мобильных устройств или на других устройствах.

`System.Web.WebPages` Пространство имен содержит следующие классы, которые позволяют работать с режимами отображения: `DefaultDisplayMode`, `DisplayInfo`, и `DisplayModes`. Можно использовать эти классы напрямую и написать код, который отображает правой выходные данные для конкретных устройств.

Кроме того, можно создать страницы для конкретного устройства с помощью шаблон имени файла, следующим образом: <em>FileName.</em> <em>Mobile</em><em>.cshtml</em>. Например, можно создать две версии страницы, один с именем <em>MyFile.cshtml</em> и один с именем <em>MyFile.Mobile.cshtml</em>. Во время выполнения, когда мобильное устройство запрашивает <em>MyFile.cshtml</em>, веб-страниц отображает содержимое из <em>MyFile.Mobile.cshtml</em>. В противном случае <em>MyFile.cshtml</em> подготавливается к просмотру.

Приведенный ниже показано, как включить подготовки мобильных устройств, добавив страницу содержимого для мобильных устройств. *Page1.cshtml* включает содержимое, а также боковая панель навигации. *Page1.Mobile.cshtml* с тем же содержимым, но пропускает боковой панели.

Построение и запуск примера кода:

1. На сайте веб-страницы, создайте файл с именем *Page1.cshtml* и скопируйте *Page1.cshtml* содержимого в него из примера.
2. Создайте файл с именем *Page1.Mobile.cshtml* и скопируйте *Page1.Mobile.cshtml* содержимого в него из примера. Обратите внимание, что версия мобильной страницы пропускает раздел навигации для повышения подготовки к просмотру на экране меньшего размера.
3. Запустить браузер для настольных компьютеров и перейдите к папке *Page1.cshtml*.
4. Мобильный браузер (или его эмулятор) и перейдите к *Page1.cshtml*. Обратите внимание, что в данный момент веб-страниц отображает мобильной версии страницы. 

    > [!NOTE]
    > Для проверки страниц для мобильных устройств, можно использовать симулятор мобильного устройства, запускаемую на настольном компьютере. Это средство позволяет тестировать веб-страницы, как они выглядели на мобильных устройствах (то есть, обычно с намного меньше область). Является одним из примеров симулятора [надстройки переключателя агента пользователя](http://addons.mozilla.org/en-us/firefox/addon/user-agent-switcher/) для Mozilla Firefox, который позволяет моделировать различные браузеры для мобильных устройств с рабочего стола версии Firefox.

*Page1.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample23.html)]

*Page1.Mobile.cshtml*

[!code-html[Main](top-features-in-web-pages-2/samples/sample24.html)]

*Page1.cshtml* к просмотру в браузер для настольных компьютеров:

[![topseven-displaymodes-1](top-features-in-web-pages-2/_static/image42.png)](top-features-in-web-pages-2/_static/image41.png)

*Page1.Mobile.cshtml* отображаются в представлении симулятор Apple iPhone браузера Mozilla Firefox. Несмотря на то, что этот запрос поступает *Page1.cshtml*, отображении приложения *Page1.Mobile.cshtml*.

[![topseven-displaymodes-2](top-features-in-web-pages-2/_static/image44.png)](top-features-in-web-pages-2/_static/image43.png)

<a id="resources"></a>
## <a name="additional-resources"></a>Дополнительные ресурсы

### <a name="aspnet-web-pages-1-resources"></a>ASP.NET Web Pages 1 ресурсы

> [!NOTE]
> Большинство веб-страницы 1 программирования и API ресурсы по-прежнему применяются к Web Pages 2.

- [Введение в программирование веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202890)

### <a name="webmatrix-resources"></a>WebMatrix ресурсы

- [WebMatrix 2 новые возможности](http://webmatrix.com/next)
- [Сайт Microsoft WebMatrix](https://go.microsoft.com/fwlink/?LinkID=195076)
- [Запуск веб-разработки с помощью Microsoft WebMatrix](https://msdn.microsoft.com/en-us/library/hh145669(v=VS.99).aspx)(включает полноразмерные пример приложения на веб-страницы)
