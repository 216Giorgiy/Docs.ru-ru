---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
title: Введение в ASP.NET Web Pages — Создание согласованного макета | Документы Microsoft
author: tfitzmac
description: Этого учебника показано, как использовать макеты для создания согласованного вида для страниц на сайте, который использует веб-страниц ASP.NET. Предполагается, что завершена...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/28/2015
ms.topic: article
ms.assetid: c85ec591-f8d7-4882-b763-de6ab9f3df7a
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/layouts
msc.type: authoredcontent
ms.openlocfilehash: c2d5c4d8ed8a71979c16d484ab90d283a45de537
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="introducing-aspnet-web-pages---creating-a-consistent-layout"></a>Общие сведения о веб-страницах ASP.NET - Создание согласованного макета
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> Этого учебника показано, как использовать *макеты* Создание согласованного вида для страниц на сайте, который использует веб-страниц ASP.NET. Предполагается, что завершена ряда через [удаление базы данных в веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251584).
> 
> Что вы узнаете следующее.
> 
> - Макет страницы равен.
> - Использование страницы макета с динамическим содержимым.
> - Инструкции по передаче значений к странице макета.


## <a name="about-layouts"></a>О макетах

Страницы, созданные до сих была завершена, автономные страницы. Все они принадлежат тому же сайту, но они не имеют общих элементов или стандартный вид.

У большинства сайтов согласованного внешнего вида и макета. Например, если перейти к [Microsoft.com/web](https://www.microsoft.com/web/) сайта и поиска, вы видите, все страницы отвечали требованиям для общей структуры и визуальную тему:

![Структуры заголовка, области навигации и область содержимого, а также нижний колонтитул страницы сайта Microsoft.com/Web](layouts/_static/image1.png)

*Неэффективным* способ создания для этой структуры можно определить заголовок, панель навигации и нижний колонтитул отдельно для каждой из страниц. При этом произойдет дублирование же разметки каждый раз. Если требуется какое-либо изменение (например, обновление нижний колонтитул), необходимо изменить каждую страницу отдельно.

Именно так *страницы макета* бывают. Веб-страницах ASP.NET, можно определить макет страницу, которая предоставляет общий контейнер для страниц веб-узла. Например страницы макета может содержать заголовок, область навигации и нижний колонтитул. Страница макета имеется заполнитель, где становится основным содержимым.

Затем можно определить отдельные страницы содержимого, которые содержат разметку и код для только к этой странице. Страницы содержимого не обязательно должны быть полный HTML-страницы; даже не иметь `<body>` элемента. Они также имеют строки кода, который сообщает ASP.NET, какие страницы макета для отображения содержимого. Вот рисунок, приблизительно показано, как работает эта связь.

![Концептуальная схема, показывающая две страницы содержимого, а страница макета, в который они помещаются](layouts/_static/image2.png)

Это взаимодействие можно легко понять, когда вы видите в действии. В этом учебнике вы измените макет страницы фильмов.

## <a name="adding-a-layout-page"></a>Добавление страницы макета

Вы начнете путем создания макета страницы, которая определяет макет типичная страница с заголовком, нижний колонтитул и область основного содержимого. На сайте WebPagesMovies добавить страницу с именем CSHTML  *\_Layout.cshtml*.

Символа подчеркивания ( `_` ) символов имеет значение. Если имя страницы начинается с символа подчеркивания, ASP.NET не будет отправлять непосредственно этой страницы в браузере. Это соглашение можно определить страниц, которые необходимы для веб-узла, но пользователи не должны иметь возможность напрямую запрашивать.

Замените содержимое на странице следующим кодом:

[!code-html[Main](layouts/samples/sample1.html)]

Как видите, эта разметка является только HTML, который использует `<div>` элементов для определения трех разделов в странице, а также один более `<div>` элемента для хранения трех разделов. Нижний колонтитул содержит большой объем кода Razor: `@DateTime.Now.Year`, отображающего положение на странице текущего года.

Обратите внимание, что ссылка на таблицу стилей с именем *Movies.css*. Таблица стилей находится где будут определены сведения физическим размещением элементов. Вы должны создать позже.

Единственными необычными функция в этом  *\_Layout.cshtml* страница `@Render.Body()` строки. Это заполнитель, куда содержимое при слиянии этот макет с другой страницы.

## <a name="adding-a-css-file"></a>Добавление CSS-файла

Предпочтительный способ определить фактическое расположение (то есть внешний) элементов на странице — использовать правила таблицы каскадных стилей (CSS). Поэтому вы создадите *.css* файл, который имеет правила для нового макета.

В WebMatrix выберите корневой каталог узла. Затем в **файлы** вкладку на ленте, щелкните стрелку под кнопкой **New** и щелкните **новую папку**.

![Параметр «Новая папка» на ленте в группе Создание.](layouts/_static/image3.png)

Имя новой папки *стили*.

![Именование в новую папку «Стили»](layouts/_static/image4.png)

Внутри новой *стили* папки, создайте файл с именем *Movies.css*.

![Создание нового файла Movies.css](layouts/_static/image5.png)

Замените содержимое нового *.css* файл со следующим:

[!code-css[Main](layouts/samples/sample2.css)]

Мы не очень много говорит о эти правила CSS, за исключением того, чтобы отметить следующее. Один заключается наряду с определением шрифты и размеры, правила использования абсолютное позиционирование для определения местоположения заголовка, нижнего колонтитула и область основного содержимого. Если вы не знакомы с позиционирования в CSS, можно прочитать [позиционирования CSS](http://www.w3schools.com/css/css_positioning.asp) учебника по на сайте W3Schools.

Другие важно отметить, что в нижней, мы скопировали правила стилей, которые были изначально определяется по отдельности в *Movies.cshtml* файла. Эти правила были использованы в [Общие сведения о отображение данных с помощью веб-страниц ASP.NET](https://go.microsoft.com/fwlink/?LinkId=251580) учебника, чтобы сделать `WebGrid` вспомогательный отображают разметку, которая добавляется в таблицу полосы. (Если вы собираетесь использовать *.css* файл для определения стилей может также поместить правила стилей для всего сайта в нем.)

## <a name="updating-the-movies-file-to-use-the-layout"></a>Обновление файла фильмы используется режим

Теперь можно обновить существующие файлы в узле, новый макет. Откройте *Movies.cshtml* файла. В начале в первой строке кода, добавьте следующие строки:

[!code-csharp[Main](layouts/samples/sample3.cs)]

Страница теперь начинается выглядеть так:

[!code-cshtml[Main](layouts/samples/sample4.cshtml?highlight=2)]

Это одной строки кода сообщает ASP.NET, что при *фильмов* страница выполняется, должны сливаться с  *\_Layout.cshtml* файла.

Поскольку *Movies.cshtml* использует страницы макета, можно удалить разметка из *Movies.cshtml* страницу, которая занимается  *\_Layout.cshtml*файла. Извлеките `<!DOCTYPE>`, `<html>`, и `<body>` открывающих и закрывающих тегов. Извлеките всего `<head>` элемент и его содержимое, включая правила стилей для сетки, так как у вас теперь есть этих правил *.css* файла. Пока вы его, измените существующий `<h1>` элемент `<h2>` элемент; Однако имеется `<h1>` элемента уже макета страницы. Изменение `<h2>` текст «Список фильмов».

Как правило не нужно сделать эти виды изменений на странице содержимого. При запуске веб-узла с странице макета страницы содержимого без этих элементов создания начинается с. В этом случае, преобразовании отдельной странице на ту, которая использует структуру, поэтому бит очистки.

Закончив, *Movies.cshtml* страница будет выглядеть следующим образом:

[!code-cshtml[Main](layouts/samples/sample5.cshtml)]

### <a name="testing-the-layout"></a>Тестирование макета

Теперь можно увидеть, как выглядит макет. В WebMatrix, щелкните правой кнопкой мыши *Movies.cshtml* и выберите **запуск в браузере**. Когда браузер отображает страницу, он выглядит следующим образом эту страницу.

![Страница фильмы, отображается с использованием макета](layouts/_static/image6.png)

ASP.NET было выполнено слияние содержимого страницы Movies.cshtml в  *\_Layout.cshtml* страницы справа где `RenderBody` метод. И конечно  *\_Layout.cshtml* страницы ссылки *.css* файл, который определяет внешний вид страницы.

## <a name="updating-the-addmovie-page-to-use-the-layout"></a>Обновление страницы AddMovie используется режим

Реальное преимущество макетов является можно использовать их для всех страниц на сайте. Откройте *AddMovie.cshtml* страницы.

Вы помните, что *AddMovie.cshtml* страницы содержалась ранее некоторые правила CSS для определения внешнего вида сообщений об ошибках проверки. Поскольку у вас *.css* файл свой сайт прямо сейчас, можно переместить эти правила для *.css* файла. Удалить их из *AddMovie.cshtml* и добавьте их в конец файла *Movies.css* файла. Перемещении следующие правила:

[!code-css[Main](layouts/samples/sample6.css)]

Теперь внести изменения в со схожими *AddMovie.cshtml* , что и для *Movies.cshtml* — добавить `Layout="~/_Layout.cshtml;` и удалите разметки HTML, который теперь является лишним. Изменение `<h1>` элемент `<h2>`. Когда закончите, страница будет выглядеть как в следующем примере:

[!code-cshtml[Main](layouts/samples/sample7.cshtml)]

Запустите страницу. Теперь он будет выглядеть на этом рисунке:

![«Добавить фильмов» страницы к просмотру с использованием макета](layouts/_static/image7.png)

Вы хотите внести аналогичные изменения страниц на сайте — *EditMovie.cshtml* и *DeleteMovie.cshtml*. Тем не менее прежде чем выполнять другое изменение можно внести, делающую немного более гибкий макет.

## <a name="passing-title-information-to-the-layout-page"></a>Передача сведений об заголовка для страницы макета

 *\_Layout.cshtml* имеет созданную страницу `<title>` элемент, который имеет значение «Мой сайт фильма». Большинство браузеров для отображения текста на вкладке содержимого данного элемента:

![Страницы &lt;заголовок&gt; элемента, отображаемого на вкладке браузера](layouts/_static/image8.png)

Эти сведения заголовка является универсальным. Предположим, что вы хотите текст заголовка точнее к текущей странице. (Текст заголовка также используется поисковыми системами для определения, является о страницы.) Можно передать сведения из страницы содержимого, такие как *Movies.cshtml* или *AddMovie.cshtml* для страницы макета, а затем использовать эту информацию для настройки макета страницы визуализирует.

Откройте *Movies.cshtml* страницу еще раз. В коде в верхней добавьте следующую строку:

[!code-csharp[Main](layouts/samples/sample8.cs)]

`Page` Объект будет доступен для всех *.cshtml* страницы, а также является для этой цели, а именно: для обмена данными между страницей и его макет.

Откройте<em>\_Layout.cshtml</em> страницы. Изменение `<title>` элемент, так что он выглядит как эта разметка:

[!code-html[Main](layouts/samples/sample9.html)]

Этот код отображает содержимое `Page.Title` свойство прямо в это расположение в странице.

Запустите *Movies.cshtml* страницы. Это время вкладка «Обозреватель» содержится передается как значение `Page.Title`:

![Вкладка «Обозреватель» отображается название создана динамически](layouts/_static/image9.png)

Если требуется, просмотрите исходный код страницы в браузере. Можно видеть, что `<title>` подготавливается к просмотру как элемент `<title>List Movies</title>`.

> [!TIP] 
> 
> **Объект страницы**
> 
> Полезной функцией `Page` — это динамический объект — `Title` свойство не является фиксированной или зарезервированное имя. Можно использовать *любой* имя значения `Page` объекта. Например, можно так же просто, передано заголовок, используя свойство с именем `Page.CurrentName` или `Page.MyPage`. Единственное ограничение, имеет имя следовать обычным правилам для свойства, может иметь имя. (Например, имя не может содержать пробел).
> 
> Можно передать любое количество значений с помощью `Page` объекта. Если требуется передать сведения о фильмах страницу макета, можно передать значения с помощью примерно `Page.MovieTitle` и `Page.Genre` и `Page.MovieYear`. (Или другие имена, которые разработан для хранения информации). Единственное требование — это, скорее всего, очевидно, необходимо использовать одинаковые имена в странице содержимого и страницы макета.
> 
> Сведения, можно передать с помощью `Page` объект не ограничиваются только текст, отображаемый на странице макета. Можно передавать значение для страницы макета, а затем код на странице макета можно использовать значение, чтобы решить, нужно ли выводить раздел страницы, что *.css* файл для использования и т. д. Переданные значения `Page` объекта как любые другие значения, которые можно использовать в коде. Это только что значения получаются на странице содержимого и передаются на страницу макета.


Откройте *AddMovie.cshtml* страницы и добавьте строку в начало кода, который предоставляет заголовок *AddMovie.cshtml* страницы:

[!code-csharp[Main](layouts/samples/sample10.cs)]

Запустите *AddMovie.cshtml* страницы. Отображается новый заголовок существует:

![Вкладка «Обозреватель» отображается название «Добавить фильмов» создана динамически](layouts/_static/image10.png)

## <a name="updating-the-remaining-pages-to-use-the-layout"></a>Обновление оставшихся страниц используется режим

Теперь вы можете завершить оставшихся страниц на сайте, чтобы они использовали новый макет. Откройте *EditMovie.cshtml* и *DeleteMovie.cshtml* в свою очередь и внесения изменений в каждом.

Добавьте строку кода, ссылающуюся на странице макета.

[!code-csharp[Main](layouts/samples/sample11.cs)]

Добавьте строку для установки заголовка страницы:

[!code-csharp[Main](layouts/samples/sample12.cs)]

или

[!code-csharp[Main](layouts/samples/sample13.cs)]

Удалите лишние разметку HTML, по сути, оставьте только биты, которые находятся внутри `<body>` элемент (плюс блок кода в верхней).

Изменение `<h1>` элемент `<h2>` элемента.

После внесения этих изменений, проверьте все и убедитесь в том, что он правильно отображает и правильность заголовок.

## <a name="parting-thoughts-about-layout-pages"></a>Parting мысли об макета страницы

В этом учебнике вы создали  *\_Layout.cshtml* страницы и использовать `RenderBody` метод для слияния содержимого с другой страницы. Это базовый шаблон с помощью разметки на веб-страницах.

Макет страницы обладают дополнительными функциями, которые не материале. Например, можно вложить страницы макета — одну страницу макета в свою очередь может ссылаться на другой. Вложенные структуры может быть полезно, если вы работаете с подразделах сайта, требующие разные макеты. Можно также использовать дополнительные методы (например, `RenderSection`) для настройки с именем разделов макета страницы.

Сочетание страницы макета и *.css* файлы обладает широкими возможностями. Как вы увидите Далее учебника серии, в WebMatrix можно создать сайт на основе *шаблона*, которое позволяет сайт, который имеет стандартные функциональные возможности в нем. Шаблоны позволяют рекомендуется использовать макет страницы и CSS для создания сайтов, прекрасно выглядят и имеют функции, например меню. Ниже приведен снимок экрана домашней страницы с узла, на основе шаблона, показывающий функции, используемые страницы макета и CSS.

![Макет, созданных с использованием шаблона сайта WebMatrix, показывающая заголовок, область навигации, область содержимого, дополнительный раздел и ссылки входа](layouts/_static/image11.png)

## <a name="complete-listing-for-movie-page-updated-to-use-a-layout-page"></a>Полный пример для страницы фильма (обновлена для использования страницы макета)

[!code-cshtml[Main](layouts/samples/sample14.cshtml)]

## <a name="complete-page-listing-for-add-movie-page-updated-for-layout"></a>Страницы для добавления фильма страницы (обновлено для макета)

[!code-cshtml[Main](layouts/samples/sample15.cshtml)]

## <a name="complete-page-listing-for-delete-movie-page-updated-for-layout"></a>Полный пример страницы для страницы удаления фильма (обновлено для макета)

[!code-cshtml[Main](layouts/samples/sample16.cshtml)]

## <a name="complete-page-listing-for-edit-movie-page-updated-for-layout"></a>Полный пример страницы для страницы правки фильма (обновлено для макета)

[!code-cshtml[Main](layouts/samples/sample17.cshtml)]

## <a name="coming-up-next"></a>В ближайшее время

В следующем уроке будет рассмотрено публикации сайта в Интернете, поэтому всегда можно увидеть.

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Создание согласованного выглядеть](https://go.microsoft.com/fwlink/?LinkID=202891) — статьи, которая содержит некоторые дополнительные сведения о работе с макетами. Также описывается передать значение страницу макета, которая показывает или скрывает некоторое содержимое.
- [Вложенные страницы макета в Razor](http://www.mikesdotnetting.com/Article/164/Nested-Layout-Pages-with-Razor) — блоги Майк Бринд пример страницы макета вкладывать друг в друга. (Включая загрузки страниц).

> [!div class="step-by-step"]
> [Назад](deleting-data.md)
> [Вперед](publishing.md)
