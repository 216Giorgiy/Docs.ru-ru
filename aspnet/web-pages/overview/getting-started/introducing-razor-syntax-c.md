---
uid: web-pages/overview/getting-started/introducing-razor-syntax-c
title: Введение в программирование веб-ASP.NET с использованием синтаксиса Razor (C#) | Документы Microsoft
author: tfitzmac
description: В этой главе дается обзор программирования с веб-страниц ASP.NET с использованием синтаксиса Razor. ASP.NET — технология Майкрософт для выполнения динамических веб-pa...
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/07/2014
ms.topic: article
ms.assetid: aa67d304-583b-4bf8-a231-195656cfb587
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/getting-started/introducing-razor-syntax-c
msc.type: authoredcontent
ms.openlocfilehash: 48f49f40a6fc0c6a0c664873879f9f61080132ea
ms.sourcegitcommit: c79fd3592f444d58e17518914f8873d0a11219c0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
<a name="introduction-to-aspnet-web-programming-using-the-razor-syntax-c"></a>Введение в программирование веб-ASP.NET с использованием синтаксиса Razor (C#)
====================
по [Tom FitzMacken](https://github.com/tfitzmac)

> В этой статье дается обзор программирования с веб-страниц ASP.NET с использованием синтаксиса Razor. ASP.NET — технология Майкрософт для выполнения динамических веб-страниц на веб-серверах. Этой статьи посвящена следующим вопросам об использовании языка программирования C#.
> 
> **Вы узнаете**:
> 
> - Top 8, программирование советов по началу работы с программирование веб-страниц ASP.NET с использованием синтаксиса Razor.
> - Основные принципы программирования вам.
> - Какие кода сервера ASP.NET и синтаксисом Razor — все о.
>   
> 
> ## <a name="software-versions"></a>Версии программного обеспечения
> 
> 
> - Веб-страниц ASP.NET (Razor) 3
>   
> 
> Этот учебник также работает с веб-страницы ASP.NET 2.


## <a name="the-top-8-programming-tips"></a>Top 8 советы по программированию

В этом разделе приведены несколько советов, которые абсолютно необходимо знать перед началом написания кода сервера ASP.NET с использованием синтаксиса Razor.

> [!NOTE]
> Синтаксис Razor основан на языке программирования C#, и это язык, который используется чаще всего с веб-страниц ASP.NET. Однако синтаксис Razor поддерживает язык Visual Basic и все, что вы увидите, что также можно выполнить в Visual Basic. Дополнительные сведения см. в приложении [языка Visual Basic и синтаксис](https://go.microsoft.com/fwlink/?LinkId=202908).


Далее в этой статье, можно найти дополнительные сведения о большинство из этих методик программирования.

### <a name="1-you-add-code-to-a-page-using-the--character"></a>1. Добавьте код для страницы с помощью символ @

`@` Символ запускает встроенные выражения, одной инструкции блоки и блоки нескольких инструкций:

[!code-html[Main](introducing-razor-syntax-c/samples/sample1.html)]

Вот эти инструкции выглядеть при запуске страницы в браузере.

![Razor Img1](introducing-razor-syntax-c/_static/image1.jpg)

> [!TIP] 
> 
> **Кодировка HTML**
> 
> При отображении содержимого в страницу с использованием `@` символов, как в предыдущих примерах ASP.NET кодирует в формате HTML выходные данные. Эта процедура заменяет зарезервированные символы HTML (например, `<` и `>` и `&`) с кодами, позволяющие символы для отображения в качестве символов на веб-странице, а как HTML-теги или сущностей. Без кодировки HTML, вывод серверный код могут отображаться неправильно и может предоставить доступ к странице угрозам безопасности.
> 
> Если вашей целью является для вывода разметки HTML, который отображает теги как разметка (например `<p></p>` для абзаца или `<em></em>` для выделения текста), см. в разделе [объединение текст, разметку и код в блоках кода](#BM_CombiningTextMarkupAndCode) далее в этой статье.
> 
> Вы можете прочитать больше о HTML-кодирования в [работа с формами](https://go.microsoft.com/fwlink/?LinkId=202892).


### <a name="2-you-enclose-code-blocks-in-braces"></a>2. Блоки кода заключить в фигурные скобки

Объект *блок кода* включает один или несколько операторов кода и заключены в фигурные скобки.

[!code-html[Main](introducing-razor-syntax-c/samples/sample2.html)]

Результат отображается в браузере:

![Razor Img2](introducing-razor-syntax-c/_static/image2.jpg)

### <a name="3-inside-a-block-you-end-each-code-statement-with-a-semicolon"></a>3. Внутри блока заканчиваться точкой с запятой операторы

Внутри блока кода каждая инструкция полный код должен заканчиваться точкой с запятой. Встроенные выражения не заканчивается точкой с запятой.

[!code-html[Main](introducing-razor-syntax-c/samples/sample3.html)]

### <a name="4-you-use-variables-to-store-values"></a>4. Использовать переменные для хранения значений

Можно хранить значения в *переменной*, включая строки, числа и даты, и т. д. Создание новой переменной с помощью `var` ключевое слово. Значения переменных можно вставить непосредственно в страницу с помощью `@`.

[!code-html[Main](introducing-razor-syntax-c/samples/sample4.html)]

Результат отображается в браузере:

![Razor Img3](introducing-razor-syntax-c/_static/image3.jpg)

<a id="ID_StringLiterals"></a>
### <a name="5-you-enclose-literal-string-values-in-double-quotation-marks"></a>5. Строковый литерал по значению заключены в двойные кавычки

Объект *строка* — это последовательность символов, которые рассматриваются как текст. Чтобы указать строку, заключите его в двойные кавычки:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample5.cshtml)]

Если строка, будет отображаться содержит обратную косую черту ( `\` ) или двойные кавычки ( `"` ), используйте *verbatim строковый литерал* , начинающийся с префикса `@` оператор. (В C# \ символ имеет особое значение, если вы не используете verbatim строкового литерала.)

[!code-html[Main](introducing-razor-syntax-c/samples/sample6.html)]

Двойные кавычки, используйте verbatim строкового литерала и повторите кавычки:

[!code-html[Main](introducing-razor-syntax-c/samples/sample7.html)]

Ниже приведен результат использования обоих этих примерах на странице:

![Razor Img4](introducing-razor-syntax-c/_static/image4.jpg)

> [!NOTE]
> Обратите внимание, что `@` символ используется для пометки строковые литералы verbatim в C# и для пометки кода на страницах ASP.NET.


### <a name="6-code-is-case-sensitive"></a>6. Код с учетом регистра

В C#, ключевые слова (такие как `var`, `true`, и `if`) и в именах переменных учитывается регистр символов. Следующие строки кода создают две различные переменные `lastName` и `LastName.`

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample8.cshtml)]

Если объявить переменную как `var lastName = "Smith";` и при попытке сослаться на эту переменную на странице как `@LastName`, возникнет ошибка, поскольку `LastName` не распознан.

> [!NOTE]
> В Visual Basic, ключевые слова и переменные, *не* с учетом регистра.


### <a name="7-much-of-your-coding-involves-objects"></a>7. Программирования состоит в основном объектов

*Объекта* представляет вещь, вы можете программировать с &#8212; страницы, текстовое поле, файл, изображения, веб-запроса, сообщение электронной почты, запись клиента (строки базы данных), и т. д. Объекты имеют свойства, описывающие их характеристики и чтение или изменение &#8212; объект-поле имеет `Text` свойство (среди прочих), объект запроса имеет `Url` имеет свойства, сообщение электронной почты `From` свойства объект клиента имеет `FirstName` свойства. Объекты также имеют методы, являющиеся &quot;команд&quot; они могут выполнять. Примеры включают объект файла `Save` метод, объект image `Rotate` метод и объект электронной почты `Send` метод.

Вы будете часто работать с `Request` объекта, который включает такие сведения, как значения текстовые поля (поля формы) на странице, какой тип браузера, сделавшего запрос, URL-адрес страницы, удостоверение пользователя, и т. д. В следующем примере показано, как для доступа к свойствам `Request` объект и способ вызова `MapPath` метод `Request` объекта, который дает абсолютный путь к странице на сервере:

[!code-html[Main](introducing-razor-syntax-c/samples/sample9.html)]

Результат отображается в браузере:

![Razor Img5](introducing-razor-syntax-c/_static/image5.jpg)

### <a name="8-you-can-write-code-that-makes-decisions"></a>8. Можно написать код, который принимает решения

Ключевой особенностью динамических веб-страниц является, можно определить, какие зависимости от условия. Наиболее распространенный способ сделать это — с `if` инструкции (и необязательно `else` инструкции).

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample10.cshtml)]

Инструкция `if(IsPost)` является быстрым способом написания `if(IsPost == true)`. Вместе с `if` инструкции, существует множество способов для проверки условий, повторите блоков кода, и т. д., который из них описаны далее в этой статье.

Результат отображается в браузере (после нажатия кнопки **отправить**):

![Razor Img6](introducing-razor-syntax-c/_static/image6.jpg)

> [!TIP] 
> 
> <a id="SB_HttpGetPost"></a>
> ### <a name="http-get-and-post-methods-and-the-ispost-property"></a>HTTP GET и POST методы и свойства IsPost
> 
> Протокол, используемый для веб-страницы (HTTP) поддерживает очень ограниченное число методов (действий), которые используются для выполнения запросов к серверу. Два наиболее распространенных: GET, который используется для считывания страницы, и POST, который используется для отправки страницы. Как правило при первом запросе страницы, страница запрашивается с помощью GET. Если пользователь заполняет форму и затем нажимает кнопку отправки, браузер отправляет запрос POST к серверу.
> 
> В веб-программирования часто бывает полезно знать ли страница запрашивается как GET или POST, чтобы знать, как обрабатывать страницы. Веб-страницах ASP.NET, можно использовать `IsPost` свойство, чтобы узнать, является ли запрос GET или POST. Если запрос POST, `IsPost` свойство будет возвращать значение true, и можно выполнять следующие действия чтения значений текстовых полей в форме. Многие примеры, вы увидите показано, как обрабатывать страницы по-разному в зависимости от значения `IsPost`.


## <a name="a-simple-code-example"></a>Простой пример кода

Эта процедура показано, как создать страницу, которая иллюстрирует основные приемы программирования. В примере создается страница, на которой пользователи могут вводить двух чисел, а затем он добавляет их и отображает результат.

1. В редакторе создайте новый файл и назовите его *AddNumbers.cshtml*.
2. Скопируйте следующий код и разметку в странице, заменив любой страницы.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample11.cshtml)]

    Ниже описаны некоторые меры, следует учесть:

    - `@` Символ запускает первый блок кода на странице, и он находился перед `totalMessage` переменной, которая встроена в нижней части страницы.
    - Блок в верхней части страницы заключается в фигурные скобки.
    - В блоке, в начале все строки заканчивается точкой с запятой.
    - Переменные `total`, `num1`, `num2`, и `totalMessage` хранить несколько чисел и строку.
    - Значение строки литерала, присваиваемое `totalMessage` переменная будет попадать в двойные кавычки.
    - Так как код с учетом регистра, когда `totalMessage` переменная используется в нижней части страницы, его имя должно полностью соответствовать переменной в начале.
    - Выражение `num1.AsInt() + num2.AsInt()` показано, как работать с объектами и методы. `AsInt` Метод для каждой переменной преобразует строку, введенные пользователем, в число (целое число), чтобы его можно выполнять арифметические операции.
    - `<form>` Тег содержит `method="post"` атрибута. Указывает, что когда пользователь щелкает **добавить**, страницы, которые будут отправляться на сервер с помощью метода HTTP POST. При отправке страницы `if(IsPost)` проверка дает результат true, а условного кода, отображается результат сложения чисел.
3. Сохраните страницу и запустите его в браузере. (Убедитесь, что выбран страницы **файлы** рабочей области, прежде чем запускать его.) Введите двух целых чисел, а затем нажмите кнопку **добавить** кнопки. 

    ![Razor Img7](introducing-razor-syntax-c/_static/image7.jpg)

## <a name="basic-programming-concepts"></a>Основные понятия программирования

В этой статье предоставляются общие сведения о ASP.NET веб-программирования. Это не значит тщательный анализ, только краткий обзор через принципы программирования, который будет использоваться чаще всего. Тем не менее она охватывает почти все, что вам потребуется, чтобы приступить к работе с веб-страниц ASP.NET.

Но во-первых, немного технические сведения.

### <a name="the-razor-syntax-server-code-and-aspnet"></a>Синтаксис Razor, серверный код и ASP.NET

Синтаксис Razor является простой синтаксис программирования для внедрения серверного кода на веб-странице. В веб-страницы с синтаксисом Razor, существует два типа содержимого: код клиента содержимого и сервера. Содержимое клиента является материалы, вы привыкли к веб-страницы: HTML-разметка (элементы), сведения о стиле CSS, например, может быть определенный клиентский скрипт, например JavaScript и обычный текст.

Синтаксис Razor позволяет добавлять код сервера к содержимому этого клиента. Если на странице кода сервера, сервер выполняет код во-первых, перед отправкой страницы в браузере. Запустив на сервере, код может выполнять задачи, которые могут быть гораздо более сложными, с использованием клиента содержимого сама по себе, например при доступе к серверных баз данных. Самое главное, серверный код может динамически генерировать клиентский контент &#8212; он может создавать разметку HTML или другое содержимое в режиме реального времени и отправьте его в браузер вместе со статическим HTML-страница может содержать. С точки зрения браузера клиент контент, созданный код сервера не отличается от любого другого клиента содержимого. Как вы уже видели, серверный код, необходимый довольно проста.

Веб-страниц ASP.NET с синтаксисом Razor с особый файл с расширением (*.cshtml* или *.vbhtml*). Сервер распознает эти расширения, запускает код, помеченный синтаксисом Razor, а затем отправляет страницу в браузере.

### <a name="where-does-aspnet-fit-in"></a>Где ASP.NET помещается в

Синтаксис Razor основан на технологии Майкрософт, называемой ASP.NET, которая в свою очередь основана на платформе Microsoft .NET Framework. Платформы.NET Framework — это большой, полнофункциональными программирования платформа корпорации Майкрософт для разработки практически любого типа приложения на компьютере. ASP.NET является частью .NET Framework, предназначенный специально для создания веб-приложений. Разработчики использовали ASP.NET для создания многих большой и высоким уровнем трафика веб-сайтов в мире. (Любое время вы видите расширение имени файла *.aspx* как часть URL-адрес узла, вы узнаете, что узел был написан с помощью ASP.NET.)

Синтаксис Razor предоставляет все возможности платформы ASP.NET, но с помощью упрощенного синтаксиса, который прост в освоении Если вы новичок, который делает можно повысить производительность, если вы являетесь опытным пользователем. Несмотря на то, что этот синтаксис является проста в использовании, его семейства связь с ASP.NET и .NET Framework означает, что по мере более сложных веб-сайты power больше платформ, доступных пользователю.

![Razor Img8](introducing-razor-syntax-c/_static/image8.jpg)

> [!TIP] 
> 
> **Классы и экземпляры**
> 
> Код сервера ASP.NET использует объекты, которые в свою очередь лежит идея классов. Класс является определение или шаблон для объекта. Например, приложение может содержать `Customer` класс, который определяет свойства и методы, необходимые для любого объекта клиента.
> 
> Если приложению необходима для работы с данными клиента, он создает экземпляр (или *создает*) объект customer. Каждого клиента — это отдельный экземпляр `Customer` класса. Каждый экземпляр поддерживает свойства и методы, но значения свойств для каждого экземпляра обычно отличаются, так как каждый объект клиента является уникальным. В объекте одного клиента `LastName` свойство может быть «Smith»; в другом объекте клиента `LastName` свойство может быть «Иванов».
> 
> Аналогичным образом, все отдельные веб-страницы в веб-узла будет `Page` объект, который является экземпляром класса `Page` класса. Кнопка на странице `Button` объект, который является экземпляром класса `Button` класс и т. д. Каждый экземпляр имеет свои собственные характеристики, но все они основаны, заданных в определении класса объекта.


## <a name="basic-syntax"></a>Базовый синтаксис

Вы уже видели простой пример того, как создать страницу веб-страниц ASP.NET и сведения о добавлении серверного кода для HTML-разметка. Здесь вы научитесь основам написания кода сервера ASP.NET с использованием синтаксиса Razor &#8212; то есть правила языка программирования.

Если у вас есть опыт работы с программирования (особенно если вы использовали C, C++, C#, Visual Basic или JavaScript), большая часть сведений здесь будут знакомы. Возможно, потребуется ознакомиться только с добавляется как серверный код разметки в *.cshtml* файлов.

<a id="BM_CombiningTextMarkupAndCode"></a>
### <a name="combining-text-markup-and-code-in-code-blocks"></a>Объединение текста, разметку и код в блоках кода

В блоках кода сервера часто требуется выходной текст или разметку (или оба) на страницу. Если блок кода сервера содержит текст, не код и, вместо этого должны отображаться как есть, ASP.NET необходимо иметь возможность различать текст из кода. Для этого можно использовать следующие способы.

- Заключите текст в HTML-элемент как `<p></p>` или `<em></em>`:   

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample12.cshtml)]

    HTML-элемента, могут включать текст, дополнительных элементов HTML и выражения в коде сервера. Когда ASP.NET обнаруживает открывающий тег HTML (например, `<p>`), он отображает все, включая элемент, и его содержимое в виде является разрешение выражения кода сервера, поскольку он выполняется в браузере.
- Используйте `@:` оператор или `<text>` элемент. `@:` Выводит одну строку содержимого, содержащий обычный текст или непарные теги HTML; `<text>` элемент заключает в себе несколько строк для вывода. Эти параметры полезны в тех случаях, когда требуется запретить для отрисовки HTML-элемент в рамках выходных данных.  

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample13.cshtml)]

    Если требуется направить вывод нескольких строк текста или непарные теги HTML, может предшествовать каждой строки с `@:`, или можно заключить строку в `<text>` элемент. Как `@:` оператор,`<text>` теги используемого ASP.NET для определения содержимого текста и никогда не преобразуются в выходные данные страницы.

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample14.cshtml)]

    В первом примере повторяется предыдущий пример, но использует одну пару `<text>` теги, заключающая текст для отрисовки. Во втором примере `<text>` и `</text>` теги заключите три строки, которые имеют неавтономные текста и непарные теги HTML (`<br />`), а также серверный код и соответствующие теги HTML. Опять же, может предшествовать каждой строки по отдельности с `@:` оператор; правильна способом.

    > [!NOTE]
    > При выводе текста как показано в этом разделе &#8212; с помощью элемента HTML `@:` оператор, или `<text>` элемент &#8212; ASP.NET не HTML-кодирование выходные данные. (Как уже отмечалось, ASP.NET кодирования вывода сервера кода выражений и блоков кода сервера, которым предшествует `@`, за исключением особых случаев, указанных в этом разделе.)

### <a name="whitespace"></a>Whitespace

Лишние пробелы в операторе (и за пределами строковый литерал) не влияет на инструкции:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample15.cshtml)]

Разрыв строки в инструкции не оказывает влияния на инструкции, и можно заключить инструкции для удобства чтения. Следующие инструкции равнозначны:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample16.cshtml)]

Однако невозможно создание оболочки строки середине строкового литерала. Следующий пример не работает:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample17.cshtml)]

Чтобы объединить длинную строку, которая переносится на несколько строк, как приведенный выше код, можно двумя способами. Можно использовать оператор объединения (`+`), который вы увидите далее в этой статье. Можно также использовать `@` символ для создания буквальная строка литерала, как показано выше в этой статье. Строковые литералы verbatim может располагаться в нескольких строках:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample18.cshtml)]

### <a name="code-and-markup-comments"></a>Код (и разметки) комментарии

Комментарии позволяют оставить заметки для себя или другим пользователям. Они также позволяют отключить (*закомментируйте*) часть кода или разметки, выполнять не нужно, но при этом нужно сохранить в страницу на данный момент.

Есть различные комментирование синтаксиса Razor кода и разметки HTML. Как и в случае с любым кодом Razor, комментариев Razor обрабатываются (и затем удалить) на сервере перед отправкой страницы в браузере. Таким образом синтаксис комментария Razor позволяет помещать комментарии в коде (или даже в разметке), которые отображаются при редактировании файла, но пользователи не отображается, даже в исходный код страницы.

Для ASP.NET Razor комментариев, начать комментарий с `@*` и завершается оператором `*@`. Комментарий может быть на одной или нескольких строках:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample19.cshtml)]

Вот комментария в блок кода.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample20.cshtml)]

Здесь будут одинаковые блоки кода, в строку кода в комментарий, чтобы он не будет работать:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample21.cshtml)]

Внутри блока кода в качестве альтернативы с помощью синтаксиса комментария Razor, можно использовать комментирования синтаксис языка программирования, которую вы используете, например C#:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample22.cshtml)]

В C#, которым предшествует однострочные комментарии `//` символов и многострочных комментариев начинаются с `/*` и заканчиваться `*/`. (С помощью комментариев Razor, комментарии в C# не подготавливаются к просмотру в браузере.)

Для разметки как известно, можно создать HTML-комментария:

[!code-xml[Main](introducing-razor-syntax-c/samples/sample23.xml)]

Комментарии HTML начинаются с `<!--` символов и заканчиваются `-->`. Комментарии HTML можно использовать для окружения не только текст, но также разметку HTML, который вы хотите оставить на странице, но не хотите для подготовки к просмотру. Этот комментарий HTML будут скрыты все содержимое, теги и текст, который они содержат:

[!code-html[Main](introducing-razor-syntax-c/samples/sample24.html)]

В отличие от комментариев Razor, комментарии HTML *,* отображен на странице и пользователь может видеть их, просматривая исходный код страницы.

Razor имеет ограничения на вложенных блоках C#. Дополнительные сведения см. [переменных C# с именем и вложенные блоки создать неработающие код](http://aspnetwebstack.codeplex.com/workitem/1914)

## <a name="variables"></a>Переменные

Переменная является именованный объект, который следует использовать для хранения данных. Переменные любое имя, но имя должно начинаться с буквы и не может содержать пробелы или зарезервированные символы.

### <a name="variables-and-data-types"></a>Переменные и типы данных

Переменная может иметь определенный тип данных, который указывает, какого рода данные хранятся в переменной. Может иметь строковые переменные, в которых хранятся строковые значения (например &quot;Здравствуй, мир!&quot;), целочисленные переменные, которые сохраняют значения целого числа (например, 3 или 79) и переменные типа date, хранящие значения даты в различных форматах (например, 4 и 12/2012 или март 2009 г. ). И многие другие типы данных, которые можно использовать.

Тем не менее обычно не нужно указывать тип для переменной. В большинстве случаев, ASP.NET можно определить тип, основанный на использовании данных в переменной. (Иногда необходимо указать тип, вы увидите примеры, это не так.)

Объявите переменную с помощью `var` ключевое слово (Если вы не хотите задать тип) или с помощью имени типа:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample25.cshtml)]

В следующем примере показано некоторые типичные способы применения переменных на веб-странице:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample26.cshtml)]

При сочетании предыдущих примерах на странице можно увидеть отображению в браузере:

![Razor Img9](introducing-razor-syntax-c/_static/image9.jpg)

### <a name="converting-and-testing-data-types"></a>Преобразование и тестирование типы данных

Несмотря на то, что ASP.NET обычно может автоматически определить тип данных, иногда это невозможно. Таким образом может потребоваться помочь ASP.NET, выполнив явное преобразование. Даже если не нужно преобразовывать типы, иногда полезно для тестирования, чтобы увидеть, какие типы данных вы можете работать с.

Наиболее распространенным случаем является необходимость преобразования строки в другой тип, такой как целое число или дату. В примере показан типичный случай, где необходимо преобразовать строку в число.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample27.cshtml)]

Как правило входные данные пользователя будут доставляться вам как строки. Даже если выводе пользователям вводить номер, и даже если они вводят цифры, при отправке ввод данных пользователем и прочитать его в код, данные в строковом формате. Таким образом необходимо преобразовать строку в число. В примере при попытке выполнить арифметические операции над значениями, без преобразования их, возникает следующая ошибка, так как ASP.NET не удается добавить две строки:

*Не удается неявно преобразовать тип «string» для «int».*

Чтобы преобразовать значения в целые числа, вызовите `AsInt` метод. Если преобразование прошло успешно, затем можно добавить номера.

В следующей таблице перечислены некоторые распространенные методы преобразования и тестирования для переменных.

::: строки.::: столбец::: <strong>метод</strong> ::: конец столбца.::: столбец::: <strong>описание</strong> ::: конец столбца.::: столбца::: <strong>пример</strong> ::: конец столбца.::: конец строки.
* * *
::: строки.::: столбца::: `AsInt(), IsInt()` ::: конец столбца.::: столбца::: преобразует строку, представляющую целое число (например, «593)» в целое число.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample28.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбец::: `AsBool(), IsBool()` ::: конец столбца.::: столбец::: преобразует строку как &quot;true&quot; или &quot;false&quot; к логическому типу.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample29.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбец::: `AsFloat(), IsFloat()` ::: конец столбца:::::: столбец::: преобразует строки, которая содержит как десятичное значение &quot;1.3&quot; или &quot;7.439&quot; число с плавающей запятой.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample30.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбец::: `AsDecimal(), IsDecimal()` ::: конец столбца.::: столбца::: преобразует строки, которая содержит как десятичное значение &quot;1.3&quot; или &quot;7.439&quot; в десятичное число. (В ASP.NET, десятичное число, более точно, чем число с плавающей запятой.) ::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample31.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбец::: `AsDateTime(), IsDateTime()` ::: конец столбца.::: столбца::: преобразует строку, представляющую значение даты и времени для ASP.NET `DateTime` типа.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample32.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбца::: `ToString()` ::: конец столбца.::: столбца::: любой другой тип данных преобразуется в строку.
::: конец столбца:::::: столбца. [!code-javascript[Main](introducing-razor-syntax-c/samples/sample33.js)]
    ::: конец столбца:::::: конец строки.

## <a name="operators"></a>Операторы

Оператор — это ключевое слово или символ, который сообщает ASP.NET, какого рода команду, выполняемую в выражении. В языке C# (и синтаксис Razor, который на его основе) поддерживает многие операторы, но необходимо распознавать небольшое, чтобы приступить к работе. В следующей таблице перечислены наиболее распространенные операторы.


::: строки.::: столбец::: <strong>оператор</strong> ::: конец столбца.::: столбец::: <strong>описание</strong> ::: конец столбца.::: столбец::: <strong>примеры</strong> ::: конец столбца.::: конец строки.
* * *
::: строки.::: столбца::: `+` `-` `*` `/` ::: конец столбца.::: столбца::: математические операторы, используемые в числовых выражений.
::: конец столбца:::::: столбца. [!code-css[Main](introducing-razor-syntax-c/samples/sample34.css)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбец::: `=` ::: конец столбца:::::: столбец::: назначения. Присваивает значение справа от оператора объекту с левой стороны.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample35.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбец::: `==` ::: конец столбца:::::: столбец::: равенства. Возвращает `true` Если значения равны. (Обратите внимание различие между `=` оператор и `==` оператора.)::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample36.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбца::: `!=` ::: конец столбца.::: столбца::: неравенства. Возвращает `true` Если значения не равны.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample37.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбец::: `< > <= >=` ::: конец столбца:::::: столбец::: меньше-, чем больше-чем меньше или равно», «больше или равно.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample38.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбец::: `+` ::: конец столбца:::::: столбец::: объединения, который используется для объединения строк. ASP.NET знает разницу между этот оператор и оператор сложения, основанный на типе данных выражения.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample39.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбец::: `+=` `-=` ::: конец столбца:::::: столбец::: операторы инкремента и декремента, которые сложения и вычитания 1 (соответственно) из переменной.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample40.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбец::: `.` ::: конец столбца:::::: столбец::: точка. Используются для различения объектов и их свойства и методы.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample41.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбца::: `()` ::: конец столбца.::: столбца::: круглые скобки. Используется для группирования выражений и для передачи параметров в методы.
::: конец столбца:::::: столбца. [!code-javascript[Main](introducing-razor-syntax-c/samples/sample42.js)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки:::::: столбца::: `[]` ::: конец столбца.::: столбца::: квадратные скобки. Используется для доступа к значениям в массивы или коллекции.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample43.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбца::: `!` ::: конец столбца.::: столбца::: не. Обращает `true` значение `false` и наоборот. Обычно используется в качестве это самый простой способ проверки `false` (то есть для не `true`).
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample44.cs)]
    ::: конец столбца:::::: конец строки.
* * *
::: строки.::: столбца::: `&&` <code>&#124;&#124;</code> ::: конец столбца.::: столбец::: логических и и или, которые используются для связывания условий.
::: конец столбца:::::: столбца. [!code-csharp[Main](introducing-razor-syntax-c/samples/sample45.cs)]
    ::: конец столбца:::::: конец строки.

<a id="ID_WorkingWithFileAndFolderPaths"></a>
## <a name="working-with-file-and-folder-paths-in-code"></a>Работа с файлами и пути к папке, в коде

Вы будете часто работать с пути файлов и папок в коде. Ниже приведен пример структуры физическую папку для веб-сайта, как может выглядеть на компьютере разработчика:

`C:\WebSites\MyWebSite default.cshtml datafile.txt \images Logo.jpg \styles Styles.css`

Ниже приведены некоторые основные сведения о URL-адреса и пути.

- URL-адрес начинается с помощью имени домена (`http://www.example.com`) или имя сервера (`http://localhost`, `http://mycomputer`).
- URL-адрес соответствует физический путь на главном компьютере. Например `http://myserver` папке может соответствовать *C:\websites\mywebsite* на сервере.
- Виртуальный путь является сокращением для задания путей в коде без указания полного пути. Он включает часть URL-адрес, который следует за именем домена или сервера. При использовании виртуальных путей, можно переместить код в другой домен или сервер без необходимости обновлять соответствующие пути.

Ниже приведен пример поможет вам понять различия:

| Полный URL-адрес | `http://mycompanyserver/humanresources/CompanyPolicy.htm` |
| --- | --- |
| Имя сервера | *mycompanyserver* |
| Виртуальный путь | */humanresources/CompanyPolicy.htm* |
| Физический путь | *C:\mywebsites\humanresources\CompanyPolicy.htm* |

Виртуальный корневой каталог — / так же, как и корневом каталоге диска — диск \. (Виртуальная папка пути всегда использовать символы косой черты). Виртуальный путь к папке не нужно иметь то же имя, как физическая папка; Это может быть псевдоним. (На производственных серверах виртуальный путь редко соответствует как полный физический путь.)

При работе с файлами и папками в коде, иногда требуется обращаться к физическому пути и иногда виртуальный путь, в зависимости от того, какие объекты, которым вы работаете. ASP.NET предоставляет эти средства для работы с пути файлов и папок в коде: `Server.MapPath` метода и `~` оператор и `Href` метод.

### <a name="converting-virtual-to-physical-paths-the-servermappath-method"></a>Преобразование виртуальных и физических путей: метод Server.MapPath

`Server.MapPath` Метод преобразует виртуальный путь (например */default.cshtml*) абсолютный физический путь (например *C:\WebSites\MyWebSiteFolder\default.cshtml*). Используйте этот метод когда требуется полный физический путь. Типичным примером является при чтении или записи в текстовый файл или файл изображения на веб-сервере.

Абсолютный физический путь сайта на сервере размещения сайта обычно не известен, поэтому этот метод можно преобразовать путь вы знаете — виртуальный путь, соответствующий путь на сервере для вас. Передать виртуальный путь к файлу или папке в метод и возвращает физический путь:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample46.cshtml)]

### <a name="referencing-the-virtual-root-the--operator-and-href-method"></a>Создание ссылок на виртуального корневого каталога: ~ оператор и метод Href

В *.cshtml* или *.vbhtml* файл, можно ссылаться на пути виртуального корневого каталога с помощью `~` оператор. Это очень удобно, поскольку можно перемещения страниц на сайте, и любые ссылки, содержащиеся в них на другие страницы не будет нарушена. Это также удобно в случае, если когда-либо переместить веб-сайта в другое место. Далее приводятся некоторые примеры.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample47.cshtml)]

Если веб-сайт `http://myserver/myapp`, вот как ASP.NET будет интерпретировать эти пути при запуске страницы:

- `myImagesFolder`: `http://myserver/myapp/images`
- `myStyleSheet` : `http://myserver/myapp/styles/Stylesheet.css`

(Вы не увидите фактически не эти пути в качестве значения переменной, но ASP.NET будет рассматривать пути, как в случае, они были).

Можно использовать `~` оператор в серверном коде (как описано выше) и в разметке, следующим образом:

[!code-html[Main](introducing-razor-syntax-c/samples/sample48.html)]

В разметке, используйте `~` оператор для создания путей к ресурсам, таким как файлы изображений, другие веб-страниц и файлов CSS. При выполнении страницы ASP.NET просматривает страницы (код и разметку) и разрешает все `~` ссылки на правильный путь.

## <a name="conditional-logic-and-loops"></a>Условная логика и циклы

ASP.NET серверный код позволяет выполнять задачи на основе условий и написать код, который повторяется инструкций определенное число раз (то есть код, который выполняет цикл).

### <a name="testing-conditions"></a>Проверка условий

Для проверки простого условия можно использовать `if` инструкцию, которая возвращает значение true или false в зависимости от теста, можно указать:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample49.cshtml)]

`if` Блок начинается ключевое слово. Реальные (условие) указан в скобках и возвращает true или false. Операторы выполняются, если аргумент имеет значение true, заключенных в фигурные скобки. `if` Инструкция может содержать `else` блок, который задает операторы, которые выполняются, если условие равно false:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample50.cshtml)]

Можно добавить несколько условий с помощью `else if` блока:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample51.cshtml)]

В этом примере, если первым условием в Если блок не имеет значение true, `else if` проверяется условие. Если это условие выполнено, операторы в `else if` выполняются блока. Если ни одно из условий не соблюдается, операторы в `else` выполняются блока. Можно добавить любое количество иначе Если блокируется, а затем закройте с `else` блокировать как &quot;все остальные&quot; условие.

Чтобы протестировать большое количество условий, используйте `switch` блока:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample52.cshtml)]

Значение для тестирования, указан в скобках (в примере `weekday` переменной). Каждый отдельный тест использует `case` инструкцию, которая заканчивается двоеточие (:). Если значение `case` инструкции совпадает со значением теста, выполнением кода в этом блоке case. Закройте каждой инструкции case `break` инструкции. (Если забыть включить разрыв в каждом `case` блок кода из следующего `case` также будет выполняться инструкция.) Объект `switch` блок часто имеет `default` инструкции, как в случае с последнего &quot;все остальные&quot; параметр, который выполняется, если не выполняется ни одно из остальных случаях.

Результат выполнения двух последних условные блоки, которые отображаются в браузере:

![Razor Img10](introducing-razor-syntax-c/_static/image10.jpg)

### <a name="looping-code"></a>Циклической обработки кода

Часто требуется выполнить те же инструкции несколько раз. Для этого цикла. Например можно часто выполняются те же операторы для каждого элемента в набор данных. Если вы знаете точно сколько раз следует включить в цикл, можно использовать `for` цикла. Этот тип цикла особенно полезен для подсчета или отсчет:

[!code-html[Main](introducing-razor-syntax-c/samples/sample53.html)]

С началом цикла `for` ключевое слово, и три оператора в круглые скобки, каждый завершается точкой с запятой.

- Заключенный в круглые скобки, первая инструкция (`var i=10;`) создает счетчик и инициализирует его до 10. Имя счетчика не нужно `i` &#8212; можно использовать любую переменную. Когда `for` выполнении цикла, этот счетчик увеличивается автоматически.
- Вторая инструкция (`i < 21;`) задает условие, насколько вам требуется подсчитать. В этом случае нужно перейти к более 20 (то есть продолжить работать во время счетчика меньше, чем 21).
- Третий оператор (`i++` ) использует оператор инкремента, который просто указывает, что счетчик должен иметь 1 добавляется при каждом выполнении цикла.

Внутри фигурных скобок — это код, который будет выполняться для каждой итерации цикла. Разметка создает новый абзац (`<p>` элемент) каждый раз и добавляет строку в выходные данные, отображение значений `i` (счетчик). При запуске этой страницы, в примере создается 11 строк, отображая выходные данные с текстом в каждой строке, указывающее номер элемента.

![Razor Img11](introducing-razor-syntax-c/_static/image11.jpg)

Если вы работаете с коллекции или массива, при этом обычно используются `foreach` цикла. Коллекция — это группа схожие объекты и `foreach` цикла позволяет выполнить задачу для каждого элемента в коллекции. Этот тип цикла является удобным для коллекций, так как в отличие от `for` цикла, не нужно увеличить счетчик или ограничить. Вместо этого `foreach` кода цикла просто проходит через коллекцию до его завершения.

Например, следующий код возвращает элементы в `Request.ServerVariables` коллекции, который представляет собой объект, содержащий сведения о веб-сервере. Она использует `foreac` цикла h для отображения имени каждого элемента, создав новую `<li>` элемента в HTML маркированном списке.

[!code-html[Main](introducing-razor-syntax-c/samples/sample54.html)]

`foreach` Ключевого слова следуют скобки где объявления переменной, которая представляет один элемент в коллекции (в примере `var item`), за которым следует `in` ключевое слово, и требуется выполнить цикл по коллекции. В теле `foreach` цикла, можно получить доступ к текущего элемента, хранящегося в переменной, объявленный ранее.

![Razor Img12](introducing-razor-syntax-c/_static/image12.jpg)

Чтобы создать более общего назначения цикла, используйте `while` инструкции:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample55.cshtml)]

Объект `while` цикл начинается с `while` ключевое слово, и круглые скобки, где указать, как долго цикл продолжается (здесь для при условии, что `countNum` меньше 50), затем блок для повторения. Циклы обычно увеличения (Добавить) или уменьшения (вычитаемое) переменную или объект, используемый для подсчета. В примере `+=` оператор прибавляет 1 к `countNum` при каждом выполнении цикла. (Чтобы уменьшают значение переменной в цикле который отсчитывает, используйте оператор декремента `-=`).

## <a name="objects-and-collections"></a>Объекты и коллекции

Почти все содержимое на веб-сайт ASP.NET — это объект, включая саму веб-страницу. В этом разделе рассматриваются важные объекты, к которым вы будете работать с часто в коде.

### <a name="page-objects"></a>Объекты страницы

Самый простой объект в ASP.NET является страница. Получить доступ к свойствам объекта страницы напрямую без любого соответствующего объекта. Следующий код возвращает путь файла страницы, с помощью `Request` объект страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample56.cshtml)]

Чтобы сделать его очистить обращаются, свойства и методы для текущего объекта страницы, можно при необходимости использовать ключевое слово `this` для представления объекта страницы в коде. Ниже приведен в предыдущем примере кода с `this` Добавление для представления страницы:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample57.cshtml)]

Можно использовать свойства `Page` объекта, чтобы получить большой объем сведений, таких как:

- `Request`. Как вы уже видели, это совокупность сведений о текущем запросе, включая тип браузера, сделавшего запрос, URL-адрес страницы, удостоверение пользователя, и т. д.
- `Response`. Это коллекция сведений об ответе (страница «»), которое будет отправляться в браузере, серверный код завершения работы. Например это свойство можно использовать для записи сведений в ответ. 

    [!code-cshtml[Main](introducing-razor-syntax-c/samples/sample58.cshtml)]

<a id="ID_CollectionsAndObjects"></a>
### <a name="collection-objects-arrays-and-dictionaries"></a>Коллекция объектов (массивов и словарей)

Объект *коллекции* — это группа объектов одного типа, например коллекцию `Customer` объекты из базы данных. ASP.NET содержит множество встроенных коллекций, таких как `Request.Files` коллекции.

Вы будете часто работать с данными в коллекциях. Двумя распространенными типами коллекции являются *массива* и *словарь*. Массив полезно в том случае, если вы хотите хранить коллекции схожих элементов, но не требуется создавать отдельную переменную для хранения каждого элемента:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample59.cshtml)]

Для массивов объявить определенный тип данных, например `string`, `int`, или `DateTime`. Чтобы указать, что переменная может содержать массив, добавить квадратные скобки в объявлении (такие как `string[]` или `int[]`). Вы может обращаться к элементам в массиве с помощью их положение (индекс) или с помощью `foreach` инструкции. Массив индексы отсчитываются от нуля &#8212; таким образом, первый элемент находится в позиции 0, второй элемент находится в позиции 1 и т. д.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample60.cshtml)]

Можно определить количество элементов в массиве, получив ее `Length` свойство. Чтобы получить позицию конкретного элемента в массиве (для поиска массива), используйте `Array.IndexOf` метод. Можно также сделать таких вещей, как обратное содержимое массива ( `Array.Reverse` метод) или Сортировка содержимого ( `Array.Sort` метода).

В результате выполнения массива строка-код, отображаемый в браузере.

![Razor Img13](introducing-razor-syntax-c/_static/image13.jpg)

Словарь — это коллекция пар ключ/значение, которое необходимо ввести ключ (или имя), чтобы задать или получить соответствующее значение:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample61.cshtml)]

Для создания словаря, используйте `new` ключевое слово, чтобы указать, что вы создаете новый объект словаря. Можно присвоить переменной с помощью словаря `var` ключевое слово. Указывать типы данных элементов в словаре, с помощью угловых скобок ( `< >` ). В конце объявления необходимо добавить пару скобок, так как он фактически является методом, который создает новый словарь.

Для добавления элементов в словарь, можно вызвать `Add` метод переменной словаря (`myScores` в этом случае), а затем укажите ключ и значение. Кроме того можно использовать квадратные скобки указывают ключ и для этого простого присваивания, как показано в следующем примере:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample62.cs)]

Чтобы получить значение из словаря, необходимо указать ключ в квадратных скобках:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample63.cs)]

## <a name="calling-methods-with-parameters"></a>Вызов методов с параметрами

Как было написано выше в этой статье, объектов, которые программирования с могут иметь методы. Например `Database` объекта может быть `Database.Connect` метод. Многие методы также иметь один или несколько параметров. Объект *параметр* — значение, которое можно передать в метод, чтобы включить этот метод для выполнения необходимых задач. Например, рассмотрим объявление для `Request.MapPath` метод, который принимает три параметра:

[!code-csharp[Main](introducing-razor-syntax-c/samples/sample64.cs)]

(Строка была разбита на сделать код более удобочитаемым. Помните, можно поместить разрывы строк практически любого поместите, за исключением того, внутри строки, заключенной в кавычки.)

Этот метод возвращает физический путь на сервере, соответствующий указанному виртуальному пути. Три параметра для метода `virtualPath`, `baseVirtualDir`, и `allowCrossAppMapping`. (Обратите внимание, что в объявлении, с типами данных данные, которые они примете перечисляются параметры). При вызове этого метода необходимо указать значения для всех трех параметров.

Синтаксис Razor предоставляет два параметра для передачи параметров в метод: *позиционные параметры* и *именованных параметров*. Чтобы вызвать метод, с помощью позиционные параметры, параметры передаются в строгом порядке, который указан в объявлении метода. (Вы обычно будет этот порядок документации для метода.) Вы должны следовать в порядке и не могут пропускаться какие-либо параметры &#8212; при необходимости можно передать пустую строку (`""`) или `null` для позиционного параметра, которое не имеет значения для.

В следующем примере предполагается, имеется папка с именем *сценариев* на веб-сайте. Этот код вызывает `Request.MapPath` метод и передает значения для трех параметров в правильном порядке. Затем отображается путь к результирующему сопоставленных.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample65.cshtml)]

При метод имеет множество параметров, можно сохранить код более удобочитаемым с помощью именованных параметров. Для вызова метода с именованными параметрами, укажите имя параметра следуют двоеточие (:), а затем значение. Преимуществом именованных параметров является, им можно передавать в любом порядке, необходимом. (Недостатком является вызов метода не является максимально компактными.)

В следующем примере вызывается тот же метод, как описано выше, но использует именованные параметры для указания значений:

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample66.cshtml)]

Как видите, параметры передаются в другом порядке. Однако при выполнении предыдущего примера и в этом примере будет возвращать то же значение.

<a id="ID_HandlingErrors"></a>
## <a name="handling-errors"></a>Обработка ошибок

### <a name="try-catch-statements"></a>Операторы Try-Catch

У вас будет часто инструкций в коде, может произойти сбой по причинам вне элемента управления. Пример:

- Если код пытается создать или открыть файл, все виды ошибки могут возникать. Возможно, необходимый файл не существует, может быть заблокирован, код может не иметь разрешения и так далее.
- Аналогичным образом Если код пытается выполнить обновления записей в базе данных, могут быть проблемы с разрешениями, подключения к базе данных могут отбрасываться, для сохранения данных может быть недопустимым и т. д.

С точки зрения программирования, называются таких ситуациях *исключения*. Если код возникает исключение, он создает (создается исключение) сообщение об ошибке на, в лучшем случае раздражающих пользователям:

![Razor Img14](introducing-razor-syntax-c/_static/image14.jpg)

В ситуациях, когда ваш код может обнаружить исключения, а также во избежание сообщения об ошибках этого типа можно использовать `try/catch` инструкции. В `try` инструкции, запустите код, который выполняется проверка. В одном или нескольких `catch` инструкций, можно осуществлять поиск конкретных ошибок (определенные типы исключений), которые могли возникнуть. Можно включить столько `catch` инструкциях, как вы должны выполнять поиск ошибок, которые предупреждение.

> [!NOTE]
> Рекомендуется избегать использования `Response.Redirect` метод в `try/catch` инструкции, так как оно может вызвать исключение, на странице.


Пример страницы, которая создает текстовый файл на первый запрос и затем отображает кнопку, которая позволяет пользователю открыть файл. В примере намеренно используется недопустимое имя файла, чтобы он вызовет исключение. Код включает `catch` инструкции для двух возможных исключений: `FileNotFoundException`, это происходит, если имя файла недопустимо, и `DirectoryNotFoundException`, это происходит, если ASP.NET даже не удается найти папку. (Вы можете Раскомментировать инструкции в примере чтобы увидеть, как он выполняется, если все работает правильно.)

Если код не обрабатывает исключение, вы увидите страницу ошибки, как и на предыдущем снимке экрана. Однако `try/catch` раздел помогает предотвратить пользователю просматривать эти типы ошибок.

[!code-cshtml[Main](introducing-razor-syntax-c/samples/sample67.cshtml)]

## <a name="additional-resources"></a>Дополнительные ресурсы

**Программирование с использованием Visual Basic**


[Приложение: язык Visual Basic и синтаксис](https://go.microsoft.com/fwlink/?LinkId=202908)


**Справочная документация**


[ASP.NET](https://msdn.microsoft.com/library/ee532866.aspx)

[Язык C#](https://msdn.microsoft.com/library/kx37x362.aspx)
