---
uid: visual-studio/overview/2013/release-notes
title: ASP.NET и веб-инструменты Visual Studio 2013 заметки о выпуске | Документы Microsoft
author: microsoft
description: В этом документе описывается выпуск ASP.NET и веб-инструменты для Visual Studio 2013.
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/17/2013
ms.topic: article
ms.assetid: 08815768-2702-42ae-ae85-0a59934a11d1
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /visual-studio/overview/2013/release-notes
msc.type: authoredcontent
ms.openlocfilehash: e9ddd96f186564834ff6bb2c30cf0ed5444cbf1b
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30877805"
---
<a name="aspnet-and-web-tools-for-visual-studio-2013-release-notes"></a>ASP.NET и веб-инструменты Visual Studio 2013 заметки о выпуске
====================
по [Microsoft](https://github.com/microsoft)

> В этом документе описывается выпуск ASP.NET и веб-инструменты для Visual Studio 2013.


## <a name="contents"></a>Описание

- [Замечания по установке](#TOC1)
- [Документация](#TOC2)
- [Требования к программному обеспечению](#TOC4)

### <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET и веб-инструменты для Visual Studio 2013

- [Один ASP.NET](#TOC6)
- [Новые возможности веб-проекта](#newproj)
- [Формирование шаблонов ASP.NET](#scaffold)
- [Привязывание к браузеру](#browser-link)
- [Усовершенствования редактора Visual Studio Web](#web-editor)
- [Поддержка приложений веб-службы приложений Azure в Visual Studio](#waws)
- [Веб-публикация усовершенствования](#publish)
- [NuGet 2.7](#nuget)
- [Веб-форм ASP.NET](#TOC9)
- [ASP.NET MVC 5](#TOC10)
- [ASP.NET Web API 2](#TOC11)
- [ASP.NET SignalR](#TOC13)
- [ASP.NET Identity](#TOC8)
- [Компоненты Microsoft OWIN](#TOC7)
- [Entity Framework 6](#ef6)
- [ASP.NET Razor 3](#TOC14)
- [Приостановка приложений ASP.NET](#TOC15)
- [Известные проблемы и критические изменения](#knownissues)

<a id="TOC1"></a>
## <a name="installation-notes"></a>Замечания по установке

ASP.NET и веб-инструменты для Visual Studio 2013, объединенными в главном установщика и могут быть загружены [здесь](https://www.asp.net/downloads).

<a id="TOC2"></a>
## <a name="documentation"></a>Документация

Учебники и другие сведения о ASP.NET и веб-инструменты для Visual Studio 2013 доступны из [веб-сайт ASP.NET](https://www.asp.net/).

<a id="TOC4"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

ASP.NET и веб-инструменты требуется Visual Studio 2013.

<a id="TOC5"></a>
## <a name="new-features-in-aspnet-and-web-tools-for-visual-studio-2013"></a>Новые возможности в ASP.NET и веб-инструменты для Visual Studio 2013

В следующих разделах описаны функции, которые были введены в версии.

<a id="TOC6"></a>
## <a name="one-aspnet"></a>Один ASP.NET

В выпуске Visual Studio 2013 перешли этапом опыт использования технологий ASP.NET, чтобы легко можно комбинировать и соответствует те, которые требуется объединить. Например можно запустить проект MVC с помощью и легко добавить страницы веб-форм в проект позже или формировать веб-API в проекте веб-форм. Один ASP.NET предназначен для упрощения автоматически разработчику для выполнения действий, который вы предпочитаете в ASP.NET. Независимо от того, Выбор технологии может иметь уверенность в создании надежных базовая архитектура One ASP.NET.

<a id="newproj"></a>
## <a name="new-web-project-experience"></a>Новые возможности веб-проекта

Мы обладают улучшенной опыт в создании нового веб-проектов в Visual Studio 2013. В **нового веб-проекта ASP.NET** диалоговом окне можно выбрать тип проекта, настройте любое сочетание технологий (веб-формы, MVC, веб-API), настройки параметров проверки подлинности и добавьте проект модульного теста.

![Новый проект ASP.NET](release-notes/_static/image1.png)

Новое диалоговое окно позволяет изменить параметры проверки подлинности по умолчанию для многих шаблонов. Например при создании проекта веб-форм ASP.NET можно выбрать любой из следующих параметров:

- Без проверки подлинности
- Индивидуальные учетные записи (членства ASP.NET или социальных поставщика вход)
- Учетные записи в организации (Active Directory в веб-приложение)
- Проверка подлинности Windows (Active Directory в приложении интрасети)

![Параметры проверки подлинности](release-notes/_static/image2.png)

Дополнительные сведения о новый процесс для создания веб-проектов см. в разделе [Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md). Дополнительные сведения о новых параметров проверки подлинности см. в разделе [ASP.NET Identity](#TOC8) далее в этом документе.

<a id="scaffold"></a>
## <a name="aspnet-scaffolding"></a>Формирование шаблонов ASP.NET

Формирование шаблонов ASP.NET — это платформа создания кода для веб-приложений ASP.NET. Он позволяет легко добавить стандартный код в проект, который взаимодействует с моделью данных.

В предыдущих версиях Visual Studio формирование шаблонов был ограничен проектов ASP.NET MVC. В Visual Studio 2013 теперь можно использовать формирование шаблонов для любого проекта ASP.NET, включая веб-форм. Visual Studio 2013 не поддерживает создание страниц для проекта веб-форм, но по-прежнему можно использовать формирование шаблонов с веб-формами путем добавления зависимостей MVC в проект. Поддержка создания страниц для веб-формы будет добавлена в будущем обновлении.

При использовании формирования шаблонов мы убедитесь, что все требуемые зависимости устанавливаются в проекте. Например если для создания проекта веб-форм ASP.NET и затем использовать формирование шаблонов для добавления контроллера Web API, необходимые пакеты NuGet и ссылки добавляются в проект автоматически.

Чтобы добавить формирование шаблонов MVC в проект веб-форм, добавьте **новый элемент формирования шаблонов** и выберите **зависимостей MVC 5** в диалоговом окне. Существует два варианта для формирования шаблонов MVC; Минимальными и полное. При выборе минимальной только пакеты NuGet и ссылки для ASP.NET MVC добавляются в проект. При выборе параметра «полная» добавляются минимальные зависимости, а также необходимые файлы содержимого проекта MVC.

Поддержка асинхронных контроллеров формирование шаблонов использует новые функции асинхронного с Entity Framework 6.

Дополнительные сведения и учебники см. в разделе [Обзор формирование шаблонов ASP.NET](aspnet-scaffolding-overview.md).

<a id="browser-link"></a>
## <a name="browser-link--signalr-channel-between-browser-and-visual-studio"></a>Связь с браузером – SignalR канал между браузером и Visual Studio

Новый [связь с браузером](using-browser-link.md) позволяет подключиться к Visual Studio нескольких браузеров и их обновление всех путем нажатия кнопки на панели инструментов. Можно подключиться нескольких браузеров сайта разработки, включая мобильных эмуляторов и щелкните "Обновить" для обновления всех браузерах все одновременно. Связь с браузером также предоставляет API, который позволяет разработчикам создавать расширения для связи с браузером.

![](release-notes/_static/image3.png)

Обеспечивая разработчикам возможность воспользоваться преимуществами API связи с браузером, становится возможным создание очень сложных сценариев, которые пересекает границы между Visual Studio и любого браузера, который подключен. Web Essentials использует API для создания единство подхода Visual Studio и средств разработчика в браузере, удаленного управления мобильных эмуляторов и многое другое.

<a id="web-editor"></a>
## <a name="visual-studio-web-editor-enhancements"></a>Усовершенствования редактора Visual Studio Web

Visual Studio 2013 включает новый редактор HTML для Razor и HTML-файлы в веб-приложений. Новый редактор HTML предоставляет единую унифицированную схему на базе HTML5. Завершение автоматического скобок, jQuery UI и AngularJS атрибут IntelliSense, атрибут группирования IntelliSense, идентификатор и имя класса Intellisense и других усовершенствований, включая более высокую производительность, форматирование и смарт-тегов.

Следующем снимке экрана показано использование атрибута начальной загрузки IntelliSense в редакторе HTML.

![IntelliSense в редакторе HTML](release-notes/_static/image4.png)

Кроме того, Visual Studio 2013 поставляется с обоих CoffeeScript и МЕНЕЕ встроенные редакторы. Редактор LESS поставляется со всеми функциями ожиданием из редактора CSS и имеет определенные Intellisense для переменных и mixins по меньше документов @import цепочки.

<a id="waws"></a>
## <a name="azure-app-service-web-apps-support-in-visual-studio"></a>Поддержка приложений веб-службы приложений Azure в Visual Studio

В Visual Studio 2013 с помощью Azure SDK для .NET 2.2, можно использовать **обозревателя серверов** взаимодействовать непосредственно с удаленного веб-приложения. Можно войти с учетной записью Azure, создайте новый веб-приложений, настройка приложений, просматривать журналы в режиме реального времени и многое другое. Выпущена поступающих вскоре после SDK 2.2, можно будет запустить в режиме отладки удаленно в Azure. Большинство новых функций для веб-приложениях службы приложений Azure также работают в Visual Studio 2012 при установке текущего выпуска пакета Azure SDK для .NET.

Дополнительные сведения см. в следующих ресурсах:

- [Создать веб-приложение ASP.NET в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-get-started/)
- [Устранение неполадок веб-приложения в службе приложений Azure с помощью Visual Studio](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-troubleshoot-visual-studio/)

<a id="publish"></a>
## <a name="web-publish-enhancements"></a>Веб-публикация усовершенствования

Visual Studio 2013 включает новые и улучшенные возможности веб-публикация. Ниже приведены некоторые из них.

- Легко [автоматизировать шифрования файла Web.config](https://go.microsoft.com/fwlink/?LinkId=325529). (Эта ссылка и следующие две точки документации в библиотеке MSDN, могут быть недоступны до вечером на 10/17.)
- Легко [автоматизировать, выполнив приложение в автономный режим во время развертывания](https://go.microsoft.com/fwlink/?LinkId=325530).
- Настройка веб-развертывание для [использовать контрольной суммы файла вместо Дата последнего изменения](https://go.microsoft.com/fwlink/?LinkId=325531) для определения, какие файлы должны копироваться на сервер.
- Быстро публиковать отдельные выбранных файлов (включая Web.config) при использовании FTP или методов публикации файловой системы, а также с веб-развертывания.

Дополнительные сведения о развертывании веб-ASP.NET см. в разделе [веб-сайте ASP.NET](https://go.microsoft.com/fwlink/?LinkId=322027).

<a id="nuget"></a>
## <a name="nuget-27"></a>NuGet 2.7

NuGet 2.7 включает широкий набор новых функций, которые описаны в статье [заметки о выпуске 2.7 NuGet](http://docs.nuget.org/docs/release-notes/nuget-2.7).

Эта версия NuGet также избавляет от необходимости предоставить явное согласие функция восстановления пакета NuGet для загрузки пакетов. Запрос согласия (и соответствующие флажки в диалоговом окне параметров NuGet) теперь предоставляется путем установки NuGet. Теперь пакет восстановления по умолчанию просто работает.

<a id="TOC9"></a>
## <a name="aspnet-web-forms"></a>Веб-формы ASP.NET

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проектов веб-форм тесно интегрированы с новым интерфейсом One ASP.NET. Можно добавить MVC и веб-API поддержку в проект веб-форм, и можно настроить проверку подлинности с помощью мастера создания проекта ASP.NET один. Дополнительные сведения см. в разделе [Создание веб-проектов ASP.NET в Visual Studio 2013](creating-web-projects-in-visual-studio.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов веб-формы поддерживают новую платформу ASP.NET Identity. Кроме того шаблоны теперь поддерживают создание проектов веб-форм интрасети. Дополнительные сведения см. в разделе [методы проверки подлинности](creating-web-projects-in-visual-studio.md#auth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="bootstrap"></a>начальной загрузки

Шаблоны веб-форм используют [начальной загрузки](http://twitter.github.io/bootstrap/) для предоставления компактный и гибкий внешний вид и поведение, можно легко настроить. Дополнительные сведения см. в разделе [начальной загрузки в веб-шаблоны проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

<a id="TOC10"></a>
## <a name="aspnet-mvc-5"></a>ASP.NET MVC 5

### <a name="one-aspnet"></a>Один ASP.NET

Шаблоны проектов Web MVC легко интегрировать в новый интерфейс One ASP.NET. Можно настроить проект MVC и настроить проверку подлинности с помощью мастера создания проектов One ASP.NET. Вводное руководство в ASP.NET MVC 5 можно найти в [Приступая к работе с ASP.NET MVC 5](../../../mvc/overview/getting-started/introduction/getting-started.md).

Сведения об обновлении проектов MVC 4 до MVC 5 см. в разделе [обновление ASP.NET MVC 4 и API веб-проекта ASP.NET MVC 5 и веб-API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).

### <a name="aspnet-identity"></a>ASP.NET Identity

Шаблоны проектов MVC были обновлены для использования ASP.NET Identity для проверки подлинности и управления удостоверениями. Учебник, проверки подлинности Facebook и Google и нового членства API можно найти в [создать приложение ASP.NET MVC 5 с Facebook и Google OAuth2 и входа OpenID](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md) и [Создание приложения ASP.NET MVC с помощью проверки подлинности и База данных SQL и развертывания в службе приложений Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/).

### <a name="bootstrap"></a>начальной загрузки

Шаблон проекта MVC был обновлен для использования [начальной загрузки](http://getbootstrap.com/) для предоставления компактный и гибкий внешний вид и поведение, можно легко настроить. Дополнительные сведения см. в разделе [начальной загрузки в веб-шаблоны проектов Visual Studio 2013](creating-web-projects-in-visual-studio.md#bootstrap).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в ASP.NET MVC, предшествует фильтры авторизации в конвейере ASP.NET MVC и позволяют задавать проверки подлинности логику за действие, на контроллере или глобально для всех контроллеров. Фильтры проверки подлинности обрабатывают учетные данные в запросе и укажите соответствующий участник. Фильтры проверки подлинности можно также добавить запросов проверки подлинности в ответ на неавторизованных запросов.

### <a name="filter-overrides"></a>Переопределяет фильтр

Теперь можно переопределить, какие фильтры применяются к методу указанного действия или контроллер, указав переопределение фильтра. Переопределение фильтры задать фильтр типов, которые не должны выполняться для данной области (действий или контроллера). Это позволяет настроить фильтры, которые применяются глобально, но затем исключить определенные глобальные фильтры от применения определенных действий или контроллеров.

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

ASP.NET MVC теперь поддерживает маршрутизацией атрибутов благодаря вклад по McCall Тим, автор [ http://attributerouting.net ](http://attributerouting.net). С маршрутизацией атрибутов можно указать свои маршруты, сопроводив действия и контроллеры.

<a id="TOC11"></a>
## <a name="aspnet-web-api-2"></a>ASP.NET Web API 2

### <a name="attribute-routing"></a>Маршрутизация с помощью атрибутов

Теперь веб-API ASP.NET поддерживает маршрутизацией атрибутов благодаря вклад по McCall Тим, автор [ http://attributerouting.net ](http://attributerouting.net). С маршрутизацией атрибутов можно указать свои веб-API маршруты, Аннотация действия и контроллеры следующим образом:

[!code-csharp[Main](release-notes/samples/sample1.cs)]

Атрибут маршрутизации предоставляет больший контроль над URL-адреса в веб-API. Например можно легко задавать один контроллер API с помощью иерархии ресурсов:

[!code-csharp[Main](release-notes/samples/sample2.cs)]

Атрибут маршрутизации также предоставляет удобный синтаксис для указания дополнительных параметров, значения по умолчанию и ограничения маршрута:

[!code-csharp[Main](release-notes/samples/sample3.cs)]

Дополнительные сведения о маршрутизации атрибута см. в разделе [атрибут маршрутизации в веб-API 2](../../../web-api/overview/web-api-routing-and-actions/attribute-routing-in-web-api-2.md).

### <a name="oauth-20"></a>OAuth 2.0

Шаблоны проектов веб-API и одностраничного приложения теперь поддерживают авторизации с помощью OAuth 2.0. OAuth 2.0 — это платформа для авторизации клиента доступа к защищенным ресурсам. Он работает для различных клиентов, включая браузеры и мобильные устройства.

Поддержка OAuth 2.0 основана на новый безопасности по промежуточного слоя, предоставляемые компоненты Microsoft OWIN для проверки подлинности носителя и реализация роль сервера авторизации. Кроме того клиенты можно авторизовать с помощью сервера авторизации организации, например Azure Active Directory или служб федерации Active Directory в Windows Server 2012 R2.

### <a name="odata-improvements"></a>Усовершенствования OData

**Поддержка $select $разверните $batch и $value**

ASP.NET Web API OData теперь имеет полную поддержку для $select, разверните $ и $value. $Batch также можно использовать для запроса, пакетная обработка и обработка наборов изменений.

$Select и $expand разверните параметры позволяют изменять форму данных, возвращенный конечной точки OData. Дополнительные сведения см. в разделе [введение $select и $expand расширения набора поддерживаемых в OData веб-API](../../../web-api/overview/odata-support-in-aspnet-web-api/using-select-expand-and-value.md).

**Улучшенная расширяемости**

Модули форматирования OData теперь являются расширяемыми. Можно добавить запись метаданных Atom, поддерживают именованные записи связи потока и мультимедиа, добавление заметок экземпляра и настройки, как создаются ссылки.

**Поддержка типа меньше**

Теперь можно построить служб OData без необходимости определять типы среды CLR для типов сущности. Вместо этого можно принимают или возвращают экземпляры контроллеров OData **IEdmObject**, которые являются модули форматирования OData сериализации и десериализации.

**Повторное использование существующей модели**

Если вы уже существующей модели EDM (модель EDM), ее можно теперь повторно напрямую, вместо того, чтобы создавать новую. Например при использовании Entity Framework, можно использовать модель EDM, EF создает для вас.

### <a name="request-batching"></a>Запрос пакетной обработки

Пакетная обработка запроса объединяет несколько операций в одном запросе HTTP POST, сократить сетевой трафик и обеспечить более гладким, менее «многословных» пользовательского интерфейса. Теперь веб-API ASP.NET поддерживает несколько стратегий для пакетной обработки запроса:

- Используйте $batch конечную точку службы OData.
- Упакуйте несколько запросов в один запрос составного MIME.
- Использование настраиваемого формата пакетной обработки.

Чтобы включить запрос пакетной обработки, просто добавьте маршрут с пакетной обработки обработчика в конфигурацию веб-API:

[!code-csharp[Main](release-notes/samples/sample4.cs)]

Можно также управлять ли запросы или если выполняется последовательно или в любом порядке.

### <a name="portable-aspnet-web-api-client"></a>Переносимой ASP.NET Web API клиента

Теперь веб-API ASP.NET клиента можно использовать для создания переносимых библиотек классов, работающих в приложениях для магазина Windows и Windows Phone 8. Можно также создать переносимый модули форматирования, которые могут совместно использоваться клиентом и сервером.

### <a name="improved-testability"></a>Улучшенные возможности тестирования

Веб-API 2 делает его гораздо проще единицы к API контроллеры тестирования. Просто создать контроллер API с сообщения запроса и конфигурацией, а затем вызвать метод действия, который вы хотите проверить. Можно также легко макета **UrlHelper** класс методов действий, которые выполняют компоновки.

### <a name="ihttpactionresult"></a>IHttpActionResult

Теперь вы можете реализовать IHttpActionResult для инкапсуляции результат действия методов веб-API. IHttpActionResult, возвращаемое из метода веб-API действие выполняется средой выполнения веб-API ASP.NET для создания результирующего ответное сообщение. IHttpActionResult могут быть возвращены из любого действия веб-API для упрощения модульных тестов для реализации веб-API. Для удобства, предоставленные в ряде реализаций IHttpActionResult без дополнительной настройки, включая результаты для возвращения определенные коды состояния в формате содержимого или согласование содержимого ответов.

### <a name="httprequestcontext"></a>HttpRequestContext

Новый **HttpRequestContext** отслеживает любое состояние, привязанного к запросу, но не сразу становится доступен из запроса. Например, можно использовать **HttpRequestContext** для получения данных о маршруте, субъект, связанный с запросом, сертификат клиента, **UrlHelper** и корень виртуального пути. Можно легко создавать **HttpRequestContext** модульного тестирования.

Так как участника для запроса передается вместе с запросом, не полагаясь на **Thread.CurrentPrincipal**, основного сервера теперь доступна в течение времени существования запроса находящимся в конвейер веб-API.

### <a name="cors"></a>CORS

Благодаря другой отличных публикаций из Brock Аллен ASP.NET теперь полностью поддерживает кросс-источника запроса для управления доступом (CORS).

Безопасность обозревателя предотвращает внесение запросы AJAX в другой домен на веб-странице. [CORS](http://www.w3.org/TR/cors/) — это стандарт консорциума W3C, позволяет серверу ослабить политика одного источника. С помощью CORS, сервер можно явно разрешить некоторые запросы независимо от источника при отклонении другим пользователям.

Веб-API 2 теперь поддерживает CORS, включая автоматическую обработку предварительные запросы. Дополнительные сведения см. в разделе [Включение запросы независимо от источника в ASP.NET Web API](../../../web-api/overview/security/enabling-cross-origin-requests-in-web-api.md).

### <a name="authentication-filters"></a>Фильтры проверки подлинности

Фильтры проверки подлинности — это новый тип фильтра в веб-API ASP.NET, запустите перед фильтры авторизации в конвейере ASP.NET Web API и позволяют задавать проверки подлинности логику за действие, на контроллере или глобально для всех контроллеров. Фильтры проверки подлинности обрабатывают учетные данные в запросе и укажите соответствующий участник. Фильтры проверки подлинности можно также добавить запросов проверки подлинности в ответ на неавторизованных запросов.

### <a name="filter-overrides"></a>Переопределения фильтра

Теперь можно переопределить, какие фильтры применяются к метод указанного действия или контроллер, указав переопределение фильтра. Переопределение фильтры задать типы фильтров, которые не должны запускаться для данной области (действий или контроллера). Это позволяет добавить глобальные фильтры, но затем исключить некоторые из конкретных действий или контроллеров.

### <a name="owin-integration"></a>Интеграция OWIN

Веб-API ASP.NET теперь полностью поддерживает OWIN и может выполняться на любом узле поддержкой OWIN. Кроме того, включен **HostAuthenticationFilter** , обеспечивает интеграцию с системой проверки подлинности OWIN.

Благодаря интеграции OWIN можно резидентного размещения веб-API в процессе наряду с другими OWIN по промежуточного слоя, например SignalR. Дополнительные сведения см. в разделе [OWIN использование веб-API ASP.NET Self-Host](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="TOC13"></a>
## <a name="aspnet-signalr-20"></a>ASP.NET SignalR 2.0

В следующих разделах описаны возможности SignalR 2.0.

- [Построенные на OWIN](#builtonowin)
- [MapHubs и MapConnection стали MapSignalR](#MapSignalR)
- [Поддержка между доменами](#crossdomain)
- [iOS и Android, поддерживают через MonoTouch и MonoDroid](#mobile)
- [Клиент переносимой .NET](#portable)
- [Новый пакет резидентной](#selfhost)
- [Поддержка сервера с обратной совместимостью](#backwardcompat)
- [Удалена поддержка сервера .NET 4.0](#remove40)
- [Отправка сообщения в список клиентов и групп](#messagelist)
- [Отправка сообщения для определенного пользователя](#sendtouser)
- [Улучшенная поддержка обработки ошибок](#errorhandling)
- [Проще модульного тестирования концентраторов](#unittesting)
- [Обработка ошибок JavaScript](#javascripterror)

Пример обновление существующего проекта 1.x до SignalR 2.0 разделе [обновление SignalR 1.x проекта](../../../signalr/overview/releases/upgrading-signalr-1x-projects-to-20.md).

<a id="builtonowin"></a>
### <a name="built-on-owin"></a>Построенные на OWIN

SignalR 2.0 строится на полностью [OWIN (открыть веб-интерфейс .NET)](http://owin.org/). Это изменение упрощает процесс установки для SignalR, гораздо более согласованы между веб сервере и резидентных приложений SignalR, но требовал ряд изменений в API.

<a id="MapSignalR"></a>

### <a name="maphubs-and-mapconnection-are-now-mapsignalr"></a>MapHubs и MapConnection стали MapSignalR

Для обеспечения совместимости со стандартами OWIN эти методы были переименованы в `MapSignalR`. `MapSignalR` вызывается без параметров будут сопоставлены всех концентраторов (как `MapHubs` и в версии 1.x); для сопоставления отдельных **подключение PersistentConnection** объектов, укажите тип соединения в качестве параметра типа и расширением URL-адреса для подключения как Первый аргумент.

`MapSignalR` Метод вызывается в классе запуска Owin. Visual Studio 2013 содержит новый шаблон для запуска Owin класса; Чтобы использовать этот шаблон, выполните следующие действия:

1. Щелкните правой кнопкой мыши по проекту
2. Выберите **добавить**, **новый элемент...**
3. Выберите **запуска Owin класса**. Имя для нового класса **файла Startup.cs**.

В **веб-приложение,** Owin при запуске класса, содержащего `MapSignalR` метод добавляется процесса запуска Owin с помощью записи в узле параметры приложения в файле Web.Config, как показано ниже.

В **резидентных приложений**, класс Startup передается как параметр типа `WebApp.Start` метод.

**Сопоставление концентраторов и соединения в SignalR 1.x (из файла глобальных приложения для веб-приложения):** 

[!code-csharp[Main](release-notes/samples/sample5.cs)]

**Сопоставления концентраторов и соединения в SignalR 2.0 (из файла класса запуска Owin):** 

[!code-csharp[Main](release-notes/samples/sample6.cs)]

В **резидентных приложений**, класс Startup передается как параметр типа для `WebApp.Start` метода, как показано ниже.

[!code-csharp[Main](release-notes/samples/sample7.cs)]

<a id="crossdomain"></a>

### <a name="cross-domain-support"></a>Поддержка между доменами

В SignalR 1.x междоменные запросы были управляет один флаг EnableCrossDomain. Этот флаг управлять запросов JSONP и CORS. Для повышения гибкости, поддерживают все CORS был удален из серверного компонента SignalR (JavaScript lients по-прежнему использовать CORS обычно при его обнаружении, что он поддерживает браузер), и новый по промежуточного слоя OWIN был сделан доступным для поддержки следующих сценариев.

В версии 2.0 SignalR JSONP, если требуется на клиентском компьютере (для поддержки запросов между доменами в старых браузерах), его необходимо явно включить, установив `EnableJSONP` на `HubConfiguration` объект `true`, как показано ниже. JSONP отключен по умолчанию, поскольку он менее безопасен, чем CORS.

Чтобы добавить новый по промежуточного слоя CORS в SignalR 2.0, добавьте `Microsoft.Owin.Cors` библиотеки в проекте и вызовите `UseCors` перед SignalR по промежуточного слоя, как показано в следующем разделе.

**Добавление в проект Microsoft.Owin.Cors**: чтобы установить эту библиотеку, выполните следующую команду в консоли диспетчера пакетов:

[!code-powershell[Main](release-notes/samples/sample8.ps1)]

Эта команда добавит 2.0.0 версию пакета для проекта.

**Вызов UseCors**

Следующие фрагменты кода демонстрируют способы реализации подключений между доменами в SignalR 1.x и 2.0.

**Реализация запросов между доменами в SignalR 1.x (из файла глобальные приложения)**

[!code-csharp[Main](release-notes/samples/sample9.cs)]

**Реализация запросов между доменами в SignalR 2.0 (из файла кода C#)**

Следующий код демонстрирует включение CORS или JSONP в проекте SignalR 2.0. Этот пример кода использует `Map` и `RunSignalR` вместо `MapSignalR`, после чего выполняется по промежуточного слоя CORS только для запросов SignalR, которым требуется поддержка CORS (а не для всех типов трафика по пути, указанному в `MapSignalR`.) `Map` также может использоваться для любого другого по промежуточного слоя, необходимо запустить для указанного префикса URL-адрес, а не для всего приложения.

[!code-csharp[Main](release-notes/samples/sample10.cs)]

<a id="mobile"></a>

### <a name="ios-and-android-support-via-monotouch-and-monodroid"></a>iOS и Android, поддерживают через MonoTouch и MonoDroid

Добавлена поддержка для iOS и Android клиенты, использующие компоненты MonoTouch и MonoDroid [Xamarin библиотеки](https://xamarin.com/). Дополнительные сведения о способах их использования см. в разделе [компонентов с помощью Xamarin](https://github.com/SignalR/SignalR/wiki/Building-Mono.Mobile.sln). Эти компоненты будут доступны в [хранилище Xamarin](https://store.xamarin.com/) когда доступна в выпуске SignalR RTW.

<a id="portable"></a> ### Портативный клиент .NET

Для того, чтобы упростить кросс платформенной разработки, Silverlight, WinRT и клиенты Windows Phone были заменены один портативный клиент .NET, поддерживает следующие платформы:

- NET 4.5
- Silverlight 5
- WinRT (.NET для магазина Windows)
- Windows Phone 8

<a id="selfhost"></a>

### <a name="new-self-host-package"></a>Новый пакет резидентной

Теперь имеется пакет NuGet для облегчения Приступая к работе с SignalR самостоятельного размещения (SignalR приложений, размещенных в процессе или другие приложения, а не, размещенный на веб-сервере). Для обновления резидентной проекта, созданного с помощью SignalR 1.x, удалите пакет Microsoft.AspNet.SignalR.Owin и добавьте пакет Microsoft.AspNet.SignalR.SelfHost. Дополнительные сведения о начале работы с резидентной пакета см. в разделе [учебника: SignalR резидентной](../../../signalr/overview/deployment/tutorial-signalr-self-host.md).

<a id="backwardcompat"></a>

### <a name="backward-compatible-server-support"></a>Поддержка сервера с обратной совместимостью

В предыдущих версиях SignalR, версии SignalR пакета, который используется в клиенте и сервере, должны быть идентичными. Чтобы обеспечить поддержку толстая клиентские приложения, которые будет трудно обновлять, SignalR 2.0 поддерживает с помощью более новой версии сервера с более старого клиента. **Примечание: SignalR 2.0 не поддерживает серверы, построенные с более старыми версиями с помощью новых клиентов.**

<a id="remove40"></a>

### <a name="removed-server-support-for-net-40"></a>Удалена поддержка сервера .NET 4.0

SignalR 2.0 удалена поддержка сервера взаимодействия с платформой .NET 4.0. .NET 4.5 необходимо использовать с серверами SignalR 2.0. По-прежнему клиент для SignalR 2.0 .NET 4.0.

<a id="messagelist"></a>

### <a name="sending-a-message-to-a-list-of-clients-and-groups"></a>Отправка сообщения в список клиентов и групп

В версии 2.0 SignalR можно отправить сообщение, используя список клиента и идентификатор группы. В следующих фрагментах кода показано, как это сделать.

**Отправка сообщения в список клиентов и групп с помощью подключение PersistentConnection**

[!code-csharp[Main](release-notes/samples/sample11.cs)]

**Отправка сообщения в список клиентов и групп с помощью концентраторов**

[!code-csharp[Main](release-notes/samples/sample12.cs)]

<a id="sendtouser"></a>

### <a name="sending-a-message-to-a-specific-user"></a>Отправка сообщения для определенного пользователя

Эта функция позволяет пользователям указать идентификатор пользователя — в зависимости от IRequest через новый интерфейс IUserIdProvider:

**Интерфейс IUserIdProvider**

[!code-csharp[Main](release-notes/samples/sample13.cs)]

По умолчанию будет реализация, которая использует IPrincipal.Identity.Name пользователя в качестве имени пользователя.

В концентраторы можно будет отправлять сообщения для этих пользователей с помощью нового API:

**С помощью Clients.User API**

[!code-csharp[Main](release-notes/samples/sample14.cs)]

<a id="errorhandling"></a>

### <a name="better-error-handling-support"></a>Улучшенная поддержка обработки ошибок

Пользователи теперь могут создавать **HubException** из любого вызова концентратора. Конструктор **HubException** может принимать строковое сообщение и объект дополнительные данные ошибки. SignalR будет автоматически сериализации исключения и отправить его клиенту, где он будет использоваться для отклонения или неудача вызова метода концентратора.

**Показывать подробные концентратора исключения** параметр никак не влияет **HubException** отправки обратно клиенту или нет; он всегда отправляется.

**Демонстрация отправки клиенту HubException серверный код**

[!code-csharp[Main](release-notes/samples/sample15.cs)]

**Клиентский код JavaScript, демонстрирующий отвечает на HubException, отправленных с сервера**

[!code-html[Main](release-notes/samples/sample16.html)]

**.NET клиентского кода, демонстрирующий отвечает на HubException, отправленных с сервера**

[!code-csharp[Main](release-notes/samples/sample17.cs)]

<a id="unittesting"></a>

### <a name="easier-unit-testing-of-hubs"></a>Проще модульного тестирования концентраторов

SignalR 2.0 включает интерфейс `IHubCallerConnectionContext` на концентраторы, упрощает создание макетов клиента стороны вызовов. Следующие фрагменты кода демонстрируют использование этот интерфейс с популярными тестовой оснастки [xUnit.net](https://github.com/xunit/xunit) и [заказа](https://code.google.com/p/moq/).

**Модульное тестирование с xUnit.net SignalR**

[!code-csharp[Main](release-notes/samples/sample18.cs)]

**Модульное тестирование SignalR с заказа**

[!code-csharp[Main](release-notes/samples/sample19.cs)]

<a id="javascripterror"></a>

### <a name="javascript-error-handling"></a>Обработка ошибок JavaScript

В версии 2.0 SignalR все обратные вызовы для обработки ошибок JavaScript возвращают объекты ошибки JavaScript вместо необработанных строк. Это позволяет SignalR для потока более подробная информация об для обработчиков ошибок. Можно получить во внутреннем исключении из `source` свойства ошибки.

**Клиентский код JavaScript, который обрабатывает исключение Start.Fail**

[!code-javascript[Main](release-notes/samples/sample20.js)]

<a id="TOC8"></a>
## <a name="aspnet-identity"></a>ASP.NET Identity

### <a name="new-aspnet-membership-system"></a>Новую систему членства ASP.NET

ASP.NET Identity является систему членства для приложений ASP.NET. ASP.NET Identity позволяет легко интегрировать данные профиля конкретного пользователя с данными приложения. ASP.NET Identity также позволяет выбрать модель сохраняемости для профилей пользователей в приложении. Данные можно сохранить в базе данных SQL Server или другом хранилище данных, включая хранилищ данных NoSQL, таких как таблицы хранилища Azure. Дополнительные сведения см. в разделе [отдельных учетных записей пользователей](creating-web-projects-in-visual-studio.md#indauth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="claims-based-authentication"></a>Проверка подлинности на основе утверждений

ASP.NET теперь поддерживает утверждения проверки подлинности на основе которой удостоверение пользователя представляется как набор утверждений от доверенного издателя. Пользователи могут быть прошедшего проверку подлинности с использованием имени пользователя и пароля, сохраняется в базе данных приложения, или Поставщики удостоверений из социальных сетей (например: учетные записи Microsoft, Facebook, Google, Twitter), или с учетными записями организации через Azure Active Directory или Службы федерации Active Directory (ADFS).

### <a name="integration-with-azure-active-directory-and-windows-server-active-directory"></a>Интеграция с Azure Active Directory и Windows Server Active Directory

Теперь можно создать проекты ASP.NET, использующих Azure Active Directory или Windows Server Active Directory (AD) для проверки подлинности. Дополнительные сведения см. в разделе [учетные записи организации](creating-web-projects-in-visual-studio.md#orgauth) в **Создание веб-проектов ASP.NET в Visual Studio 2013**.

### <a name="owin-integration"></a>Интеграция OWIN

Проверка подлинности ASP.NET теперь основан на по промежуточного слоя OWIN, который можно использовать на любом узле на основе OWIN. Дополнительные сведения о OWIN см. в следующих [компоненты Microsoft OWIN](#TOC7) раздела.

<a id="TOC7"></a>
## <a name="microsoft-owin-components"></a>Компоненты Microsoft OWIN

[Открыть веб-интерфейс .NET](http://owin.org/) (OWIN) определяет абстракцию между .NET веб-серверов и веб-приложений. OWIN разрывает связь веб-приложения с сервера, выполняющего web приложений независимой от размещения. Например можно размещения OWIN на основе веб-приложения в IIS или Резидентное размещение в пользовательском процессе.

Изменения, появившиеся в компоненты Microsoft OWIN (проект Katana) включать новые компоненты сервера и узел, новые вспомогательные библиотеки и по промежуточного слоя и новый промежуточного по проверки подлинности.

Дополнительные сведения об OWIN и Katana см. в разделе [новые возможности OWIN и Katana](../../../aspnet/overview/owin-and-katana/index.md).

**Примечание: [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) приложения нельзя запускать в классическом режиме IIS; они должны выполняться в режиме интеграции.**

**Примечание: [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md) приложения должны запускаться в режиме полного доверия.**

### <a name="new-servers-and-hosts"></a>Новые серверы и узлы

В этом выпуске добавлены новые компоненты, включить сценарии с резидентной. Эти компоненты включают следующие пакеты NuGet:

- **Microsoft.Owin.Host.HttpListener**. Обеспечивает работу сервера OWIN, который использует **HttpListener** для прослушивания HTTP-запросы и направлять их в конвейер OWIN.
- **Microsoft.Owin.Hosting** представляет собой библиотеку для разработчиков, которые хотят резидентной конвейер OWIN в пользовательском процессе, например консольное приложение или служба Windows.
- **OwinHost**. Предоставляет отдельный исполняемый файл, который создает оболочку для `Microsoft.Owin.Hosting` и позволяет резидентной конвейер OWIN без необходимости написания пользовательское основное приложение.

Кроме того `Microsoft.Owin.Host.SystemWeb` пакет теперь позволяет по промежуточного слоя для создания подсказок для **SystemWeb** сервера, указывающее, что по промежуточного слоя должен быть вызван во время определенных этап конвейера ASP.NET. Эта функция особенно полезна для промежуточного по проверки подлинности, который следует выполнять на ранних стадиях конвейера ASP.NET.

### <a name="helper-libraries-and-middleware"></a>Вспомогательные библиотеки и по промежуточного слоя

Несмотря на то, что можно написать компонентами OWIN, с помощью только функции и тип определения из спецификации OWIN новый `Microsoft.Owin` пакет предоставляет более удобный набор абстрактные классы. Этот пакет объединяет несколько более ранних пакетов (например, `Owin.Extensions`, `Owin.Types`) в один, хорошо структурированных объектную модель, можно затем легко использовать с другими компонентами OWIN. На самом деле этот пакет теперь использовать большую часть компоненты Microsoft OWIN.

> [!NOTE]
> [OWIN](http://www.owin.org) приложения нельзя запускать в классическом режиме IIS; они должны выполняться в режиме интеграции.

> [!NOTE]
> [OWIN](http://www.owin.org) приложения должны запускаться в режиме полного доверия.

Этот выпуск также включает пакета Microsoft.Owin.Diagnostics, который включает по промежуточного слоя для проверки приложения OWIN, а также страницу ошибки по промежуточного слоя для анализа сбоев.

### <a name="authentication-components"></a>Компоненты проверки подлинности

Доступны следующие компоненты проверки подлинности.

- **Microsoft.Owin.Security.ActiveDirectory**. Включает проверку подлинности с помощью локальных или облачных служб.
- **Microsoft.Owin.Security.Cookies** включена проверка подлинности с помощью файлов cookie. Этот пакет ранее назывался `Microsoft.Owin.Security.Forms`.
- **Microsoft.Owin.Security.Facebook** включена проверка подлинности с помощью Facebook OAuth-службу.
- **Microsoft.Owin.Security.Google** включена проверка подлинности с помощью Google OpenID-службу.
- **Microsoft.Owin.Security.Jwt** включена проверка подлинности с использованием маркеров JWT.
- **Microsoft.Owin.Security.MicrosoftAccount** включена проверка подлинности с помощью учетных записей Майкрософт.
- **Microsoft.Owin.Security.OAuth**. Предоставляет сервера авторизации OAuth, а также по промежуточного слоя для проверки подлинности маркеров носителя.
- **Microsoft.Owin.Security.Twitter** включена проверка подлинности с помощью службы на основе OAuth в Twitter.

Этот выпуск также включает `Microsoft.Owin.Cors` пакет, который содержит по промежуточного слоя для обработки HTTP-запросов, независимо от источника.

> [!NOTE]
> Поддержка JWT подписи был удален в окончательной версии Visual Studio 2013.

<a id="ef6"></a>
## <a name="entity-framework-6"></a>Entity Framework 6

Список новых функций и другие изменения в Entity Framework 6 см. в разделе [истории версий Entity Framework](https://msdn.com/data/jj574253).

<a id="TOC14"></a>
## <a name="aspnet-razor-3"></a>ASP.NET Razor 3

ASP.NET Razor 3 включает следующие новые функции:

- Поддержка изменения вкладки. Preivously **форматировать документ** команду, автоматически отступов и форматирования в Visual Studio автоматически не работала правильно при использовании **сохранять знаки табуляции** параметр. Это изменение устраняет Visual Studio, форматирование кода Razor для табуляции.
- Поддержка правил переопределения URL-адресов при генерации ссылок.
- Удаление атрибута прозрачный для безопасности.
  > [!NOTE]
  > Это является критическим изменением и делает Razor 3 несовместимым с помощью MVC4 и более ранних версий, пока Razor 2 несовместим с MVC5 или сборки, скомпилирована MVC5.

Ошибки Razor 3 в Visual Studio 2013 с предварительных версий можно найти [здесь](https://aspnetwebstack.codeplex.com/workitem/list/advanced?keyword=&status=Resolved%7cClosed&type=All&priority=All&release=All%7cv5.0%2bPreview%7cv5.0%2bRC%7cv5.0%2bRTM&assignedTo=All&component=Web%2bPages%252fRazor&reasonClosed=Fixed&sortField=LastUpdatedDate&sortDirection=Descending&page=0).

<a id="TOC15"></a>
## <a name="aspnet-app-suspend"></a>Приостановка приложений ASP.NET

Приостановка приложений ASP.NET — это изменение игры компонент в .NET Framework 4.5.1, радикально изменяющий Экономическая модель для размещения большого количества сайтов ASP.NET на одном компьютере и взаимодействия с пользователем. Дополнительные сведения см. в разделе [Приостановка приложений ASP.NET — отвечать на запросы общих веб-размещения .NET](https://blogs.msdn.com/b/dotnet/archive/2013/10/09/asp-net-app-suspend-responsive-shared-net-web-hosting.aspx).

<a id="knownissues"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

В этом разделе описываются известные проблемы и критические изменения в ASP.NET и веб-инструменты для Visual Studio 2013.

### <a name="nuget"></a>NuGet

- [Новый пакет восстановления не работает в моно при использовании файла SLN](https://nuget.codeplex.com/workitem/3596) — проблема будет устранена в будущих nuget.exe загрузки и [NuGet.CommandLine пакета](http://www.nuget.org/packages/NuGet.CommandLine/) обновления.
- [Новый пакет восстановления не работает с проектами Wix](https://nuget.codeplex.com/workitem/3598) — проблема будет устранена в будущих nuget.exe загрузки и [NuGet.CommandLine пакета](http://www.nuget.org/packages/NuGet.CommandLine/) обновления.
- [Автоматическое восстановление пакетов не работает для проектов в папке решения](https://nuget.codeplex.com/workitem/3625) — проблема будет устранена в NuGet 2.8.

### <a name="aspnet-web-api"></a>ASP.NET Web API

1. `ODataQueryOptions<T>.ApplyTo(IQueryable)` не возвращает `IQueryable<T>` всегда, как мы добавили поддержку `$select` и `$expand`.

    Наши примеры ранее для `ODataQueryOptions<T>` всегда привести возвращаемое значение из `ApplyTo` для `IQueryable<T>`. Это работает более ранней версии, так как параметры запроса, которые мы поддерживали более ранней версии (`$filter`, `$orderby`, `$skip`, `$top`) не изменить форму запроса. Теперь, когда мы поддерживаем `$select` и `$expand` возвращаемое значение `ApplyTo` не будет `IQueryable<T>` всегда.

    [!code-csharp[Main](release-notes/samples/sample21.cs)]

    Если вы используете образец кода из более ранней версии, его будут продолжать работать, если клиент не посылает `$select` и `$expand`. Тем не менее если вы хотите поддерживать `$select` и `$expand` необходимо изменить этот код для этого.

    [!code-csharp[Main](release-notes/samples/sample22.cs)]
2. **Request.Url или RequestContext.Url имеет значение null во время пакетного запроса**

    В сценарии пакетной обработки **UrlHelper** имеет значение null, если доступ осуществляется из **Request.Url** или **RequestContext.Url**.

    Эта проблема здесь в настоящее время отслеживаются: [BatchRequestContext.Url имеет значение null для пакетной обработки запроса](http://aspnetwebstack.codeplex.com/workitem/1301).

    Решение этой проблемы — создать новый экземпляр **UrlHelper**, как показано в следующем примере:

    **Создание нового экземпляра UrlHelper**

    [!code-csharp[Main](release-notes/samples/sample23.cs)]

### <a name="aspnet-mvc"></a>ASP.NET MVC

1. При использовании MVC5 и OrgAuth, если имеются представления, которые выполняют проверку AntiForgerToken, часто встречаются следующие ошибки при отправке данных в представление:

    **Ошибка**:

    *Ошибка сервера в приложении '/'.*

    <em>Утверждение типа "<http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier>«или»<http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider>" не был помещен в предоставленный ClaimsIdentity. Чтобы включить поддержку токен борьбы с фальсификацией с проверкой подлинности на основе утверждений, убедитесь, что оба этих утверждений в формируемые им экземплярах ClaimsIdentity содержит поставщика утверждений, настроенный. Если с другим типом утверждения использовал поставщика утверждений, настроенный как уникальный идентификатор, его можно настроить, задав статическое свойство AntiForgeryConfig.UniqueClaimTypeIdentifier.</em>

    **Инструкции по решению**:

    В файле Global.asax исправить эту ошибку, добавьте следующую строку:

    `AntiForgeryConfig.UniqueClaimTypeIdentifier = ClaimTypes.Name;`

    Эта проблема будет устранена в следующем выпуске.
2. После обновления приложения MVC4 до MVC5, выполните сборку решения и запустите его. Вы увидите следующую ошибку:

    [A] System.Web.WebPages.Razor.Configuration.HostSection не может быть приведен к [B]System.Web.WebPages.Razor.Configuration.HostSection. Типа A исходит от "System.Web.WebPages.Razor, Version = 2.0.0.0, язык и региональные параметры = neutral, PublicKeyToken = 31bf3856ad364e35" в контексте «Default» на месте "C:\windows\Microsoft.Net\assembly\GAC\_MSIL\System.Web.WebPages.Razor\ версии 4.0\_2.0.0.0\_\_31bf3856ad364e35\System.Web.WebPages.Razor.dll ". Типа B исходит от "System.Web.WebPages.Razor, версия = 3.0.0.0, Culture = neutral, PublicKeyToken = 31bf3856ad364e35" в контексте «Default» в расположении "C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\6d05bbd0\ e8b5908e\assembly\dl3\c9cbca63\f8910382\_6273ce01\System.Web.WebPages.Razor.dll ".

    Чтобы устранить ошибку выше, откройте *все* файлов Web.config (включая те, в папке «представления») в проекте и выполните следующее:

   1. Обновите все экземпляры версии «4.0.0.0» «System.Web.Mvc» до «5.0.0.0».
   2. Изменить все вхождения «2.0.0.0» версии «System.Web.Helpers» &quot;System.Web.WebPages&quot; и &quot;System.Web.WebPages.Razor&quot; для «3.0.0.0»

      Например после внесения изменения привязок сборок должен выглядеть следующим образом:

      [!code-xml[Main](release-notes/samples/sample24.xml)]

      Сведения об обновлении проектов MVC 4 до MVC 5 см. в разделе [обновление ASP.NET MVC 4 и API веб-проекта ASP.NET MVC 5 и веб-API 2](../../../mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2.md).
3. При использовании проверки на стороне клиента с ненавязчивой проверки jQuery, сообщения о проверке неверный иногда для HTML-элемент input типа: «number». Ошибка проверки обязательное значение («поле возраста требуется») отображается при вводе недопустимого номера вместо правильного сообщения, что требуется допустимое число.

    Эта проблема часто встречаются с кодом формирования шаблонов для модели с целым свойством на создание и изменение представления.

    Чтобы обойти эту проблему, измените вспомогательного редактора из:

    `@Html.EditorFor(person => person.Age)`

    В:

    `@Html.TextBoxFor(person => person.Age)`
4. ASP.NET MVC 5 больше не поддерживает частичное доверие. Связывание с MVC или WebAPI двоичные файлы проектов необходимо удалить [SecurityTransparent](https://msdn.microsoft.com/library/system.security.securitytransparentattribute.aspx) атрибута и [AllowPartiallyTrustedCallers](https://msdn.microsoft.com/library/system.security.allowpartiallytrustedcallersattribute.aspx) атрибута. Удаление этих атрибутов исключит следующие ошибки компилятора.

    `Attempt by security transparent method ‘MyComponent' to access security critical type 'System.Web.Mvc.MvcHtmlString' failed. Assembly 'PagedList.Mvc, Version=4.3.0.0, Culture=neutral, PublicKeyToken=abbb863e9397c5e1' is marked with the AllowPartiallyTrustedCallersAttribute, and uses the level 2 security transparency model. Level 2 transparency causes all methods in AllowPartiallyTrustedCallers assemblies to become security transparent by default, which may be the cause of this exception.`

    > Обратите внимание, как побочный эффект этого значения можно не может использовать сборки версии 4.0 и 5.0 в одном приложении. Необходимо обновить все проекты 5.0.

### <a name="spa-template-with-facebook-authorization-may-cause-instability-in-ie-while-the-web-site-is-hosted-in-intranet-zone"></a>Шаблон SPA с Facebook авторизации может вызвать нестабильность в IE, а веб-сайт размещается в зоне интрасети

Шаблон SPA предоставляет внешние вход с использованием Facebook. Когда проект, созданный с помощью шаблона выполняется локально, вход может привести к IE аварийное завершение работы.

Решение:

1. Веб-узел в зоне Интернета; или

2. Проверьте сценарий в браузер, отличный от IE.

### <a name="web-forms-scaffolding"></a>Web Forms формирование шаблонов

Формирование шаблонов форм был удален из VS2013 и будет доступна в будущем обновлении Visual Studio. Тем не менее по-прежнему можно использовать формирование шаблонов в проекте веб-форм, Добавление зависимостей MVC и создание формирование шаблонов для MVC. Проект будет содержать сочетание веб-форм и MVC.

Чтобы добавить MVC в проект веб-форм, добавить новый элемент формирования шаблонов и выберите **зависимостей MVC 5**. Выберите минимальный или полный в зависимости от того, нужна ли все файлы содержимого, таких как сценарии. Затем добавьте элемент формирования шаблонов для MVC, в которой будут созданы представления и контроллера в своем проекте.

### <a name="mvc-and-web-api-scaffolding---http-404-not-found-error"></a>MVC и API формирование шаблонов-HTTP 404 не найдено ошибок

Если возникает ошибка при добавлении элемента формирования шаблонов в проект, возможно, проект может остаться в несогласованном состоянии. Некоторые изменения, внесенные быть формирование шаблонов будет выполнен откат, но другие изменения, например установленные пакеты NuGet, не будет выполнен откат. Если откат изменения конфигурации маршрутизации, пользователи получат ошибку HTTP 404 при навигации для формирования шаблонов элементов.

Решение

- Чтобы устранить эту ошибку для MVC, добавить новый элемент формирования шаблонов и выберите зависимостей MVC 5 (минимум или полный). Этот процесс будет добавить все необходимые изменения в проект.
- Чтобы устранить эту ошибку для веб-API:

  1. Добавление класса WebApiConfig в проект.

      [!code-csharp[Main](release-notes/samples/sample25.cs)]

      [!code-vb[Main](release-notes/samples/sample26.vb)]
  2. Настройка WebApiConfig.Register в приложении\_Start-метод в файле Global.asax следующим образом:

      [!code-csharp[Main](release-notes/samples/sample27.cs)]

      [!code-vb[Main](release-notes/samples/sample28.vb)]
