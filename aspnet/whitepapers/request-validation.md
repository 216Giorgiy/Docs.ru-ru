---
uid: whitepapers/request-validation
title: "Проверка - атак скрипт запросов | Документы Microsoft"
author: rick-anderson
description: "Этот документ описывает функцию проверки запроса ASP.NET, где, по умолчанию, приложение будет запрещено обработки без кодировки HTML-содержимого отправка..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/10/2010
ms.topic: article
ms.assetid: fa429113-5f8f-4ef4-97c5-5c04900a19fa
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /whitepapers/request-validation
msc.type: content
ms.openlocfilehash: 61a96b75fdc29bdd1510ed689ee0356ef30e03fc
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
<a name="request-validation---preventing-script-attacks"></a>Проверка - атак скрипт запросов
====================
> Этот документ описывает функцию проверки запроса ASP.NET, где, по умолчанию приложение запрещена без кодировки HTML-содержимого на сервер обработки. Если приложение разработано для безопасно обработать данные HTML можно отключить эту функцию проверки запроса.
> 
> Применяется к ASP.NET версии 1.1 и ASP.NET 2.0.


Проверку запросов, функция ASP.NET начиная с версии 1.1, не позволяет серверу принимать содержимого содержащего без кодировки HTML. Эта функция предназначена для предотвращения некоторых атак путем внедрения скриптов, при котором код сценария клиента или HTML могут быть непреднамеренно отправлены на сервер, сохранения и затем представлен другим пользователям. По-прежнему настоятельно рекомендуется проверять все входные данные и HTML-кодирование его при необходимости.

Например можно создать веб-страницы, которая запрашивает адрес электронной почты пользователя, а затем сохраняет этот адрес электронной почты в базе данных. Если пользователь вводит &lt;СЦЕНАРИЙ&gt;предупреждение («hello из скрипта»)&lt;/SCRIPT&gt; вместо допустимый адрес электронной почты, при выводе данных этот сценарий может выполняться, если содержимое не был закодирован правильно. Функция проверки запросов ASP.NET предотвращает указанные последствия.

## <a name="why-this-feature-is-useful"></a>Почему эта возможность полезна

Большое количество сайтов не известно, что они открыты для атак путем внедрения кода простого скрипта. Ли такие атаки предназначен искажать сайта путем отображения HTML или потенциально выполняться клиентского скрипта перенаправлять пользователя на узел злоумышленника, атаки путем внедрения скриптов, проблема, веб-разработчикам приходится сталкиваться с.

Атаки путем внедрения скриптов действительно угрожают всех веб-разработчиков, используется ли в них ASP.NET, ASP или другие технологии веб-разработки.

Средство проверки запросов ASP.NET заранее предотвращает такие атаки, не позволяя без кодировки HTML-содержимого, обработанные сервером, если разработчик решает разрешить этого содержимого.

## <a name="what-to-expect-error-page"></a>Что произойдет: страница ошибки

На приведенном ниже снимке экрана показан пример кода ASP.NET:

![](request-validation/_static/image1.png)

Результаты этого кода выполняется простая страница, которая позволяет вводить текст в текстовом поле, нажмите кнопку и отображения текста в элементе управления label.

![](request-validation/_static/image2.png)

Однако были JavaScript, таких как `<script>alert("hello!")</script>` ввод и отправке получаются исключение:

![](request-validation/_static/image3.png)

Сообщение об ошибке, указывающее, что «потенциально опасные Request.Form обнаружено значение» и предоставляет дополнительные сведения в описании относительно именно том, что произошло и как изменить поведение. Пример:

Проверка запросов обнаружила потенциально опасное входное значение клиента и обработка запроса прервана. Это значение может указывать на попытку нарушения безопасности приложения, такие как атака межсайтовых скриптов. Проверка запроса можно отключить, установив `validateRequest=false` в директиве страницы или в разделе конфигурации. Что приложении явную проверку всех входных данных в этом случае настоятельно рекомендуется.

## <a name="disabling-request-validation-on-a-page"></a>Отключение проверки запроса на странице

Чтобы отключить проверку запросов на странице, необходимо задать `validateRequest` атрибута директивы страницы для `false`:

[!code-aspx[Main](request-validation/samples/sample1.aspx)]

> [!CAUTION]
> При отключении проверки запроса содержимого можно передать на страницы; Это ответственность разработчика, убедитесь, что содержимое правильно кодируется или обработки.

## <a name="disabling-request-validation-for-your-application"></a>Отключение проверки запроса для приложения

Чтобы отключить проверку запросов для приложения, необходимо изменить или создать файл Web.config для приложения и установите для атрибута validateRequest `<pages />` раздел `false`:

[!code-xml[Main](request-validation/samples/sample2.xml)]

Если вы хотите отключить проверку запросов для всех приложений на сервере, можно сделать этого изменения в файл Machine.config.

> [!CAUTION]
> При отключении проверки запроса содержимого можно передать в приложение; Это ответственность разработчика приложения, чтобы убедиться, что содержимое правильно кодируется или обработки.

В следующем примере кода изменяется, чтобы отключить проверку запросов:

![](request-validation/_static/image4.png)

Теперь, если введено следующего кода JavaScript в текстовое поле `<script>alert("hello!")</script>` получим:

![](request-validation/_static/image5.png)

Чтобы предотвратить возникновение этой ситуации, при проверке запросов отключен, мы должны необходима кодировка HTML содержимое.

## <a name="how-to-html-encode-content"></a>Каким образом в формате HTML кодирование содержимого

При отключении проверки запроса рекомендуется для HTML-кодирование содержимого, которое будет храниться для использования в будущем. Кодировка HTML автоматически заменяет любой "&lt;«или»&gt;" (а также несколько других символов) с кодом HTML, их соответствующие кодировке представление. Например "&lt;«заменяется на»&amp;lt;" и "&gt;«заменяется на»&amp;gt;". Браузеры используют эти специальные коды для отображения "&lt;«или»&gt;" в браузере.

Содержимое может быть легко HTML-кодирование на сервере с помощью `Server.HtmlEncode(string)` API. Содержимое также можно легко HTML-закодированном формате, то есть, возвращенными в стандартный HTML с помощью `Server.HtmlDecode(string)` метод.

![](request-validation/_static/image6.png)

В результате.

![](request-validation/_static/image7.png)
