---
uid: whitepapers/mvc4-beta-release-notes
title: ASP.NET MVC 4 | Документы Microsoft
author: rick-anderson
description: В этом документе описывается выпуск бета-версии ASP.NET MVC 4 для Visual Studio 2010.
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/09/2011
ms.topic: article
ms.assetid: 666407bb-81de-4319-89ba-0302c382a208
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /whitepapers/mvc4-beta-release-notes
msc.type: content
ms.openlocfilehash: d29f09d726e835c1eb1fc38e643a4bfe7f00f61c
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/10/2018
---
<a name="aspnet-mvc-4"></a>ASP.NET MVC 4
====================
> В этом документе описывается выпуск бета-версии ASP.NET MVC 4 для Visual Studio 2010.
> 
> > [!NOTE]
> > Это не самая последняя версия. Заметки о выпуске ASP.NET MVC 4, версия-Кандидат доступны [здесь](mvc4-release-notes.md).


- [Замечания по установке](#_Toc303253802)
- [Документация](#_Toc303253803)
- [Поддержка](#_Toc303253804)
- [Требования к программному обеспечению](#_Toc303253805)
- [Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4](#_Toc303253806)
- [Новые возможности в бета-версии ASP.NET MVC 4](#_Toc303253807)

    - [ASP.NET Web API](#_Toc317096197)
    - [Страницы ASP.NET одного приложения](#_Toc317096198)
    - [Улучшения в шаблоны проектов по умолчанию](#_Toc303253808)
    - [Шаблон проекта для мобильных устройств](#_Toc303253809)
    - [Режимы отображения](#_Toc303253810)
    - [jQuery Mobile, переключателя и переопределения браузера](#_Toc303253811)
    - [Рецепты для создания кода в Visual Studio](#_Toc303253812)
    - [Поддержка задач для асинхронных контроллеров](#_Toc303253813)
    - [Пакет Azure SDK](#_Toc303253814)
    - [Известные проблемы и критические изменения](#_Toc303253815)

<a id="_Toc303253802"></a>
## <a name="installation-notes"></a>Замечания по установке

Бета-версии 4 MVC ASP.NET для Visual Studio 2010 можно установить из [Домашняя страница ASP.NET MVC 4](../mvc/mvc4.md) с помощью установщика веб-платформы.

Необходимо удалить все ранее установленные предварительных версий ASP.NET MVC 4 перед установкой бета-версии 4 ASP.NET MVC.

Этот выпуск не совместим с .NET Framework 4.5 Developer Preview. .NET 4.5 Developer Preview необходимо удалить перед установкой бета-версия ASP.NET MVC 4.

ASP.NET MVC 4, можно установить и выполнять side-by-side с ASP.NET MVC 3.

<a id="_Toc303253803"></a>
## <a name="documentation"></a>Документация

Документация по ASP.NET MVC доступна на веб-сайте MSDN по АДРЕСУ:

[https://go.microsoft.com/fwlink/?LinkID=243043](https://go.microsoft.com/fwlink/?LinkID=243043)

Учебники и другие сведения о ASP.NET MVC доступны на странице веб-сайта ASP.NET MVC 4 ([https://www.asp.net/mvc/mvc4](../mvc/mvc4.md)).

<a id="_Toc303253804"></a>
## <a name="support"></a>Поддержка

Это является предварительной и официально не поддерживается. При наличии вопросов о работе в этом выпуске, задайте их на форуме ASP.NET MVC ([https://forums.asp.net/1146.aspx](https://forums.asp.net/1146.aspx)), где члены сообщества ASP.NET друг другу, предоставляя полезные сведения.

<a id="_Toc303253805"></a>
## <a name="software-requirements"></a>Требования к программному обеспечению

Компоненты ASP.NET MVC 4 для Visual Studio требуется PowerShell 2.0, а Visual Studio 2010 с пакетом обновления 1 или Visual Web Developer Express 2010 с пакетом обновления 1.

<a id="_Toc303253806"></a>
## <a name="upgrading-an-aspnet-mvc-3-project-to-aspnet-mvc-4"></a>Обновление проекта ASP.NET MVC 3 до ASP.NET MVC 4

ASP.NET MVC 4 можно установить параллельно с ASP.NET MVC 3 на том же компьютере, что обеспечивает гибкость в выборе при обновлении приложения ASP.NET MVC 3 до ASP.NET MVC 4.

Самый простой способ обновления — для создания нового проекта ASP.NET MVC 4 и скопируйте все представления, контроллеры, кода и содержимое файлов из существующего проекта MVC 3 в новый проект и затем обновление ссылок на сборку в новый проект для обеспечения соответствия старого проекта. При внесении изменений в файл Web.config в проект MVC 3 необходимо также осуществить слияние этих изменений в файл Web.config в проекте MVC 4.

Чтобы вручную обновить существующее приложение ASP.NET MVC 3 до версии 4, выполните следующие действия:

1. Во всех файлах Web.config в проекте (имеется в корневой папке проекта, в папке «представления», и в папке Views каждой области в проекте) замените все вхождения следующий текст:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample1.cmd)]

    соответствующий текст:

    [!code-console[Main](mvc4-beta-release-notes/samples/sample2.cmd)]
2. В корневом файле Web.config, обновите *webPages:Version* элемента на «2.0.0.0» и добавьте новую *PreserveLoginUrl* ключ, который имеет значение «true»:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample3.xml)]
3. В обозревателе решений удалите ссылку на *System.Web.Mvc* (который указывает на версию 3 DLL). Затем добавьте ссылку на *System.Web.Mvc* (v4.0.0.0). В частности внесите следующие изменения для обновления ссылок на сборки. Подробности приведены ниже:

    1. В обозревателе решений удалите ссылки на следующие сборки: 

        - *System.Web.Mvc*(v3.0.0.0)
        - *System.Web.WebPages*(v1.0.0.0)
        - *System.Web.Razor*(v1.0.0.0)
        - *System.Web.WebPages.Deployment*(v1.0.0.0)
        - *System.Web.WebPages.Razor*(v1.0.0.0)
    2. Добавьте ссылки на следующие сборки: 

        - *System.Web.Mvc*(v4.0.0.0)
        - *System.Web.WebPages*(v2.0.0.0)
        - *System.Web.Razor*(v2.0.0.0)
        - *System.Web.WebPages.Deployment*(v2.0.0.0)
        - *System.Web.WebPages.Razor*(v2.0.0.0)
4. В обозревателе решений щелкните правой кнопкой мыши имя проекта и выберите команду Выгрузить проект. Затем щелкните правой кнопкой мыши имя и выберите изменение, *ProjectName*CSPROJ-файл.
5. Найдите *ProjectTypeGuids* и замените {E53F8FEA-EAE0-44A6-8774-FFD645390401} с {E3E379DF-F4C6-4180-9B81-6769533ABE47}.
6. Сохранить изменения, закройте файл проекта (CSPROJ-файл), которую вы изменяете, щелкните правой кнопкой мыши проект и выберите команду перезагрузить проект.
7. Если проект ссылается на все библиотеки сторонних разработчиков, которые компилируются с помощью предыдущих версий ASP.NET MVC, откройте корневой файл Web.config и добавьте следующие три *bindingRedirect* элементы  *Конфигурация* раздела: 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample4.xml)]

<a id="_Toc303253807"></a>
## <a name="new-features-in-aspnet-mvc-4-beta"></a>Новые возможности в бета-версии ASP.NET MVC 4

В этом разделе описываются функции, которые были введены в ASP.NET MVC 4, бета-версии.

<a id="_Toc317096197"></a>
### <a name="aspnet-web-api"></a>ASP.NET Web API

ASP.NET MVC 4 теперь включает веб-API ASP.NET, новую платформу для создания служб HTTP может достигать широкого диапазона клиентов, включая браузеры и мобильные устройства. Веб-API ASP.NET также является идеальной платформой для создания служб RESTful.

Веб-API ASP.NET включает поддержку следующих возможностей:

- **Современные модели программирования HTTP:** непосредственного доступа и управления HTTP-запросы и ответы в вашей веб-API, с помощью нового, строго типизированной объектной модели HTTP. Же программирования модели и HTTP-конвейера симметрично доступна на клиентском компьютере с помощью нового типа HttpClient.
- **Полная поддержка маршруты**: веб-API теперь поддерживают полный набор возможностей маршрута, которые были частью веб-решения, включая параметры маршрута и ограничения. Кроме того сопоставления действий реализована полная поддержка соглашения, поэтому вам больше не нужно применить атрибуты, такие как [HttpPost] для классов и методов.
- **Согласование содержимого**: клиент и сервер могут совместно определяют неправильный формат для данных, возвращаемых из API. Мы предоставляем поддержка XML, JSON и форматы форма URL-адреса по умолчанию, и можно расширить эту функцию, добавив собственные модули форматирования, или даже заменить стратегии согласования содержимого по умолчанию.
- **Модель привязки и проверки:** связыватели моделей обеспечивают простой способ извлечения данных из различных частей HTTP-запроса и преобразования этих частей сообщения в объекты .NET, которые можно использовать при выполнении действий веб-API.
- **Фильтры:** веб-API теперь поддерживает фильтры, включая хорошо известных фильтры, таких как атрибут [Authorize]. Можно создать и подключить собственные фильтры для действия, авторизации и обработка исключений.
- **Запрос компоновки:** путем простого возврата IQueryable&lt;T&gt;, веб-API будет поддерживать запросов через URL-адрес OData соглашения.
- **Улучшенные возможности тестирования сведения HTTP:** вместо задания HTTP сведения в объектах статического контекста, действия веб-API теперь можно работать с экземплярами HttpRequestMessage и HttpResponseMessage. Для работы с вашей пользовательских типов, кроме типов HTTP также существуют универсальные версии этих объектов.
- **Улучшенная инверсии управления (IoC) через DependencyResolver:** веб-API теперь использует схему локатора службы, реализуемый Сопоставитель зависимостей MVC для получения экземпляров для многих различных средств.
- **Конфигурация на основе кода:** веб-API конфигурации осуществляется только через код, если оставить файл конфигурации очистить файлы.
- **Резидентной:** веб-API может размещаться в процессе помимо служб IIS и продолжать использовать всю мощь маршруты и другие компоненты веб-API.

Для получения дополнительных сведений о веб-API ASP.NET обращайтесь [ https://www.asp.net/web-api ](../web-api/index.md).

<a id="_Toc317096198"></a>
### <a name="aspnet-single-page-application"></a>Страницы ASP.NET одного приложения

ASP.NET MVC 4 теперь включает ранней предварительной версии интерфейса для создания приложений на одной странице с значительные взаимодействие на стороне клиента, с помощью JavaScript и веб-API. Эта поддержка включает в себя:

- Набор библиотек JavaScript для более подробная локального взаимодействия с кэшированными данными
- Дополнительные компоненты веб-API для единицы работы и поддержки DAL
- Шаблон проекта MVC с помощью формирования шаблонов, чтобы быстро приступить к работе

Дополнительные сведения о одностраничного приложения поддерживают в ASP.NET MVC 4 посетите [ https://www.asp.net/single-page-application ](../single-page-application/index.md).

<a id="_Toc303253808"></a>
### <a name="enhancements-to-default-project-templates"></a>Улучшения в шаблоны проектов по умолчанию

Шаблон, который используется для создания новых проектов ASP.NET MVC 4 был обновлен для создания более современные поиска веб-сайта:

![](mvc4-beta-release-notes/_static/image1.png)

В дополнение к формальной усовершенствования Улучшена функциональность в новом шаблоне. Шаблон использует метод, называемый адаптивной отрисовки для браузеров настольных компьютеров и мобильных браузеров стандартной плохо.

![](mvc4-beta-release-notes/_static/image2.png)

Для просмотра адаптивной отрисовки в действии, можно использовать мобильном эмуляторе или просто измените размеры окна браузера настольного компьютера меньше по размеру. Когда окно браузера получает достаточно мал, изменяется макет страницы.

Другое усовершенствование шаблон проекта по умолчанию является использование JavaScript предоставление обширные возможности пользовательского интерфейса. Ссылки входа и регистрации, которые используются в шаблоне приведены примеры использования jQuery диалоговое окно пользовательского интерфейса для представления экран широкие возможности входа.

![](mvc4-beta-release-notes/_static/image3.png)

<a id="_Toc303253809"></a>
### <a name="mobile-project-template"></a>Шаблон проекта для мобильных устройств

Если вы начинаете новый проект и создать сайт специально для мобильных устройств и браузеров планшета, можно использовать новый шаблон проекта приложения для мобильных устройств. Следующий пример основан на jQuery Mobile, библиотеку открытым исходным кодом, для создания пользовательского интерфейса, оптимизированных для сенсорных экранов:

![](mvc4-beta-release-notes/_static/image4.png)

Этот шаблон содержит ту же структуру приложения, что шаблон веб-приложение (и код контроллера практически идентичен), но со стилем с помощью jQuery Mobile хорошо выглядят и работают на основе touch мобильных устройствах. Дополнительные сведения о структуре и мобильных пользовательского интерфейса в стиле см. в разделе [jQuery мобильном проекте веб-сайта](http://jquerymobile.com/).

При наличии сайта для рабочей среды, нужно добавить представления, оптимизированные для мобильных устройств, чтобы, или если нужно создать на одном сайте, служит другой по стилю представления для браузеров настольных компьютеров и мобильных устройств можно использовать новую функцию режимов отображения. (См. следующий раздел).

<a id="_Toc303253810"></a>
### <a name="display-modes"></a>Режимы отображения

Новая функция режимов отображения для работы приложения выберите представления, в зависимости от браузера, который выполняет запрос. Например если браузер на компьютере запросы на домашней странице, в приложении можно использовать шаблон Views\Home\Index.cshtml. Если мобильный браузер запрашивает домашнюю страницу, приложение может возвратить Views\Home\Index.mobile.cshtml шаблона.

Макеты и частичными репликами также может быть переопределен для конкретной браузера типов. Пример:

- Если в одну папку содержит оба \_Layout.cshtml и \_Layout.mobile.cshtml шаблоны по умолчанию будет использоваться приложением \_Layout.mobile.cshtml во время запросов из браузеры для мобильных устройств и \_Layout.cshtml во время других запросов.
- Если папка содержит оба \_MyPartial.cshtml и \_MyPartial.mobile.cshtml, инструкция @Html.Partial(«\_MyPartial») будет отображаться \_MyPartial.mobile.cshtml во время запросы от мобильных устройств браузеры, и \_MyPartial.cshtml во время других запросов.

Если требуется создать более конкретным представлениям макетов и частичных представлений для других устройств, можно зарегистрировать новый *DefaultDisplayMode* экземпляра, чтобы указать, какое имя для поиска, если запрос удовлетворяет условиям определенного. Например, можно добавить следующий код в *приложения\_запустить* метод в файле Global.asax для регистрации строку «iPhone» как режим просмотра, который применяется, когда браузер Apple iPhone делает запрос:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample5.cs)]

После выполнения этого кода, когда браузер Apple iPhone выполняет запрос, приложение будет использовать одну\\_Layout.iPhone.cshtml макета (если он существует).

<a id="_Toc303253811"></a>
### <a name="jquery-mobile-the-view-switcher-and-browser-overriding"></a>jQuery Mobile, переключателя и переопределения браузера

jQuery Mobile — это библиотека открытым исходным кодом, для создания оптимизированных для сенсорных экранов веб-интерфейса. Если вы хотите использовать jQuery Mobile с приложением ASP.NET MVC 4, можно загрузить и установить пакет NuGet, который поможет вам приступить к работе. Чтобы установить его с помощью консоли диспетчера пакетов Visual Studio, введите следующую команду:

[!code-powershell[Main](mvc4-beta-release-notes/samples/sample6.ps1)]

При этом устанавливаются jQuery Mobile и некоторые вспомогательные файлы, включая следующие:

- Представления/Общие/\_Layout.Mobile.cshtml, являющийся макете мобильное jQuery.
- Компонент переключателя, который состоит изпредставления/Общие/\_ViewSwitcher.cshtml частичного представления и контроллера ViewSwitcherController.cs.

После установки пакета, запустите приложение, с помощью мобильных браузеров (или эквивалентных, таких как Firefox [переключателя агента пользователя](http://chrispederick.com/work/user-agent-switcher/) надстройки). Вы увидите, что страницы выглядят существенно различаться, поскольку jQuery Mobile обрабатывает макет и оформление. Для использования этой возможности, выполните следующие действия.

- Создайте переопределений, представлений, связанных с мобильных устройств, как описано в разделе [режимы отображения](#_Toc303253810) ранее (например, создать Views\Home\Index.mobile.cshtml переопределить Views\Home\Index.cshtml браузеры для мобильных устройств).
- Чтение [jQuery мобильных документации](http://jquerymobile.com/) для получения дополнительных сведений о том, как добавить элементы пользовательского интерфейса, оптимизированных для сенсорных экранов в представлениях мобильных устройств.

Соглашение для веб-страниц, оптимизированные для мобильных устройств — Добавление ссылки, текст которых стоит как представление рабочего стола или режиме весь сайт, который позволяет пользователям перейти рабочего стола версии страницы. Пакет jQuery.Mobile.MVC для этих целей используется образец компонента представления переключателя. Он используется по умолчанию одну\\_Layout.Mobile.cshtml представление, и при отображении страницы выглядит следующим образом:

![](mvc4-beta-release-notes/_static/image5.png)

Если посетители щелкните ссылку, вы переключить классической версии той же странице.

Поскольку макет рабочего стола не будет включать переключателя по умолчанию, посетители будут способ перейти в режим мобильных устройств. Чтобы включить эту возможность, добавьте следующую ссылку на файл  *\_ViewSwitcher* макет рабочего стола, просто внутри *&lt;текст&gt;* элемента:

[!code-cshtml[Main](mvc4-beta-release-notes/samples/sample7.cshtml)]

Переключателем представлений используется новая функция, называемая переопределения браузера. Эта функция позволяет приложению рассматривать запросы, как если бы они поступали от другом браузере (агенте пользователя) от того, они фактически из. В следующей таблице перечислены методы, предоставляемые переопределения браузера.

| `HttpContext.SetOverriddenBrowser(userAgentString)` | Переопределяет значение агента пользователя запроса, с помощью агента указанного пользователя. |
| --- | --- |
| `HttpContext.GetOverriddenUserAgent()` | Возвращает значение переопределения агента пользователя в запросе, или строку агента пользователя, если переопределение не был указан. |
| `HttpContext.GetOverriddenBrowser()` | Возвращает *HttpBrowserCapabilitiesBase* экземпляра, соответствующего агента пользователя, заданных в настоящее время для запроса (фактические или переопределения). Это значение можно использовать для получения свойств, таких как *IsMobileDevice*. |
| `HttpContext.ClearOverriddenBrowser()` | Удаляет все переопределенные агенты пользователя для текущего запроса. |

Переопределение браузера является основной функцией ASP.NET MVC 4 и доступен, даже если вы не установите jQuery.Mobile.MVC пакета. Тем не менее, он влияет только на представление, макет и выбора частичного представления, не влияет на другие функции ASP.NET, который зависит от *Request.Browser* объекта.

По умолчанию агент пользователя переопределение хранится с использованием файла cookie. Если вы хотите сохранить переопределение в другом месте (например, в базе данных), можно заменить поставщика по умолчанию (*BrowserOverrideStores.Current*). Документация для этого поставщика будет доступна вместе с более поздней версии ASP.NET MVC.

<a id="_Toc303253812"></a>
### <a name="recipes-for-code-generation-in-visual-studio"></a>Рецепты для создания кода в Visual Studio

Новая функция рецепты позволяет системе Visual Studio для создания кода конкретного решения на основании пакетов, которые можно установить с помощью NuGet. Рецепты framework упрощает разработчикам создавать подключаемые модули создания кода, который также можно использовать для замены генераторы встроенного кода для добавления области, добавить контроллер и добавить представление. Поскольку рецепты разворачиваются как пакеты NuGet, их можно легко в систему управления версиями и совместно с всех разработчиков в проекте автоматически. Они также доступны в рамках каждого решения.

<a id="_Toc303253813"></a>
### <a name="task-support-for-asynchronous-controllers"></a>Поддержка задач для асинхронных контроллеров

Теперь можно написать асинхронные методы действия как один методы, которые возвращают объект типа *задачи* или *задачи&lt;ActionResult&gt;*.

Например, если вы используете Visual C# 5 (или с помощью [Async CTP](https://msdn.microsoft.com/vstudio/async.aspx)), можно создать асинхронный метод, который выглядит следующим образом:

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample8.cs)]

В предыдущем методе действия, вызовы *newsService.GetHeadlinesAsync* и *sportsService.GetScoresAsync* вызываются асинхронно и блокирует поток из пула потоков.

Асинхронные методы действия, возвращающие *задачи* экземпляры также может поддерживать значения времени ожидания. Чтобы сделать метод действия отменяемую, добавьте параметр типа *CancellationToken* к сигнатуре метода действия. В следующем примере показано асинхронного метода действия, время ожидания в миллисекундах 2500 а, отображает *TimedOut* просмотра клиенту, если время ожидания.

[!code-csharp[Main](mvc4-beta-release-notes/samples/sample9.cs)]

<a id="_Toc303253814"></a>
### <a name="azure-sdk"></a>Пакет Azure SDK

Бета-версии 4 ASP.NET MVC поддерживает версии 1.5 сентябрь 2011 г. пакета SDK Windows Azure.

<a id="_Toc303253815"></a>
## <a name="known-issues-and-breaking-changes"></a>Известные проблемы и критические изменения

- **После установки бета-версии ASP.NET MVC 4, редактор CSHTML и VBHTML в редакторе Visual Studio 2010 Service Pack 1 CSHTML и VBHTML может приостановить в течение долгого времени после ввода фрагмента или JavaScript в файлах cshtml и vbhtml.** Это происходит только в приложениях ASP.NET MVC 4, которые были недавно созданы и еще не скомпилирована.

    Это решение подходит для компиляции проекта, чтобы получить сборок в папке bin. Обратите внимание, что при удалении проекта, который удаляет сборки из папки bin редактор проблемы будут возвращены.

    Эта ошибка будет исправлена в следующем выпуске.
- **Шаблоны проектов C# для бета-версии Visual Studio 11 содержать строку подключения в Global.asax.cs.** Соединение по умолчанию, указанное в приложении\_метод Start для проектов, созданных в бета-версии Visual Studio 11 содержит строку подключения LocalDB, которая содержит escape-последовательность обратную косую черту (\) символов. Это вызовет ошибку подключение после попытки доступа к DbContext Entity Framework, который приводит к возникновению ошибки SqlException.

    Чтобы устранить эту проблему, escape-символ обратной косой черты в приложении\_запустить метод Global.asax.cs следующим образом:

    [!code-csharp[Main](mvc4-beta-release-notes/samples/sample10.cs)]
- **Приложения ASP.NET MVC 4, ориентированных на .NET 4.5 вызовет FileLoadException при попытке доступа к сборке System.Net.Http.dll, при выполнении в .NET 4.0.** Приложения ASP.NET MVC 4, созданные в .NET 4.5 содержит привязки перенаправления, приведет к FileLoadException, которое подтверждает, что «не удалось загрузить файл или сборку «System.Net.Http» или одну из ее зависимостей.» Если приложение выполняется в системе с установленной .NET 4.0. Чтобы устранить эту проблему, удалите следующее перенаправление привязки из файла web.config:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample11.xml)]

    Элемент привязки сборки в измененный файл web.config должен выглядеть следующим образом:

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample12.xml)]
- <strong>Шаблон элемента «Добавление контроллера» в проектах Visual Basic создает неправильное пространство имен при вызове</strong><strong>из внутри области.</strong> При добавлении контроллера в проект ASP.NET MVC с помощью Visual Basic в область шаблона элемента вставляет неправильное пространство имен в контроллере. Результатом является ошибка «файл не найден» при переходе к любому действию в контроллере.  
  
  Сформированное пространство имен исключает все, что после корневого пространства имен. Например, пространство имен, сгенерированное — *RootNamespace* , но должен быть *RootNamespace.Areas.AreaName.Controllers* .
- **Критические изменения в представлений Razor.** В ходе перезаписи средства синтаксического анализа Razor, следующие типы были удалены из *System.Web.Mvc.Razor*: 

    - *ModelSpan*
    - *MvcVBRazorCodeGenerator*
    - *MvcCSharpRazorCodeGenerator*
    - *MvcVBRazorCodeParser*

  Также были удалены следующие методы: 

    - *MvcCSharpRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*
    - *MvcWebPageRazorHost.DecorateCodeGenerator(System.Web.Razor.Generator.RazorCodeGenerator)*
    - *MvcVBRazorCodeParser.ParseInheritsStatement(System.Web.Razor.Parser.CodeBlockInfo)*
- **Если WebMatrix.WebData.dll включен в каталоге/Bin приложения ASP.NET MVC 4, он берет на себя URL-адрес для проверки подлинности форм.** Добавление сборки WebMatrix.WebData.dll приложения (например, выбрав «ASP.NET Web Pages с синтаксисом Razor» при использовании диалогового окна Добавление развертываемых зависимостей) переопределяет перенаправления входа проверки подлинности для входа/account/вместо / учетной записи или имя входа, ожидаемого контроллера учетных записей ASP.NET MVC по умолчанию. Чтобы предотвратить такое поведение и использовать URL-адрес уже указан в разделе проверки подлинности файла Web.config, можно добавить appSetting называется PreserveLoginUrl и присвоено значение true: 

    [!code-xml[Main](mvc4-beta-release-notes/samples/sample13.xml)]
- **Диспетчер пакетов NuGet не устанавливается при установке ASP.NET MVC 4 для параллельная установка Visual Studio 2010 и Visual Web Developer 2010.** Для запуска Visual Studio 2010 и Visual Web Developer 2010 параллельно с ASP.NET MVC 4 ASP.NET MVC 4 необходимо установить обе версии Visual Studio уже после установки.
- **При удалении ASP.NET MVC 4 завершается ошибкой, если необходимые компоненты уже был удален.** Чтобы полностью удалить ASP.NET MVC 4you необходимо удалить перед удалением Visual Studio ASP.NET MVC 4.
- **При запуске проекта по умолчанию веб-API показывает инструкции, неправильно направлять пользователя для добавления маршрутов с помощью метода RegisterApis, который не существует.** Маршруты должны быть добавлены в методе RegisterRoutes, с помощью таблицы маршрутов ASP.NET.
- **Установка бета-версия ASP.NET MVC 4 прерывается приложений ASP.NET MVC 3 RTM.** Приложения ASP.NET MVC 3, которые были созданы с RTM выпуск (не с выпуском обновления средств ASP.NET MVC 3) следующие изменения для работы требуется рядом с бета-версии 4 ASP.NET MVC. Построение проекта без внесения результаты этих обновлений в ошибки компиляции. 

    **Необходимые обновления**

  1. В корневом файле Web.config, добавьте новый *&lt;appSettings&gt;* запись с ключом *webPages:Version* и значение *1.0.0.0*.

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample14.xml)]
  2. В обозревателе решений щелкните правой кнопкой мыши имя проекта и выберите команду Выгрузить проект. Затем щелкните правой кнопкой мыши имя и выберите изменение, *ProjectName*CSPROJ-файл.
  3. Найдите ссылки на следующие сборки: 

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample15.xml)]

      Замените их следующим кодом:

      [!code-xml[Main](mvc4-beta-release-notes/samples/sample16.xml)]
  4. Сохранить изменения, закройте файл проекта (CSPROJ-файл), изменения, а затем щелкните правой кнопкой мыши проект и выберите перезагрузить.
