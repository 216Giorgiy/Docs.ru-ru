---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options
title: Параметры хранения данных (Создание реальных облачных приложений в Azure) | Документы Microsoft
author: MikeWasson
description: Построение реального мира облачными приложениями с помощью Azure электронная книга основан на разработанный Скотт Гатри презентации. Объясняет, 13 шаблоны и рекомендации, которые он может...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: e51fcecb-cb33-4f9e-8428-6d2b3d0fe1bf
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-storage-options
msc.type: authoredcontent
ms.openlocfilehash: d638dca331cb24c340a4471e5964a00b75bb608a
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="data-storage-options-building-real-world-cloud-apps-with-azure"></a>Параметры хранения данных (Создание реальных облачных приложений в Azure)
====================
по [Mike Wasson](https://github.com/MikeWasson), [Рик Андерсон](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)

[Загрузка решение проект](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) или [Загрузите электронную](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)

> **Построение реального мира облачными приложениями с помощью Azure** электронная книга основана на представления, разработанный Скотт Гатри. Объясняются 13 шаблоны и рекомендации, которые помогут вам быть успешной разработки веб-приложений для облака. Сведения об электронных книг см. в разделе [первой главы](introduction.md).


Большинство пользователей используются для реляционных баз данных, и они стремятся забывают другие параметры хранения данных при их разработке облачного приложения. Результат может быть неоптимальной производительности, высокий уровень прибыли или хуже, так как [NoSQL](http://en.wikipedia.org/wiki/NoSQL) (нереляционных) баз данных более эффективно, чем реляционных баз данных можно обработать некоторые задачи. Когда пользователи запрашивают нам помощь в решении проблемы хранения важных данных, часто бывает так, как они имеют реляционную базу данных, где один из параметров NoSQL могло бы работать лучше. В такой ситуации клиента было бы лучше, если они уже реализована NoSQL решение перед развертыванием приложения в рабочей среде.

С другой стороны он также будет ошибкой предположить, что базы данных NoSQL можно сделать все хорошо или достаточно хорошо. Отсутствует один лучший выбор управления данные для всех задач хранилища данных; решения для управления различными данными оптимизированы для различных задач. Большинство реальных облачных приложений имеют различные требования к хранилищу данных и обслуживаются наиболее часто при помощи сочетания нескольких решения хранения данных.

В этой главе предназначена для предоставления более широком смысле вариантов хранения данных, доступных для облачного приложения, а также некоторые основные рекомендации о том, как выбрать те, которые соответствуют вашему сценарию. Лучше всего известно о возможности, доступные и рассматривать их сильные и слабые стороны до разработки приложения. Изменение параметров хранилища данных в рабочем приложении может быть очень сложно, как изменить ядра jet, когда плоскость проходят.

## <a name="data-storage-options-on-azure"></a>Параметры хранения данных в Azure

Облако относительно упрощает использование разнообразных реляционных и хранилищ данных NoSQL. Ниже приведены некоторые платформы хранения данных, которые можно использовать в Azure.

![](data-storage-options/_static/image1.png)

В таблице показаны четыре типа баз данных NoSQL.

- [Ключ значение баз данных](https://msdn.microsoft.com/library/dn313285.aspx#sec7) хранения одного сериализованного объекта для каждого значения ключа. Они используются для хранения больших объемов данных, где можно получить один элемент для определенного значения ключа, а не нужно для запроса на основе других свойств элемента.

    [Хранилище больших двоичных объектов Azure](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-blobs/) — это ключ значение база данных, работающая как хранилище файлов в облаке, со значениями ключа, которые соответствуют именам файлов и папок. Можно получить файл, папку и имя файла, а не по для поиска значений в содержимое файла.

    [Хранилище таблиц Azure](https://azure.microsoft.com/documentation/articles/storage-dotnet-how-to-use-tables/) база данных также ключ значение. Каждое значение называется *сущности* (аналогично строки, определяемая ключ раздела и ключ строки) и содержит несколько *свойства* (схожие со столбцами, но не все объекты в таблице имеют для одного и того же столбцы). Запрос по столбцам, кроме ключа крайне неэффективно, поэтому следует избегать. Например можно хранить данные профиля пользователя, с одной секцией, хранения информации о одного пользователя. Данные, такие как имя пользователя, хэш пароля, даты рождения и т. д. можно хранить в отдельных свойств или в отдельные сущности в одной секции. Но не стоит для запроса всех пользователей данного диапазона даты рождения и невозможно выполнить запрос соединения между вашего профиля и другой таблицей. Хранилище таблиц, более высокой масштабируемостью и дешевле, чем реляционной базы данных, но он не включает сложные запросы или соединения.
- [Documentdatabases](https://msdn.microsoft.com/library/dn313285.aspx#sec8) ключ значение базы данных, в которых значения являются *документов*. «Документ» здесь не используется в том смысле, документ Word или Excel, но означает коллекцию именованных полей и значения, в которых может быть дочерний документ. Например в таблице журнала порядок документа заказа установлена, номер заказа, дата заказа и поля для клиента; и в поле «Клиент» может быть имя и адрес поля. Базы данных выполняется поля данных в формате, например YAML XML, JSON или BSON; или можно использовать обычный текст. Один компонент, который задает баз данных документов отдельно от базы данных ключ значение является возможность запросить неключевых полей и определить вторичные индексы, чтобы сделать запрос более эффективно. Эта возможность делает документ более подходит для приложений, которые используются для извлечения данных на основе критериев, которые сложнее, чем значение ключа документа. Например в базе данных документа История заказа на продажу может запросить различных полей, таких как идентификатор продукта, код клиента, имя клиента и т. д. [MongoDB](http://www.mongodb.org/) база данных документов.
- [Столбец семейство баз данных](https://msdn.microsoft.com/library/dn313285.aspx#sec9) являются хранилищ данных, которые позволяют структуру хранения данных в коллекцию связанных столбцов, называемых семейств столбца ключ значение. Например, база данных переписи населения может иметь одну группу столбцов для указания имени пользователя (во-первых, средний, последнего), одна группа для его адрес и одну группу сведения профиля пользователя (DOB, пол и т. д.). Базы данных можно хранить каждое семейство столбца в отдельной секции сохраняя все данные для одного пользователя, связанные с тем же ключом. Без необходимости прочитать все данные имя и адрес, а также могут быть считаны все данные профиля. [Cassandra](http://cassandra.apache.org/) популярных база данных столбца семейства.
- [Диаграмма базы данных](https://msdn.microsoft.com/library/dn313285.aspx#sec10) сохраните данные как коллекции объектов и отношений. Диаграммы базы данных предназначено для позволяют приложению эффективно выполнять запросы, которые передаются по сети, объектов и связей между ними. Например объекты могут быть сотрудников в базе данных персоналом, и может потребоваться для упрощения запросов такие как «найти всех сотрудников, которые прямо или косвенно работать для Скотт». [Neo4j](http://www.neo4j.org/) — это популярный graph база данных.

По сравнению с реляционным базам данных, NoSQL выполняют гораздо более высокую масштабируемость и экономическую эффективность для хранения и анализа неструктурированных данных. Компромисс заключается в том, что они не обеспечивают queryability широкие возможности и возможности обеспечения целостности данных надежный реляционных баз данных. NoSQL хорошо работает данные журнала IIS, которая включает в себя большого объема, не требующие для запросов на соединение. NoSQL не будет работать очень для банковских транзакций, который требуется абсолютный целостности и включает много связей с другими данными, связанные с учетной записью.

Также имеется новая категория платформы базы данных называется [NewSQL](http://en.wikipedia.org/wiki/NewSQL) , объединяющее масштабируемость баз данных NoSQL с queryability и целостность транзакций реляционной базы данных. Базы данных NewSQL предназначены для распределенного хранилища и обработки запросов, которую часто трудно реализовать в базах данных «OldSQL». [NuoDB](http://www.nuodb.com/) является примером NewSQL базы данных, который может использоваться в Azure.

<a id="hadoop"></a>
## <a name="hadoop-and-mapreduce"></a>Hadoop и MapReduce

Большие объемы данных, которые могут храниться в базах данных NoSQL может быть сложно эффективно анализировать своевременно. Для выполнения, которые можно использовать инфраструктуру, например [Hadoop](http://hadoop.apache.org/) , реализующий [MapReduce](http://en.wikipedia.org/wiki/MapReduce) функциональные возможности. Фактически выполняет какие MapReduce процесс выглядит следующим образом:

- Ограничение объема данных, необходимо обработать, выбрав из данных хранить только данные, которые действительно нужны для анализа. Например вы хотите знать состава базовый за год рождения пользователя, чтобы выбрать только лет рождения из хранилища данных профиля пользователя.
- Разбейте данные на части и отправить их на другие компьютеры для обработки. Компьютер А вычисляет количество пользователей с датами 1950 1959, 1960-1969 выполняется B и т. д. Эта группа компьютеров называется *кластера Hadoop*.
- После завершения обработки для частей поместите результаты каждой части обратно вместе. Теперь у вас есть относительно короткий список сколько люди за каждый год рождения и расчете процентных долей в этом списке общей задачей является управляемым.

В Azure [HDInsight](https://azure.microsoft.com/services/hdinsight/) позволяет обработать, анализировать и получить новую ценную информацию из больших данных, используя возможности Hadoop. Например можно использовать его для анализа журналы веб-сервера:

- Включите журналы веб-сервера для вашей учетной записи хранилища. Это настраивает Azure записывать журналы службы BLOB-объектов для каждого HTTP-запроса в приложение. Службы BLOB-объектов, по сути, представляет файл облачного хранилища, а также хорошо интегрируется с HDInsight. 

    ![Журналы, чтобы хранилище больших двоичных объектов](data-storage-options/_static/image2.png)
- Как приложение получает трафик, журналы IIS веб-сервера, записываются в хранилище больших двоичных объектов. 

    ![Журналы веб-сервера](data-storage-options/_static/image3.png)
- На портале щелкните **New** - **Data Services** - **HDInsight** - **быстрое создание**, и укажите имя кластера HDInsight, размер кластера (количество узлов данных HDInsight кластера) и имя пользователя и пароль для кластера HDInsight. 

    ![HDInsight](data-storage-options/_static/image4.png)

Теперь можно настроить задания MapReduce для анализа журналов и получить ответы на вопросы, например:

- Какое время дня Мое приложение получить как минимум, большинство трафик?
- Какие странах является Мой трафик, поступающий из?
- Что такое доход среднее окружение my трафика получается из областей. (Открытый набор данных, предоставляющий окружение доход по IP-адресу, и, могут сравниваться с IP-адреса в журналы веб-сервера).
- Как доход окружение корреляции для отдельных страниц или продуктов на сайте

Затем можно использовать ответы на следующие вопросы для целевой рекламы, основанного на вероятность того, клиент может оказаться интересным или купить конкретного продукта.

Как описано в статье [автоматизировать все главе](automate-everything.md), можно автоматизировать большинство функций, которые можно выполнять на портале, и включает настройки и выполнения заданий анализа HDInsight. Типичный сценарий HDInsight может содержать следующие действия:

- Подготовить кластер HDInsight и связать ее с вашей учетной записи хранения для входных данных для хранения больших двоичных объектов.
- Отправьте задание MapReduce исполняемые файлы (файлы .exe или .jar) к кластеру HDInsight.
- Отправьте MapReduce, которая сохраняет выходные данные в хранилище больших двоичных объектов.
- Дождитесь завершения задания.
- Удалите кластер HDInsight.
- Доступ к выходу из хранилища больших двоичных объектов.

Выполнив сценарий, который выполняет все это, можно свести к минимуму время подготовки кластера HDInsight, который сводит к минимуму затраты.

<a id="paasiaas"></a>
## <a name="platform-as-a-service-paas-versus-infrastructure-as-a-service-iaas"></a>Платформа как услуга (PaaS) или инфраструктуры как услуги (IaaS)

Параметры хранилища данных, перечисленных выше включают платформы как услуга (PaaS) и решения для инфраструктуры как услуга (IaaS). PaaS означает, что мы управления инфраструктурой оборудования и программного обеспечения и просто использовать службу. База данных SQL — это функция PaaS Azure. Попросите для баз данных, и в фоновом Azure устанавливает и настраивает виртуальных машин и настраивает базы данных на их. Нет прямого доступа к виртуальным машинам и нет необходимости управлять ими. IaaS означает, что настройка, Настройка и управление виртуальными машинами, которые выполняются в нашей инфраструктуре центра обработки данных и поместить любые необходимые на них. Мы предоставляем коллекция предварительно настроенных образов виртуальных Машин для стандартных конфигураций виртуальных Машин. Например можно установить предварительно настроенных образов виртуальных Машин для Windows Server 2008, Windows Server 2012, BizTalk Server, Oracle WebLogic Server, базы данных Oracle, и т. д.

Решений PaaS данные, которые Azure предлагает включают:

- База данных SQL Azure (прежнее название — SQL Azure). Облако реляционная база данных, основанных на SQL Server.
- Хранилище таблиц Azure. Ключ/значение баз данных NoSQL.
- Хранилище больших двоичных объектов Azure. Хранилище файлов в облаке.

IaaS можно выполнить все, что можно загрузить на ВМ, например:

- Реляционные базы данных, таких как SQL Server, Oracle, MySQL, SQL Compact, SQLite или Postgres.
- Например Memcached, Redis, Cassandra и Riak хранит ключ значение данных.
- Хранилищам данных столбца, например HBase.
- Документирование баз данных, например, MongoDB, RavenDB и CouchDB.
- График баз данных, например Neo4j.

![Параметры хранения данных в Azure](data-storage-options/_static/image5.png)

Параметр IaaS позволяет параметров хранилища данных практически неограниченное и многие из них — особенно прост в использовании, так как можно создать с помощью предварительно настроенных образов виртуальных машин. Например, на портале управления перейдите к **виртуальные машины**, нажмите кнопку **изображения** и нажмите кнопку **Обзор VM Depot**.

![Обзор VM Depot](data-storage-options/_static/image6.png)

Затем можно просмотреть список [сотни предварительно настроенных образов виртуальных Машин](http://www.hanselman.com/blog/Over400VirtualMachineImagesOfOpenSourceSoftwareStacksInTheVMDepotAzureGallery.aspx), и вы можете создать виртуальную Машину из образа с предварительно установленной системы управления базы данных, таких как MongoDB, Neo4J, Redis, Cassandra или CouchDB:

![MongoDB в хранилище Виртуальных машин](data-storage-options/_static/image7.png)

Azure позволяет как простой в использовании IaaS параметров хранилища данных, но предложения PaaS имеют много преимуществ, которые делают их более экономически эффективных и практические во многих сценариях:

- Создание виртуальных машин не нужно, просто используйте портал или сценарий для настройки хранилища данных. Если требуется хранилище 200 ТБ данных, вы можете нажать кнопку или выполнить команду и в секундах она готова к использованию.
- Не нужно управлять или исправление для виртуальных машин, используемых службой; Майкрософт выполняет это автоматически.-не беспокоиться о настройке инфраструктуры для масштабирования и высокого уровня доступности; Корпорация Майкрософт обрабатывает все это для вас.
- Не нужно приобретать лицензии; лицензии сборов включаются в оплаты услуг.
- Вы платите только за то, что используется.

Параметры хранилища данных PaaS в Azure включают предложения по сторонних поставщиков. Например, вы можете [надстройки MongoLab](https://azure.microsoft.com/documentation/articles/store-mongolab-web-sites-dotnet-store-data-mongodb/) из хранилища Azure для подготовки базы данных MongoDB в виде службы.

## <a name="choosing-a-data-storage-option"></a>Выбор способа хранения данных

Одним из подходов не подходит для всех сценариев. Все, кто говорит, что эта технология является ответом, сначала необходимо задать ли «What is вопрос?», так как различные решения оптимизированы для выполнения различных задач. Существует определенного преимуществ реляционной модели; Вот почему ее вокруг так долго. Но существуют также вниз стороны SQL, который можно обращаться с помощью решения NoSQL.

Часто мы видят рабочих лучший подход более композиционная, где используется SQL и NoSQL в одном решении. Даже когда говорят, они принятии NoSQL, если перейти к действиями вы часто поиска, что они используют несколько разных инфраструктур NoSQL: они используют [CouchDB](http://wiki.apache.org/couchdb/Introduction), и [Redis](http://redis.io/)и [ Riak](http://basho.com/riak/) для выполнения различных задач. Даже Facebook, который широко использует NoSQL использует различных платформ NoSQL для разных частей службы. Возможность комбинировать и сопоставлять подходов хранения данных является одним из факторов достоинство облака, так как это простые в использовании нескольких решений данных и интегрировать их в одном приложении.

Ниже приведены некоторые вопросы, нужно принять во внимание при выборе подхода.

| Семантических данных | -Новые возможности ядра хранение данных и доступа к данным семантической (вы реляционные и неструктурированные данные хранятся)? Неструктурированные данные, такие как файлы мультимедиа, наиболее подходящее в хранилище больших двоичных объектов; Коллекция связанных данных, такие как продукты, инвентаризация, поставщики, заказов клиентов, т. д., наиболее подходящее в реляционной базе данных. |
| --- | --- |
| Поддержка запросов | -Как просто именно для запроса данных? -Новые типы вопросов можно эффективно ответы? Ключ значение хранилищ данных целесообразно использовать для получения одной строки, заданным значением ключа, но не так хорошо для сложных запросов. Для пользовательского профиля хранилища данных где вы всегда получаете данные для одного конкретного пользователя хранилище ключей и значений данных может работать хорошо; для каталога товаров, где можно получить разные группы на основе различных атрибутов продуктов реляционной базы данных может работать лучше. Баз данных NoSQL можно эффективно, хранить большие объемы данных, но имеется структура базы данных, вокруг как приложение запрашивает данные, и это делает труднее выполнять нерегламентированные запросы. С помощью реляционной базы данных можно создать практически любой тип запроса. |
| Режим работы проекции | -Можно вопросы, агрегаты, т. д., выполненных на стороне сервера? Если запустить выбор СЧЕТЧИКА (\*) из таблицы в SQL, она будет очень эффективно выполнение всех действий на сервере и возвращать число мне нужна. Если требуется такой же расчет с хранилищем данных NoSQL, которое не поддерживает агрегирование это неэффективным «unbounded запрос» и, вероятно, выдаст ошибку времени ожидания. Даже после успешного запроса нужно получить все данные с сервера на клиент и подсчета количества строк на стороне клиента. -Какие языков и типов выражений можно использовать? С помощью реляционной базы данных используется SQL. С помощью некоторых баз данных NoSQL, таких как хранилище таблиц Azure, будет использоваться [OData](http://www.odata.org/), и все я могу сделать, — фильтрацию первичного ключа и получить проекции (выбрать подмножество доступных полей). |
| Простота масштабирования | -Частоту и объем будет данных потребуется масштабирование? -Платформа изначально реализован масштабирования? -Как просто его для добавления и удаления емкости (размер и пропускная способность)? Реляционных баз данных и таблиц не секционирована автоматически чтобы масштабируемой, так, чтобы они тяжело поддающихся масштабированию за определенные ограничения. Все, что по своей природе секционирования данных NoSQL, таких как хранилище таблиц Azure и почти не ограничено для добавления секций. Хранилище таблиц можно легко масштабировать до 200 ТБ, но ее максимальный размер для базы данных SQL Azure — 500 ГБ. Можно масштабировать реляционных данных, разделяя их на несколько баз данных, но настройка приложения для поддержки модели, включает множество программирования работы. |
| Инструментирование и управляемость | -Как просто — это платформа для инструментирования, отслеживать и управлять? Вам потребуется получайте информацию о работоспособности и производительности хранилища данных, поэтому необходимо заранее знать метриках платформы позволяет бесплатно и что вам требуется разработать самостоятельно. |
| Операции | -Как просто — это платформа для развертывания и запуска в Azure? PaaS? IaaS? Linux? Хранилище таблиц и базы данных SQL можно легко настроить в Azure. Платформы, которые не являются встроенных решений Azure PaaS требуют больших усилий. |
| Поддержка API | — Это доступные API, который позволяет легко работать с платформой? Для службы таблиц Azure есть пакет SDK с API .NET, который поддерживает асинхронную модель программирования .NET 4.5. Если вы пишете приложение .NET, будет гораздо проще писать и тестировать код для службы таблиц Azure, по сравнению с другой ключ значение столбца хранилища платформу данных имеет не API или менее комплексное один. |
| Согласованность транзакций целостность и данных | -Это критическое, что платформа поддерживает транзакции для обеспечения согласованности данных? Для отслеживания массового электронных сообщений, отправляемых, производительности и затраты на хранение данных самого низкого может быть более важным, чем автоматической поддержки транзакций или целостность платформы данных, делая службы таблицы Azure хорошим выбором. Для отслеживания банковский счет сальдо или платформой реляционных баз данных, который предоставляет гарантии транзакций будет лучшим выбором заказов на покупку. |
| Непрерывность бизнес-процессов | -Как просто резервного копирования, восстановления и аварийного восстановления? Рано или поздно производственные данные будут повреждены, и вам потребуется функция отмены. Реляционные базы данных часто содержат больше возможностей точного восстановления, такие как возможность восстановления на момент времени. Основные сведения о возможностях восстановления, доступных в каждой из платформ планируются — важный фактор, которые следует учитывать. |
| Стоимость | -Если более чем одной платформы поддерживают рабочей нагрузки данные, как они соотносятся стоимости? Например при использовании ASP.NET Identity, можно хранить данные профиля пользователя в службе Azure таблицы или базы данных SQL Azure. Если вам не требуется сложных запросов средства базы данных SQL, можно выбрать таблицы Azure частично, так как оно обходится намного меньше для заданной величины хранения. |

Что мы рекомендуем известен ответов на вопросы в каждой из этих категорий перед выбором решения хранения данных.

Кроме того рабочая нагрузка может иметь особые требования, которые поддерживают некоторые платформы лучше, чем другие. Пример:

- Выполняет требования вашего приложения аудит возможностей?
- Каковы требования к долговечности данных--требуют возможности автоматизированной архивации или очистки?
- У вас есть потребностей с повышенной безопасностью? Например данные включают PII (персональные данные), но необходимо иметь возможность убедиться, что PII исключен из результатов запроса.
- Если некоторые данные, которые не могут храниться в облаке по причинам Нормативные документы или технологические, может потребоваться облачная платформа хранилища данных, которая облегчает интеграцию с локальным хранилищем.

## <a name="demo--using-sql-database-in-azure"></a>Демонстрация — использование базы данных SQL в Azure

Приложение ее исправить использует реляционную базу данных для хранения задач. Сценарий Windows PowerShell создания среды, показанный на [автоматизировать все главе](automate-everything.md) создает два экземпляра базы данных SQL. Это показано на портале, щелкнув **баз данных SQL** вкладки.

![Базы данных SQL на портале](data-storage-options/_static/image8.png)

Также можно легко создавать базы данных с помощью портала.

Нажмите кнопку **новые--Data Services** -- **базы данных SQL** -- **быстрое создание**, введите имя базы данных, выберите сервер, которые уже есть в вашей учетной записи Создайте новый или выберите **Создание базы данных SQL**.

![Новая база данных SQL](data-storage-options/_static/image9.png)

Подождите несколько секунд, и имеется база данных в Azure, готов к использованию.

![Создать новую базу данных SQL](data-storage-options/_static/image10.png)

Поэтому Azure в несколько секунд что потребуется день или в неделю или больше времени для выполнения в локальной среде. И так как можно легко баз данных автоматически создать в скрипте или с помощью API-Интерфейс управления, можно динамически масштабировать, распределяя данные между несколькими базами данных < o: p > при условии, что для этого приложения был запрограммирован. </o : p >

Ниже приводится пример нашей модели платформа как служба. Не нужно управлять серверами, мы делаем его. Не нужно беспокоиться о резервном копировании, мы делаем его. Она выполняется в высокого уровня доступности — данные в базе данных автоматически реплицируются на трех серверах. Если компьютер выходит из строя, автоматически отработка отказа и потерять данные. Сервер исправления регулярно, не нужно беспокоиться об этом.

Нажмите кнопку и получить строку подключения точное требуется и можно сразу приступить к использованию новой базы данных.

![Строки подключения](data-storage-options/_static/image11.png)

Панель показывает историю соединений и объем используемого хранилища.

![Панель мониторинга базы данных SQL](data-storage-options/_static/image12.png)

Вы можете управлять базами данных на портале или с помощью средств SQL Server вы уже знакомы с, включая SQL Server Management Studio (SSMS) и средства Visual Studio в обозревателе объектов SQL Server (SSOX) и обозревателя сервера.

![SSOX](data-storage-options/_static/image13.png)

Еще одно достоинство является модель ценообразования. Можно начать разработку с бесплатную базу данных 20 МБ и производственной базы данных начинается около 5 долларов в месяц. Вы платите только того объема данных, которые хранятся в базе данных, не максимальной емкости. Не нужно приобрести лицензию.

База данных SQL можно легко шкалы. Для ее исправить приложения базы данных, которую мы создадим в нашем сценарии автоматизации ограничен 1 ГБ ОЗУ. Если необходимо расширить его до 150 ГБ ОЗУ, вы можете перейти на портал и измените значение этого параметра или выполните команду REST API и в секундах имеется база данных 150 ГБ ОЗУ, можно развернуть данные.

![Размеры и выпуски баз данных SQL](data-storage-options/_static/image14.png)

Это возможности облака для автономной инфраструктуры, быстро и легко и начать использовать ее сразу.

Приложение ее исправить использует две базы данных SQL, один для членства (проверка подлинности и авторизации) и один для данных, и это все, что нужно сделать, чтобы инициализировать его и масштабировать его. Вы уже видели раньше Подготовка базы данных посредством сценариев Windows PowerShell, и теперь вы также познакомились, как легко можно сделать на портале.

## <a name="entity-framework-versus-direct-database-access-using-adonet"></a>Entity Framework и прямой базы данных access с помощью ADO.NET

Приложение исправить обращается к этих баз данных с помощью платформы Entity Framework, корпорации Майкрософт рекомендуется ORM (объектно реляционного сопоставления) для приложений .NET. ORM является отличным средством, которое обеспечивает производительность разработчиков, но производительность достигается за счет снижение производительности в некоторых сценариях. В реальных облачного приложения вы не будете вносить Выбор между с использованием EF, или непосредственно с помощью ADO.NET, вы будете использовать оба. В большинстве случаев при написании кода, который работает с базой данных, получение максимальной производительности не является критически важным и вы сможете использовать упрощенное создание кода и тестирования, вы получаете с платформой Entity Framework. В ситуациях, где издержки EF вызовет снижение производительности можно написать и выполнить запросы с помощью ADO.NET, в идеальном случае путем вызова хранимой процедуры.

Любой метод используется для доступа к базе данных, можно свести к минимуму насколько он «разговорчивый» максимальной. Другими словами Если необходимых данных можно получить в один большего размера результирующего набора запроса вместо десятки и сотни мелкие, это обычно предпочтительнее. Например если требуется список студентов и курсах, которые их регистрации в обычно лучше получить все данные в одно соединение запроса, а не начало студентов в одном запросе и выполнении отдельных очередей для каждого студента курсы.

## <a name="sql-databases-and-the-entity-framework-in-the-fix-it-app"></a>Базы данных SQL и Entity Framework в приложении исправления

В приложении исправить `FixItContext` класс, который является производным от платформы Entity Framework `DbContext` класса, определяет базу данных, и указание таблиц в базе данных. Контекст задает набор сущностей (таблица), для выполнения задач, а код передает в контексте имени строки подключения. Это имя ссылается на строку подключения, которая определена в файле Web.config.

[!code-csharp[Main](data-storage-options/samples/sample1.cs?highlight=4,8)]

Строка подключения в *Web.config* файл называется appdb (здесь с указанием локальной разработки базы данных):

[!code-xml[Main](data-storage-options/samples/sample2.xml?highlight=3)]

Платформа Entity Framework создает *FixItTasks* таблицы на основе свойств, включенных в `FixItTask` класса сущностей. Это простой класс POCO (Plain объект среды CLR), поэтому он не наследует или имеют любые зависимости на платформе Entity Framework. Но известно, как создать таблицу на его основе Entity Framework и выполнения операций CRUD (Создание чтение обновления и удаления) с ним.

[!code-csharp[Main](data-storage-options/samples/sample3.cs)]

![Таблица FixItTasks](data-storage-options/_static/image15.png)

Приложение исправить включает интерфейс репозитория, который будет использован для работы с хранилищем данных операции CRUD.

[!code-csharp[Main](data-storage-options/samples/sample4.cs)]

Обратите внимание, что методы репозитория все async, все доступа к данным может осуществляться в полностью асинхронна способом.

Реализация вызывает репозитория Entity Framework асинхронные методы для работы с данными, включая запросы LINQ, а также как и для вставки, обновления и удаления операций. Ниже приведен пример кода для поиска задачи ее исправить.

[!code-csharp[Main](data-storage-options/samples/sample5.cs)]

Есть также некоторые расписание и ведения журнала код ошибки, мы рассмотрим, в дальнейшем можно заметить [мониторинг и данные телеметрии главе](monitoring-and-telemetry.md).

<a id="sqliaas"></a>
## <a name="choosing-sql-database-paas-versus-sql-server-in-a-vm-iaas-in-azure"></a>Выбор базы данных SQL (PaaS) и SQL Server на виртуальной машине (IaaS) в Azure

Хорошо о SQL Server и базы данных SQL Azure, что идентичные базовой модели программирования для них. Можно использовать большинство тех же навыков в обеих средах. Можно даже использовать при разработке базы данных SQL Server и экземпляр базы данных SQL в облаке, это, как настроить приложения ее исправить.

В качестве альтернативы можно выполнять же SQL Server в облаке запустите локально, установив на виртуальных машинах IaaS. Для некоторых приложений прежних версий запуск SQL Server на виртуальной машине может быть лучшим решением. Поскольку база данных SQL Server выполняется на выделенной виртуальной Машине, он имеет дополнительные ресурсы, доступные для него не базу данных базы данных SQL, запущенной на сервере с общим доступом. Это означает, что база данных SQL Server может быть больше и по-прежнему выполнять также. Как правило чем меньше размер базы данных и размер таблицы, тем лучше вариант использования работает для базы данных SQL (PaaS).

Ниже приведены некоторые рекомендации по выбору между двумя моделями.

| База данных Azure SQL (PaaS) | SQL Server на виртуальной машине (IaaS) |
| --- | --- |
| **Специалисты** -не нужно создавать или управление виртуальными машинами, обновления или исправления ОС или SQL; Azure делает это для вас. -Встроенную высокую доступность, с SLA уровня базы данных. -Низкий совокупной стоимости владения (TCO), поскольку вы платите только за то, что используется (лицензия не требуется). -Хорошо подходит для обработки большого количества небольших баз данных (&lt;= 500 ГБ). -Простой для динамического создания новых баз данных, чтобы включить горизонтального масштабирования. | ***Специалисты*** - функция совместимость с SQL Server в локальной среде. -Можно реализовывать SQL Server [высокий уровень доступности через AlwaysOn](https://www.microsoft.com/sqlserver/solutions-technologies/mission-critical-operations/high-availability.aspx) в 2 + ВМ, с уровня виртуальной Машины соглашения об уровне ОБСЛУЖИВАНИЯ. -Имеется полный контроль над управление SQL. -Можно повторно использовать лицензии SQL владельцем, или уже оплаты по часам, по одной. -Хорошо подходит для обработки меньшее число более крупных (1 ТБ) базы данных. |
| **Недостатки** -некоторых компонентов пропуски по сравнению с локальным SQL Server (отсутствия [интеграция со средой CLR](https://technet.microsoft.com/library/ms131102.aspx), [прозрачного шифрования данных](https://technet.microsoft.com/library/bb934049.aspx), [поддержки сжатия](https://technet.microsoft.com/library/cc280449.aspx), [SQL Server Службы Reporting Services](https://technet.microsoft.com/library/ms159106.aspx), т. д.) — максимальный размер базы данных в 500 ГБ. | ***Недостатки*** - исправлений или обновления (OS и SQL) вы несете ответственность за - создание и управление баз данных SQL Server вы несете ответственность за - диск операций ввода-ВЫВОДА (операций ввода вывода в секунду) ограничен около 8000 (с помощью дисков с данными 16). |

Если вы хотите использовать SQL Server на виртуальной машине, можно использовать собственную лицензию SQL Server, или можно платить за один час. Например на портале или с помощью API-интерфейса REST можно создать новую виртуальную Машину с помощью образа SQL Server.

![Создание виртуальной Машины с SQL Server](data-storage-options/_static/image16.png)

![Список образов ВМ SQL Server](data-storage-options/_static/image17.png)

При создании виртуальной Машины с помощью образа SQL Server, мы профессиональных скорость стоимость лицензии SQL Server по часам на основе использования виртуальной машины. Если имеется проект, если он будет выполняться в течение нескольких месяцев, дешевле оплачивается по часам. Если вы считаете, что проект будет последнего года, недорого купить лицензии так, как в обычном режиме.

## <a name="summary"></a>Сводка

Облачные вычисления, делающую целесообразным смешивания и соответствия данных хранения подходы для оптимально подходит соответствует потребностям приложения. При создании нового приложения, тщательно продумывать вопросы, приведенные здесь, чтобы выбрать подходов, которые будут продолжать работать также в том случае, если приложение увеличивается. [Следующей главе](data-partitioning-strategies.md) объясню некоторые стратегии секционирования, которые можно использовать для объединения нескольких подходов хранилища данных.

## <a name="resources"></a>Ресурсы

Дополнительные сведения см. в следующих ресурсах.

Выбор платформы базы данных:

- [Доступ к данным для масштабируемых решений: с помощью SQL, NoSQL и Polyglot сохраняемости](http://aka.ms/dag-doc). Электронная книга шаблонов и методов Майкрософт, сохраняемые в глубину, в различные типы данных хранит доступны для облачных приложений.
- [Шаблоны и методики - руководство по Azure Майкрософт](https://msdn.microsoft.com/library/ff898430.aspx). В разделе Основные сведения о согласованности данных, репликации данных и рекомендации для синхронизации шаблона индекса таблицы, материализованные представления шаблон.
- [БАЗОВЫЙ: Acid альтернативы](http://queue.acm.org/detail.cfm?id=1394128). Статьи о компромисса между согласованность данных и масштабируемость.
- [Семь баз данных в семь недель: руководство по современные базы данных и перемещение NoSQL](https://www.amazon.com/Seven-Databases-Weeks-Modern-Movement/dp/1934356921). Книги, Эрик Redmond и Jim R. Wilson. Настоятельно рекомендуется для введения самостоятельно спектр современных платформы хранилища данных.

Выбор между SQL Server и базы данных SQL:

- [Расширенная Предварительная версия руководство базы данных SQL](https://msdn.microsoft.com/library/windowsazure/dn369873.aspx). Общие сведения о расширенной базы данных SQL и рекомендации по выбору его через выпуски базы данных SQL Web и Business.
- [Рекомендации и ограничения (база данных Azure SQL)](https://msdn.microsoft.com/library/windowsazure/ff394102.aspx). Страница портала, ссылки на документацию по ограничениям базы данных SQL, включая те, что основное внимание уделяется компонентов SQL Server этой базы данных SQL не поддерживает.
- [SQL Server в виртуальных машинах Azure](https://msdn.microsoft.com/library/windowsazure/jj823132.aspx). Страница портала, ссылки на документацию о запуске SQL Server в Azure.
- [Скотт Гатри объясняется базах данных SQL Azure](https://azure.microsoft.com/documentation/videos/sql-in-azure-scottgu/). 6 минут видео с введением Скотт Гатри базы данных SQL.
- [Шаблоны приложений и стратегии разработки для SQL Server в виртуальных машинах Azure](https://msdn.microsoft.com/library/windowsazure/dn574746.aspx).

Использование Entity Framework и база данных SQL в ASP.NET веб-приложение

- [Приступая к работе с EF 6 MVC 5 с помощью](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md). Девять учебника выпусков, подробно сборка приложения MVC, который использует EF и развертывание базы данных Azure и базы данных SQL.
- [ASP.NET веб-развертывания с помощью Visual Studio](../../../../web-forms/overview/deployment/visual-studio-web-deployment/introduction.md). 12 учебника выпусков, сохраняемые в более подробно о том, как развернуть базу данных с использованием EF Code First.
- [Развертывание приложения безопасного ASP.NET MVC 5 с членством, OAuth и базы данных SQL Azure веб-сайт](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-mvc-app-membership-oauth-sql-database/). Пошаговое руководство, где описывается создание веб-приложения, которое использует проверку подлинности, сохраняет приложения таблицы в базе данных членства, изменяет схему базы данных и развертывает приложение в Azure.
- [Карта содержимого для доступа к данных ASP.NET](https://go.microsoft.com/fwlink/p/?LinkId=282414). Ссылки на ресурсы для работы с помощью EF и базы данных SQL.

С помощью MongoDB в Azure:

- [MongoLab - MongoDB в Azure](http://msopentech.com/opentech-projects/mongolab-mongodb-on-windows-azure/). Страница портала для получения сведений о запущенном MongoDB в Azure.
- [Создание веб-сайта, который подключается к MongoDB, работающий на виртуальной машине в Azure в Azure](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-store-data-mongodb-vm/). Пошаговый учебник, в котором показано, как использовать базу данных MongoDB в веб-приложении ASP.NET.

HDInsight (Hadoop в Azure):

- [HDInsight](https://azure.microsoft.com/documentation/services/hdinsight/). Портал документации по HDInsight на [Azure](https://azure.microsoft.com/) веб-сайта.
- [Hadoop и HDInsight: большие наборы данных в Azure](https://msdn.microsoft.com/magazine/dn385705.aspx). В статье MSDN Magazine Terkaly Бруно и Villalobos Ricardo, знакомство с Hadoop в Azure.
- [Шаблоны и методики - руководство по Azure Майкрософт](https://msdn.microsoft.com/library/dn568099.aspx). Шаблон MapReduce см. в разделе.

> [!div class="step-by-step"]
> [Назад](single-sign-on.md)
> [Вперед](data-partitioning-strategies.md)
