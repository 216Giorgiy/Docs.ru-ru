---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
title: Ориентированное на очередь рабочих шаблон (Создание реальных облачных приложений в Azure) | Документы Microsoft
author: MikeWasson
description: Построение реального мира облачными приложениями с помощью Azure электронная книга основан на разработанный Скотт Гатри презентации. Объясняет, 13 шаблоны и рекомендации, которые он может...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: cc1ad51b-40c3-4c68-8620-9aaa0fd1f6cf
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/queue-centric-work-pattern
msc.type: authoredcontent
ms.openlocfilehash: 124e673206ecea2eac5efb8c2802a32a690fa104
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
<a name="queue-centric-work-pattern-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="a1328-104">Ориентированное на очередь рабочих шаблон (Создание реальных облачных приложений в Azure)</span><span class="sxs-lookup"><span data-stu-id="a1328-104">Queue-Centric Work Pattern (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="a1328-105">по [Mike Wasson](https://github.com/MikeWasson), [Рик Андерсон](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="a1328-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="a1328-106">[Загрузка решение проект](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) или [Загрузите электронную](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="a1328-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="a1328-107">**Построение реального мира облачными приложениями с помощью Azure** электронная книга основана на представления, разработанный Скотт Гатри.</span><span class="sxs-lookup"><span data-stu-id="a1328-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="a1328-108">Объясняются 13 шаблоны и рекомендации, которые помогут вам быть успешной разработки веб-приложений для облака.</span><span class="sxs-lookup"><span data-stu-id="a1328-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="a1328-109">Сведения об электронных книг см. в разделе [первой главы](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="a1328-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="a1328-110">Ранее, мы узнали, что с помощью нескольких служб может привести «составной» SLA, где действующие соглашения об уровне ОБСЛУЖИВАНИЯ приложения *продукта* отдельных соглашений об уровне обслуживания.</span><span class="sxs-lookup"><span data-stu-id="a1328-110">Earlier, we saw that using multiple services can result in a "composite" SLA, where the app's effective SLA is the *product* of the individual SLAs.</span></span> <span data-ttu-id="a1328-111">Например приложение ее исправить использует веб-сайтов, хранилища и базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="a1328-111">For example, the Fix It app uses Web Sites, Storage, and SQL Database.</span></span> <span data-ttu-id="a1328-112">Если в случае сбоя одного из этих служб приложения возникает сообщение об ошибке для пользователя.</span><span class="sxs-lookup"><span data-stu-id="a1328-112">If any one of these services fails, the app will return an error to the user.</span></span>

<span data-ttu-id="a1328-113">Кэширование — хороший способ обработки временных сбоев для содержимого только для чтения.</span><span class="sxs-lookup"><span data-stu-id="a1328-113">Caching is a good way to handle transient failures for read-only content.</span></span> <span data-ttu-id="a1328-114">Но что делать, если приложению требуется для выполнения работы?</span><span class="sxs-lookup"><span data-stu-id="a1328-114">But what if your application needs to do work?</span></span> <span data-ttu-id="a1328-115">Например при отправке новую задачу ее исправить, приложение просто нельзя поместить задачу в кэш.</span><span class="sxs-lookup"><span data-stu-id="a1328-115">For example, when the user submits a new Fix It task, the app can't just put the task into the cache.</span></span> <span data-ttu-id="a1328-116">Приложение, необходимо написать задачу ее исправить в постоянное хранилище, поэтому оно может быть обработано.</span><span class="sxs-lookup"><span data-stu-id="a1328-116">The app needs to write the Fix It task into a persistent data store, so it can be processed.</span></span>

<span data-ttu-id="a1328-117">Это происходит, когда вступает в дело шаблон ориентированное очереди рабочих.</span><span class="sxs-lookup"><span data-stu-id="a1328-117">That's where the queue-centric work pattern comes in.</span></span> <span data-ttu-id="a1328-118">Этот шаблон позволяет слабой связи между веб-уровня и серверной службы.</span><span class="sxs-lookup"><span data-stu-id="a1328-118">This pattern enables loose coupling between a web tier and a backend service.</span></span>

<span data-ttu-id="a1328-119">Шаблон работает следующим образом.</span><span class="sxs-lookup"><span data-stu-id="a1328-119">Here's how the pattern works.</span></span> <span data-ttu-id="a1328-120">Когда приложение получает запрос, он помещает рабочего элемента очереди и немедленно возвращает ответ.</span><span class="sxs-lookup"><span data-stu-id="a1328-120">When the application gets a request, it puts a work item onto a queue and immediately returns the response.</span></span> <span data-ttu-id="a1328-121">Затем отдельные фоновой обработки извлекает рабочие элементы из очереди и выполняет работу.</span><span class="sxs-lookup"><span data-stu-id="a1328-121">Then a separate backend process pulls work items from the queue and does the work.</span></span>

<span data-ttu-id="a1328-122">Шаблон ориентированное очереди рабочих полезна для:</span><span class="sxs-lookup"><span data-stu-id="a1328-122">The queue-centric work pattern is useful for:</span></span>

- <span data-ttu-id="a1328-123">Работы, которую требуется много времени (Высокая задержка).</span><span class="sxs-lookup"><span data-stu-id="a1328-123">Work that is time consuming (high latency).</span></span>
- <span data-ttu-id="a1328-124">Действия, требующие внешнюю службу, которая может не всегда доступны.</span><span class="sxs-lookup"><span data-stu-id="a1328-124">Work that requires an external service that might not always be available.</span></span>
- <span data-ttu-id="a1328-125">Работы, интенсивно (высокой загрузки ЦП).</span><span class="sxs-lookup"><span data-stu-id="a1328-125">Work that is resource-intensive (high CPU).</span></span>
- <span data-ttu-id="a1328-126">Работа, извлекут заметную выгоду из скорость выравнивание (изменяться взрывообразно внезапное нагрузки).</span><span class="sxs-lookup"><span data-stu-id="a1328-126">Work that would benefit from rate leveling (subject to sudden load bursts).</span></span>

## <a name="reduced-latency"></a><span data-ttu-id="a1328-127">Уменьшенная задержки</span><span class="sxs-lookup"><span data-stu-id="a1328-127">Reduced Latency</span></span>

<span data-ttu-id="a1328-128">Очереди полезны каждый раз, когда вы выполняете долгой работы.</span><span class="sxs-lookup"><span data-stu-id="a1328-128">Queues are useful any time you are doing time-consuming work.</span></span> <span data-ttu-id="a1328-129">Если задача занимает несколько секунд или больше, вместо блокировки конечного пользователя, помещены в очередь рабочий элемент.</span><span class="sxs-lookup"><span data-stu-id="a1328-129">If a task takes a few seconds or longer, instead of blocking the end user, put the work item into a queue.</span></span> <span data-ttu-id="a1328-130">Попросить пользователя «Мы работаем над ее» и затем использовать прослушиватель очереди для обработки задачи в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="a1328-130">Tell the user "We're working on it," and then use a queue listener to process the task in the background.</span></span>

<span data-ttu-id="a1328-131">Например при покупке чего-либо в Интернет-магазине, веб-сайт подтверждает ваш заказ немедленно.</span><span class="sxs-lookup"><span data-stu-id="a1328-131">For example, when you purchase something at an online retailer, the web site confirms your order immediately.</span></span> <span data-ttu-id="a1328-132">Но это не значит, что у вас уже есть в грузовик доставки.</span><span class="sxs-lookup"><span data-stu-id="a1328-132">But that doesn't mean your stuff is already in a truck being delivered.</span></span> <span data-ttu-id="a1328-133">Задача они помещаются в очередь, и в фоновом режиме их выполнение проверки кредита, Подготовка к поставке, элементы и так далее.</span><span class="sxs-lookup"><span data-stu-id="a1328-133">They put a task in a queue, and in the background they are doing the credit check, preparing your items for shipping, and so forth.</span></span>

<span data-ttu-id="a1328-134">Для сценариев с задержкой короткое общее время начала до конца может занять больше, посредством очереди, по сравнению с синхронно выполнить эту задачу.</span><span class="sxs-lookup"><span data-stu-id="a1328-134">For scenarios with short latency, the total end-to-end time might be longer using a queue, compared with doing the task synchronously.</span></span> <span data-ttu-id="a1328-135">Но даже в таком случае другие преимущества, могут перевесить этот недостаток.</span><span class="sxs-lookup"><span data-stu-id="a1328-135">But even then, the other benefits can outweigh that disadvantage.</span></span>

## <a name="increased-reliability"></a><span data-ttu-id="a1328-136">Повышенная надежность</span><span class="sxs-lookup"><span data-stu-id="a1328-136">Increased Reliability</span></span>

<span data-ttu-id="a1328-137">В версии ее исправить, мы рассмотрели к текущему моменту веб-сервера, тесно связана с серверной части базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="a1328-137">In the version of Fix It that we've been looking at so far, the web front-end is tightly coupled with the SQL Database back-end.</span></span> <span data-ttu-id="a1328-138">Если служба базы данных SQL недоступна, пользователь получает ошибку.</span><span class="sxs-lookup"><span data-stu-id="a1328-138">If the SQL database service is unavailable, the user gets an error.</span></span> <span data-ttu-id="a1328-139">Если повторные попытки не работают (сбоя является более одного временного), единственное, что можно сделать — сообщению об ошибке и запрашивать у пользователя и повторите попытку позже.</span><span class="sxs-lookup"><span data-stu-id="a1328-139">If retries don't work (that is, the failure is more than transient), the only thing you can do is show an error and ask the user to try again later.</span></span>

![Схема отображение клиентского веб-интерфейса сбоя при сбое внутренней базы данных SQL](queue-centric-work-pattern/_static/image1.png)

<span data-ttu-id="a1328-141">С помощью очереди, когда пользователь отправляет задачу ее исправить, приложение записывает сообщение в очередь.</span><span class="sxs-lookup"><span data-stu-id="a1328-141">Using queues, when a user submits a Fix It task, the app writes a message to the queue.</span></span> <span data-ttu-id="a1328-142">Полезные данные сообщения [JSON](http://json.org/) представление задачи.</span><span class="sxs-lookup"><span data-stu-id="a1328-142">The message payload is a [JSON](http://json.org/) representation of the task.</span></span> <span data-ttu-id="a1328-143">Сразу после записи сообщения в очередь, приложение возвращает и сразу же показывает сообщение об успешном создании пользователя.</span><span class="sxs-lookup"><span data-stu-id="a1328-143">As soon as the message is written to the queue, the app returns and immediately shows a success message to the user.</span></span>

<span data-ttu-id="a1328-144">Если какой-либо службы базы данных — например, база данных SQL или прослушивателя очереди--переходят в автономный режим, пользователи могут по-прежнему отправлять новые задачи ее исправить.</span><span class="sxs-lookup"><span data-stu-id="a1328-144">If any of the backend services – such as the SQL database or the queue listener -- go offline, users can still submit new Fix It tasks.</span></span> <span data-ttu-id="a1328-145">До серверных служб, доступны только очередь сообщений.</span><span class="sxs-lookup"><span data-stu-id="a1328-145">The messages will just queue up until the backend services are available again.</span></span> <span data-ttu-id="a1328-146">На этом этапе будет Догнать серверных служб в невыполненной работе.</span><span class="sxs-lookup"><span data-stu-id="a1328-146">At that point, the backend services will catch up on the backlog.</span></span>

![Схема, показывающая web интерфейса продолжает функционировать при ошибке базы данных SQL](queue-centric-work-pattern/_static/image2.png)

<span data-ttu-id="a1328-148">Кроме того теперь можно добавить дополнительные алгоритмы серверной части, не беспокоясь о гибкости внешнего интерфейса.</span><span class="sxs-lookup"><span data-stu-id="a1328-148">Moreover, now you can add more backend logic without worrying about the resiliency of the front end.</span></span> <span data-ttu-id="a1328-149">Например может потребоваться для отправки электронной почты или SMS-сообщения с владельцем всякий раз, когда назначается новый ее исправить.</span><span class="sxs-lookup"><span data-stu-id="a1328-149">For example, you might want to send an email or SMS message to the owner whenever a new Fix It is assigned.</span></span> <span data-ttu-id="a1328-150">Если адрес электронной почты или служба SMS становится недоступным, можно обрабатывать все остальные и затем поместить сообщение в отдельную очередь для отправки сообщений электронной почты и SMS.</span><span class="sxs-lookup"><span data-stu-id="a1328-150">If the email or SMS service becomes unavailable, you can process everything else, and then put a message into a separate queue for sending email/SMS messages.</span></span>

<span data-ttu-id="a1328-151">Ранее, действующие СОГЛАШЕНИИ была веб-приложений &times; хранения &times; базы данных SQL = 99.7%.</span><span class="sxs-lookup"><span data-stu-id="a1328-151">Previously, our effective SLA was Web Apps &times; Storage &times; SQL Database = 99.7%.</span></span> <span data-ttu-id="a1328-152">(См. [разработки выдержать сбои](design-to-survive-failures.md).)</span><span class="sxs-lookup"><span data-stu-id="a1328-152">(See [Design to Survive Failures](design-to-survive-failures.md).)</span></span>

<span data-ttu-id="a1328-153">Если мы изменили приложению использовать очереди, веб-интерфейса зависит только от веб-приложений и хранилищами для составного 99.8% соглашение об уровне ОБСЛУЖИВАНИЯ.</span><span class="sxs-lookup"><span data-stu-id="a1328-153">When we change the app to use a queue, the web front end depends only on Web Apps and Storage, for a composite SLA of 99.8%.</span></span> <span data-ttu-id="a1328-154">(Обратите внимание, что очереди являются частью службы хранилища Azure, поэтому они будут включены в соглашение об уровне ОБСЛУЖИВАНИЯ, как хранилище больших двоичных объектов).</span><span class="sxs-lookup"><span data-stu-id="a1328-154">(Note that queues are part of the Azure storage service, so they are included in the same SLA as blob storage.)</span></span>

<span data-ttu-id="a1328-155">Если вам требуется даже лучше, чем 99.8%, можно создать две очереди в двух разных регионах.</span><span class="sxs-lookup"><span data-stu-id="a1328-155">If you need even better than 99.8%, you can create two queues in two different regions.</span></span> <span data-ttu-id="a1328-156">Назначьте один — как основной, а другая — сервер-получатель.</span><span class="sxs-lookup"><span data-stu-id="a1328-156">Designate one as the primary, and the other as the secondary.</span></span> <span data-ttu-id="a1328-157">В вашем приложении при сбое в дополнительную очередь Если основная очередь недоступна.</span><span class="sxs-lookup"><span data-stu-id="a1328-157">In your app, fail over to the secondary queue if the primary queue is not available.</span></span> <span data-ttu-id="a1328-158">Вероятность того, что оба недоступен в то же время очень мала.</span><span class="sxs-lookup"><span data-stu-id="a1328-158">The chance of both being unavailable at the same time is very small.</span></span>

## <a name="rate-leveling-and-independent-scaling"></a><span data-ttu-id="a1328-159">Выравнивание скорость и независимых масштабирование</span><span class="sxs-lookup"><span data-stu-id="a1328-159">Rate Leveling and Independent Scaling</span></span>

<span data-ttu-id="a1328-160">Очереди также полезны для объекта, называемого *интенсивность выравнивания* или *выравнивание нагрузки*.</span><span class="sxs-lookup"><span data-stu-id="a1328-160">Queues are also useful for something called *rate leveling* or *load leveling*.</span></span>

<span data-ttu-id="a1328-161">Веб-приложения часто являются восприимчивым к резкому увеличению трафика.</span><span class="sxs-lookup"><span data-stu-id="a1328-161">Web apps are often susceptible to sudden bursts in traffic.</span></span> <span data-ttu-id="a1328-162">При использовании автоматического масштабирования для автоматического добавления веб-серверов для обработки повышенной веб-трафик автоматическое масштабирование не можно достаточно быстро реагировать на внезапные пиковой нагрузки.</span><span class="sxs-lookup"><span data-stu-id="a1328-162">While you can use autoscaling to automatically add web servers to handle increased web traffic, autoscaling might not be able to react quickly enough to handle abrupt spikes in load.</span></span> <span data-ttu-id="a1328-163">Если веб-серверов можно перенаправить работу некоторых функций, они должны делать, записав сообщение в очередь, они могут обрабатывать больше трафика.</span><span class="sxs-lookup"><span data-stu-id="a1328-163">If the web servers can offload some of the work they have to do by writing a message to a queue, they can handle more traffic.</span></span> <span data-ttu-id="a1328-164">Серверная служба можно читать сообщения из очереди и обрабатывать их.</span><span class="sxs-lookup"><span data-stu-id="a1328-164">A backend service can then read messages from the queue and process them.</span></span> <span data-ttu-id="a1328-165">Глубина очереди будет разрастании или сжатии как входящая нагрузка меняется.</span><span class="sxs-lookup"><span data-stu-id="a1328-165">The depth of the queue will grow or shrink as the incoming load varies.</span></span>

<span data-ttu-id="a1328-166">С основную часть времени работы выгружаются серверную службу веб-уровень более легко может отвечать на внезапные всплески нагрузки трафика.</span><span class="sxs-lookup"><span data-stu-id="a1328-166">With much of its time-consuming work off-loaded to a backend service, the web tier can more easily respond to sudden spikes in traffic.</span></span> <span data-ttu-id="a1328-167">И сократить затраты, так как для любого заданного количества трафика могло быть обработано меньшее число веб-серверов.</span><span class="sxs-lookup"><span data-stu-id="a1328-167">And you save money because any given amount of traffic can be handled by fewer web servers.</span></span>

<span data-ttu-id="a1328-168">Можно масштабировать веб-уровня и серверной службой независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="a1328-168">You can scale the web tier and backend service independently.</span></span> <span data-ttu-id="a1328-169">Например может потребоваться три веб-сервера, но только один сервер обработка очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="a1328-169">For example, you might need three web servers but only one server processing queue messages.</span></span> <span data-ttu-id="a1328-170">Или, если вы используете задачу с большим объемом вычислений в фоновом режиме, может потребоваться несколько внутренних серверов.</span><span class="sxs-lookup"><span data-stu-id="a1328-170">Or if you're running a compute-intensive task in the background, you might need more backend servers.</span></span>

![](queue-centric-work-pattern/_static/image3.png)

<span data-ttu-id="a1328-171">Автоматическое масштабирование работает серверных служб, а также веб-уровня.</span><span class="sxs-lookup"><span data-stu-id="a1328-171">Autoscaling works with backend services as well as with the web tier.</span></span> <span data-ttu-id="a1328-172">Вы может масштабирования вверх и вниз число виртуальных машин, которые обрабатываются задач в очереди, в зависимости от использования ЦП виртуальных машин серверной части.</span><span class="sxs-lookup"><span data-stu-id="a1328-172">You can scale up or scale down the number of VMs that are processing the tasks in the queue, based on the CPU usage of the backend VMs.</span></span> <span data-ttu-id="a1328-173">Кроме того, можно автоматического масштабирования в зависимости от того, сколько элементов находятся в очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-173">Or, you can autoscale based on how many items are in a queue.</span></span> <span data-ttu-id="a1328-174">Например можно настроить Автомасштабирование, чтобы попытаться сохранить не более 10 элементов в очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-174">For example, you can tell autoscale to try to keep no more than 10 items in the queue.</span></span> <span data-ttu-id="a1328-175">Если очередь содержит более 10 элементов, автомасштабирования будет добавлять виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="a1328-175">If the queue has more than 10 items, autoscale will add VMs.</span></span> <span data-ttu-id="a1328-176">Когда они Догнать автомасштабирования завершит дополнительных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="a1328-176">When they catch up, autoscale will tear down the extra VMs.</span></span>

## <a name="adding-queues-to-the-fix-it-application"></a><span data-ttu-id="a1328-177">Добавление для исправления ставит его в очередь приложения</span><span class="sxs-lookup"><span data-stu-id="a1328-177">Adding Queues to the Fix It Application</span></span>

<span data-ttu-id="a1328-178">Чтобы реализовать шаблон очереди, необходимо внести два изменения в приложение ее исправить.</span><span class="sxs-lookup"><span data-stu-id="a1328-178">To implement the queue pattern, we need to make two changes to the Fix It app.</span></span>

- <span data-ttu-id="a1328-179">Когда пользователь отправляет новую задачу ее исправить, поместите задачи в очереди, вместо записи в базу данных.</span><span class="sxs-lookup"><span data-stu-id="a1328-179">When a user submits a new Fix It task, put the task in the queue, instead of writing it to the database.</span></span>
- <span data-ttu-id="a1328-180">Создайте серверную службу, обрабатывающего сообщения в очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-180">Create a back-end service that processes messages in the queue.</span></span>

<span data-ttu-id="a1328-181">Для очереди, мы будем использовать [службы хранилища очередей Azure](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span><span class="sxs-lookup"><span data-stu-id="a1328-181">For the queue, we'll use the [Azure Queue Storage Service](https://www.windowsazure.com/develop/net/how-to-guides/queue-service/).</span></span> <span data-ttu-id="a1328-182">Другой вариант — использовать [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="a1328-182">Another option is to use [Azure Service Bus](https://docs.microsoft.com/azure/service-bus/).</span></span>

<span data-ttu-id="a1328-183">Чтобы решить, какие службы очередей для использования, рассмотрим, как ваше приложение должно отправлять и получать сообщения в очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-183">To decide which queue service to use, consider how your app needs to send and receive the messages in the queue:</span></span>

- <span data-ttu-id="a1328-184">При наличии сотрудничающих производители и конкурирующих клиентов, рассмотрите возможность использования службы хранилища очередей Azure.</span><span class="sxs-lookup"><span data-stu-id="a1328-184">If you have cooperating producers and competing consumers, consider using Azure Queue Storage Service.</span></span> <span data-ttu-id="a1328-185">«Cooperating производители» означает, что несколько процессов добавляются к очереди сообщений.</span><span class="sxs-lookup"><span data-stu-id="a1328-185">"Cooperating producers" means multiple processes are adding messages to a queue.</span></span> <span data-ttu-id="a1328-186">«Конкурирующих клиентов» означает несколько процессов извлекать сообщения из очереди, для их обработки, но любого заданного сообщения могут обрабатываться только один «потребитель».</span><span class="sxs-lookup"><span data-stu-id="a1328-186">"Competing consumers" means multiple processes are pulling messages off the queue to process them, but any given message can only be processed by one "consumer."</span></span> <span data-ttu-id="a1328-187">Если требуется более высокая пропускная способность, чем можно получить с помощью одной очереди, используйте дополнительные очереди и (или) дополнительные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="a1328-187">If you need more throughput than you can get with a single queue, use additional queues and/or additional storage accounts.</span></span>
- <span data-ttu-id="a1328-188">Если вам требуется [модели публикации и подписки](http://en.wikipedia.org/wiki/Publish/subscribe), рассмотрите возможность использования очереди шины обслуживания Azure.</span><span class="sxs-lookup"><span data-stu-id="a1328-188">If you need a [publish/subscribe model](http://en.wikipedia.org/wiki/Publish/subscribe), consider using Azure Service Bus Queues.</span></span>

<span data-ttu-id="a1328-189">Приложение исправить соответствует сотрудничающих производители и конкурирующих потребителей модели.</span><span class="sxs-lookup"><span data-stu-id="a1328-189">The Fix It app fits the cooperating producers and competing consumers model.</span></span>

<span data-ttu-id="a1328-190">Другой аспект — доступность приложения.</span><span class="sxs-lookup"><span data-stu-id="a1328-190">Another consideration is application availability.</span></span> <span data-ttu-id="a1328-191">Службы хранения очередей является частью той же службе, мы используем для хранилища больших двоичных объектов, поэтому его использование не оказывает влияния на СОГЛАШЕНИИ.</span><span class="sxs-lookup"><span data-stu-id="a1328-191">The Queue Storage Service is part of the same service that we're using for blob storage, so using it has no effect on our SLA.</span></span> <span data-ttu-id="a1328-192">Azure Service Bus является отдельной службе с свои собственные соглашения об уровне ОБСЛУЖИВАНИЯ.</span><span class="sxs-lookup"><span data-stu-id="a1328-192">Azure Service Bus is a separate service with its own SLA.</span></span> <span data-ttu-id="a1328-193">При использовании очереди Service Bus, придется учитывать дополнительный процент соглашения об уровне ОБСЛУЖИВАНИЯ и СОГЛАШЕНИИ составного будет ниже.</span><span class="sxs-lookup"><span data-stu-id="a1328-193">If we used Service Bus Queues, we would have to factor in an additional SLA percentage, and our composite SLA would be lower.</span></span> <span data-ttu-id="a1328-194">При выборе службы очередей, убедитесь, что вы понимаете влияние по своему выбору на доступность приложения.</span><span class="sxs-lookup"><span data-stu-id="a1328-194">When you're choosing a queue service, make sure you understand the impact of your choice on application availability.</span></span> <span data-ttu-id="a1328-195">Дополнительные сведения см. в разделе [ресурсов](#resources) раздела.</span><span class="sxs-lookup"><span data-stu-id="a1328-195">For more information, see the [Resources](#resources) section.</span></span>

## <a name="creating-queue-messages"></a><span data-ttu-id="a1328-196">Создание очереди сообщений</span><span class="sxs-lookup"><span data-stu-id="a1328-196">Creating Queue Messages</span></span>

<span data-ttu-id="a1328-197">Чтобы помещается в очередь задачу ее исправить, веб-интерфейса выполняет следующие действия:</span><span class="sxs-lookup"><span data-stu-id="a1328-197">To put a Fix It task on the queue, the web front end performs the following steps:</span></span>

1. <span data-ttu-id="a1328-198">Создание [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) экземпляра.</span><span class="sxs-lookup"><span data-stu-id="a1328-198">Create a [CloudQueueClient](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueueclient.aspx) instance.</span></span> <span data-ttu-id="a1328-199">`CloudQueueClient` Экземпляра используется для выполнения запросов к службе очередей.</span><span class="sxs-lookup"><span data-stu-id="a1328-199">The `CloudQueueClient` instance is used to execute requests against the Queue Service.</span></span>
2. <span data-ttu-id="a1328-200">Создайте очередь, если он еще не существует.</span><span class="sxs-lookup"><span data-stu-id="a1328-200">Create the queue, if it doesn't exist yet.</span></span>
3. <span data-ttu-id="a1328-201">Сериализация задачи ее исправить.</span><span class="sxs-lookup"><span data-stu-id="a1328-201">Serialize the Fix It task.</span></span>
4. <span data-ttu-id="a1328-202">Вызовите [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) поместить сообщение в очередь.</span><span class="sxs-lookup"><span data-stu-id="a1328-202">Call [CloudQueue.AddMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.addmessageasync.aspx) to put the message onto the queue.</span></span>

<span data-ttu-id="a1328-203">Мы сделаем это в конструкторе действий и `SendMessageAsync` новый метод `FixItQueueManager` класса.</span><span class="sxs-lookup"><span data-stu-id="a1328-203">We'll do this work in the constructor and `SendMessageAsync` method of a new `FixItQueueManager` class.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample1.cs?highlight=11-12,16,18-25)]

<span data-ttu-id="a1328-204">Здесь мы используем [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) библиотеки для сериализации решить в формат JSON.</span><span class="sxs-lookup"><span data-stu-id="a1328-204">Here we are using the [Json.NET](https://github.com/JamesNK/Newtonsoft.Json) library to serialize the fixit to JSON format.</span></span> <span data-ttu-id="a1328-205">Можно использовать независимо от выбранного подхода сериализации вы предпочитаете.</span><span class="sxs-lookup"><span data-stu-id="a1328-205">You can use whatever serialization approach you prefer.</span></span> <span data-ttu-id="a1328-206">JSON имеет ряд преимуществ удобной для чтения, не менее подробной, чем XML.</span><span class="sxs-lookup"><span data-stu-id="a1328-206">JSON has the advantage of being human-readable, while being less verbose than XML.</span></span>

<span data-ttu-id="a1328-207">Производственного качества кода бы добавить логику обработки ошибок, приостанавливается, если база данных становится недоступным, обрабатывать восстановления более аккуратно, создать очередь при запуске приложения и управление»[подозрительных» сообщений](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span><span class="sxs-lookup"><span data-stu-id="a1328-207">Production-quality code would add error handling logic, pause if the database became unavailable, handle recovery more cleanly, create the queue on application start-up, and manage "[poison" messages](https://msdn.microsoft.com/library/ms789028(v=vs.110).aspx).</span></span> <span data-ttu-id="a1328-208">(Сообщение считается подозрительным сообщение, которое не может обработать по некоторым причинам.</span><span class="sxs-lookup"><span data-stu-id="a1328-208">(A poison message is a message that cannot be processed for some reason.</span></span> <span data-ttu-id="a1328-209">Вы не хотите подозрительных сообщений и размещения в очереди, где рабочая роль постоянно попытается их обработки, сбой, повторите попытку, сбой и т. д.)</span><span class="sxs-lookup"><span data-stu-id="a1328-209">You don't want poison messages to sit in the queue, where the worker role will continually try to process them, fail, try again, fail, and so on.)</span></span>

<span data-ttu-id="a1328-210">В интерфейсном приложении MVC необходимо обновить код, который создает новую задачу.</span><span class="sxs-lookup"><span data-stu-id="a1328-210">In the front-end MVC application, we need to update the code that creates a new task.</span></span> <span data-ttu-id="a1328-211">Вместо того, чтобы задача в репозиторий, вызовите `SendMessageAsync` в приведенном выше примере.</span><span class="sxs-lookup"><span data-stu-id="a1328-211">Instead of putting the task into the repository, call the `SendMessageAsync` method shown above.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample2.cs?highlight=10)]

## <a name="processing-queue-messages"></a><span data-ttu-id="a1328-212">Обработка сообщений в очереди</span><span class="sxs-lookup"><span data-stu-id="a1328-212">Processing Queue Messages</span></span>

<span data-ttu-id="a1328-213">Для обработки сообщений в очереди, мы создадим серверной службы.</span><span class="sxs-lookup"><span data-stu-id="a1328-213">To process messages in the queue, we'll create a backend service.</span></span> <span data-ttu-id="a1328-214">Серверная служба будет выполняться бесконечный цикл, который выполняет следующие действия:</span><span class="sxs-lookup"><span data-stu-id="a1328-214">The backend service will run an infinite loop that performs the following steps:</span></span>

1. <span data-ttu-id="a1328-215">Получение следующего сообщения из очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-215">Get the next message from the queue.</span></span>
2. <span data-ttu-id="a1328-216">Десериализовать сообщение задаче ее исправить.</span><span class="sxs-lookup"><span data-stu-id="a1328-216">Deserialize the message to a Fix It task.</span></span>
3. <span data-ttu-id="a1328-217">Задача исправить записи в базу данных.</span><span class="sxs-lookup"><span data-stu-id="a1328-217">Write the Fix It task to the database.</span></span>

<span data-ttu-id="a1328-218">Чтобы разместить во внутреннюю службу, мы создадим облачные службы, содержащий *рабочей роли*.</span><span class="sxs-lookup"><span data-stu-id="a1328-218">To host the backend service, we'll create an Azure Cloud Service that contains a *worker role*.</span></span> <span data-ttu-id="a1328-219">Рабочая роль состоит из одного или нескольких виртуальных машин, которые могут выполнять обработку серверной части.</span><span class="sxs-lookup"><span data-stu-id="a1328-219">A worker role consists of one or more VMs that can do backend processing.</span></span> <span data-ttu-id="a1328-220">Код, выполняемый в этих виртуальных машинах будет получать сообщения из очереди, как только они станут доступны.</span><span class="sxs-lookup"><span data-stu-id="a1328-220">The code that runs in these VMs will pull messages from the queue as they become available.</span></span> <span data-ttu-id="a1328-221">Для каждого сообщения мы десериализации полезные данные JSON и записи экземпляра сущности исправить его задача в базу данных с помощью одного репозитория, который мы использовали ранее в веб-уровня.</span><span class="sxs-lookup"><span data-stu-id="a1328-221">For each message, we'll deserialize the JSON payload and write an instance of the Fix It Task entity to the database, using the same repository that we used earlier in the web tier.</span></span>

<span data-ttu-id="a1328-222">Ниже показано, как добавить рабочий проект роли решение, которое содержит стандартные веб-проекта.</span><span class="sxs-lookup"><span data-stu-id="a1328-222">The following steps show how to add a worker role project to a solution that has a standard web project.</span></span> <span data-ttu-id="a1328-223">Эти шаги уже были выполнены в ее исправить проект, который можно загрузить.</span><span class="sxs-lookup"><span data-stu-id="a1328-223">These steps have already been done in the Fix It project that you can download.</span></span>

<span data-ttu-id="a1328-224">Сначала добавьте в решение Visual Studio проекта облачной службы.</span><span class="sxs-lookup"><span data-stu-id="a1328-224">First add a Cloud Service project to the Visual Studio solution.</span></span> <span data-ttu-id="a1328-225">Щелкните правой кнопкой мыши решение и выберите **добавить**, затем **новый проект**.</span><span class="sxs-lookup"><span data-stu-id="a1328-225">Right-click the solution and select **Add**, then **New Project**.</span></span> <span data-ttu-id="a1328-226">В левой области разверните **Visual C#** и выберите **облака**.</span><span class="sxs-lookup"><span data-stu-id="a1328-226">In the left pane, expand **Visual C#** and select **Cloud**.</span></span>

[![](queue-centric-work-pattern/_static/image5.png)](queue-centric-work-pattern/_static/image4.png)

<span data-ttu-id="a1328-227">В **новая облачная служба Azure** диалогового окна разверните **Visual C#** узел на левой панели.</span><span class="sxs-lookup"><span data-stu-id="a1328-227">In the **New Azure Cloud Service** dialog, expand the **Visual C#** node on the left pane.</span></span> <span data-ttu-id="a1328-228">Выберите **рабочей роли** и щелкните значок со стрелкой вправо.</span><span class="sxs-lookup"><span data-stu-id="a1328-228">Select **Worker Role** and click the right-arrow icon.</span></span>

![](queue-centric-work-pattern/_static/image6.png)

<span data-ttu-id="a1328-229">(Обратите внимание, что можно также добавить *веб-роли*.</span><span class="sxs-lookup"><span data-stu-id="a1328-229">(Notice that you can also add a *web role*.</span></span> <span data-ttu-id="a1328-230">Нам удалось запустить ее исправить переднего плана в той же облачной службе вместо ее выполнения веб-сайта в Azure.</span><span class="sxs-lookup"><span data-stu-id="a1328-230">We could run the Fix It front-end in the same Cloud Service instead of running it in an Azure Web Site.</span></span> <span data-ttu-id="a1328-231">Имеет некоторые преимущества в Облегчение координации соединения между внешними и серверной части.</span><span class="sxs-lookup"><span data-stu-id="a1328-231">That has some advantages in making connections between front-end and back-end easier to coordinate.</span></span> <span data-ttu-id="a1328-232">Однако для простоты в этой демонстрации мы сохранения внешнего интерфейса в веб-приложение службы приложений Azure и только под управлением серверной части в облачной службе.)</span><span class="sxs-lookup"><span data-stu-id="a1328-232">However, to keep this demo simple, we're keeping the front-end in an Azure App Service Web App and only running the back-end in a Cloud Service.)</span></span>

<span data-ttu-id="a1328-233">Имя по умолчанию назначается рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="a1328-233">A default name is assigned to the worker role.</span></span> <span data-ttu-id="a1328-234">Чтобы изменить имя, наведите указатель мыши рабочей роли в правой области, а затем щелкните значок карандаша.</span><span class="sxs-lookup"><span data-stu-id="a1328-234">To change the name, hover the mouse over the worker role in the right pane, then click the pencil icon.</span></span>

![](queue-centric-work-pattern/_static/image7.png)

<span data-ttu-id="a1328-235">Нажмите кнопку **ОК** завершения диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="a1328-235">Click **OK** to complete the dialog.</span></span> <span data-ttu-id="a1328-236">Это добавляет два проекта в решение Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a1328-236">This adds two projects to the Visual Studio solution.</span></span>

- <span data-ttu-id="a1328-237">проект Azure, который определяет облачной службы, включая сведения о конфигурации.</span><span class="sxs-lookup"><span data-stu-id="a1328-237">an Azure project that defines the cloud service, including configuration information.</span></span>
- <span data-ttu-id="a1328-238">Проект рабочей роли, который определяет рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="a1328-238">A worker role project that defines the worker role.</span></span>

![](queue-centric-work-pattern/_static/image8.png)

<span data-ttu-id="a1328-239">Дополнительные сведения см. в разделе [Создание проекта Azure с помощью Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span><span class="sxs-lookup"><span data-stu-id="a1328-239">For more information, see [Creating an Azure Project with Visual Studio.](https://msdn.microsoft.com/library/windowsazure/ee405487.aspx)</span></span>

<span data-ttu-id="a1328-240">В рабочей роли, мы извлекать сообщения путем вызова `ProcessMessageAsync` метод `FixItQueueManager` класс, который мы видели ранее.</span><span class="sxs-lookup"><span data-stu-id="a1328-240">Inside the worker role, we poll for messages by calling the `ProcessMessageAsync` method of the `FixItQueueManager` class that we saw earlier.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample3.cs?highlight=25)]

<span data-ttu-id="a1328-241">`ProcessMessagesAsync` Метод проверяет, существует ли ожидания сообщения.</span><span class="sxs-lookup"><span data-stu-id="a1328-241">The `ProcessMessagesAsync` method checks if there's a message waiting.</span></span> <span data-ttu-id="a1328-242">Если таковой имеется, он выполняет десериализацию сообщений в `FixItTask` сущности и сохраняет объект в базе данных.</span><span class="sxs-lookup"><span data-stu-id="a1328-242">If there is one, it deserializes the message into a `FixItTask` entity and saves the entity in the database.</span></span> <span data-ttu-id="a1328-243">Он циклов, пока очередь пуста.</span><span class="sxs-lookup"><span data-stu-id="a1328-243">It loops until the queue is empty.</span></span>

[!code-csharp[Main](queue-centric-work-pattern/samples/sample4.cs)]

<span data-ttu-id="a1328-244">Опрос очереди сообщений небольшой транзакции влечет за собой издержки, поэтому, когда нет сообщений, ожидающих обработки, рабочей роли `RunAsync` метод ожидает в течение секунды опроса повторно путем вызова `Task.Delay(1000)`.</span><span class="sxs-lookup"><span data-stu-id="a1328-244">Polling for queue messages incurs a small transaction charge, so when there's no message waiting to be processed, the worker role's `RunAsync` method waits a second before polling again by calling `Task.Delay(1000)`.</span></span>

<span data-ttu-id="a1328-245">В проекте веб-Добавление асинхронного кода можно автоматически повысит производительность, так как службы IIS управляют ограниченный потоков.</span><span class="sxs-lookup"><span data-stu-id="a1328-245">In a web project, adding asynchronous code can automatically improve performance because IIS manages a limited thread pool.</span></span> <span data-ttu-id="a1328-246">Это не так, в проект рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="a1328-246">That is not the case in a worker role project.</span></span> <span data-ttu-id="a1328-247">Для повышения масштабируемости рабочей роли, можно написать код, многопоточные или использовать асинхронный код для реализации [параллельного программирования](https://msdn.microsoft.com/library/ff963553.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1328-247">To improve scalability of the worker role, you can write multi-threaded code or use asynchronous code to implement [parallel programming](https://msdn.microsoft.com/library/ff963553.aspx).</span></span> <span data-ttu-id="a1328-248">Образец не реализует параллельного программирования, но также показано, как сделать асинхронный код, чтобы реализовать параллельного программирования.</span><span class="sxs-lookup"><span data-stu-id="a1328-248">The sample doesn't implement parallel programming but shows how to make the code asynchronous so you can implement parallel programming.</span></span>

## <a name="summary"></a><span data-ttu-id="a1328-249">Сводка</span><span class="sxs-lookup"><span data-stu-id="a1328-249">Summary</span></span>

<span data-ttu-id="a1328-250">В этой главе вы знаете, как повысить скорость реагирования приложения, надежность и масштабируемость посредством реализации шаблона ориентированное очереди рабочих.</span><span class="sxs-lookup"><span data-stu-id="a1328-250">In this chapter you've seen how to improve application responsiveness, reliability, and scalability by implementing the queue-centric work pattern.</span></span>

<span data-ttu-id="a1328-251">Это последний из 13 шаблоны, описанные в этом электронная книга, но конечно существуют другие шаблоны и рекомендации, которые помогут вам создавать приложения успешно облака.</span><span class="sxs-lookup"><span data-stu-id="a1328-251">This is the last of the 13 patterns covered in this e-book, but there are of course many other patterns and practices that can help you build successful cloud apps.</span></span> <span data-ttu-id="a1328-252">[Последней главе](more-patterns-and-guidance.md) ссылки на ресурсы разделов, которые еще не были описаны в эти шаблоны 13.</span><span class="sxs-lookup"><span data-stu-id="a1328-252">The [final chapter](more-patterns-and-guidance.md) provides links to resources for topics that haven't been covered in these 13 patterns.</span></span>

<a id="resources"></a>
## <a name="resources"></a><span data-ttu-id="a1328-253">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="a1328-253">Resources</span></span>

<span data-ttu-id="a1328-254">Дополнительные сведения об очередях см. следующие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="a1328-254">For more information about queues, see the following resources.</span></span>

<span data-ttu-id="a1328-255">Документация:</span><span class="sxs-lookup"><span data-stu-id="a1328-255">Documentation:</span></span>

- <span data-ttu-id="a1328-256">[Microsoft Azure хранилища очередей, часть 1: Приступая к работе](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span><span class="sxs-lookup"><span data-stu-id="a1328-256">[Microsoft Azure Storage Queues Part 1: Getting Started](http://justazure.com/microsoft-azure-storage-queues-part-1-getting-started/).</span></span> <span data-ttu-id="a1328-257">Статьи по Schacherl латинского.</span><span class="sxs-lookup"><span data-stu-id="a1328-257">Article by Roman Schacherl.</span></span>
- <span data-ttu-id="a1328-258">[Выполнение фоновых задач](https://msdn.microsoft.com/library/ff803365.aspx), главе 5 [перемещение приложения в облако, 3-е издание](https://msdn.microsoft.com/library/ff728592.aspx) из шаблонов и методов Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a1328-258">[Executing Background Tasks](https://msdn.microsoft.com/library/ff803365.aspx), chapter 5 of [Moving Applications to the Cloud, 3rd Edition](https://msdn.microsoft.com/library/ff728592.aspx) from Microsoft Patterns and Practices.</span></span> <span data-ttu-id="a1328-259">(В частности, раздел [«С помощью очереди хранилища Azure»](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span><span class="sxs-lookup"><span data-stu-id="a1328-259">(In particular, the section ["Using Azure Storage Queues"](https://msdn.microsoft.com/library/ff803365.aspx#sec7).)</span></span>
- <span data-ttu-id="a1328-260">[Советы и рекомендации по достижению максимальной масштабируемости и экономической эффективности обмена сообщениями решения на основе очередей на платформе Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1328-260">[Best Practices for Maximizing Scalability and Cost Effectiveness of Queue-Based Messaging Solutions on Azure](https://msdn.microsoft.com/library/windowsazure/hh697709.aspx).</span></span> <span data-ttu-id="a1328-261">Технический документ по Валерий Мизонов.</span><span class="sxs-lookup"><span data-stu-id="a1328-261">White paper by Valery Mizonov.</span></span>
- <span data-ttu-id="a1328-262">[Сравнение очередей Azure и очереди Service Bus](https://msdn.microsoft.com/magazine/jj159884.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1328-262">[Comparing Azure Queues and Service Bus Queues](https://msdn.microsoft.com/magazine/jj159884.aspx).</span></span> <span data-ttu-id="a1328-263">MSDN Magazine, также приводятся дополнительные сведения, которые могут помочь выбрать службы очереди.</span><span class="sxs-lookup"><span data-stu-id="a1328-263">MSDN Magazine article, provides additional information that can help you choose which queue service to use.</span></span> <span data-ttu-id="a1328-264">Статья указывается, что Service Bus зависит ACS для проверки подлинности, это означает, что SB очередям, будут недоступны при недоступности ACS.</span><span class="sxs-lookup"><span data-stu-id="a1328-264">The article mentions that Service Bus is dependent on ACS for authentication, which means your SB queues would be unavailable when ACS is unavailable.</span></span> <span data-ttu-id="a1328-265">Тем не менее, так как статья была написана, SB был изменен на позволяют использовать [маркеры SAS](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) вместо ACS.</span><span class="sxs-lookup"><span data-stu-id="a1328-265">However, since the article was written, SB was changed to enable you to use [SAS tokens](https://msdn.microsoft.com/library/windowsazure/dn170477.aspx) as an alternative to ACS.</span></span>
- <span data-ttu-id="a1328-266">[Шаблоны и методики - руководство по Azure Майкрософт](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="a1328-266">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="a1328-267">См. учебник для начинающих асинхронный обмен сообщениями, шаблон каналы и фильтры, шаблон компенсирующие транзакции, шаблон конкурирующих клиентов, шаблон CQRS.</span><span class="sxs-lookup"><span data-stu-id="a1328-267">See Asynchronous Messaging primer, Pipes and Filters pattern, Compensating Transaction pattern, Competing Consumers pattern, CQRS pattern.</span></span>
- <span data-ttu-id="a1328-268">[Пути CQRS](https://msdn.microsoft.com/library/jj554200).</span><span class="sxs-lookup"><span data-stu-id="a1328-268">[CQRS Journey](https://msdn.microsoft.com/library/jj554200).</span></span> <span data-ttu-id="a1328-269">Электронная книга о CQRS, шаблонов и методов Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a1328-269">E-book about CQRS by Microsoft Patterns and Practices.</span></span>

<span data-ttu-id="a1328-270">Видео:</span><span class="sxs-lookup"><span data-stu-id="a1328-270">Video:</span></span>

- <span data-ttu-id="a1328-271">[Отказоустойчивость: Построение масштабируемых, надежных облачные службы](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="a1328-271">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="a1328-272">Серия видеоматериалов девять частей, Ульрих Хоманн, Marc Mercuri и Марк Симмс.</span><span class="sxs-lookup"><span data-stu-id="a1328-272">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="a1328-273">Представляет высокоуровневых концепциях и принципов архитектуры в виде очень доступна и интересные истории, полученными в результате Advisory Team Microsoft клиентов (CAT) опыт работы с фактических клиентов.</span><span class="sxs-lookup"><span data-stu-id="a1328-273">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="a1328-274">Основные сведения о службе хранилища Azure и очереди см. серии 5, начиная с 35:13.</span><span class="sxs-lookup"><span data-stu-id="a1328-274">For an introduction to the Azure Storage service and queues, see episode 5 starting at 35:13.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a1328-275">[Назад](distributed-caching.md)
> [Вперед](more-patterns-and-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="a1328-275">[Previous](distributed-caching.md)
[Next](more-patterns-and-guidance.md)</span></span>
