---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-partitioning-strategies
title: (Создание реальных облачных приложений в Azure) стратегии секционирования данных | Документы Microsoft
author: MikeWasson
description: Построение реального мира облачными приложениями с помощью Azure электронная книга основан на разработанный Скотт Гатри презентации. Объясняет, 13 шаблоны и рекомендации, которые он может...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/12/2014
ms.topic: article
ms.assetid: 513837a7-cfea-4568-a4e9-1f5901245d24
ms.technology: ''
ms.prod: .net-framework
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/data-partitioning-strategies
msc.type: authoredcontent
ms.openlocfilehash: 9ff7f37a03d8d3dfab50e8007a6645bb0d88f453
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30871354"
---
<a name="data-partitioning-strategies-building-real-world-cloud-apps-with-azure"></a>(Создание реальных облачных приложений в Azure) стратегии секционирования данных
====================
по [Mike Wasson](https://github.com/MikeWasson), [Рик Андерсон](https://github.com/Rick-Anderson), [Tom Dykstra](https://github.com/tdykstra)

[Загрузка решение проект](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) или [Загрузите электронную](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)

> **Построение реального мира облачными приложениями с помощью Azure** электронная книга основана на представления, разработанный Скотт Гатри. Объясняются 13 шаблоны и рекомендации, которые помогут вам быть успешной разработки веб-приложений для облака. Сведения о последовательности см. в разделе [первой главы](introduction.md).


Ранее мы узнали, как просто можно масштабировать веб-уровня для облачного приложения, добавляя и удаляя веб-серверов. Но если они все встретились то же хранилище данных, перемещает узким местом приложения из внешней сети на серверной стороне и уровень данных является самый сложный для масштабирования. В этой главе мы рассмотрим как сделать уровень данных, масштабируемых, секционирование данных на несколько реляционных баз данных или путем объединения с другими параметрами хранилища данных реляционной базы данных хранилища.

Настройка схемы секционирования лучше всего подходит готово заранее по той же причине, приведенные выше: очень сложно изменить стратегии хранения данных, после приложения в рабочей среде. Если вы считаете жестких заранее о различных подходах, позволит избежать «Twitter немного» Если приложение аварийно завершает работу или выходит из строя в течение долгого времени при реорганизации данных приложения и код доступа к данным.

## <a name="the-three-vs-of-data-storage"></a>Три Vs хранилища данных

Чтобы определить, какой стратегии секционирования и его необходимо, рассмотрим три вопросы о данных.

- Тома — объем данных будет в конечном счете хранения? Несколько гигабайт? Несколько сотен гигабайтов? Терабайт? Петабайт?
- Скорости — Какова скорость, с которой будет увеличиваться данных? Это внутренняя приложение, которое не создавать большой объем данных? Внешние приложения, которое клиенты будут отправка, изображений и видео в?
- Различные — какой тип данных, будет хранить? Реляционные и изображений, пары "ключ значение", социальных диаграмм?

Если вы считаете, что вы собираетесь с большим числом тома, скорости или различных, необходимо учитывать, какого рода схему секционирования лучше всего будет включить приложения масштабировать эффективно и рационально увеличивается, и чтобы не столкнуться выявления узких мест.

По сути, существует три подхода к секционирования:

- Вертикальное секционирование
- Горизонтальное секционирование
- Гибридное секционирование

## <a name="vertical-partitioning"></a>Вертикальное секционирование

Вертикальная portioning аналогичен разделить таблицу по столбцам: один набор столбцов перехода в одном хранилище данных, а другой набор столбцов, переходит в другое хранилище данных.

Например предположим, что мое приложение хранит данные о людях, включая изображения:

![Таблицы данных](data-partitioning-strategies/_static/image1.png)

Когда представления данных в виде таблицы и посмотрите на разные данные, можно видеть, что три столбца слева строковые данные, которые можно эффективно хранить реляционная база данных, пока два столбца справа, по существу байтовые массивы c Домашний из файлов изображений. Существует возможность хранения данных файла изображения в реляционной базе данных, и многие сделать это, поскольку они не нужно сохранять данные в файловой системе. Нет файловой системы, может хранить необходимые объемов данных или не можете управлять отдельной резервной копии и восстановления системы. Этот способ подходит для локальных баз данных, для небольших объемов данных в базах данных в облаке. В локальной среде может быть просто предоставим заниматься все, что администратор базы данных.

Но в базе данных облака, — относительно дорогая операция хранилища и слишком большое количество изображений может уменьшить размер базы данных выходить за пределы, в которых оно может работать эффективно. Секционирование данных по вертикали, что означает, что выбрать наиболее подходящий хранилища данных для каждого столбца в таблице данных, можно решить эти проблемы. Что может лучше подходят для этого примера является помещение строковые данные в реляционную базу данных и изображений в хранилище больших двоичных объектов.

![Вертикальное секционирование таблицы данных](data-partitioning-strategies/_static/image2.png)

Хранение изображений в хранилище больших двоичных объектов вместо базы данных является более удобным в облаке, чем в локальной среде, так как не нужно волноваться по поводу настройки файловых серверов и управлении резервного копирования и восстановления данных, хранящихся вне реляционной базы данных: все который будет обработана автоматически службой хранилища BLOB-объектов.

Этот подход секционирования была реализована в приложении исправить, и мы рассмотрим код для этого в [главе хранилища больших двоичных объектов](unstructured-blob-storage.md). Без этого схему секционирования и при условии, что размер образа среднее 3 мегабайт приложение исправить только будет возможность хранения задач около 40 000 до обращения максимальный размер базы данных 150 ГБ. После удаления изображений, базы данных можно хранить в 10 раз больше задач; Вы можете перейти гораздо больше времени, до того, как можно подумать о реализации горизонтальной схемы секционирования. А как масштабируются приложения, расходы медленнее, поскольку большая часть ваши потребности в хранении поступают в очень недорогим хранилища больших двоичных объектов.

## <a name="horizontal-partitioning-sharding"></a>Горизонтальное секционирование (сегментирования)

Горизонтальная portioning аналогичен разбиения по строкам таблицы: один набор строк перехода в одном хранилище данных, а другой набор строк, переходит в другое хранилище данных.

Учитывая тот же набор данных, другой вариант будет хранить разные диапазоны имен клиентов в разных базах данных.

![Горизонтально секционированные таблицы данных](data-partitioning-strategies/_static/image3.png)

Необходимо быть очень осторожными свою схему сегментирования, чтобы убедиться в том, во избежание гиперобъекты равномерного распределения данных. Этот простой пример, первой букве фамилии не удовлетворить это требование, поскольку многие имеют фамилии, начинающиеся с определенных распространенных символов. Ограничения на размер таблицы будет достигнут раньше, чем можно ожидать, так как некоторые базы данных будет получена очень большой, хотя большинство будет оставаться небольшой.

Вниз часть горизонтального секционирования —, что бывает трудно запросы для всех данных. В этом примере запрос бы рисования из до 26 различных баз данных, чтобы получить все данные, сохраненные приложением.

## <a name="hybrid-partitioning"></a>Гибридное секционирование

Можно объединять вертикальное и горизонтальное секционирование. Например в этом примере можно изображения хранятся в хранилище больших двоичных объектов и горизонтальное секционирование данных строки.

![Секционированные гибридного таблицы данных](data-partitioning-strategies/_static/image4.png)

## <a name="partitioning-a-production-application"></a>Секционирование в рабочем приложении

Концептуально легко увидеть, как будет работать схему секционирования, но все схемы секционирования увеличения сложности кода и представляет много новых сложностей, которые имеют дело с. Если вы перемещаете изображения хранилища больших двоичных объектов, что делать, если служба хранилища не работает? Порядок обработки больших двоичных объектов безопасности? Что произойдет, если для хранения базы данных и больших двоичных объектов не сходятся? Если вы сегментирования, как будут обрабатываться запросы для всех баз данных?

Роста являются управляемыми до тех пор, пока для них планируется, перед тем как перейти в рабочую среду. Многие пользователи, которые не были выполнены, которые хотите они имели более поздней версии. В среднем нашей команды Customer Advisory Team (CAT) получает подает аварийный сигнал телефонные звонки примерно один раз в месяц с большими образом отключение которого приложения клиентов и они не были выполнены при планировании. И они говорят, что примерно так: «помощь! Я поместить все в одном хранилище данных, и в течение 45 дней я не останется свободного места на нем!» И если у вас много бизнес-логики, встроенные в способ доступа к хранилищу данных и у вас есть пользователи, использующие приложения, не самое время перейти в день, во время переноса. Мы получим проходит через herculean усилия для секционирования клиентов свои данные с помощью простой. Это очень интересно, так и очень пугающие и что-то не нужно участвует в Если этого можно избежать! Заранее думать об этом и его интеграции в приложение сделают работу намного проще, если приложение становится более поздней версии.

## <a name="summary"></a>Сводка

Действующие схему секционирования можно включить Облачное приложение для масштабирования до петабайт данных в облаке без узких мест. И нет необходимости заранее платить за машин большой или сложной инфраструктуры, например, при запуске приложения в центре обработки данных в локальной. В облаке вы можете последовательно добавлять емкость, как она необходима, и вы платите, только для настолько, насколько вы используете при использовании его.

В [следующей главе](unstructured-blob-storage.md) мы рассмотрим, как приложение исправить реализует вертикальное секционирование путем сохранения изображений в хранилище больших двоичных объектов.

## <a name="resources"></a>Ресурсы

Дополнительные сведения о стратегии секционирования см. следующие ресурсы.

Документация:

- [Советы и рекомендации по проектированию крупномасштабных служб в облачных служб Windows Azure](https://msdn.microsoft.com/library/windowsazure/jj717232.aspx). Технический документ, Марк Симмс и Майкл Томасси.
- [Шаблоны и методики - облачные шаблоны проектирования Майкрософт](https://msdn.microsoft.com/library/dn568099.aspx). См. руководство секционирование данных, шаблон сегментирования.

Видеоролики:

- [Отказоустойчивость: Построение масштабируемых, надежных облачные службы](https://channel9.msdn.com/Series/FailSafe). Девять выпусков, Ульрих Хоманн, Marc Mercuri и Марк Симмс. Представляет высокоуровневых концепциях и принципов архитектуры в виде очень доступна и интересные истории, полученными в результате Advisory Team Microsoft клиентов (CAT) опыт работы с фактических клиентов. В описании секционирования в серии 7.
- [Big построение: Уроки от клиентов Windows Azure — часть I](https://channel9.msdn.com/Events/Build/2012/3-029). Марк Симмс рассматриваются схемы секционирования, сегментирования стратегии, как реализовать сегментирования и федерации баз данных SQL, начиная с 19:49. Аналогично Безаварийность рядов, но переход в Дополнительные практические сведения.

Пример кода:

- [Основы облачных служб в Windows Azure](https://code.msdn.microsoft.com/Cloud-Service-Fundamentals-4ca72649). Образец приложения, который включает сегментированной базы данных. Описание реализации схемы сегментирования см. в разделе [DAL — сегментирования реляционной СУБД](https://blogs.msdn.com/b/windowsazure/archive/2013/09/05/dal-sharding-of-rdbms.aspx) в блоге Windows Azure.

> [!div class="step-by-step"]
> [Назад](data-storage-options.md)
> [Вперед](unstructured-blob-storage.md)
