---
uid: web-api/overview/data/using-web-api-with-entity-framework/part-6
title: Создание клиента JavaScript | Документы Microsoft
author: MikeWasson
description: ''
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/16/2014
ms.topic: article
ms.assetid: 20360326-b123-4b1e-abae-1d350edf4ce4
ms.technology: dotnet-webapi
ms.prod: .net-framework
msc.legacyurl: /web-api/overview/data/using-web-api-with-entity-framework/part-6
msc.type: authoredcontent
ms.openlocfilehash: 29d50e448e6d282c7db06b9d1946ac221347e1ea
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30879313"
---
<a name="create-the-javascript-client"></a>Создание клиента JavaScript
====================
по [Mike Wasson](https://github.com/MikeWasson)

[Загрузка завершенного проекта](https://github.com/MikeWasson/BookService)

В этом разделе вы создадите клиент для приложения, с помощью HTML, JavaScript и [Knockout.js](http://knockoutjs.com/) библиотеки. Мы создадим клиентское приложение выполняется на этапах:

- Отображение списка книг.
- Отображение сведений книги.
- Добавление новой книги.

Библиотека маскирования использует шаблон Model-View-ViewModel (MVVM):

- **Модель** серверные представление данных в бизнес-среде (в нашем случае книг и авторов).
- **Представление** является уровень представления (HTML).
- **Модель представления** представляет собой объект JavaScript, который содержит моделей. Модель представления — это абстракция код пользовательского интерфейса. Он не имеет сведений о представление HTML. Вместо этого он представляет абстрактные функции, представления, такие как &quot;список книг&quot;.

Представление данных привязан к модели представления. Обновления для модели представления автоматически отражаются в представлении. Модель представления также получает события из представления, например при нажатии кнопки.

![](part-6/_static/image1.png)

Этот подход упрощает изменение макета и пользовательского интерфейса приложения, может меняться привязок, не переписывая любой код. Например, можно показать список элементов, как `<ul>`, затем изменить его позже в таблицу.

## <a name="add-the-knockout-library"></a>Добавьте библиотеку маскирования

В Visual Studio из **средства** последовательно выберите пункты **диспетчер пакетов библиотеки**. Выберите **консоль диспетчера пакетов**. В окне консоли диспетчера пакетов введите следующую команду:

[!code-console[Main](part-6/samples/sample1.cmd)]

Эта команда добавляет файлы маскирования папку «скрипты».

## <a name="create-the-view-model"></a>Создание модели представления

Добавьте файл JavaScript с именем в файле app.js в папку «скрипты». (В обозревателе решений щелкните правой кнопкой мыши папку «скрипты», выберите **добавить**, а затем выберите **файл JavaScript**.) Вставьте следующий код:

[!code-javascript[Main](part-6/samples/sample2.js)]

В Knockout `observable` класс включает привязку данных. При изменении содержимого наблюдаемый объект, наблюдаемым уведомляет все элементы управления с привязкой к данным, чтобы они могли обновлять себя. ( `observableArray` Класс — это версия массива *наблюдаемый объект*.) Прежде всего нашей модели представления состоит из двух наблюдаемые объекты.

- `books` содержит список книг.
- `error` содержит сообщение об ошибке при сбое вызова AJAX.

`getAllBooks` Метод отправляет вызов AJAX, чтобы получить список книг. Затем он помещает результат в `books` массива.

`ko.applyBindings` Метод входит в состав библиотеки Knockout. Он принимает модели представления в качестве параметра, а также задает привязку данных.

## <a name="add-a-script-bundle"></a>Добавьте пакет скрипта

Объединение — это функция в ASP.NET 4.5, упрощающий для объединения или объединить несколько файлов в один файл. Объединение уменьшает количество запросов на сервер, который может увеличить время загрузки страницы.

Откройте файл приложения\_Start/BundleConfig.cs. Добавьте следующий код в метод RegisterBundles.

[!code-csharp[Main](part-6/samples/sample3.cs)]

> [!div class="step-by-step"]
> [Назад](part-5.md)
> [Вперед](part-7.md)
