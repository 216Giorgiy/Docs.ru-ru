---
uid: web-api/overview/security/external-authentication-services
title: Внешние службы проверки подлинности с помощью веб-API ASP.NET (C#) | Документы Microsoft
author: rmcmurray
description: Описывает использование внешние службы проверки подлинности в ASP.NET Web API.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2013
ms.topic: article
ms.assetid: 3bb8eb15-b518-44f5-a67d-a27e051aedc6
ms.technology: dotnet-webapi
ms.prod: .net-framework
msc.legacyurl: /web-api/overview/security/external-authentication-services
msc.type: authoredcontent
ms.openlocfilehash: 406a85db7055910cb7a4e15fec8ef68dff5a19dc
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30876271"
---
<a name="external-authentication-services-with-aspnet-web-api-c"></a><span data-ttu-id="5ec6e-103">Внешние службы проверки подлинности с помощью веб-API ASP.NET (C#)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-103">External Authentication Services with ASP.NET Web API (C#)</span></span>
====================
<span data-ttu-id="5ec6e-104">по [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-104">by [Robert McMurray](https://github.com/rmcmurray)</span></span>

<span data-ttu-id="5ec6e-105">Visual Studio 2013 и ASP.NET 4.5.1 разверните параметры безопасности для [приложений на одной странице](../../../single-page-application/index.md) (SPA) и [веб-API](../../index.md) службы интегрируются с внешние службы проверки подлинности, которые включают несколько OAuth или OpenID и социальные службы проверки подлинности: учетные записи Microsoft, Facebook, Twitter и Google.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-105">Visual Studio 2013 and ASP.NET 4.5.1 expand the security options for [Single Page Applications](../../../single-page-application/index.md) (SPA) and [Web API](../../index.md) services to integrate with external authentication services, which include several OAuth/OpenID and social media authentication services: Microsoft Accounts, Twitter, Facebook, and Google.</span></span>

### <a name="in-this-walkthrough"></a><span data-ttu-id="5ec6e-106">В этом пошаговом руководстве</span><span class="sxs-lookup"><span data-stu-id="5ec6e-106">In This Walkthrough</span></span>

- [<span data-ttu-id="5ec6e-107">Внешние службы проверки подлинности с помощью</span><span class="sxs-lookup"><span data-stu-id="5ec6e-107">Using External Authentication Services</span></span>](#USING)
- [<span data-ttu-id="5ec6e-108">Создание примера веб-приложения</span><span class="sxs-lookup"><span data-stu-id="5ec6e-108">Creating the Sample Web Application</span></span>](#SAMPLE)
- [<span data-ttu-id="5ec6e-109">Включение проверки подлинности Facebook</span><span class="sxs-lookup"><span data-stu-id="5ec6e-109">Enabling Facebook Authentication</span></span>](#FACEBOOK)
- [<span data-ttu-id="5ec6e-110">Включение проверки подлинности Google</span><span class="sxs-lookup"><span data-stu-id="5ec6e-110">Enabling Google Authentication</span></span>](#GOOGLE)
- [<span data-ttu-id="5ec6e-111">Включение проверки подлинности Майкрософт</span><span class="sxs-lookup"><span data-stu-id="5ec6e-111">Enabling Microsoft Authentication</span></span>](#MICROSOFT)
- [<span data-ttu-id="5ec6e-112">Включение проверки подлинности Twitter</span><span class="sxs-lookup"><span data-stu-id="5ec6e-112">Enabling Twitter Authentication</span></span>](#TWITTER)
- [<span data-ttu-id="5ec6e-113">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="5ec6e-113">Additional Information</span></span>](#MOREINFO)

    - [<span data-ttu-id="5ec6e-114">Объединение внешние службы проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="5ec6e-114">Combining External Authentication Services</span></span>](#COMBINE)
    - [<span data-ttu-id="5ec6e-115">Настройки IIS Express для использования полного доменного имени</span><span class="sxs-lookup"><span data-stu-id="5ec6e-115">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>](#FQDN)
    - [<span data-ttu-id="5ec6e-116">Как получить параметры приложения для проверки подлинности Майкрософт</span><span class="sxs-lookup"><span data-stu-id="5ec6e-116">How to Obtain your Application Settings for Microsoft Authentication</span></span>](#OBTAIN)
    - [<span data-ttu-id="5ec6e-117">Необязательно: Отключить регистрацию локального</span><span class="sxs-lookup"><span data-stu-id="5ec6e-117">Optional: Disable Local Registration</span></span>](#DISABLE)

### <a name="prerequisites"></a><span data-ttu-id="5ec6e-118">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="5ec6e-118">Prerequisites</span></span>

<span data-ttu-id="5ec6e-119">Чтобы выполнить примеры в этом пошаговом руководстве, необходимо иметь следующее:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-119">To follow the examples in this walkthrough, you need to have the following:</span></span>

- <span data-ttu-id="5ec6e-120">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="5ec6e-120">Visual Studio 2013</span></span>
- <span data-ttu-id="5ec6e-121">Хотя бы для одного из следующих служб внешней проверки подлинности учетной записи:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-121">An account for at least one of the following external authentication services:</span></span>

    - <span data-ttu-id="5ec6e-122">Учетная запись пользователя Google</span><span class="sxs-lookup"><span data-stu-id="5ec6e-122">A Google user account</span></span>
    - <span data-ttu-id="5ec6e-123">Учетная запись разработчика с идентификатором приложения и секретный ключ для одной из следующих служб проверки подлинности социальных сетей:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-123">A developer account with the application identifier and secret key for one of the following social media authentication services:</span></span>

        - <span data-ttu-id="5ec6e-124">Учетные записи Майкрософт ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span><span class="sxs-lookup"><span data-stu-id="5ec6e-124">Microsoft Accounts ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span></span>
        - <span data-ttu-id="5ec6e-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span><span class="sxs-lookup"><span data-stu-id="5ec6e-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span></span>
        - <span data-ttu-id="5ec6e-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span><span class="sxs-lookup"><span data-stu-id="5ec6e-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span></span>

<a id="USING"></a>
## <a name="using-external-authentication-services"></a><span data-ttu-id="5ec6e-127">Внешние службы проверки подлинности с помощью</span><span class="sxs-lookup"><span data-stu-id="5ec6e-127">Using External Authentication Services</span></span>

<span data-ttu-id="5ec6e-128">Множество внешние службы проверки подлинности, доступных для веб-разработчиков Справка для разработки уменьшения времени при создании новых веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-128">The abundance of external authentication services that are currently available to web developers help to reduce development time when creating new web applications.</span></span> <span data-ttu-id="5ec6e-129">Веб-пользователей обычно имеют несколько существующих учетных записей для популярных веб-служб и веб-сайты социальных сетей, поэтому при реализует приложения web, из внешней веб-службе или социальные веб-сайта служб проверки подлинности, она сохраняет времени разработки будет потраченных вариант реализации проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-129">Web users typically have several existing accounts for popular web services and social media websites, therefore when a web application implements the authentication services from an external web service or social media website, it saves the development time that would have been spent creating an authentication implementation.</span></span> <span data-ttu-id="5ec6e-130">С помощью службы внешней проверки подлинности сохраняет конечных пользователей от необходимости создавать другую учетную запись для веб-приложения, а также от необходимости запоминать другое имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-130">Using an external authentication service saves end users from having to create another account for your web application, and also from having to remember another username and password.</span></span>

<span data-ttu-id="5ec6e-131">В прошлом, разработчики испытывали два варианта: создать свою собственную реализацию проверки подлинности или узнайте, как интегрировать службу внешней проверки подлинности в свои приложения.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-131">In the past, developers have had two choices: create their own authentication implementation, or learn how to integrate an external authentication service into their applications.</span></span> <span data-ttu-id="5ec6e-132">На самом базовом уровне, на следующей схеме показана потока простого запроса для агента пользователя (веб-браузер), который запрашивает сведения из веб-приложения, который настроен для использования внешней проверки подлинности службы:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-132">At the most basic level, the following diagram illustrates a simple request flow for a user agent (web browser) that is requesting information from a web application that is configured to use an external authentication service:</span></span>

<span data-ttu-id="5ec6e-133">[![](external-authentication-services/_static/image2.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-133">[![](external-authentication-services/_static/image2.png "Click to Expand the Image")](external-authentication-services/_static/image1.png)</span></span>

<span data-ttu-id="5ec6e-134">На предыдущей схеме агент пользователя (или веб-браузер, в этом примере) отправляет запрос веб-приложения, который перенаправляет запрос службы проверки подлинности внешнего веб-браузера.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-134">In the preceding diagram, the user agent (or web browser in this example) makes a request to a web application, which redirects the web browser to an external authentication service.</span></span> <span data-ttu-id="5ec6e-135">Агент пользователя отправляет свои учетные данные в службу внешней проверки подлинности, и если агент пользователя успешно прошел проверку, службу внешней проверки подлинности будет перенаправлять агент пользователя для исходного веб-приложения с использованием некоторой типа маркера, который агент пользователя отправляет веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-135">The user agent sends its credentials to the external authentication service, and if the user agent has successfully authenticated, the external authentication service will redirect the user agent to the original web application with some form of token which the user agent will send to the web application.</span></span> <span data-ttu-id="5ec6e-136">Веб-приложение будет использовать токен для убедитесь, что агент пользователя успешно проверена службой внешней проверки подлинности и веб-приложение может использовать для получения дополнительных сведений об агенте пользователя.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-136">The web application will use the token to verify that the user agent has been successfully authenticated by the external authentication service, and the web application may use the token to gather more information about the user agent.</span></span> <span data-ttu-id="5ec6e-137">Когда приложение выполняется обработка сведений агента пользователя, веб-приложение будет возвращать соответствующий ответ на агент пользователя, в соответствии с параметрами авторизации.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-137">Once the application is done processing the user agent's information, the web application will return the appropriate response to the user agent based on its authorization settings.</span></span>

<span data-ttu-id="5ec6e-138">В во втором примере агент пользователя взаимодействует с веб-приложением и внешние авторизации сервера и веб-приложения выполняет дополнительное взаимодействие с сервером внешней авторизации для получения дополнительных сведений о пользователе агент:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-138">In this second example, the user agent negotiates with the web application and external authorization server, and the web application performs additional communication with the external authorization server to retrieve additional information about the user agent:</span></span>

<span data-ttu-id="5ec6e-139">[![](external-authentication-services/_static/image4.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-139">[![](external-authentication-services/_static/image4.png "Click to Expand the Image")](external-authentication-services/_static/image3.png)</span></span>

<span data-ttu-id="5ec6e-140">Visual Studio 2013 и ASP.NET 4.5.1 упростить интеграцию с внешние службы проверки подлинности для разработчиков благодаря встроенной интеграции для следующих служб проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-140">Visual Studio 2013 and ASP.NET 4.5.1 make integration with external authentication services easier for developers by providing built-in integration for the following authentication services:</span></span>

- <span data-ttu-id="5ec6e-141">Facebook</span><span class="sxs-lookup"><span data-stu-id="5ec6e-141">Facebook</span></span>
- <span data-ttu-id="5ec6e-142">Google</span><span class="sxs-lookup"><span data-stu-id="5ec6e-142">Google</span></span>
- <span data-ttu-id="5ec6e-143">Учетные записи Майкрософт (учетные записи Windows Live ID)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-143">Microsoft Accounts (Windows Live ID accounts)</span></span>
- <span data-ttu-id="5ec6e-144">Twitter</span><span class="sxs-lookup"><span data-stu-id="5ec6e-144">Twitter</span></span>

<span data-ttu-id="5ec6e-145">Примеры в этом пошаговом руководстве будет показано, как настройка каждого из поддерживаемых внешние службы проверки подлинности с помощью нового шаблона веб-приложения ASP.NET, который поставляется с Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-145">The examples in this walkthrough will demonstrate how to configure each of the supported external authentication services by using the new ASP.NET Web Application template that ships with Visual Studio 2013.</span></span>

> [!NOTE]
> <span data-ttu-id="5ec6e-146">При необходимости, может потребоваться добавить полное доменное имя в параметрах службы внешней проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-146">If necessary, you may need to add your FQDN to the settings for your external authentication service.</span></span> <span data-ttu-id="5ec6e-147">Это требование основано на ограничения безопасности для некоторых служб внешней проверки подлинности, которым требуется полное доменное имя в параметрах приложения, сопоставляемое полное доменное имя, который используется клиентами.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-147">This requirement is based on security constraints for some external authentication services which require the FQDN in your application settings to match the FQDN that is used by your clients.</span></span> <span data-ttu-id="5ec6e-148">(Для этого действия в значительной мере для каждой службы внешней проверки подлинности необходимо обратиться к документации для каждой внешней проверки подлинности службы, чтобы проверить, является ли обязательным и способах настройки этих параметров.) Если необходимо настроить IIS Express для использования полного доменного ИМЕНИ для тестирования данной среды см. в разделе [настройки IIS Express использовать полное доменное имя](#FQDN) далее в этом пошаговом руководстве.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-148">(The steps for this will vary greatly for each external authentication service; you will need to consult the documentation for each external authentication service to see if this is required and how to configure these settings.) If you need to configure IIS Express to use an FQDN for testing this environment, see the [Configuring IIS Express to use a Fully Qualified Domain Name](#FQDN) section later in this walkthrough.</span></span>


<a id="SAMPLE"></a>
## <a name="creating-a-sample-web-application"></a><span data-ttu-id="5ec6e-149">Создание примера веб-приложения</span><span class="sxs-lookup"><span data-stu-id="5ec6e-149">Creating a Sample Web Application</span></span>

<span data-ttu-id="5ec6e-150">Ниже поможет созданию образца приложения с помощью шаблона веб-приложения ASP.NET, и будет использовать этот образец приложения для каждой из служб внешней проверки подлинности далее в этом пошаговом руководстве.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-150">The following steps will lead you through creating a sample application by using the ASP.NET Web Application template, and you will use this sample application for each of the external authentication services later in this walkthrough.</span></span>

<span data-ttu-id="5ec6e-151">Запустите Visual Studio 2013 выберите **новый проект** с начальной страницы.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-151">Start Visual Studio 2013 select **New Project** from the Start page.</span></span> <span data-ttu-id="5ec6e-152">Или из **файл** последовательно выберите пункты **New** и затем **проекта**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-152">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="5ec6e-153">[![](external-authentication-services/_static/image6.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-153">[![](external-authentication-services/_static/image6.png "Click to Expand the Image")](external-authentication-services/_static/image5.png)</span></span>

<span data-ttu-id="5ec6e-154">Когда **новый проект** отображается диалоговое окно, выберите пункт **установленные** **шаблоны** и разверните **Visual C#**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-154">When the **New Project** dialog box is displayed, select **Installed** **Templates** and expand **Visual C#**.</span></span> <span data-ttu-id="5ec6e-155">В разделе **Visual C#** выберите **Web**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-155">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="5ec6e-156">В списке шаблонов проектов выберите **веб-приложение ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-156">In the list of project templates, select **ASP.NET Web Application**.</span></span> <span data-ttu-id="5ec6e-157">Введите имя для своего проекта и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-157">Enter a name for your project and click **OK**.</span></span>

<span data-ttu-id="5ec6e-158">[![](external-authentication-services/_static/image8.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-158">[![](external-authentication-services/_static/image8.png "Click to Expand the Image")](external-authentication-services/_static/image7.png)</span></span>

<span data-ttu-id="5ec6e-159">Когда **новый проект ASP.NET** — отображается, выберите пункт **SPA** шаблона и нажмите кнопку **Создание проекта**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-159">When the **New ASP.NET Project** is displayed, select the **SPA** template and click **Create Project**.</span></span>

<span data-ttu-id="5ec6e-160">[![](external-authentication-services/_static/image10.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-160">[![](external-authentication-services/_static/image10.png "Click to Expand the Image")](external-authentication-services/_static/image9.png)</span></span>

<span data-ttu-id="5ec6e-161">Ожидание, как Visual Studio 2013 создается проект.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-161">Wait as Visual Studio 2013 creates your project.</span></span>

<span data-ttu-id="5ec6e-162">[![](external-authentication-services/_static/image12.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-162">[![](external-authentication-services/_static/image12.png "Click to Expand the Image")](external-authentication-services/_static/image11.png)</span></span>

<span data-ttu-id="5ec6e-163">После завершения создания проекта Visual Studio 2013 откройте *Startup.Auth.cs* файл, расположенный в **приложения\_запустить** папки.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-163">When Visual Studio 2013 has finished creating your project, open the *Startup.Auth.cs* file that is located in the **App\_Start** folder.</span></span>

<span data-ttu-id="5ec6e-164">[![](external-authentication-services/_static/image14.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-164">[![](external-authentication-services/_static/image14.png "Click to Expand the Image")](external-authentication-services/_static/image13.png)</span></span>

<span data-ttu-id="5ec6e-165">При создании проекта, внешние службы проверки подлинности не включены в *Startup.Auth.cs* файла; ниже показано, что ваш код может выглядеть следующим образом, с разделами, выделенной для where включен Внешняя проверка подлинности службы и все соответствующие параметры для использования проверки подлинности учетных записей Майкрософт, Twitter, Facebook или Google вместе с приложением ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-165">When you first create the project, none of the external authentication services are enabled in *Startup.Auth.cs* file; the following illustrates what your code might resemble, with the sections highlighted for where you would enable an external authentication service and any relevant settings in order to use Microsoft Accounts, Twitter, Facebook, or Google authentication with your ASP.NET application:</span></span>

[!code-csharp[Main](external-authentication-services/samples/sample1.cs)]

<span data-ttu-id="5ec6e-166">При нажатии клавиши F5 для построения и отладки веб-приложения, появится экран входа, где вы увидите, что были определены не внешние службы проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-166">When you press F5 to build and debug your web application, it will display a login screen where you will see that no external authentication services have been defined.</span></span>

<span data-ttu-id="5ec6e-167">[![](external-authentication-services/_static/image16.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-167">[![](external-authentication-services/_static/image16.png "Click to Expand the Image")](external-authentication-services/_static/image15.png)</span></span>

<span data-ttu-id="5ec6e-168">В следующих разделах вы узнаете, как включить каждой из внешней проверки подлинности служб, предоставляемых с ASP.NET в Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-168">In the following sections, you will learn how to enable each of the external authentication services that are provided with ASP.NET in Visual Studio 2013.</span></span>

<a id="FACEBOOK"></a>
## <a name="enabling-facebook-authentication"></a><span data-ttu-id="5ec6e-169">Включение проверки подлинности Facebook</span><span class="sxs-lookup"><span data-stu-id="5ec6e-169">Enabling Facebook Authentication</span></span>

<span data-ttu-id="5ec6e-170">Facebook с помощью проверки подлинности необходимо создать учетную запись разработчика Facebook и проекта потребуется идентификатор приложения и секретный ключ от Facebook для своей работы.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-170">Using Facebook authentication requires you to create a Facebook developer account, and your project will require an application ID and secret key from Facebook in order to function.</span></span> <span data-ttu-id="5ec6e-171">Сведения о создании учетной записи разработчика Facebook и получение идентификатора приложения и секретный ключ см. в разделе [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="5ec6e-171">For information about creating a Facebook developer account and obtaining your application ID and secret key, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="5ec6e-172">Получив идентификатор приложения и секретный ключ, выполните следующие действия для включения проверки подлинности Facebook для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-172">Once you have obtained your application ID and secret key, use the following steps to enable Facebook authentication for your web application:</span></span>

1. <span data-ttu-id="5ec6e-173">Когда проект открыт в Visual Studio 2013, откройте *Startup.Auth.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-173">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="5ec6e-174">[![](external-authentication-services/_static/image18.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-174">[![](external-authentication-services/_static/image18.png "Click to Expand the Image")](external-authentication-services/_static/image17.png)</span></span>
2. <span data-ttu-id="5ec6e-175">Найдите раздел, выделенный код:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-175">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample2.cs)]
3. <span data-ttu-id="5ec6e-176">Удалить &quot; // &quot; символов Раскомментировать выделенные строки кода, а затем добавьте код приложения и секретный ключ.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-176">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your application ID and secret key.</span></span> <span data-ttu-id="5ec6e-177">После добавления этих параметров можно повторную компиляцию проекта:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-177">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample3.cs)]
4. <span data-ttu-id="5ec6e-178">При нажатии клавиши F5, чтобы открыть веб-приложения в веб-браузере, вы увидите, что Facebook определен как службу внешней проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-178">When you press F5 to open your web application in your web browser, you will see that Facebook has been defined as an external authentication service:</span></span>

    <span data-ttu-id="5ec6e-179">[![](external-authentication-services/_static/image20.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-179">[![](external-authentication-services/_static/image20.png "Click to Expand the Image")](external-authentication-services/_static/image19.png)</span></span>
5. <span data-ttu-id="5ec6e-180">При нажатии кнопки **Facebook** кнопки, будет выполнено перенаправление на страницу входа Facebook:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-180">When you click the **Facebook** button, your browser will be redirected to the Facebook login page:</span></span>

    <span data-ttu-id="5ec6e-181">[![](external-authentication-services/_static/image22.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-181">[![](external-authentication-services/_static/image22.png "Click to Expand the Image")](external-authentication-services/_static/image21.png)</span></span>
6. <span data-ttu-id="5ec6e-182">После ввода учетных данных Facebook и нажмите кнопку **вход**, веб-браузере будет перенаправлено обратно в веб-приложения, которой будет предложено ввести **имя пользователя** , которую требуется связать с вашей Учетная запись Facebook:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-182">After you enter your Facebook credentials and click **Log in**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Facebook account:</span></span>

    <span data-ttu-id="5ec6e-183">[![](external-authentication-services/_static/image24.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-183">[![](external-authentication-services/_static/image24.png "Click to Expand the Image")](external-authentication-services/_static/image23.png)</span></span>
7. <span data-ttu-id="5ec6e-184">После ввода имени пользователя и щелчке **зарегистрироваться** кнопки, веб-приложение будет отображаться по умолчанию **Домашняя страница** для учетной записи Facebook:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-184">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Facebook account:</span></span>

    <span data-ttu-id="5ec6e-185">[![](external-authentication-services/_static/image26.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-185">[![](external-authentication-services/_static/image26.png "Click to Expand the Image")](external-authentication-services/_static/image25.png)</span></span>

<a id="GOOGLE"></a>
## <a name="enabling-google-authentication"></a><span data-ttu-id="5ec6e-186">Включение проверки подлинности Google</span><span class="sxs-lookup"><span data-stu-id="5ec6e-186">Enabling Google Authentication</span></span>

<span data-ttu-id="5ec6e-187">Является наиболее простым внешней проверки подлинности служб для включения, так как он не требует учетной записи разработчика, а требуются дополнительные сведения, как код приложения или секретный ключ, как другие внешние службы проверки подлинности Google требующий.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-187">Google is by far the easiest of the external authentication services to enable because it doesn't require a developer account, nor does it require additional information like your application ID or secret key as the other external authentication services necessitate.</span></span>

<span data-ttu-id="5ec6e-188">Чтобы включить проверку подлинности Google для веб-приложения, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-188">To enable Google authentication for your web application, use the following steps:</span></span>

1. <span data-ttu-id="5ec6e-189">Когда проект открыт в Visual Studio 2013, откройте *Startup.Auth.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-189">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="5ec6e-190">[![](external-authentication-services/_static/image28.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-190">[![](external-authentication-services/_static/image28.png "Click to Expand the Image")](external-authentication-services/_static/image27.png)</span></span>
2. <span data-ttu-id="5ec6e-191">Найдите раздел, выделенный код:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-191">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample4.cs)]
3. <span data-ttu-id="5ec6e-192">Удалить &quot; // &quot; символов раскомментируйте выделенную строку кода и перекомпиляции проекта:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-192">Remove the &quot;//&quot; characters to uncomment the highlighted line of code, and then recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample5.cs)]
4. <span data-ttu-id="5ec6e-193">При нажатии клавиши F5, чтобы открыть веб-приложения в веб-браузере, вы увидите, что Google определен как службу внешней проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-193">When you press F5 to open your web application in your web browser, you will see that Google has been defined as an external authentication service:</span></span>

    <span data-ttu-id="5ec6e-194">[![](external-authentication-services/_static/image30.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-194">[![](external-authentication-services/_static/image30.png "Click to Expand the Image")](external-authentication-services/_static/image29.png)</span></span>
5. <span data-ttu-id="5ec6e-195">При нажатии кнопки **Google** кнопки, будет выполнено перенаправление на страницу входа Google:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-195">When you click the **Google** button, your browser will be redirected to the Google login page:</span></span>

    <span data-ttu-id="5ec6e-196">[![](external-authentication-services/_static/image32.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-196">[![](external-authentication-services/_static/image32.png "Click to Expand the Image")](external-authentication-services/_static/image31.png)</span></span>
6. <span data-ttu-id="5ec6e-197">После ввода учетных данных Google и нажмите кнопку **входа**, Google предложит убедитесь, что веб-приложение имеет разрешения на доступ к вашей учетной записи Google:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-197">After you enter your Google credentials and click **Sign in**, Google will prompt you to verify that your web application has permissions to access your Google account:</span></span>

    <span data-ttu-id="5ec6e-198">[![](external-authentication-services/_static/image34.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-198">[![](external-authentication-services/_static/image34.png "Click to Expand the Image")](external-authentication-services/_static/image33.png)</span></span>
7. <span data-ttu-id="5ec6e-199">При нажатии кнопки **Accept**, веб-браузере будет перенаправлено обратно в веб-приложения, который будет предложено ввести **имя пользователя** , которую требуется связать с вашей учетной записи Google:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-199">When you click **Accept**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Google account:</span></span>

    <span data-ttu-id="5ec6e-200">[![](external-authentication-services/_static/image36.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-200">[![](external-authentication-services/_static/image36.png "Click to Expand the Image")](external-authentication-services/_static/image35.png)</span></span>
8. <span data-ttu-id="5ec6e-201">После ввода имени пользователя и щелчке **зарегистрироваться** кнопки, веб-приложение будет отображаться по умолчанию **Домашняя страница** для вашей учетной записи Google:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-201">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Google account:</span></span>

    <span data-ttu-id="5ec6e-202">[![](external-authentication-services/_static/image38.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-202">[![](external-authentication-services/_static/image38.png "Click to Expand the Image")](external-authentication-services/_static/image37.png)</span></span>

<a id="MICROSOFT"></a>
## <a name="enabling-microsoft-authentication"></a><span data-ttu-id="5ec6e-203">Включение проверки подлинности Майкрософт</span><span class="sxs-lookup"><span data-stu-id="5ec6e-203">Enabling Microsoft Authentication</span></span>

<span data-ttu-id="5ec6e-204">Проверки подлинности Майкрософт необходимо создать учетную запись разработчика, и для него необходим идентификатор клиента и секрет клиента для своей работы.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-204">Microsoft authentication requires you to create a developer account, and it requires a client ID and client secret in order to function.</span></span> <span data-ttu-id="5ec6e-205">Сведения о создании учетную запись разработчика Майкрософт и получение идентификатора клиента и секрет клиента см. в разделе [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070).</span><span class="sxs-lookup"><span data-stu-id="5ec6e-205">For information about creating a Microsoft developer account and obtaining your client ID and client secret, see [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070).</span></span>

<span data-ttu-id="5ec6e-206">Получив ваш ключ клиента и секрет пользователя, выполните следующие действия, чтобы включить проверку подлинности Microsoft для веб-приложения:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-206">Once you have obtained your consumer key and consumer secret, use the following steps to enable Microsoft authentication for your web application:</span></span>

1. <span data-ttu-id="5ec6e-207">Когда проект открыт в Visual Studio 2013, откройте *Startup.Auth.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-207">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="5ec6e-208">[![](external-authentication-services/_static/image40.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-208">[![](external-authentication-services/_static/image40.png "Click to Expand the Image")](external-authentication-services/_static/image39.png)</span></span>
2. <span data-ttu-id="5ec6e-209">Найдите раздел, выделенный код:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-209">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample6.cs)]
3. <span data-ttu-id="5ec6e-210">Удалить &quot; // &quot; символов Раскомментировать выделенные строки кода, а затем добавьте идентификатор клиента и секрет клиента.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-210">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your client ID and client secret.</span></span> <span data-ttu-id="5ec6e-211">После добавления этих параметров можно повторную компиляцию проекта:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-211">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample7.cs)]
4. <span data-ttu-id="5ec6e-212">При нажатии клавиши F5, чтобы открыть веб-приложения в веб-браузере, вы увидите, что Microsoft был определен как службу внешней проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-212">When you press F5 to open your web application in your web browser, you will see that Microsoft has been defined as an external authentication service:</span></span>

    <span data-ttu-id="5ec6e-213">[![](external-authentication-services/_static/image42.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-213">[![](external-authentication-services/_static/image42.png "Click to Expand the Image")](external-authentication-services/_static/image41.png)</span></span>
5. <span data-ttu-id="5ec6e-214">При нажатии кнопки **Microsoft** кнопки, будет выполнено перенаправление на страницу входа Microsoft:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-214">When you click the **Microsoft** button, your browser will be redirected to the Microsoft login page:</span></span>

    <span data-ttu-id="5ec6e-215">[![](external-authentication-services/_static/image44.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-215">[![](external-authentication-services/_static/image44.png "Click to Expand the Image")](external-authentication-services/_static/image43.png)</span></span>
6. <span data-ttu-id="5ec6e-216">Введите учетные данные Microsoft и нажмите кнопку **входа**, вам будет предложено убедитесь, что веб-приложение имеет разрешения на доступ к учетной записи Майкрософт:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-216">After you enter your Microsoft credentials and click **Sign in**, you will be prompted to verify that your web application has permissions to access your Microsoft account:</span></span>

    <span data-ttu-id="5ec6e-217">[![](external-authentication-services/_static/image46.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-217">[![](external-authentication-services/_static/image46.png "Click to Expand the Image")](external-authentication-services/_static/image45.png)</span></span>
7. <span data-ttu-id="5ec6e-218">При нажатии кнопки **Да**, веб-браузере будет перенаправлено обратно в веб-приложения, который будет предложено ввести **имя пользователя** , которую требуется связать с учетной записью Майкрософт:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-218">When you click **Yes**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Microsoft account:</span></span>

    <span data-ttu-id="5ec6e-219">[![](external-authentication-services/_static/image48.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-219">[![](external-authentication-services/_static/image48.png "Click to Expand the Image")](external-authentication-services/_static/image47.png)</span></span>
8. <span data-ttu-id="5ec6e-220">После ввода имени пользователя и щелчке **зарегистрироваться** кнопки, веб-приложение будет отображаться по умолчанию **Домашняя страница** для учетной записи Майкрософт:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-220">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Microsoft account:</span></span>

    <span data-ttu-id="5ec6e-221">[![](external-authentication-services/_static/image50.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-221">[![](external-authentication-services/_static/image50.png "Click to Expand the Image")](external-authentication-services/_static/image49.png)</span></span>

<a id="TWITTER"></a>
## <a name="enabling-twitter-authentication"></a><span data-ttu-id="5ec6e-222">Включение проверки подлинности Twitter</span><span class="sxs-lookup"><span data-stu-id="5ec6e-222">Enabling Twitter Authentication</span></span>

<span data-ttu-id="5ec6e-223">Twitter проверки подлинности необходимо создать учетную запись разработчика, и ей требуется ключ потребителя и секретом получателя для своей работы.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-223">Twitter authentication requires you to create a developer account, and it requires a consumer key and consumer secret in order to function.</span></span> <span data-ttu-id="5ec6e-224">Сведения о создании учетной записи разработчика Twitter и получить ключ потребителя и секретом получателя см. в разделе [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="5ec6e-224">For information about creating a Twitter developer account and obtaining your consumer key and consumer secret, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="5ec6e-225">Получив ваш ключ клиента и секрет пользователя, выполните следующие действия, чтобы включить проверку подлинности Twitter для веб-приложения:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-225">Once you have obtained your consumer key and consumer secret, use the following steps to enable Twitter authentication for your web application:</span></span>

1. <span data-ttu-id="5ec6e-226">Когда проект открыт в Visual Studio 2013, откройте *Startup.Auth.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-226">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="5ec6e-227">[![](external-authentication-services/_static/image52.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-227">[![](external-authentication-services/_static/image52.png "Click to Expand the Image")](external-authentication-services/_static/image51.png)</span></span>
2. <span data-ttu-id="5ec6e-228">Найдите раздел, выделенный код:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-228">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample8.cs)]
3. <span data-ttu-id="5ec6e-229">Удалить &quot; // &quot; символов Раскомментировать выделенные строки кода, а затем добавить ключ клиента и секретом получателя.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-229">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your consumer key and consumer secret.</span></span> <span data-ttu-id="5ec6e-230">После добавления этих параметров можно повторную компиляцию проекта:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-230">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample9.cs)]
4. <span data-ttu-id="5ec6e-231">При нажатии клавиши F5, чтобы открыть веб-приложения в веб-браузере, вы увидите, что Twitter определен как службу внешней проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-231">When you press F5 to open your web application in your web browser, you will see that Twitter has been defined as an external authentication service:</span></span>

    <span data-ttu-id="5ec6e-232">[![](external-authentication-services/_static/image54.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-232">[![](external-authentication-services/_static/image54.png "Click to Expand the Image")](external-authentication-services/_static/image53.png)</span></span>
5. <span data-ttu-id="5ec6e-233">При нажатии кнопки **Twitter** кнопки, будет выполнено перенаправление на страницу входа Twitter:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-233">When you click the **Twitter** button, your browser will be redirected to the Twitter login page:</span></span>

    <span data-ttu-id="5ec6e-234">[![](external-authentication-services/_static/image56.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-234">[![](external-authentication-services/_static/image56.png "Click to Expand the Image")](external-authentication-services/_static/image55.png)</span></span>
6. <span data-ttu-id="5ec6e-235">После ввода учетных данных Twitter и нажмите кнопку **авторизовать приложение**, веб-браузере будет перенаправлено обратно в веб-приложения, который будет предложено ввести **имя пользователя** , которую требуется связать с учетной записи Twitter:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-235">After you enter your Twitter credentials and click **Authorize app**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Twitter account:</span></span>

    <span data-ttu-id="5ec6e-236">[![](external-authentication-services/_static/image58.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-236">[![](external-authentication-services/_static/image58.png "Click to Expand the Image")](external-authentication-services/_static/image57.png)</span></span>
7. <span data-ttu-id="5ec6e-237">После ввода имени пользователя и щелчке **зарегистрироваться** кнопки, веб-приложение будет отображаться по умолчанию **Домашняя страница** для вашей учетной записи Twitter:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-237">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Twitter account:</span></span>

    <span data-ttu-id="5ec6e-238">[![](external-authentication-services/_static/image60.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image59.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-238">[![](external-authentication-services/_static/image60.png "Click to Expand the Image")](external-authentication-services/_static/image59.png)</span></span>

<a id="MOREINFO"></a>
## <a name="additional-information"></a><span data-ttu-id="5ec6e-239">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="5ec6e-239">Additional Information</span></span>

<span data-ttu-id="5ec6e-240">Дополнительные сведения о создании приложений, использующих OAuth и OpenID см. следующие URL-адреса:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-240">For additional information about creating applications that use OAuth and OpenID, see the following URLs:</span></span>

- [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166)
- [https://go.microsoft.com/fwlink/?LinkID=243995](https://go.microsoft.com/fwlink/?LinkID=243995)

<a id="COMBINE"></a>
### <a name="combining-external-authentication-services"></a><span data-ttu-id="5ec6e-241">Объединение внешние службы проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="5ec6e-241">Combining External Authentication Services</span></span>

<span data-ttu-id="5ec6e-242">Для повышения гибкости можно определить несколько внешние службы проверки подлинности, в то же время — это позволяет веб-приложения используйте учетную запись с любого из включенных внешние службы проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-242">For greater flexibility, you can define multiple external authentication services at the same time - this allows your web application's users to use an account from any of the enabled external authentication services:</span></span>

<span data-ttu-id="5ec6e-243">[![](external-authentication-services/_static/image62.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-243">[![](external-authentication-services/_static/image62.png "Click to Expand the Image")](external-authentication-services/_static/image61.png)</span></span>

<a id="FQDN"></a>
### <a name="configuring-iis-express-to-use-a-fully-qualified-domain-name"></a><span data-ttu-id="5ec6e-244">Настройки IIS Express для использования полного доменного имени</span><span class="sxs-lookup"><span data-stu-id="5ec6e-244">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>

<span data-ttu-id="5ec6e-245">Некоторые поставщики услуг внешней проверки подлинности не поддерживают тестирование приложения с помощью HTTP-адрес как `http://localhost:port/`.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-245">Some external authentication providers do not support testing your application by using an HTTP address like `http://localhost:port/`.</span></span> <span data-ttu-id="5ec6e-246">Чтобы обойти эту проблему, можно добавить в файл HOSTS статическое сопоставление полное доменное имя (FQDN) и настроить параметры проекта в Visual Studio 2013 для использования полного доменного ИМЕНИ для тестирования и отладки.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-246">To work around this issue, you can add a static Fully Qualified Domain Name (FQDN) mapping to your HOSTS file and configure your project options in Visual Studio 2013 to use the FQDN for testing/debugging.</span></span> <span data-ttu-id="5ec6e-247">Чтобы сделать это, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-247">To do so, use the following steps:</span></span>

- <span data-ttu-id="5ec6e-248">Добавьте статический полное доменное имя сопоставления файл HOSTS.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-248">Add a static FQDN mapping your HOSTS file:</span></span>

  1. <span data-ttu-id="5ec6e-249">Откройте командную строку с повышенными правами в Windows.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-249">Open an elevated command prompt in Windows.</span></span>
  2. <span data-ttu-id="5ec6e-250">Введите следующую команду:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-250">Type the following command:</span></span>

      <span data-ttu-id="5ec6e-251"><kbd>%WinDir%\system32\drivers\etc\hosts Блокнот</kbd></span><span class="sxs-lookup"><span data-stu-id="5ec6e-251"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span></span>
  3. <span data-ttu-id="5ec6e-252">Добавьте в файл HOSTS запись следующим образом:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-252">Add an entry like the following to the HOSTS file:</span></span>

      <span data-ttu-id="5ec6e-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span><span class="sxs-lookup"><span data-stu-id="5ec6e-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span></span>
  4. <span data-ttu-id="5ec6e-254">Сохраните и закройте файл HOSTS.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-254">Save and close your HOSTS file.</span></span>

- <span data-ttu-id="5ec6e-255">Настройка проекта Visual Studio для использования полного доменного ИМЕНИ.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-255">Configure your Visual Studio project to use the FQDN:</span></span>

  1. <span data-ttu-id="5ec6e-256">Когда проект открыт в Visual Studio 2013, нажмите кнопку **проекта** меню, а затем выберите свойства для проекта.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-256">When your project is open in Visual Studio 2013, click the **Project** menu, and then select your project's properties.</span></span> <span data-ttu-id="5ec6e-257">Например, можно выбрать **WebApplication1 свойства**.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-257">For example, you might select **WebApplication1 Properties**.</span></span>
  2. <span data-ttu-id="5ec6e-258">Выберите **Web** вкладки.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-258">Select the **Web** tab.</span></span>
  3. <span data-ttu-id="5ec6e-259">Введите полное доменное имя для <strong>URL-адрес проекта</strong>.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-259">Enter your FQDN for the <strong>Project Url</strong>.</span></span> <span data-ttu-id="5ec6e-260">Например, можно ввести <kbd> <http://www.wingtiptoys.com> </kbd> Если это было сопоставления полное доменное имя, которое вы добавили в файл HOSTS.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-260">For example, you would enter <kbd><http://www.wingtiptoys.com></kbd> if that was the FQDN mapping that you added to your HOSTS file.</span></span>

- <span data-ttu-id="5ec6e-261">Настройте сервер IIS Express использовать полное доменное имя для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-261">Configure IIS Express to use the FQDN for your application:</span></span>

    1. <span data-ttu-id="5ec6e-262">Откройте командную строку с повышенными правами в Windows.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-262">Open an elevated command prompt in Windows.</span></span>
    2. <span data-ttu-id="5ec6e-263">Введите следующую команду, чтобы изменить папку IIS Express:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-263">Type the following command to change to your IIS Express folder:</span></span>

        <span data-ttu-id="5ec6e-264"><kbd>CD /d &quot;%ProgramFiles%\IIS, экспресс-выпуск&quot;</kbd></span><span class="sxs-lookup"><span data-stu-id="5ec6e-264"><kbd>cd /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span></span>
    3. <span data-ttu-id="5ec6e-265">Введите следующую команду, чтобы добавить полное доменное имя для приложения:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-265">Type the following command to add the FQDN to your application:</span></span>

        <span data-ttu-id="5ec6e-266"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span><span class="sxs-lookup"><span data-stu-id="5ec6e-266"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span></span>

  <span data-ttu-id="5ec6e-267">Где **WebApplication1** имя проекта и **bindingInformation** содержит номер порта и полное доменное имя, которые требуется использовать для тестирования.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-267">Where **WebApplication1** is the name of your project and **bindingInformation** contains the port number and FQDN that you want to use for your testing.</span></span>

<a id="OBTAIN"></a>
### <a name="how-to-obtain-your-application-settings-for-microsoft-authentication"></a><span data-ttu-id="5ec6e-268">Как получить параметры приложения для проверки подлинности Майкрософт</span><span class="sxs-lookup"><span data-stu-id="5ec6e-268">How to Obtain your Application Settings for Microsoft Authentication</span></span>

<span data-ttu-id="5ec6e-269">Связывание приложения для Windows Live для проверки подлинности Microsoft — это простой процесс.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-269">Linking an application to Windows Live for Microsoft Authentication is a simple process.</span></span> <span data-ttu-id="5ec6e-270">Если вы уже не связаны приложения для Windows Live, можно использовать следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-270">If you have not already linked an application to Windows Live, you can use the following steps:</span></span>

1. <span data-ttu-id="5ec6e-271">Перейдите к [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070) и введите имя учетной записи Майкрософт и пароль при появлении запроса, а затем нажмите кнопку **входа**:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-271">Browse to [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070) and enter your Microsoft account name and password when prompted, then click **Sign in**:</span></span>

    <span data-ttu-id="5ec6e-272">[![](external-authentication-services/_static/image64.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-272">[![](external-authentication-services/_static/image64.png "Click to Expand the Image")](external-authentication-services/_static/image63.png)</span></span>
2. <span data-ttu-id="5ec6e-273">Введите имя и язык приложения при появлении запроса и нажмите кнопку **я принимаю**:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-273">Enter the name and language of your application when prompted, and then click **I accept**:</span></span>

    <span data-ttu-id="5ec6e-274">[![](external-authentication-services/_static/image66.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image65.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-274">[![](external-authentication-services/_static/image66.png "Click to Expand the Image")](external-authentication-services/_static/image65.png)</span></span>
3. <span data-ttu-id="5ec6e-275">На **параметры API** страницы приложения, введите домен перенаправления для приложения и скопируйте **идентификатор клиента** и **секрет клиента** для проекта, а затем Нажмите кнопку **Сохранить**:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-275">On the **API Settings** page for your application, enter the redirect domain for your application and copy the **Client ID** and **Client secret** for your project, and then click **Save**:</span></span>

    <span data-ttu-id="5ec6e-276">[![](external-authentication-services/_static/image68.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image67.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-276">[![](external-authentication-services/_static/image68.png "Click to Expand the Image")](external-authentication-services/_static/image67.png)</span></span>

<a id="DISABLE"></a>
### <a name="optional-disable-local-registration"></a><span data-ttu-id="5ec6e-277">Необязательно: Отключить регистрацию локального</span><span class="sxs-lookup"><span data-stu-id="5ec6e-277">Optional: Disable Local Registration</span></span>

<span data-ttu-id="5ec6e-278">Текущая функциональность регистрацию локального ASP.NET не запрещает автоматические программы (программы-роботы) создания элемента учетных записей; Например, с помощью технологии, защиты от программ-роботов и проверки, как [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span><span class="sxs-lookup"><span data-stu-id="5ec6e-278">The current ASP.NET local registration functionality does not prevent automated programs (bots) from creating member accounts; for example, by using a bot-prevention and validation technology like [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span></span> <span data-ttu-id="5ec6e-279">По этой причине следует удалить ссылки формы и регистрации локального имени входа на странице входа.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-279">Because of this, you should remove the local login form and registration link on the login page.</span></span> <span data-ttu-id="5ec6e-280">Чтобы сделать это, откройте  *\_Login.cshtml* страницы в проекте, а затем закомментируйте линии панели локальное имя входа и ссылка на страницу регистрации.</span><span class="sxs-lookup"><span data-stu-id="5ec6e-280">To do so, open the *\_Login.cshtml* page in your project, and then comment out the lines for the local login panel and the registration link.</span></span> <span data-ttu-id="5ec6e-281">Страницы должен выглядеть как в следующем примере кода:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-281">The resulting page should look like the following code sample:</span></span>

[!code-html[Main](external-authentication-services/samples/sample10.html)]

<span data-ttu-id="5ec6e-282">После отключения панели локальное имя входа и ссылка на страницу регистрации страница входа отображает только поставщики внешней проверки подлинности, которые вы включили:</span><span class="sxs-lookup"><span data-stu-id="5ec6e-282">Once the local login panel and the registration link have been disabled, your login page will only display the external authentication providers that you have enabled:</span></span>

<span data-ttu-id="5ec6e-283">[![](external-authentication-services/_static/image70.png "Щелкните, чтобы развернуть образ")](external-authentication-services/_static/image69.png)</span><span class="sxs-lookup"><span data-stu-id="5ec6e-283">[![](external-authentication-services/_static/image70.png "Click to Expand the Image")](external-authentication-services/_static/image69.png)</span></span>
