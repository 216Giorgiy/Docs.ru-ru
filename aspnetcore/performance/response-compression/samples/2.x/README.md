# <a name="response-compression-sample-application-aspnet-core-2x"></a>Пример сжатия ответа приложения (ASP.NET Core 2.x)

В этом примере описывается использование ASP.NET Core 2.x по промежуточного слоя сжатия ответа HTTP-ответы для сжатия. В примере демонстрируется Gzip и поставщики пользовательских сжатия ответов text и image и показано, как добавить тип MIME для сжатия. Пример 1.x ASP.NET Core см. в разделе [ответа сжатия образец приложения (ASP.NET Core 1.x)](https://github.com/aspnet/Docs/tree/master/aspnetcore/performance/response-compression/samples/1.x).

## <a name="examples-in-this-sample"></a>Примеры в этом образце
* `GzipCompressionProvider`
  * `text/plain`
    * **/**-Lorem Ipsum текстовый файл ответ 2,044 байт, для возможности 927 байт
    * **/testfile1kb.txt** -текстовый файл ответ 1,033 байт, для возможности 47 байт
    * **/ Тонкая** -ответ, выданный в качестве отдельных символов с интервалом 1 секунд 
  * `image/svg+xml`
    * **/Banner.SVG** -ответа изображения масштабируемой векторной графикой (SVG) 9,707 байт, для возможности 4,459 байт
* `CustomCompressionProvider`<br>Показано, как реализовать пользовательский сжатия поставщик для использования с по промежуточного слоя

Если запрос включает `Accept-Encoding` успешна сжатие заголовка и ответа, по промежуточного слоя автоматически добавляет `Vary: Accept-Encoding` заголовок в ответ. `Vary` Заголовок указывает, что кэши, чтобы поддерживать несколько экземпляров на основе альтернативных значений ответа `Accept-Encoding`, поэтому несжатую версию и сжатые (gzip) хранятся в кэше систем, которые могут содержать сжатые или несжатый ответ.

## <a name="using-the-sample"></a>Использование образца
1. Запрос с помощью [Fiddler](http://www.telerik.com/fiddler), [Firebug](http://getfirebug.com/), или [почтальон](https://www.getpostman.com/) к приложению без `Accept-Encoding` заголовок и Примечание полезные данные ответа, размер ответа и заголовки ответа.
2. Добавить `Accept-Encoding: gzip` заголовок и обратите внимание на размер сжатого ответа и заголовки ответа. Уменьшить размер ответа и `Content-Encoding: gzip` заголовок ответа включается по промежуточного слоя. При просмотре текста ответа для Lorem Ipsum или **testfile1kb.txt** ответ, вы видите, что текст является сжатые и может быть прочитан.
3. Добавить `Accept-Encoding: mycustomcompression` заголовок и запишите заголовки ответа. `CustomCompressionProvider` Представляет собой пустую реализацию, фактически не сжимать ответ, но можно создать оболочку поток сжатия `CreateStream()` метод.
