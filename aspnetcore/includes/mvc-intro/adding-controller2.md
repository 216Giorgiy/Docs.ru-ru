<span data-ttu-id="debed-101">Замените содержимое файла *Controllers/HelloWorldController.cs* следующим:</span><span class="sxs-lookup"><span data-stu-id="debed-101">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]

<span data-ttu-id="debed-102">Каждый метод `public` в контроллере вызывается как конечная точка HTTP.</span><span class="sxs-lookup"><span data-stu-id="debed-102">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="debed-103">В приведенном выше примере оба метода возвращают строку.</span><span class="sxs-lookup"><span data-stu-id="debed-103">In the sample above, both methods return a string.</span></span>  <span data-ttu-id="debed-104">Обратите внимание на комментарии, предшествующие каждому методу.</span><span class="sxs-lookup"><span data-stu-id="debed-104">Note the comments preceding each method.</span></span>

<span data-ttu-id="debed-105">Конечная точка HTTP — это адресуемый URL в веб-приложении, такой как `http://localhost:1234/HelloWorld`, который объединяет в себе используемый протокол (`HTTP`), сетевое расположение сервера с TCP-портом (`localhost:1234`), а также целевой URI (`HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="debed-105">An HTTP endpoint is a targetable URL in the web application, such as `http://localhost:1234/HelloWorld`, and combines the protocol used: `HTTP`, the network location of the web server (including the TCP port): `localhost:1234` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="debed-106">В первом комментарии указано, что этот метод [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) вызывается путем добавления "/HelloWorld/" к базовому URL-адресу.</span><span class="sxs-lookup"><span data-stu-id="debed-106">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that's invoked by appending "/HelloWorld/" to the base URL.</span></span> <span data-ttu-id="debed-107">Во втором комментарии указано, что этот метод [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) вызывается путем добавления "/HelloWorld/Welcome/" к URL-адресу.</span><span class="sxs-lookup"><span data-stu-id="debed-107">The second comment specifies an [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that's invoked by appending "/HelloWorld/Welcome/" to the URL.</span></span> <span data-ttu-id="debed-108">Далее в этом руководстве вы научитесь использовать механизм формирования шаблонов для создания методов `HTTP POST`.</span><span class="sxs-lookup"><span data-stu-id="debed-108">Later on in the tutorial you'll use the scaffolding engine to generate `HTTP POST` methods.</span></span>

<span data-ttu-id="debed-109">Запустите приложение в режиме без отладки и добавьте "HelloWorld" к пути в адресной строке.</span><span class="sxs-lookup"><span data-stu-id="debed-109">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="debed-110">Метод `Index` возвращает строку.</span><span class="sxs-lookup"><span data-stu-id="debed-110">The `Index` method returns a string.</span></span>

![Окно браузера, в котором отображается ответ "This is my default action" (Это действие по умолчанию)](~/tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="debed-112">MVC вызывает классы контроллера (и методы действия в них) в зависимости от входящего URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="debed-112">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="debed-113">[Логика маршрутизации URL-адресов](xref:mvc/controllers/routing), используемая моделью MVC по умолчанию, определяет вызываемый код на основе формата следующего вида:</span><span class="sxs-lookup"><span data-stu-id="debed-113">The default [URL routing logic](xref:mvc/controllers/routing) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="debed-114">Формат маршрутизации задается в методе `Configure` в файле *Startup.cs*.</span><span class="sxs-lookup"><span data-stu-id="debed-114">You set the format for routing in the `Configure` method in *Startup.cs* file.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="debed-115">Если при запуске приложения не указаны сегменты URL-адреса, по умолчанию устанавливаются контроллер "Home" и метод "Index", которые заданы в выделенной выше строке шаблона.</span><span class="sxs-lookup"><span data-stu-id="debed-115">When you run the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="debed-116">Первый сегмент URL-адреса определяет класс контроллера, который будет выполняться.</span><span class="sxs-lookup"><span data-stu-id="debed-116">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="debed-117">Таким образом, `localhost:xxxx/HelloWorld` сопоставляется с классом `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="debed-117">So `localhost:xxxx/HelloWorld` maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="debed-118">Вторая часть сегмента URL-адреса определяет метод действия для класса.</span><span class="sxs-lookup"><span data-stu-id="debed-118">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="debed-119">Таким образом, `localhost:xxxx/HelloWorld/Index` выполняет метод `Index` класса `HelloWorldController`.</span><span class="sxs-lookup"><span data-stu-id="debed-119">So `localhost:xxxx/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="debed-120">Обратите внимание, что в этом случае достаточно перейти по адресу `localhost:xxxx/HelloWorld`, а метод `Index` вызывается по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="debed-120">Notice that you only had to browse to `localhost:xxxx/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="debed-121">Это связано с тем, что если имя вызываемого метода не задано явно, для контроллера по умолчанию вызывается метод `Index`.</span><span class="sxs-lookup"><span data-stu-id="debed-121">This is because `Index` is the default method that will be called on a controller if a method name isn't explicitly specified.</span></span> <span data-ttu-id="debed-122">В третьей части сегмента URL-адреса (`id`) указываются данные маршрута.</span><span class="sxs-lookup"><span data-stu-id="debed-122">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="debed-123">Мы ознакомимся с ними далее в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="debed-123">You'll see route data later on in this tutorial.</span></span>

<span data-ttu-id="debed-124">Перейдите по адресу `http://localhost:xxxx/HelloWorld/Welcome`.</span><span class="sxs-lookup"><span data-stu-id="debed-124">Browse to `http://localhost:xxxx/HelloWorld/Welcome`.</span></span> <span data-ttu-id="debed-125">Выполняется метод `Welcome`, который возвращает строку "This is the Welcome action method..." (Это метод действия Welcome...).</span><span class="sxs-lookup"><span data-stu-id="debed-125">The `Welcome` method runs and returns the string "This is the Welcome action method...".</span></span> <span data-ttu-id="debed-126">Для этого URL-адреса заданы контроллер `HelloWorld` и метод действия `Welcome`.</span><span class="sxs-lookup"><span data-stu-id="debed-126">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="debed-127">Часть URL-адреса `[Parameters]` на данный момент еще не использовалась.</span><span class="sxs-lookup"><span data-stu-id="debed-127">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![Окно браузера, в котором отображается ответ "This is the Welcome action method" (Это метод действия Welcome)](~/tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="debed-129">Измените код, чтобы передать сведения о параметрах из URL-адреса в контроллер.</span><span class="sxs-lookup"><span data-stu-id="debed-129">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="debed-130">Например, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span><span class="sxs-lookup"><span data-stu-id="debed-130">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="debed-131">Измените метод `Welcome`, включив два параметра, как показано в следующем коде.</span><span class="sxs-lookup"><span data-stu-id="debed-131">Change the `Welcome` method to include two parameters as shown in the following code.</span></span> 

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]

<span data-ttu-id="debed-132">Предыдущий код:</span><span class="sxs-lookup"><span data-stu-id="debed-132">The preceding code:</span></span>

* <span data-ttu-id="debed-133">Использует функцию необязательного параметра C#, указывая, что параметр `numTimes` по умолчанию принимает значение 1, если ему не было передано значение.</span><span class="sxs-lookup"><span data-stu-id="debed-133">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span>
* <span data-ttu-id="debed-134">Использует `HtmlEncoder.Default.Encode` для защиты приложения от злонамеренного ввода данных (JavaScript).</span><span class="sxs-lookup"><span data-stu-id="debed-134">Uses`HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span> 
* <span data-ttu-id="debed-135">Использует [интерполированные строки](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span><span class="sxs-lookup"><span data-stu-id="debed-135">Uses [Interpolated Strings](/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span></span>

<span data-ttu-id="debed-136">Запустите приложение и перейдите по адресу:</span><span class="sxs-lookup"><span data-stu-id="debed-136">Run your app and browse to:</span></span>

   `http://localhost:xxxx/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="debed-137">(Замените xxxx на номер порта.) Вы можете попробовать различные значения `name` и `numtimes` в URL-адресе.</span><span class="sxs-lookup"><span data-stu-id="debed-137">(Replace xxxx with your port number.) You can try different values for `name` and `numtimes` in  the URL.</span></span> <span data-ttu-id="debed-138">[Система привязки модели MVC](xref:mvc/models/model-binding) автоматически сопоставляет именованные параметры из строк запроса в адресной строке с параметрами метода.</span><span class="sxs-lookup"><span data-stu-id="debed-138">The MVC [model binding](xref:mvc/models/model-binding) system automatically maps the named parameters from  the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="debed-139">Дополнительные сведения см. в разделе [Привязка модели](xref:mvc/models/model-binding).</span><span class="sxs-lookup"><span data-stu-id="debed-139">See [Model Binding](xref:mvc/models/model-binding) for more information.</span></span>

![Окно браузера, в котором отображается ответ "Hello Rick" (Привет, Rick); NumTimes=4](~/tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="debed-141">На показанном выше рисунке сегмент URL-адреса (`Parameters`) не используется, а параметры `name` и `numTimes` передаются как [строки запроса](https://wikipedia.org/wiki/Query_string).</span><span class="sxs-lookup"><span data-stu-id="debed-141">In the image above, the URL segment (`Parameters`) isn't used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="debed-142">Вопросительный знак (`?`) в приведенном выше URL-адресе используется в качестве разделителя, после которого указываются строки запроса.</span><span class="sxs-lookup"><span data-stu-id="debed-142">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="debed-143">Символ `&` разделяет строки запроса.</span><span class="sxs-lookup"><span data-stu-id="debed-143">The `&` character separates query strings.</span></span>

<span data-ttu-id="debed-144">Замените метод `Welcome` следующим кодом:</span><span class="sxs-lookup"><span data-stu-id="debed-144">Replace the `Welcome` method with the following code:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]

<span data-ttu-id="debed-145">Запустите приложение и введите следующий URL-адрес: `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="debed-145">Run the app and enter the following URL:  `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span></span>

![Окно браузера, в котором отображается ответ "Hello Rick" (Привет, Rick); ID=3](~/tutorials/first-mvc-app/adding-controller/_static/rick_routedata.png)

<span data-ttu-id="debed-147">На этот раз третий сегмент URL-адреса сопоставляется с параметром маршрута `id`.</span><span class="sxs-lookup"><span data-stu-id="debed-147">This time the third URL segment  matched the route parameter `id`.</span></span> <span data-ttu-id="debed-148">Метод `Welcome` содержит параметр `id`, который сопоставляется с шаблоном URL-адреса в методе `MapRoute`.</span><span class="sxs-lookup"><span data-stu-id="debed-148">The `Welcome`  method contains a parameter  `id` that matched the URL template in the `MapRoute` method.</span></span> <span data-ttu-id="debed-149">Завершающий символ `?` (в `id?`) указывает, что параметр `id` является необязательным.</span><span class="sxs-lookup"><span data-stu-id="debed-149">The trailing `?`  (in `id?`) indicates the `id` parameter is optional.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="debed-150">В этих примерах контроллер реализует работу представления и контроллера в модели MVC.</span><span class="sxs-lookup"><span data-stu-id="debed-150">In these examples the controller has been doing the "VC" portion  of MVC - that is, the view and controller work.</span></span> <span data-ttu-id="debed-151">Контроллер возвращает HTML напрямую.</span><span class="sxs-lookup"><span data-stu-id="debed-151">The controller is returning HTML  directly.</span></span> <span data-ttu-id="debed-152">Как правило, это не требуется, поскольку в этом случае заметно усложняется написание и поддержка кода.</span><span class="sxs-lookup"><span data-stu-id="debed-152">Generally you don't want controllers returning HTML directly, since  that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="debed-153">Вместо этого обычно используется отдельный файл шаблона представления Razor для создания HTML-ответа.</span><span class="sxs-lookup"><span data-stu-id="debed-153">Instead you typically use a separate Razor view template file to help generate the HTML response.</span></span> <span data-ttu-id="debed-154">Это будет показано в следующем руководстве.</span><span class="sxs-lookup"><span data-stu-id="debed-154">You do that in the next tutorial.</span></span>
