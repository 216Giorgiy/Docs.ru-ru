---
title: "Публикация приложения ASP.NET Core в Azure с помощью Visual Studio"
author: rick-anderson
description: 
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: get-started-article
ms.assetid: 78571e4a-a143-452d-9cf2-0860f85972e6
ms.technology: aspnet
ms.prod: asp.net-core
uid: tutorials/publish-to-azure-webapp-using-vs
ms.openlocfilehash: c4df5f4551760fbc4ed4b11362d249b24f186e00
ms.sourcegitcommit: 8f5277871eff86134ebf68d3737196cfd4a62c2c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/13/2017
---
# <a name="publish-an-aspnet-core-web-app-to-azure-app-service-using-visual-studio"></a>Публикация веб-приложения ASP.NET Core в службе приложений Azure с помощью Visual Studio

Авторы: [Рик Андерсон (Rick Anderson)](https://twitter.com/RickAndMSFT) и [Сезар Блум Сильвейра (Cesar Blum Silveira)](https://github.com/cesarbs)

## <a name="set-up-the-development-environment"></a>Настройка среды разработки

* Установите последнюю версию [пакета Azure SDK для Visual Studio](https://www.visualstudio.com/features/azure-tools-vs). При установке пакета SDK будет установлена Visual Studio, если это еще не сделано.

> [!NOTE]
> Если на компьютере немного зависимостей, установка пакета SDK может занять более 30 минут.

* Установите [.NET Core и инструменты Visual Studio](http://go.microsoft.com/fwlink/?LinkID=798306).

* Проверьте свою [учетную запись Azure](https://portal.azure.com/). Вы можете [открыть бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial/) или [активировать преимущества для подписчиков Visual Studio](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/).

## <a name="create-a-web-app"></a>Создание веб-приложения

На начальной странице Visual Studio выберите **Создать проект...** 

![Начальная страница](publish-to-azure-webapp-using-vs/_static/new_project.png)

Кроме того, для создания проекта можно использовать меню. Выберите **Файл > Создать > Проект...**

![меню "Файл"](publish-to-azure-webapp-using-vs/_static/alt_new_project.png)

В диалоговом окне **Создание проекта** выполните следующие действия.

* В левой области выберите **Веб**.

* В центральной области выберите **Веб-приложение ASP.NET Core (.NET Core)**.

* Нажмите кнопку **ОК**.

![Диалоговое окно создания нового проекта](publish-to-azure-webapp-using-vs/_static/new_prj.png)

В диалоговом окне **Создание веб-приложения ASP.NET Core (.NET Core)** выполните следующие действия.

* Выберите **Веб-приложение**.

* Задайте для параметра **Проверка подлинности** значение **Учетные записи отдельных пользователей**

* Проверьте, что флажок **Размещение в облаке** **не** установлен.

* Нажмите кнопку **ОК**.

![Диалоговое окно "Создание веб-приложения ASP.NET Core (.NET Core)"](publish-to-azure-webapp-using-vs/_static/noath.png)

## <a name="test-the-app-locally"></a>Локальное тестирование приложения

* Нажмите сочетание клавиш **CTRL+F5** для локального запуска приложения.

* Щелкните ссылки **О программе** и **Контакт**. В зависимости от размера устройства может потребоваться щелкнуть значок навигации, чтобы отобразить ссылки.

![Веб-приложение откроется в localhost.](publish-to-azure-webapp-using-vs/_static/show.png)

* Щелкните **Зарегистрировать** и зарегистрируйте нового пользователя. Можно использовать вымышленный адрес электронной почты. При отправке появится следующее сообщение об ошибке:

![Внутренняя ошибка сервера: сбой операции из базы данных при обработке запроса. Исключения SQL: не удается открыть базу данных. Чтобы решить эту проблему, можно применить существующие миграции для контекста базы данных приложения.](publish-to-azure-webapp-using-vs/_static/mig.png)

Устранить проблему можно двумя разными способами:

* Нажмите **Применить миграции** и после обновления страницы перезагрузите ее.

* Или в командной строке в каталоге проекта выполните следующее:

  <!-- literal_block {"ids": [], "xml:space": "preserve"} -->

  ```
  dotnet ef database update
     ```

Приложение отобразит адрес сообщение электронной почты, которое используется для регистрации нового пользователя, и ссылку **Выход**.

![Веб-приложение откроется в Microsoft Edge. Ссылка "Зарегистрировать" заменяется текстом "Hello abc@example.com!"](publish-to-azure-webapp-using-vs/_static/hello.png)

## <a name="deploy-the-app-to-azure"></a>Развертывание приложения в Azure

Убедитесь в том, что приложение, публикуемое для развертывания, не запущено. Во время выполнения приложения файлы в папке *publish* блокируются. Заблокированные файлы нельзя скопировать, так что развертывание в этом случае не произойдет.

В обозревателе решений щелкните правой кнопкой мыши проект и выберите команду **Опубликовать…**

![Открытое контекстное меню с выделенной ссылкой "Опубликовать"](publish-to-azure-webapp-using-vs/_static/pub.png)

В диалоговом окне **Публикация** выберите **Служба приложений Microsoft Azure**.

![Диалоговое окно публикации](publish-to-azure-webapp-using-vs/_static/maas1.png)

Щелкните **Создать...**, чтобы создать группу ресурсов. Создание группы ресурсов упростит удаление всех ресурсов Azure, создаваемых в этом учебнике.

![Диалоговое окно "Служба приложений"](publish-to-azure-webapp-using-vs/_static/newrg1.png)

Создайте группу ресурсов и план службы приложений:

* Щелкните **Создать...**  рядом с группой ресурсов и введите имя для новой группы ресурсов.

* Щелкните **Создать...**  рядом с планом службы приложений и выберите ближайшее расположение. Можно сохранить созданное по умолчанию имя.

* Нажмите **Обзор дополнительных служб Azure**, чтобы создать базу данных.

![Диалоговое окно новой группы ресурсов: панель размещения](publish-to-azure-webapp-using-vs/_static/cas.png)

* Щелкните зеленый значок **+**, чтобы создать базу данных SQL.

![Диалоговое окно новой группы ресурсов: панель служб](publish-to-azure-webapp-using-vs/_static/sql.png)

* Щелкните **Создать...**  в диалоговом окне **Настройка базы данных SQL**, чтобы создать сервер базы данных.

![Диалоговое окно "Настройка базы данных SQL"](publish-to-azure-webapp-using-vs/_static/conf.png)

* Введите имя пользователя администратора и пароль, а затем нажмите кнопку **ОК**. Не забудьте имя пользователя и пароль, созданные на этом шаге. Можно сохранить созданное по умолчанию значение в поле **Имя сервера**.

![Диалоговое окно "Настройка SQL Server"](publish-to-azure-webapp-using-vs/_static/conf_servername.png)

> [!NOTE]
> "admin" не может использоваться в качестве имени пользователя администратора.

* В диалоговом окне **Настройка базы данных SQL** нажмите кнопку **ОК**.

![Диалоговое окно "Настройка базы данных SQL"](publish-to-azure-webapp-using-vs/_static/conf_final.png)

* Нажмите кнопку **Создать** в диалоговом окне **Создание службы приложений**.

![Диалоговое окно "Создание службы приложений"](publish-to-azure-webapp-using-vs/_static/create_as.png)

* Нажмите кнопку **Далее** в диалоговом окне **Публикация**.

![Диалоговое окно "Публикация": панель "Подключение"](publish-to-azure-webapp-using-vs/_static/pubc.png)

* В разделе **Параметры** диалогового окна **Публикация**:

  * Разверните узел **Базы данных** и установите флажок **Использовать эту строку подключения во время выполнения**.

  * Разверните узел **Миграции Entity Framework** и установите флажок **Использовать эту миграцию при публикации**.

* Нажмите кнопку **Опубликовать** и подождите, пока Visual Studio завершит публикацию приложения.

![Диалоговое окно "Публикация": панель "Параметры"](publish-to-azure-webapp-using-vs/_static/pubs.png)

Visual Studio опубликует приложение в Azure и запустит облачное приложение в браузере.

### <a name="test-your-app-in-azure"></a>Тестирование приложения в Azure

* Протестируйте ссылки **О программе** и **Контакт**.

* Регистрация нового пользователя

![Веб-приложение, открытое в Microsoft Edge в службе приложений Azure](publish-to-azure-webapp-using-vs/_static/final.png)

### <a name="update-the-app"></a>Обновление приложения

* Отредактируйте файл представления Razor `Views/Home/About.cshtml` и измените его содержимое. Пример:

<!-- literal_block {"ids": [], "linenos": false, "xml:space": "preserve", "language": "html", "highlight_args": {"hl_lines": [7]}} -->

```html
@{
       ViewData["Title"] = "About";
   }
   <h2>@ViewData["Title"].</h2>
   <h3>@ViewData["Message"]</h3>

   <p>My updated about page.</p>
   ```

* Щелкните проект правой кнопкой мыши и снова выберите пункт **Опубликовать...**

![Открытое контекстное меню с выделенной ссылкой "Опубликовать"](publish-to-azure-webapp-using-vs/_static/pub.png)

* После публикации приложения проверьте, что внесенные изменения доступны в Azure.

### <a name="clean-up"></a>Очистка

Завершив тестирование приложения, перейдите на [портал Azure](https://portal.azure.com/) и удалите приложение.

* Выберите пункт **Группы ресурсов**, затем созданную группу ресурсов.

![Портал Azure: пункт "Группы ресурсов" в меню боковой панели](publish-to-azure-webapp-using-vs/_static/portalrg.png)

* В колонке **Группы ресурсов** нажмите кнопку **Удалить**.

![Портал Azure: колонка "Группы ресурсов"](publish-to-azure-webapp-using-vs/_static/rgd.png)

* Измените имя группы ресурсов, а затем нажмите кнопку **Удалить**. Ваше приложение и все ресурсы, созданные в ходе изучения этого учебника, удалены из Azure.

### <a name="next-steps"></a>Следующие шаги

* [Начало работы с ASP.NET Core MVC и Visual Studio](first-mvc-app/start-mvc.md)

* [Введение в ASP.NET Core](../index.md)

* [Основы](../fundamentals/index.md)
