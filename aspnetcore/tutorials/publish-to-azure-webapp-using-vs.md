---
title: "Публикация приложения ASP.NET Core в Azure с помощью Visual Studio"
author: rick-anderson
description: 
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 10/05/2017
ms.topic: get-started-article
ms.assetid: 78571e4a-a143-452d-9cf2-0860f85972e6
ms.technology: aspnet
ms.prod: asp.net-core
uid: tutorials/publish-to-azure-webapp-using-vs
ms.openlocfilehash: 6f697ed4d8876a19cd058533e4f6a5d4f7cdc2fb
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/10/2017
---
# <a name="publish-an-aspnet-core-web-app-to-azure-app-service-using-visual-studio"></a>Публикация веб-приложения ASP.NET Core в службе приложений Azure с помощью Visual Studio

Авторы: [Рик Андерсон (Rick Anderson)](https://twitter.com/RickAndMSFT), [Сезар Блум Сильвейра (Cesar Blum Silveira)](https://github.com/cesarbs) и [Рейчел Аппель (Rachel Appel)](https://twitter.com/rachelappel)

Если вы работаете на компьютере Mac, см. раздел [Publish to Azure from Visual Studio for Mac](https://blog.xamarin.com/publish-azure-visual-studio-mac/) (Публикация в Azure из Visual Studio для компьютера Mac).

## <a name="set-up"></a>Настройка

* Создайте [бесплатную учетную запись Azure](https://aka.ms/K5y5yh), если у вас ее нет. 

## <a name="create-a-web-app"></a>Создание веб-приложения

На начальной странице Visual Studio последовательно выберите **Файл > Создать > Проект…**

![меню "Файл"](publish-to-azure-webapp-using-vs/_static/file_new_project.png)

В диалоговом окне **Создание проекта** выполните следующие действия.

* В левой области выберите **.NET Core**.

* В центральной области выберите **Веб-приложение ASP.NET Core**.

* Нажмите кнопку **ОК**.

![Диалоговое окно создания нового проекта](publish-to-azure-webapp-using-vs/_static/new_prj.png)

В диалоговом окне **Создание веб-приложения ASP.NET Core** сделайте следующее.

* Выберите **Веб-приложение**.

* Выберите **Изменить способ проверки подлинности**.

![Диалоговое окно создания нового проекта](publish-to-azure-webapp-using-vs/_static/new_prj_2.png)

Появится диалоговое окно **Изменение способа проверки подлинности**. 

* Выберите **Учетные записи отдельных пользователей**.

* Нажмите кнопку **ОК**, чтобы вернуться на страницу **Создание веб-приложения ASP.NET Core**, а затем снова нажмите кнопку **ОК**.

![Диалоговое окно "Новый способ веб-проверки подлинности ASP.NET Core"](publish-to-azure-webapp-using-vs/_static/new_prj_auth.png) 

Visual Studio создает решение.

## <a name="run-the-app-locally"></a>Локальный запуск приложения

* Выберите **Отладка**, а затем **Запустить без отладки**, чтобы запустить приложение локально.

* Щелкните ссылки **Сведения** и **Контакты**, чтобы проверить работу веб-приложения.

![Веб-приложение откроется в localhost.](publish-to-azure-webapp-using-vs/_static/show.png)

* Выберите **Зарегистрироваться** и зарегистрируйте нового пользователя. Можно использовать вымышленный адрес электронной почты. После отправки на странице отображается следующая ошибка.

    *"Внутренняя ошибка сервера: не удалось выполнить операцию базы данных при обработке запроса. Исключения SQL: не удается открыть базу данных. Применение имеющихся миграций для контекста базы данных приложения, возможно, позволит решить проблему."*

* Выберите **Применить миграции** и после обновления страницы перезагрузите ее.

![Внутренняя ошибка сервера: сбой операции из базы данных при обработке запроса. Исключения SQL: не удается открыть базу данных. Чтобы решить эту проблему, можно применить существующие миграции для контекста базы данных приложения.](publish-to-azure-webapp-using-vs/_static/mig.png)

Приложение отобразит адрес электронной почты, который использовался для регистрации нового пользователя, и ссылку **Выйти**.

![Веб-приложение откроется в Microsoft Edge. Ссылка "Зарегистрировать" заменяется текстом "Hello email@domain.com!"](publish-to-azure-webapp-using-vs/_static/hello.png)

## <a name="deploy-the-app-to-azure"></a>Развертывание приложения в Azure

Закройте веб-страницу, вернитесь в Visual Studio и выберите **Остановить отладку** в меню **Отладка**.

В обозревателе решений щелкните правой кнопкой мыши проект и выберите команду **Опубликовать…**

![Открытое контекстное меню с выделенной ссылкой "Опубликовать"](publish-to-azure-webapp-using-vs/_static/pub.png)

В диалоговом окне **Публикация** выберите **Служба приложений Microsoft Azure** и щелкните **Опубликовать**.

![Диалоговое окно публикации](publish-to-azure-webapp-using-vs/_static/maas1.png)

* Присвойте приложению уникальное имя. 

* Выберите подписку.

* Щелкните **Создать…** рядом с группой ресурсов и введите имя для новой группы ресурсов.

* Щелкните **Создать…** рядом с планом службы приложений и выберите ближайшее к вам расположение. Вы можете сохранить имя, созданное по умолчанию.

![Диалоговое окно "Служба приложений"](publish-to-azure-webapp-using-vs/_static/newrg1.png)

* Выберите вкладку **Службы**, чтобы создать базу данных.

* Выберите зеленый значок **+**, чтобы создать базу данных SQL.

![Новая база данных SQL](publish-to-azure-webapp-using-vs/_static/sql.png)

* Щелкните **Создать…** в диалоговом окне **Настройка базы данных SQL**, чтобы создать базу данных.

![Новый сервер и база данных SQL](publish-to-azure-webapp-using-vs/_static/conf.png)

Появится диалоговое окно **Настройка SQL Server**.

* Введите имя пользователя и пароль администратора, а затем нажмите кнопку **ОК**. Не забудьте имя пользователя и пароль, созданные на этом шаге. Вы можете сохранить **Имя сервера** по умолчанию. 

* Введите имена базы данных и строки подключения.

> [!NOTE]
> "admin" не может использоваться в качестве имени пользователя администратора.

![Диалоговое окно "Настройка SQL Server"](publish-to-azure-webapp-using-vs/_static/conf_servername.png)

* Нажмите кнопку **ОК**.

Visual Studio вернет диалоговое окно **Создание службы приложений**.

* Нажмите кнопку **Создать** в диалоговом окне **Создание службы приложений**.

![Диалоговое окно "Настройка базы данных SQL"](publish-to-azure-webapp-using-vs/_static/conf_final.png)

* Щелкните ссылку **Параметры** в диалоговом окне **Публикация**.

![Диалоговое окно "Публикация": панель "Подключение"](publish-to-azure-webapp-using-vs/_static/pubc.png)

На странице **Параметры** диалогового окна **Публикация**

  * Разверните раздел **Базы данных** и установите флажок **Использовать эту строку подключения во время выполнения**.

  * Разверните раздел **Миграции Entity Framework** и установите флажок **Использовать эту миграцию при публикации**.

* Нажмите кнопку **Сохранить**. Visual Studio вернется в диалоговое окно **Публикация**. 

![Диалоговое окно "Публикация": панель "Параметры"](publish-to-azure-webapp-using-vs/_static/pubs.png)

Нажмите кнопку **Опубликовать**. Visual Studio опубликует приложение в Azure и запустит облачное приложение в браузере.

### <a name="test-your-app-in-azure"></a>Тестирование приложения в Azure

* Протестируйте ссылки **О программе** и **Контакт**.

* Регистрация нового пользователя

![Веб-приложение, открытое в Microsoft Edge в службе приложений Azure](publish-to-azure-webapp-using-vs/_static/register.png)

### <a name="update-the-app"></a>Обновление приложения

* Измените страницу Razor *Pages/About.cshtml* и ее содержимое. Например, вы можете изменить абзац на "Hello ASP.NET Core!":

    [!code-html[About](publish-to-azure-webapp-using-vs/sample/about.cshtml?highlight=9&range=1-9)]

* Щелкните правой кнопкой мыши проект и снова выберите пункт **Опубликовать...**.

![Открытое контекстное меню с выделенной ссылкой "Опубликовать"](publish-to-azure-webapp-using-vs/_static/pub.png)

* После публикации приложения убедитесь, что внесенные изменения доступны в Azure.

![Убедитесь, что задача завершена.](publish-to-azure-webapp-using-vs/_static/final.png)

### <a name="clean-up"></a>Очистка

Завершив тестирование приложения, перейдите на [портал Azure](https://portal.azure.com/) и удалите приложение.

* Выберите пункт **Группы ресурсов**, а затем созданную группу ресурсов.

![Портал Azure: пункт "Группы ресурсов" в меню боковой панели](publish-to-azure-webapp-using-vs/_static/portalrg.png)

* На странице **Группы ресурсов** выберите **Удалить**.

![Портал Azure: страница "Группы ресурсов"](publish-to-azure-webapp-using-vs/_static/rgd.png)

* Введите имя группы ресурсов и выберите **Удалить**. Ваше приложение и все ресурсы, созданные при работе с этим руководством, удалены из Azure.

### <a name="next-steps"></a>Следующие шаги

* [Непрерывное развертывание в Azure с помощью Visual Studio и Git](../publishing/azure-continuous-deployment.md)
