# <a name="key-vault-configuration-provider-sample-application-aspnet-core-1x"></a>Образец приложения поставщика конфигурации хранилища ключей (ASP.NET Core 1.x)

В этом примере описывается использование поставщика конфигурации хранилища ключей Azure для ASP.NET Core 1.x. Для образца ASP.NET Core 2.x. в разделе [образец приложения поставщика конфигурации хранилища ключей (ASP.NET Core 2.x)](https://github.com/aspnet/Docs/tree/master/aspnetcore/security/key-vault-configuration/samples/basic-sample/2.x).

> [!NOTE]
> Поставщик конфигурации не работает с ASP.NET Core 1.0. Если необходимо реализовать поставщик конфигурации, приложение — это приложение ASP.NET Core 1.0 обновите приложения для первого 1.1 или более поздней версии.

Дополнительные сведения о том, как работает этот пример см. в разделе [конфигурации поставщика хранилища ключей Azure](xref:security/key-vault-configuration) раздела.

## <a name="using-the-sample"></a>Использование образца
1. Создание хранилища ключей и настроить Azure Active Directory (Azure AD) для приложения согласно инструкциям в [приступить к работе с хранилищем ключей Azure](https://azure.microsoft.com/documentation/articles/key-vault-get-started/).
  * Добавьте секреты в хранилище ключей с использованием [модуль AzureRM ключ хранилища PowerShell](/powershell/module/azurerm.keyvault) доступны из [коллекции PowerShell](https://www.powershellgallery.com/packages/AzureRM.KeyVault), [API REST хранилища ключей Azure](/rest/api/keyvault/), или [Портал azure](https://portal.azure.com/). Секреты создаются как *вручную* или *сертификат* секретные данные. *Сертификат* секретные данные, сертификаты для использования приложений и служб, но не поддерживаются поставщиком конфигурации. Следует использовать *вручную* параметр, чтобы создать секреты пары "имя значение" для использования с поставщиком конфигурации.
    * Простой секреты, создаются в виде пар "имя значение". Azure имена секрета хранилища ключей, ограничены буквы, цифры и дефисы.
    * Используйте иерархическими значениями (разделы конфигурации) `--` (двух дефисов) в качестве разделителя в образце. Имена, которые обычно используются для разделения раздел из подраздела в [конфигурации ASP.NET Core](xref:fundamentals/configuration/index), не разрешены в именах секрета. Таким образом используются и при загрузке секреты в конфигурации приложения для двоеточие местами двух дефисов.
    * Создайте два *вручную* секреты с помощью следующих пар имя значение. Первый секретный код является простым именем и значением и второй секретный код создает секретное значение с раздел и раздел имя секрета:
      * `SecretName`: `secret_value_1`
      * `Section--SecretName`: `secret_value_2`
  * Регистрация примера приложения в Azure Active Directory.
  * Разрешить приложению доступ к хранилища ключей. При использовании `Set-AzureRmKeyVaultAccessPolicy` командлет PowerShell, чтобы разрешить приложению доступ к хранилища ключей, обеспечивают `List` и `Get` доступ к секретной информации с `-PermissionsToSecrets list,get`.
2. Обновление приложения *appsettings.json* файл со значениями `Vault`, `ClientId`, и `ClientSecret`.
3. Запустите пример приложения, который получает свои значения конфигурации `IConfigurationRoot` с тем же именем, как имя секрета.
  * Не иерархическими значениями: значение для `SecretName` получен с `config["SecretName"]`.
  * Иерархическими значениями (разделов): используйте `:` нотации (двоеточие) или `GetSection` метода расширения. Выполните один из этих подходов, чтобы получить значение конфигурации.
    * `config["Section:SecretName"]`
    * `config.GetSection("Section")["SecretName"]`
