---
title: "Общие сведения о защите данных"
author: rick-anderson
description: 
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 4542cd37-b47c-454c-be19-d1b5810d67fe
ms.technology: aspnet
ms.prod: asp.net-core
uid: security/data-protection/introduction
ms.openlocfilehash: b7391fffd5d512c01af5d709755a925f739b59ba
ms.sourcegitcommit: 9cdbfd0d670d70b9c354216aabee260c52dad5ee
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2017
---
# <a name="introduction-to-data-protection"></a>Общие сведения о защите данных

Веб-приложений часто требуется хранить конфиденциальные данные. Windows предоставляет DPAPI для настольных приложений, но это не подходит для веб-приложений. Стек защиты данных ASP.NET Core предоставляют простой и удобный API-интерфейса криптографии разработчик может использовать для защиты данных, включая управление ключами и поворота.

Стек защиты данных ASP.NET Core предназначен для использования в качестве долгосрочной заменой <machineKey> элемент в ASP.NET 1.x - 4.x. Она может решать многие из недостатки использования старого шифрования стека в то же время предоставляя out встроенное решение для большинства вариантов использования, которые чаще всего возникают современных приложений.

## <a name="problem-statement"></a>Постановка задачи

Общее постановка можно четко сформулировать в одном предложении: необходимо сохранить доверенные данные для последующего извлечения, но не доверяете механизм сохраняемости. В терминах web это могут быть написаны как «Требуется приема-передачи надежным через ненадежный клиент.»

Это типичный пример — это файл cookie проверки подлинности или носителя токена. Сервер создает «Я Groot и иметь разрешения xyz» токен, и передает его клиенту. Отменено клиент представляет токен на сервер, но этот сервер должен каких-либо гарантий, что клиент не подделан маркер. Таким образом, первое требование: подлинность (так) целостность, проверки правописания вскрытия).

Поскольку сохраненное состояние является доверенным для сервера, мы полагаем, что это состояние может содержать сведения, относящиеся к рабочей среде. Это может быть в форме путь к файлу, разрешение, дескриптор или других непрямую ссылку или иную часть данных конкретного сервера. Такие данные следует обычно не будут предоставлены ненадежный клиент. Таким образом второе требование: конфиденциальность.

Наконец поскольку различными современных приложений мы узнали является отдельных компонентов потребуется воспользоваться преимуществами этой системы независимо от других компонентов в системе. Для экземпляра Если этот стек использует компонент токена носителя, он должен использовать без вмешательства механизм противодействия CSRF, также могут использовать тот же стек. Таким образом окончательного требование: изоляции.

Мы случае можно указать дополнительные ограничения для сужения области в соответствии с требованиями. Предполагается, что все службы, находящейся в пределах криптосистеме равной степени надежными и что данные не требуется создать или использовать за пределами служб в нашем прямое управление. Кроме того нам требуется, что операции имеют максимально возможной скоростью, так как каждый запрос к веб-служба может пройти через криптосистеме один или несколько раз. Это делает симметричного шифрования идеально подходит для данного сценария, и мы скидки асимметричное шифрование, пока таких время, когда он нужен.

## <a name="design-philosophy"></a>Принципы разработки

Мы запустили путем выявления проблем с существующие стека. После создания, мы исследованных ландшафта существующие решения и подтвердила, что с существующие решения не довольно возможности, мы поиск. Затем мы разработан решение, основанное на несколько замечания.

* Система должны обеспечивать простоты конфигурации. В идеале система будет требует настройки и разработчики могут попаданий посадки. В ситуациях, где разработчики должны настроить определенный аспект (например, хранилище ключей) следует учесть перед собой простой этих определенных конфигураций.

* Предоставляют простой API потребительском. API-интерфейсы должно быть легко использовать правильно и сложности при использовании неправильно.

* Разработчикам не следует также знать принципы управления ключами. Система должна поддерживать выбора алгоритма и ключа временем существования от имени для разработчиков. В идеальном случае разработчик даже никогда не должны иметь доступ к необработанные материал ключа.

* Ключи должны быть защищены при хранении, когда это возможно. Система должна определить механизм защиты соответствующее значение по умолчанию и автоматического применения.

С этими правилами, помните, мы разработали простой, [удобные](using-data-protection.md) стека защиты данных.

В основном защиты данных ASP.NET Core API-интерфейсы не предназначены для неопределенного сохраняемости Конфиденциально полезных данных. Другие технологии, такие как [CNG Windows DPAPI](https://msdn.microsoft.com/library/windows/desktop/hh706794%28v=vs.85%29.aspx) и [Azure Rights Management](https://docs.microsoft.com/rights-management/) больше подходят для сценария хранилища не ограничена, и они обладают возможностями соответственно строгого управления ключами. С другой стороны, нет ничего запретить разработчик с помощью интерфейсов API защиты данных ASP.NET Core для долгосрочной защиты конфиденциальных данных.

## <a name="audience"></a>Аудитория

Система защиты данных состоит из пяти основных пакетов. Различные аспекты эти API-интерфейсы целевой аудитории три основных;

1. [Обзор API-интерфейсы потребителя](consumer-apis/overview.md) целевой разработчики приложений и инфраструктуры.

   «Я не хочу получить сведения о том, как функционирует стека или о его настройке. Просто требуется для выполнения некоторой операции в виде простого, так как можно с высокой вероятностью успешно с помощью API-интерфейсы.»

2. [Интерфейсы API настройки](configuration/overview.md) предназначены для разработчиков приложений и системных администраторов.

   «Я необходимо предоставить система защиты данных, что моя среда требует пути не по умолчанию или параметры».

3. Разработчики целевой API-интерфейсы расширяемости ответственный за реализация пользовательской политики. Использование этих API-интерфейсов ограничением в тех редких случаях и возникла помнить разработчикам безопасности.

   «Необходимо заменить весь компонент в системе, так как у меня действительно уникальные требования относительно поведения. Я хочу узнать uncommonly используемых частей рабочую область API для создания подключаемого модуля, который соответствует требованиям my.»

## <a name="package-layout"></a>Макета пакета

Стек защиты данных состоит из пяти пакетов.

* Microsoft.AspNetCore.DataProtection.Abstractions содержит базовые интерфейсы IDataProtectionProvider и IDataProtector. Он также содержит методы расширения полезны, может оказаться полезным при работе с этими типами (например, из-за перегрузки IDataProtector.Protect). В разделе потребителя интерфейсы для получения дополнительной информации. Если просто потребляют API-интерфейсы, кто отвечает за создание экземпляров система защиты данных, может потребоваться ссылка Microsoft.AspNetCore.DataProtection.Abstractions.

* Microsoft.AspNetCore.DataProtection содержит базовую реализацию системы защиты данных, в том числе основных криптографических операций, управления ключами, конфигурации и расширяемость. Если вы отвечает за создание экземпляров система защиты данных (например, добавление его IServiceCollection) или изменение или расширение его поведение, может потребоваться ссылка Microsoft.AspNetCore.DataProtection.

* Microsoft.AspNetCore.DataProtection.Extensions содержит дополнительные интерфейсы API, разработчики могут оказаться полезными, но которая не входящие в базовый пакет. Например этот пакет содержит простой API «создать экземпляр системы, который указывает на каталог конкретного хранилища ключей без настройки внедрения зависимостей» (Дополнительные сведения). Он также содержит методы расширения для ограничения времени существования полезных данных защищенного (Дополнительные сведения).

* Microsoft.AspNetCore.DataProtection.SystemWeb могут быть установлены в существующее приложение ASP.NET 4.x перенаправлять его <machineKey> операций вместо этого использовать новый стек защиты данных. В разделе [совместимости](compatibility/replacing-machinekey.md#compatibility-replacing-machinekey) для получения дополнительной информации.

* Microsoft.AspNetCore.Cryptography.KeyDerivation предоставляет реализацию пароль PBKDF2 хэширования подпрограммы и может использоваться с компьютеров, на которых необходимо безопасно обрабатывать пароли пользователей. В разделе [хэширования паролей](consumer-apis/password-hashing.md) для получения дополнительной информации.
