---
title: "Неизменность ключа и изменение параметров"
author: rick-anderson
description: "В этом документе перечислены сведения о реализации неизменности защиты ключа API-интерфейсы данных ASP.NET Core."
manager: wpickett
ms.author: riande
ms.date: 10/14/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: security/data-protection/implementation/key-immutability
ms.openlocfilehash: 98727c7a0c525edcda4fd8d004e0ac584cf0a5e5
ms.sourcegitcommit: a510f38930abc84c4b302029d019a34dfe76823b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/30/2018
---
# <a name="key-immutability-and-changing-settings"></a>Неизменность ключ и изменение параметров

Когда объект сохраняется в резервное хранилище, его представление навсегда исправлена. Новые данные добавляются в резервное хранилище, но никогда не может изменить существующие данные. Основная цель такого поведения — во избежание повреждения данных.

Одним из следствий этого поведения является что после написания резервное хранилище ключа является неизменяемым. Даты его создания, активации и истечения срока действия не может быть изменено, хотя он может быть отменено с помощью `IKeyManager`. Кроме того его алгоритмической данных, материала основного и шифрование на остальные свойства также являются неизменяемыми.

Если разработчик изменяет параметров, которые затрагивает сохраняемость ключа, эти изменения не вступают в силу до следующего ключа формируется, либо через явный вызов `IKeyManager.CreateNewKey` или с помощью данных защиты системы собственные [автоматического ключ Создание](key-management.md#data-protection-implementation-key-management) поведение. Доступны следующие параметры, влияющие на сохраняемость ключа:

* [Время жизни ключа по умолчанию](key-management.md#data-protection-implementation-key-management)

* [Шифрование ключа в механизм rest](key-encryption-at-rest.md#data-protection-implementation-key-encryption-at-rest)

* [Алгоритмической сведений, содержащихся в ключ](xref:security/data-protection/configuration/overview#changing-algorithms-with-usecryptographicalgorithms)

Если необходимо, чтобы эти параметры, чтобы запустить более ранних, чем следующий ключ автоматического отката времени, попробуйте сделать явный вызов `IKeyManager.CreateNewKey` для принудительного создания нового ключа. Необходимо указать дату явная активация ({теперь + 2 дня} является хорошим правило пробуждается изменение распространилось) и Дата окончания срока действия в вызове.

>[!TIP]
> Все приложения, коснувшись репозитория следует указать те же параметры с `IDataProtectionBuilder` методы расширения. В противном случае свойства сохраненного ключа будет зависеть от конкретного приложения, который вызван процедуры создания ключей.
