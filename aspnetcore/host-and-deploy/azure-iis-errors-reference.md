---
title: "Общий Справочник ошибок для службы приложений Azure и IIS с ASP.NET Core"
author: guardrex
description: "Следует отличать распространенных ошибок при размещении приложения ASP.NET Core на службы приложений Azure и служб IIS."
ms.author: riande
manager: wpickett
ms.custom: mvc
ms.date: 03/13/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: host-and-deploy/azure-iis-errors-reference
ms.openlocfilehash: 58c5ec6bb2603499332698fd4225e2fe636256e4
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
# <a name="common-errors-reference-for-azure-app-service-and-iis-with-aspnet-core"></a>Общий Справочник ошибок для службы приложений Azure и IIS с ASP.NET Core

Автор [Люк Латэм](https://github.com/guardrex) (Luke Latham)

Приведенный ниже перечень ошибок не является исчерпывающим. Если возникнет сообщение об ошибке, не перечисленных здесь, [открыть новый выпуск](https://github.com/aspnet/Docs/issues/new) подробные инструкции по воспроизведению ошибки.

## <a name="installer-unable-to-obtain-vc-redistributable"></a>Установщику не удается получить распространяемый компонент VC++

* **Исключение установщика:** 0x80072efd or 0x80072f76 — неопределенная ошибка

* **Исключение журнала установщика&#8224;:** ошибка 0x80072efd или 0x80072f76: не удалось выполнить пакет EXE

  &#8224;Журнал находится в папке C:\Users\\{ПОЛЬЗОВАТЕЛЬ}\AppData\Local\Temp\dd_DotNetCoreWinSvrHosting__{метка_времени}.log.

Устранение неполадок:

* Если при установке пакета размещения сервера у системы нет доступа к Интернету, это исключение возникает, когда у установщика нет возможности получить *Распространяемый компонент Microsoft Visual C++ 2015*. Получить установщика из [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=53840). Если программа установки завершается ошибкой, сервер может не получить среды выполнения .NET Core, необходимые для размещения развертывания зависит от framework (дискеты). Если размещение системой защиты Фиксированных, убедитесь, что среда выполнения установлен в программах &amp; функции. В случае необходимости получения установщика среды выполнения из [загрузок .NET](https://www.microsoft.com/net/download/core). После установки среды выполнения перезагрузите систему или перезапустите службы IIS, выполнив в командной строке команду **net stop was /y**, а затем — команду **net start w3svc**.

## <a name="os-upgrade-removed-the-32-bit-aspnet-core-module"></a>При обновлении ОС был удален 32-разрядный модуль ASP.NET Core

* **Журнал приложений:** не удалось загрузить модуль DLL **C:\WINDOWS\system32\inetsrv\aspnetcore.dll**. Ошибочные данные.

Устранение неполадок:

* Не относящиеся к ОС файлы в каталоге **C:\Windows\SysWOW64\inetsrv** не сохраняются при обновлении ОС. Если модуль ASP.NET Core установлена до обновления операционной системы и затем любой пул приложений запускается в 32-разрядном режиме после обновления операционной системы, при возникновении этой проблемы. После обновления ОС восстановите модуль ASP.NET Core. См. раздел [Установка пакета размещения .NET Core для Windows Server](xref:host-and-deploy/iis/index#install-the-net-core-windows-server-hosting-bundle). Выберите **восстановления** при запуске программы установки.

## <a name="platform-conflicts-with-rid"></a>Конфликты платформы с относительным идентификатором

* **Браузер:** ошибка HTTP 502.5 — сбой процесса

* **Журнал приложений:** приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\{путь}\' не удалось запустить процесс с помощью командной строки" "C:\\{путь} {сборки}. {} exe | библиотека dll}» ", код ошибки =" 0x80004005: ff.

* **Журнал модуля ASP.NET Core:** необработанное исключение: System.BadImageFormatException: не удалось загрузить файл или сборку '{сборки} .dll». Была сделана попытка загрузить программу, имеющую неверный формат.

Устранение неполадок:

* Убедитесь в том, что приложение выполняется локально в Kestrel. Сбой процесса может быть результатом проблемы в приложении. Дополнительные сведения см. в разделе [Устранение неполадок](xref:host-and-deploy/iis/troubleshoot).

* Убедитесь, что `<PlatformTarget>` в *.csproj* не противоречит RID. Например, не указывайте `<PlatformTarget>` из `x86` и публикации с RID `win10-x64`, либо с помощью *dotnet публикации - c - r выпуска Windows 10-x64* или установив `<RuntimeIdentifiers>` в *CSPROJ-файл*  для `win10-x64`. Проект публикуется без предупреждения или сообщения об ошибке, но при запуске в системе происходит сбой, а в журнале регистрируются указанные выше исключения.

* Если это исключение возникает по развертыванию приложения Azure, при обновлении приложения и развертывания новой сборки вручную удалить все файлы из предыдущего развертывания. Если останутся несовместимые сборки, то при развертывании обновленного приложения это может привести к исключению `System.BadImageFormatException`.

## <a name="uri-endpoint-wrong-or-stopped-website"></a>Неправильная конечная точка URI, либо веб-сайт остановлен

* **Браузер:** ERR_CONNECTION_REFUSED

* **Журнал приложений:** нет записи

* **Журнал модуля ASP.NET Core:** файл журнала не создан

Устранение неполадок:

* Убедитесь, что используется правильный URI конечной точки для приложения. Проверьте привязки.

* Убедитесь, что веб-сайт IIS не в *остановлена* состояния.

## <a name="corewebengine-or-w3svc-server-features-disabled"></a>Компонент сервера CoreWebEngine или W3SVC отключен

* **Исключение ОС:** для использования модуля ASP.NET Core должны быть установлены компоненты IIS 7.0 CoreWebEngine и W3SVC.

Устранение неполадок:

* Убедитесь, что включены соответствующие роли и компоненты. См. раздел [Конфигурация IIS](xref:host-and-deploy/iis/index#iis-configuration).

## <a name="incorrect-website-physical-path-or-app-missing"></a>Физический путь неверный веб-сайта или приложения отсутствует

* **Браузер:** 403 — запрещено. В доступе отказано **--ИЛИ--** 403.14 — запрещено. Веб-сервер настроен таким образом, чтобы не формировать список содержимого каталога.

* **Журнал приложений:** нет записи

* **Журнал модуля ASP.NET Core:** файл журнала не создан

Устранение неполадок:

* Проверьте веб-сайт IIS **основные параметры** и папка физического приложения. Убедитесь, что приложение в папку на веб-сайте IIS **физический путь**.

## <a name="incorrect-role-module-not-installed-or-incorrect-permissions"></a>Неправильная роль, модуль не установлен либо неверные разрешения

* **Браузер:** 500.19 — внутренняя ошибка сервера. Запрашиваемая страница недоступна из-за неверной конфигурации данных для этой страницы.

* **Журнал приложений:** нет записи

* **Журнал модуля ASP.NET Core:** файл журнала не создан

Устранение неполадок:

* Убедитесь, что включена ролью. См. раздел [Конфигурация IIS](xref:host-and-deploy/iis/index#iis-configuration).

* На странице **Программы и компоненты** убедитесь в том, что установлен **модуль Microsoft ASP.NET Core**. Если **модуль Microsoft ASP.NET Core** отсутствует в списке установленных программ, установите его. См. раздел [Установка пакета размещения .NET Core для Windows Server](xref:host-and-deploy/iis/index#install-the-net-core-windows-server-hosting-bundle).

* Убедитесь, что **пула приложений** > **модель процесса** > **удостоверение** равно **ApplicationPoolIdentity** или пользовательское удостоверение имеет правильные разрешения на доступ к папке развертывания приложения.

## <a name="incorrect-processpath-missing-path-variable-hosting-bundle-not-installed-systemiis-not-restarted-vc-redistributable-not-installed-or-dotnetexe-access-violation"></a>Неправильное значение processPath, отсутствует переменная PATH, пакет размещения не установлен, система или службы IIS не перезапущены, не установлен распространяемый компонент VC++ либо нарушены права доступа к dotnet.exe

* **Браузер:** ошибка HTTP 502.5 — сбой процесса

* **Журнал приложения:** приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\\{путь}\' не удалось запустить процесс с Командная строка"».\{ .exe сборки}» ", код ошибки =" 0x80070002: 0.

* **Журнал модуля ASP.NET Core:** файл журнала создан, но пуст

Устранение неполадок:

* Убедитесь в том, что приложение выполняется локально в Kestrel. Сбой процесса может быть результатом проблемы в приложении. Дополнительные сведения см. в разделе [Устранение неполадок](xref:host-and-deploy/iis/troubleshoot).

* Проверьте *processPath* атрибут `<aspNetCore>` элемент в *web.config* для подтверждения, что это *dotnet* для развертывания зависит от framework (системой защиты Фиксированных) или *. \{сборки} .exe* автономные развертывания (SCD).

* Для зависимого от платформы развертывания файл *dotnet.exe* может быть недоступен по пути, указанному в переменной PATH. Убедитесь в том, что папка *C:\Program Files\dotnet\* существует в системных параметрах PATH.

* В случае с зависимым от платформы развертыванием файл *dotnet.exe* может быть недоступен для удостоверения пользователя, используемого для пула приложений. Убедитесь в том, что удостоверение пользователя AppPool имеет доступ к каталогу *C:\Program Files\dotnet*. Убедитесь, что не настроены для идентификации пользователя AppPool на правила deny *C:\Program Files\dotnet* и каталогов приложения.

* Системой защиты Фиксированных был развернут и .NET Core устанавливается без перезапуска IIS. Перезагрузите сервер или перезапустите службы IIS, выполнив в командной строке команду **net stop was /y**, а затем — команду **net start w3svc**.

* Системой защиты Фиксированных развернуто без установки среды выполнения .NET Core на хост-системы. Если не был установлен среды выполнения .NET Core, запустите **.NET Core Windows Server, где размещены пакет установщика** в системе. См. раздел [Установка пакета размещения .NET Core для Windows Server](xref:host-and-deploy/iis/index#install-the-net-core-windows-server-hosting-bundle). При попытке установить среду выполнения .NET Core на компьютере без подключения к Интернету, получить среду выполнения из [загрузок .NET](https://www.microsoft.com/net/download/core) и запустите установщик размещения пакета для установки модуля ASP.NET Core. Завершите установку, перезагрузив систему или перезапустив службы IIS. Для этого выполните в командной строке команду **net stop was /y**, а затем — команду **net start w3svc**.

* Системой защиты Фиксированных был развернут и *Visual C++ 2015 распространяемый компонент Microsoft (x64)* не установлен в системе. Получить установщика из [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=53840).

## <a name="incorrect-arguments-of-aspnetcore-element"></a>Неверные аргументы элемента \<aspNetCore\>

* **Браузер:** ошибка HTTP 502.5 — сбой процесса

* **Журнал приложения:** приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\\{путь}\' не удалось запустить процесс с помощью командной строки" «dotnet».\{ DLL-файл сборки} ", код ошибки =" 0x80004005: 80008081.

* **Журнал модуля ASP.NET Core:** выполнение приложения не существует: "путь\{сборки} DLL-файл"

Устранение неполадок:

* Убедитесь в том, что приложение выполняется локально в Kestrel. Сбой процесса может быть результатом проблемы в приложении. Дополнительные сведения см. в разделе [Устранение неполадок](xref:host-and-deploy/iis/troubleshoot).

* Изучите *аргументы* атрибут `<aspNetCore>` элемент в *web.config* для подтверждения того, что он доступен (a) *.\{ DLL-файл сборки}* для развертывания зависит от framework (системой защиты Фиксированных); или значение не указано, пустая строка (b) (*аргументов = "»*), или список аргументов, приложения (*аргументов = «аргумент1, аргумент2,...»*) автономные развертывания (SCD).

## <a name="missing-net-framework-version"></a>Отсутствует версия платформы .NET Framework

* **Браузер:** 502.3 — неверный шлюз. При попытке маршрутизации запроса произошла ошибка подключения.

* **Журнал приложения:** ErrorCode = приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\\{путь}\' не удалось запустить процесс с помощью командной строки" «dotnet».\{ DLL-файл сборки} ", код ошибки =" 0x80004005: 80008081.

* **Журнал модуля ASP.NET Core:** Исключение из-за отсутствия метода, файла или сборки. Метод, файл или сборка, указанные в исключении, представляют собой метод, файл или сборку .NET Framework.

Устранение неполадок:

* Установите версию .NET Framework, отсутствующую в системе.

* Для развертывания зависит от framework (системой защиты Фиксированных) убедитесь, что среда выполнения правильный установлено в системе. Если проект обновляется 1.1, 2.0, развернуты в системе размещения, и это исключение приводит к, убедитесь в наличии 2.0 framework на хост-системы.

## <a name="stopped-application-pool"></a>Пул приложений остановлен

* **Браузер:** 503 — служба недоступна

* **Журнал приложений:** нет записи

* **Журнал модуля ASP.NET Core:** файл журнала не создан

Устранение неполадок

* Убедитесь, что пул приложений не находится в *остановлена* состояния.

## <a name="iis-integration-middleware-not-implemented"></a>ПО промежуточного слоя для интеграции IIS не внедрено

* **Браузер:** ошибка HTTP 502.5 — сбой процесса

* **Журнал приложения:** приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\\{путь}\' созданных процесса с помощью командной строки" "C:\\{путь}\{сборки}. {} exe | библиотека dll}» "но аварийное завершение и не ответа либо не прослушивать данный порт «{PORT}», код ошибки ="0x800705b4»

* **Журнал модуля ASP.NET Core:** файл журнала создан, и в нем нет сведений о неправильной работе.

Устранение неполадок

* Убедитесь в том, что приложение выполняется локально в Kestrel. Сбой процесса может быть результатом проблемы в приложении. Дополнительные сведения см. в разделе [Устранение неполадок](xref:host-and-deploy/iis/troubleshoot).

* Подтверждение, либо:
  * По промежуточного слоя интеграции IIS имеет referencedby вызов `UseIISIntegration` метода в приложении `WebHostBuilder` (ASP.NET Core 1.x)
  * Приложения использует `CreateDefaultBuilder` метод (ASP.NET Core 2.x).
  
  Дополнительные сведения см. в статье [Размещение в ASP.NET Core](xref:fundamentals/hosting).

## <a name="sub-application-includes-a-handlers-section"></a>Дочернее приложение имеет раздел \<handlers\>

* **Браузер:** ошибка HTTP 500.19 — внутренняя ошибка сервера

* **Журнал приложений:** нет записи

* **Журнал модуля ASP.NET Core:** файл журнала создан и показан нормальной работы для корневого приложения. Файл журнала не создается для приложения sub.

Устранение неполадок

* В файле *web.config* дочернего приложения не должно быть раздела `<handlers>`.

## <a name="application-configuration-general-issue"></a>Общая проблема с конфигурацией приложения

* **Браузер:** ошибка HTTP 502.5 — сбой процесса

* **Журнал приложения:** приложения "MACHINE/WEBROOT/APPHOST / {сборки}" с Физический корень "C:\\{путь}\' созданных процесса с помощью командной строки" "C:\\{путь}\{сборки}. {} exe | библиотека dll}» "но аварийное завершение и не ответа либо не прослушивать данный порт «{PORT}», код ошибки ="0x800705b4»

* **Журнал модуля ASP.NET Core:** файл журнала создан, но пуст

Устранение неполадок

* Это общее исключение указывает, что процессу не удалось запустить, скорее всего вызвано проблемой конфигурации приложения. Ссылка на [структуру каталогов](xref:host-and-deploy/directory-structure), убедитесь, что приложение развернуто файлов и папок подходят, и что имеются файлы конфигурации приложения и содержать правильные параметры для приложения и среды. Дополнительные сведения см. в разделе [Устранение неполадок](xref:host-and-deploy/iis/troubleshoot).
