---
title: "Работа с несколькими средами"
author: ardalis
description: 
keywords: "ASP.NET Core, параметры среды, ASPNETCORE_ENVIRONMENT"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: b5bba985-be12-4464-9a01-df3599b2a6f1
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/environments
ms.openlocfilehash: b66ef7e3626effff1c66c37a86865699fa8866f9
ms.sourcegitcommit: 78d28178345a0eea91556e4cd1adad98b1446db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2017
---
# <a name="working-with-multiple-environments"></a><span data-ttu-id="31ed8-103">Работа с несколькими средами</span><span class="sxs-lookup"><span data-stu-id="31ed8-103">Working with multiple environments</span></span>

<span data-ttu-id="31ed8-104">По [Стив Смит](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="31ed8-104">By [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="31ed8-105">ASP.NET Core обеспечивает поддержку для управления поведением приложения в нескольких средах, например разработки, промежуточной и производственной.</span><span class="sxs-lookup"><span data-stu-id="31ed8-105">ASP.NET Core provides support for controlling app behavior across multiple environments, such as development, staging, and production.</span></span> <span data-ttu-id="31ed8-106">Переменные среды используются для указания среды выполнения, что позволяет приложению должны быть настроены для этой среды.</span><span class="sxs-lookup"><span data-stu-id="31ed8-106">Environment variables are used to indicate the runtime environment, allowing the app to be configured for that environment.</span></span>

[<span data-ttu-id="31ed8-107">Просмотреть или скачать образец кода</span><span class="sxs-lookup"><span data-stu-id="31ed8-107">View or download sample code</span></span>](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample)

## <a name="development-staging-production"></a><span data-ttu-id="31ed8-108">Разработка решений, промежуточное хранение производства</span><span class="sxs-lookup"><span data-stu-id="31ed8-108">Development, Staging, Production</span></span>

<span data-ttu-id="31ed8-109">ASP.NET Core ссылается на определенный [переменной среды](https://github.com/aspnet/Home/wiki), `ASPNETCORE_ENVIRONMENT` для описания приложения в данный момент работает в среде.</span><span class="sxs-lookup"><span data-stu-id="31ed8-109">ASP.NET Core references a particular [environment variable](https://github.com/aspnet/Home/wiki), `ASPNETCORE_ENVIRONMENT` to describe the environment the application is currently running in.</span></span> <span data-ttu-id="31ed8-110">Эту переменную можно задать любое значение, например, но по соглашению используются три значения: `Development`, `Staging`, и `Production`.</span><span class="sxs-lookup"><span data-stu-id="31ed8-110">This variable can be set to any value you like, but three values are used by convention: `Development`, `Staging`, and `Production`.</span></span> <span data-ttu-id="31ed8-111">Вы найдете следующие значения, используемые в примерах и шаблоны в ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="31ed8-111">You will find these values used in the samples and templates provided with ASP.NET Core.</span></span>

<span data-ttu-id="31ed8-112">Текущее значение параметра среде могут быть обнаружены программным образом из в приложении.</span><span class="sxs-lookup"><span data-stu-id="31ed8-112">The current environment setting can be detected programmatically from within your application.</span></span> <span data-ttu-id="31ed8-113">Кроме того, можно использовать среду [тег вспомогательный](../mvc/views/tag-helpers/index.md) для включения определенных разделов в вашей [представление](../mvc/views/index.md) в зависимости от текущей среды приложения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-113">In addition, you can use the Environment [tag helper](../mvc/views/tag-helpers/index.md) to include certain sections in your [view](../mvc/views/index.md) based on the current application environment.</span></span>

<span data-ttu-id="31ed8-114">Обратите внимание: В Windows и macOS, заданным именем среды регистр не учитывается.</span><span class="sxs-lookup"><span data-stu-id="31ed8-114">Note: On Windows and macOS, the specified environment name is case insensitive.</span></span> <span data-ttu-id="31ed8-115">Является ли значение переменной `Development` или `development` или `DEVELOPMENT` результаты будут одинаковыми.</span><span class="sxs-lookup"><span data-stu-id="31ed8-115">Whether you set the variable to `Development` or `development` or `DEVELOPMENT` the results will be the same.</span></span> <span data-ttu-id="31ed8-116">Тем не менее, является Linux **регистра** ОС по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="31ed8-116">However, Linux is a **case sensitive** OS by default.</span></span> <span data-ttu-id="31ed8-117">Переменные среды, имена файлов и параметры требуют чувствительность к регистру.</span><span class="sxs-lookup"><span data-stu-id="31ed8-117">Environment variables, file names and settings require case sensitivity.</span></span>

### <a name="development"></a><span data-ttu-id="31ed8-118">Разработка</span><span class="sxs-lookup"><span data-stu-id="31ed8-118">Development</span></span>

<span data-ttu-id="31ed8-119">Это должна быть среды, используемые при разработке приложения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-119">This should be the environment used when developing an application.</span></span> <span data-ttu-id="31ed8-120">Обычно он используется для включения возможностей, которые вы не должны быть доступны при запуске приложения в рабочей среде, такие как [страницы разработчик исключений](xref:fundamentals/error-handling#the-developer-exception-page).</span><span class="sxs-lookup"><span data-stu-id="31ed8-120">It is typically used to enable features that you wouldn't want to be available when the app runs in production, such as the [developer exception page](xref:fundamentals/error-handling#the-developer-exception-page).</span></span>

<span data-ttu-id="31ed8-121">Если вы используете Visual Studio, можно настроить среду в профилей отладки проекта.</span><span class="sxs-lookup"><span data-stu-id="31ed8-121">If you're using Visual Studio, the environment can be configured in your project's debug profiles.</span></span> <span data-ttu-id="31ed8-122">Отладка профилей укажите [сервера](xref:fundamentals/servers/index) для использования при запуске приложения и любых переменных окружения требуется задать.</span><span class="sxs-lookup"><span data-stu-id="31ed8-122">Debug profiles specify the [server](xref:fundamentals/servers/index) to use when launching the application and any environment variables to be set.</span></span> <span data-ttu-id="31ed8-123">Проект может иметь несколько профилей отладки, которые по-разному задать переменные среды.</span><span class="sxs-lookup"><span data-stu-id="31ed8-123">Your project can have multiple debug profiles that set environment variables differently.</span></span> <span data-ttu-id="31ed8-124">С помощью управления этими профилями **отладки** вкладке проекта веб-приложения **свойства** меню.</span><span class="sxs-lookup"><span data-stu-id="31ed8-124">You manage these profiles by using the **Debug** tab of your web application project's **Properties** menu.</span></span> <span data-ttu-id="31ed8-125">Значения, заданные в свойствах проекта сохраняются в *launchSettings.json* файла и можно также настроить профили путем непосредственного изменения этого файла.</span><span class="sxs-lookup"><span data-stu-id="31ed8-125">The values you set in project properties are persisted in the *launchSettings.json* file, and you can also configure profiles by editing that file directly.</span></span>

<span data-ttu-id="31ed8-126">Профиль для IIS Express показан ниже:</span><span class="sxs-lookup"><span data-stu-id="31ed8-126">The profile for IIS Express is shown here:</span></span>

![Переменные среды параметр свойства проекта](environments/_static/project-properties-debug.png)

<span data-ttu-id="31ed8-128">Вот `launchSettings.json` файл, который включает профили для `Development` и `Staging`:</span><span class="sxs-lookup"><span data-stu-id="31ed8-128">Here is a `launchSettings.json` file that includes profiles for `Development` and `Staging`:</span></span>

[!code-json[Main](../fundamentals/environments/sample/src/Environments/Properties/launchSettings.json?highlight=15,22)]

<span data-ttu-id="31ed8-129">Изменения, внесенные в проект профилей могут не вступили в силу только после перезапуска веб-сервера используется (в частности, Kestrel необходимо перезагрузить перед он обнаруживает изменения, внесенные в своей среде).</span><span class="sxs-lookup"><span data-stu-id="31ed8-129">Changes made to project profiles may not take effect until the web server used is restarted (in particular, Kestrel must be restarted before it will detect changes made to its environment).</span></span>

>[!WARNING]
> <span data-ttu-id="31ed8-130">Переменные среды сохраняются в *launchSettings.json* не защищены каким-либо образом и будет входить в состав репозиторий исходного кода для проекта, если используется один.</span><span class="sxs-lookup"><span data-stu-id="31ed8-130">Environment variables stored in *launchSettings.json* are not secured in any way and will be part of the source code repository for your project, if you use one.</span></span> <span data-ttu-id="31ed8-131">**Никогда не храните учетные данные или другие секретные данные в этот файл.**</span><span class="sxs-lookup"><span data-stu-id="31ed8-131">**Never store credentials or other secret data in this file.**</span></span> <span data-ttu-id="31ed8-132">Если вам требуется место для хранения таких данных, используйте *секрет диспетчер* средство описано в [безопасного хранения секрета приложения во время разработки](../security/app-secrets.md#security-app-secrets).</span><span class="sxs-lookup"><span data-stu-id="31ed8-132">If you need a place to store such data, use the *Secret Manager* tool described in [Safe storage of app secrets during development](../security/app-secrets.md#security-app-secrets).</span></span>

### <a name="staging"></a><span data-ttu-id="31ed8-133">Промежуточный</span><span class="sxs-lookup"><span data-stu-id="31ed8-133">Staging</span></span>

<span data-ttu-id="31ed8-134">По соглашению `Staging` среда находится в предварительной рабочей среде для окончательного тестирования перед развертыванием в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="31ed8-134">By convention, a `Staging` environment is a pre-production environment used for final testing before deployment to production.</span></span> <span data-ttu-id="31ed8-135">В идеальном случае его физических характеристик, должны быть зеркально производства, чтобы все проблемы, которые могут возникнуть в рабочей среде, сначала выполнялись в промежуточной среде, где они обращаться не окажет влияния на пользователей.</span><span class="sxs-lookup"><span data-stu-id="31ed8-135">Ideally, its physical characteristics should mirror that of production, so that any issues that may arise in production occur first in the staging environment, where they can be addressed without impact to users.</span></span>

### <a name="production"></a><span data-ttu-id="31ed8-136">Производство</span><span class="sxs-lookup"><span data-stu-id="31ed8-136">Production</span></span>

<span data-ttu-id="31ed8-137">`Production` Среда — это среда, в которой выполняется приложение после его запуска и используется конечными пользователями.</span><span class="sxs-lookup"><span data-stu-id="31ed8-137">The `Production` environment is the environment in which the application runs when it is live and being used by end users.</span></span> <span data-ttu-id="31ed8-138">Эта среда должны быть настроены для повышения безопасности, производительности и надежности приложений.</span><span class="sxs-lookup"><span data-stu-id="31ed8-138">This environment should be configured to maximize security, performance, and application robustness.</span></span> <span data-ttu-id="31ed8-139">Ниже перечислены некоторые общие параметры, которые, возможно, в производственную среду, будут отличаться от разработки.</span><span class="sxs-lookup"><span data-stu-id="31ed8-139">Some common settings that a production environment might have that would differ from development include:</span></span>

* <span data-ttu-id="31ed8-140">Включить кэширование</span><span class="sxs-lookup"><span data-stu-id="31ed8-140">Turn on caching</span></span>

* <span data-ttu-id="31ed8-141">Убедитесь, объединяются в один пакет, уменьшено и потенциально полученном из CDN все ресурсы на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="31ed8-141">Ensure all client-side resources are bundled, minified, and potentially served from a CDN</span></span>

* <span data-ttu-id="31ed8-142">Отключить ErrorPages диагностики</span><span class="sxs-lookup"><span data-stu-id="31ed8-142">Turn off diagnostic ErrorPages</span></span>

* <span data-ttu-id="31ed8-143">Включите страницы с сообщением об ошибке</span><span class="sxs-lookup"><span data-stu-id="31ed8-143">Turn on friendly error pages</span></span>

* <span data-ttu-id="31ed8-144">Включить производства, ведение журнала и мониторинг (например, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span><span class="sxs-lookup"><span data-stu-id="31ed8-144">Enable production logging and monitoring (for example, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span></span>

<span data-ttu-id="31ed8-145">Это ни в коем случае должен быть полный список.</span><span class="sxs-lookup"><span data-stu-id="31ed8-145">This is by no means meant to be a complete list.</span></span> <span data-ttu-id="31ed8-146">Лучше избегать рассеивания проверки среды во многих частях приложения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-146">It's best to avoid scattering environment checks in many parts of your application.</span></span> <span data-ttu-id="31ed8-147">Вместо этого рекомендуется для выполнения таких проверок в приложении `Startup` классов там, где возможно</span><span class="sxs-lookup"><span data-stu-id="31ed8-147">Instead, the recommended approach is to perform such checks within the application's `Startup` class(es) wherever possible</span></span>

## <a name="setting-the-environment"></a><span data-ttu-id="31ed8-148">Настройка среды</span><span class="sxs-lookup"><span data-stu-id="31ed8-148">Setting the environment</span></span>

<span data-ttu-id="31ed8-149">Метод для настройки среды, зависит от операционной системы.</span><span class="sxs-lookup"><span data-stu-id="31ed8-149">The method for setting the environment depends on the operating system.</span></span>

### <a name="windows"></a><span data-ttu-id="31ed8-150">Windows</span><span class="sxs-lookup"><span data-stu-id="31ed8-150">Windows</span></span>
<span data-ttu-id="31ed8-151">Чтобы задать `ASPNETCORE_ENVIRONMENT` для текущего сеанса, если приложение запускается с помощью `dotnet run`, используются следующие команды</span><span class="sxs-lookup"><span data-stu-id="31ed8-151">To set the `ASPNETCORE_ENVIRONMENT` for the current session, if the app is started using `dotnet run`, the following commands are used</span></span>

<span data-ttu-id="31ed8-152">**командная строка;**</span><span class="sxs-lookup"><span data-stu-id="31ed8-152">**Command line**</span></span>
```
set ASPNETCORE_ENVIRONMENT=Development
```
<span data-ttu-id="31ed8-153">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="31ed8-153">**PowerShell**</span></span>
```
$Env:ASPNETCORE_ENVIRONMENT = "Development"
```

<span data-ttu-id="31ed8-154">Эти команды вступают в силу только для текущего окна.</span><span class="sxs-lookup"><span data-stu-id="31ed8-154">These commands take effect only for the current window.</span></span> <span data-ttu-id="31ed8-155">При закрытии окна параметр ASPNETCORE_ENVIRONMENT возвращается по умолчанию или значение машины.</span><span class="sxs-lookup"><span data-stu-id="31ed8-155">When the window is closed, the ASPNETCORE_ENVIRONMENT setting reverts to the default setting or machine value.</span></span> <span data-ttu-id="31ed8-156">Чтобы установить значение глобально при открытии Windows **панели управления** > **системы** > **расширенных параметров системы** и добавление или изменение `ASPNETCORE_ENVIRONMENT` значение.</span><span class="sxs-lookup"><span data-stu-id="31ed8-156">In order to set the value globally on Windows open the **Control Panel** > **System** > **Advanced system settings** and add or edit the `ASPNETCORE_ENVIRONMENT` value.</span></span>

![Дополнительные свойства системы](environments/_static/systemsetting_environment.png)

![Переменная среды ASPNET Core](environments/_static/windows_aspnetcore_environment.png) 

<span data-ttu-id="31ed8-159">**файл Web.config**</span><span class="sxs-lookup"><span data-stu-id="31ed8-159">**web.config**</span></span>

<span data-ttu-id="31ed8-160">В разделе *задание переменных среды* раздел [Справочник по конфигурации модуля ASP.NET Core](xref:hosting/aspnet-core-module#setting-environment-variables) раздела.</span><span class="sxs-lookup"><span data-stu-id="31ed8-160">See the *Setting environment variables* section of the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module#setting-environment-variables) topic.</span></span>

<span data-ttu-id="31ed8-161">**На пул приложений IIS**</span><span class="sxs-lookup"><span data-stu-id="31ed8-161">**Per IIS Application Pool**</span></span>

<span data-ttu-id="31ed8-162">Если нужно задать переменные среды для отдельных приложений, выполняющихся в изолированных пулах приложений (такая возможность поддерживается в службах IIS 10.0 и более поздних версий), см. подраздел, посвященный *команде AppCmd.exe*, в разделе [Переменные среды \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) справочной документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="31ed8-162">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

### <a name="macos"></a><span data-ttu-id="31ed8-163">MacOS</span><span class="sxs-lookup"><span data-stu-id="31ed8-163">macOS</span></span>
<span data-ttu-id="31ed8-164">Установка текущей среды для macOS можно сделать в строки при запуске приложения;</span><span class="sxs-lookup"><span data-stu-id="31ed8-164">Setting the current environment for macOS can be done in-line when running the application;</span></span>

```bash
ASPNETCORE_ENVIRONMENT=Development dotnet run
```
<span data-ttu-id="31ed8-165">или с помощью `export` задайте его перед запуском приложения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-165">or using `export` to set it prior to running the app.</span></span>

```bash
export ASPNETCORE_ENVIRONMENT=Development
``` 
<span data-ttu-id="31ed8-166">Переменные среды уровня машины задаются *.bashrc* или *.bash_profile* файла.</span><span class="sxs-lookup"><span data-stu-id="31ed8-166">Machine level environment variables are set in the *.bashrc*  or *.bash_profile* file.</span></span> <span data-ttu-id="31ed8-167">Измените файл, используя любой текстовый редактор и добавьте следующий оператор.</span><span class="sxs-lookup"><span data-stu-id="31ed8-167">Edit the file using any text editor and add the following statment.</span></span>

```
export ASPNETCORE_ENVIRONMENT=Development
```  

### <a name="linux"></a><span data-ttu-id="31ed8-168">Linux</span><span class="sxs-lookup"><span data-stu-id="31ed8-168">Linux</span></span>
<span data-ttu-id="31ed8-169">Дистрибутивы Linux, используйте `export` команды из командной строки для параметров переменных на основе сеансов и *bash_profile* файла параметров уровня среды компьютера.</span><span class="sxs-lookup"><span data-stu-id="31ed8-169">For Linux distros, use the `export` command at the command line for session based variable settings and *bash_profile* file for machine level environment settings.</span></span>

## <a name="determining-the-environment-at-runtime"></a><span data-ttu-id="31ed8-170">Определение среды во время выполнения</span><span class="sxs-lookup"><span data-stu-id="31ed8-170">Determining the environment at runtime</span></span>

<span data-ttu-id="31ed8-171">`IHostingEnvironment` Служба предоставляет основная абстракция для работы со средами.</span><span class="sxs-lookup"><span data-stu-id="31ed8-171">The `IHostingEnvironment` service provides the core abstraction for working with environments.</span></span> <span data-ttu-id="31ed8-172">Эта служба предоставляется с ASP.NET Размещение слоя и могут быть внесены в логику запуска через [внедрения зависимостей](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="31ed8-172">This service is provided by the ASP.NET hosting layer, and can be injected into your startup logic via [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="31ed8-173">Шаблон веб-сайта ASP.NET Core в Visual Studio использует этот подход для загрузки файлов конфигурации, относящиеся к среде (при его наличии) и настроить параметры обработки ошибок приложения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-173">The ASP.NET Core web site template in Visual Studio uses this approach to load environment-specific configuration files (if present) and to customize the app's error handling settings.</span></span> <span data-ttu-id="31ed8-174">В обоих случаях это достигается с помощью ссылки на среду в настоящее время путем вызова `EnvironmentName` или `IsEnvironment` на экземпляре `IHostingEnvironment` переданные в соответствующий метод.</span><span class="sxs-lookup"><span data-stu-id="31ed8-174">In both cases, this behavior is achieved by referring to the currently specified environment by calling `EnvironmentName` or `IsEnvironment` on the instance of `IHostingEnvironment` passed into the appropriate method.</span></span>

> [!NOTE]
> <span data-ttu-id="31ed8-175">Если необходимо проверить, выполняется ли приложение в конкретной среде, используйте `env.IsEnvironment("environmentname")` , так как он правильно не учитывать регистр (вместо проверки `env.EnvironmentName == "Development"` например).</span><span class="sxs-lookup"><span data-stu-id="31ed8-175">If you need to check whether the application is running in a particular environment, use `env.IsEnvironment("environmentname")` since it will correctly ignore case (instead of checking if `env.EnvironmentName == "Development"` for example).</span></span>

<span data-ttu-id="31ed8-176">Например можно использовать следующий код в методе Настройка для настройки среды обработки определенных ошибок:</span><span class="sxs-lookup"><span data-stu-id="31ed8-176">For example, you can use the following code in your Configure method to setup environment specific error handling:</span></span>

[!code-csharp[Main](environments/sample/src/Environments/Startup.cs?range=19-30)]

<span data-ttu-id="31ed8-177">Если приложение выполняется `Development` среде, а затем она включает поддержку среды выполнения, необходимо использовать функцию «BrowserLink» в Visual Studio, страницы ошибки разработки (которые обычно не должны выполняться в рабочей среде) и ошибка специальная база данных страницы (которые предоставляют способ примените миграции и поэтому можно использовать только при разработке).</span><span class="sxs-lookup"><span data-stu-id="31ed8-177">If the app is running in a `Development` environment, then it enables the runtime support necessary to use the "BrowserLink" feature in Visual Studio, development-specific error pages (which typically should not be run in production) and special database error pages (which provide a way to apply migrations and should therefore only be used in development).</span></span> <span data-ttu-id="31ed8-178">В противном случае если приложение не выполняется в среде разработки, страница Стандартная ошибка обработки настроена для отображения в ответ на необработанные исключения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-178">Otherwise, if the app is not running in a development environment, a standard error handling page is configured to be displayed in response to any unhandled exceptions.</span></span>

<span data-ttu-id="31ed8-179">Необходимо определить, какое содержимое для отправки клиенту во время выполнения, в зависимости от текущей среды.</span><span class="sxs-lookup"><span data-stu-id="31ed8-179">You may need to determine which content to send to the client at runtime, depending on the current environment.</span></span> <span data-ttu-id="31ed8-180">Например в среде разработки вы обычно служат не свернуто сценариев и стилей, которые облегчает процесс отладки.</span><span class="sxs-lookup"><span data-stu-id="31ed8-180">For example, in a development environment you generally serve non-minimized scripts and style sheets, which makes debugging easier.</span></span> <span data-ttu-id="31ed8-181">Уменьшенная версий должна использоваться в производственной среде и тестовых средах и обычно из CDN.</span><span class="sxs-lookup"><span data-stu-id="31ed8-181">Production and test environments should serve the minified versions and generally from a CDN.</span></span> <span data-ttu-id="31ed8-182">Это можно сделать с помощью среды [тег вспомогательный](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="31ed8-182">You can do this using the Environment [tag helper](../mvc/views/tag-helpers/intro.md).</span></span> <span data-ttu-id="31ed8-183">Вспомогательный тега среды будет отображать его содержимое, только если текущая среда соответствует одному из среды, заданные с помощью `names` атрибута.</span><span class="sxs-lookup"><span data-stu-id="31ed8-183">The Environment tag helper will only render its contents if the current environment matches one of the environments specified using the `names` attribute.</span></span>

[!code-html[Main](environments/sample/src/Environments/Views/Shared/_Layout.cshtml?range=13-22)]

<span data-ttu-id="31ed8-184">Чтобы начать работу с помощью вспомогательных функций тегов см. в разделе вашего приложения [Общие сведения о вспомогательных функций тегов](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="31ed8-184">To get started with using tag helpers in your application see [Introduction to Tag Helpers](../mvc/views/tag-helpers/intro.md).</span></span>

## <a name="startup-conventions"></a><span data-ttu-id="31ed8-185">При запуске соглашения</span><span class="sxs-lookup"><span data-stu-id="31ed8-185">Startup conventions</span></span>

<span data-ttu-id="31ed8-186">ASP.NET Core поддерживает подход, основанный на соглашение, с настройкой запуска приложения, в зависимости от текущей среды.</span><span class="sxs-lookup"><span data-stu-id="31ed8-186">ASP.NET Core supports a convention-based approach to configuring an application's startup based on the current environment.</span></span> <span data-ttu-id="31ed8-187">Можно также программно управлять поведение приложения в соответствии с какой среде он находится, позволяя создавать и управлять ими свои собственные соглашения.</span><span class="sxs-lookup"><span data-stu-id="31ed8-187">You can also programmatically control how your application behaves according to which environment it is in, allowing you to create and manage your own conventions.</span></span>

<span data-ttu-id="31ed8-188">При запуске приложения ASP.NET Core `Startup` класс используется для начальной загрузки приложения и загрузите его параметры конфигурации, т. д. ([Дополнительные сведения о запуске ASP.NET](startup.md)).</span><span class="sxs-lookup"><span data-stu-id="31ed8-188">When an ASP.NET Core application starts, the `Startup` class is used to bootstrap the application, load its configuration settings, etc. ([learn more about ASP.NET startup](startup.md)).</span></span> <span data-ttu-id="31ed8-189">Тем не менее, если существует класс с именем `Startup{EnvironmentName}` (например `StartupDevelopment`) и `ASPNETCORE_ENVIRONMENT` соответствует переменной среды, имя, а затем, `Startup` вместо него используется класс.</span><span class="sxs-lookup"><span data-stu-id="31ed8-189">However, if a class exists named `Startup{EnvironmentName}` (for example `StartupDevelopment`), and the `ASPNETCORE_ENVIRONMENT` environment variable matches that name, then that `Startup` class is used instead.</span></span> <span data-ttu-id="31ed8-190">Таким образом, можно настроить `Startup` для разработки, но имеют отдельные `StartupProduction` , будет использоваться при запуске приложения в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="31ed8-190">Thus, you could configure `Startup` for development, but have a separate `StartupProduction` that would be used when the app is run in production.</span></span> <span data-ttu-id="31ed8-191">И наоборот.</span><span class="sxs-lookup"><span data-stu-id="31ed8-191">Or vice versa.</span></span>

> [!NOTE]
> <span data-ttu-id="31ed8-192">Вызов `WebHostBuilder.UseStartup<TStartup>()` переопределяет разделы конфигурации.</span><span class="sxs-lookup"><span data-stu-id="31ed8-192">Calling `WebHostBuilder.UseStartup<TStartup>()` overrides configuration sections.</span></span>

<span data-ttu-id="31ed8-193">Помимо использования совершенно разные `Startup` класса, в зависимости от текущей среды, также можно внести изменения в настройки приложения в `Startup` класса.</span><span class="sxs-lookup"><span data-stu-id="31ed8-193">In addition to using an entirely separate `Startup` class based on the current environment, you can also make adjustments to how the application is configured within a `Startup` class.</span></span> <span data-ttu-id="31ed8-194">`Configure()` И `ConfigureServices()` методы поддерживают конкретных версий аналогично `Startup` класса формы `Configure{EnvironmentName}()` и `Configure{EnvironmentName}Services()`.</span><span class="sxs-lookup"><span data-stu-id="31ed8-194">The `Configure()` and `ConfigureServices()` methods support environment-specific versions similar to the `Startup` class itself, of the form `Configure{EnvironmentName}()` and `Configure{EnvironmentName}Services()`.</span></span> <span data-ttu-id="31ed8-195">Если определить метод `ConfigureDevelopment()` он будет вызван вместо `Configure()` Если имеет значение среды разработки.</span><span class="sxs-lookup"><span data-stu-id="31ed8-195">If you define a method `ConfigureDevelopment()` it will be called instead of `Configure()` when the environment is set to development.</span></span> <span data-ttu-id="31ed8-196">Аналогичным образом `ConfigureDevelopmentServices()` вызывается вместо `ConfigureServices()` в той же среде.</span><span class="sxs-lookup"><span data-stu-id="31ed8-196">Likewise, `ConfigureDevelopmentServices()` would be called instead of `ConfigureServices()` in the same environment.</span></span>

## <a name="summary"></a><span data-ttu-id="31ed8-197">Сводка</span><span class="sxs-lookup"><span data-stu-id="31ed8-197">Summary</span></span>

<span data-ttu-id="31ed8-198">ASP.NET Core предоставляет ряд функций и соглашения, которые позволяют разработчикам легко управлять работой своих приложений в различных средах.</span><span class="sxs-lookup"><span data-stu-id="31ed8-198">ASP.NET Core provides a number of features and conventions that allow developers to easily control how their applications behave in different environments.</span></span> <span data-ttu-id="31ed8-199">При публикации приложения из среды разработки для промежуточного хранения в рабочей среде, заданных переменных среды соответствующим образом для среды позволяет оптимизировать приложения для отладки, тестирования или рабочей среде используйте соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="31ed8-199">When publishing an application from development to staging to production, environment variables set appropriately for the environment allow for optimization of the application for debugging, testing, or production use, as appropriate.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="31ed8-200">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="31ed8-200">Additional Resources</span></span>

* [<span data-ttu-id="31ed8-201">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="31ed8-201">Configuration</span></span>](configuration.md)

* [<span data-ttu-id="31ed8-202">Общие сведения о вспомогательных функциях тегов</span><span class="sxs-lookup"><span data-stu-id="31ed8-202">Introduction to Tag Helpers</span></span>](../mvc/views/tag-helpers/intro.md)
