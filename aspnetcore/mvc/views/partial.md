---
title: "Разделяемые представления"
author: ardalis
description: "С помощью частичного представления в ASP.NET Core MVC"
ms.author: riande
manager: wpickett
ms.date: 03/14/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/views/partial
ms.openlocfilehash: 5919c273de2a298c3e407f118ac478e6a6031332
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
# <a name="partial-views"></a><span data-ttu-id="5f6de-103">Разделяемые представления</span><span class="sxs-lookup"><span data-stu-id="5f6de-103">Partial Views</span></span>

<span data-ttu-id="5f6de-104">По [Стив Смит](https://ardalis.com/), [Maher JENDOUBI](https://twitter.com/maherjend), и [Рик Андерсон](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="5f6de-104">By [Steve Smith](https://ardalis.com/), [Maher JENDOUBI](https://twitter.com/maherjend), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="5f6de-105">ASP.NET Core MVC поддерживает частичного представления, которые могут быть полезны при наличии допускающих многократное использование частей веб-страниц, которые вы хотите поделиться между различными представлениями.</span><span class="sxs-lookup"><span data-stu-id="5f6de-105">ASP.NET Core MVC supports partial views, which are useful when you have reusable parts of web pages you want to share between different views.</span></span>

<span data-ttu-id="5f6de-106">[Просмотреть или скачать образец кода](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/views/partial/sample) ([как скачивать](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="5f6de-106">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/views/partial/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="what-are-partial-views"></a><span data-ttu-id="5f6de-107">Что такое частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-107">What are Partial Views?</span></span>

<span data-ttu-id="5f6de-108">Частичное представление — это представление, отображаемого в другое представление.</span><span class="sxs-lookup"><span data-stu-id="5f6de-108">A partial view is a view that's rendered within another view.</span></span> <span data-ttu-id="5f6de-109">Выходные данные HTML, созданы при выполнении частичного представления преобразуется в представление вызова (или родительской).</span><span class="sxs-lookup"><span data-stu-id="5f6de-109">The HTML output generated by executing the partial view is rendered into the calling (or parent) view.</span></span> <span data-ttu-id="5f6de-110">Как и представления, разделяемые представления использовать *.cshtml* расширение имени файла.</span><span class="sxs-lookup"><span data-stu-id="5f6de-110">Like views, partial views use the *.cshtml* file extension.</span></span>

## <a name="when-should-i-use-partial-views"></a><span data-ttu-id="5f6de-111">Когда следует использовать частичные представления</span><span class="sxs-lookup"><span data-stu-id="5f6de-111">When Should I Use Partial Views?</span></span>

<span data-ttu-id="5f6de-112">Частичные представления — это эффективный способ разбиение большие представления на более простые компоненты.</span><span class="sxs-lookup"><span data-stu-id="5f6de-112">Partial views are an effective way of breaking up large views into smaller components.</span></span> <span data-ttu-id="5f6de-113">Они, можно сократить дублирование представления содержимого и просмотр элементов для повторного использования.</span><span class="sxs-lookup"><span data-stu-id="5f6de-113">They can reduce duplication of view content and allow view elements to be reused.</span></span> <span data-ttu-id="5f6de-114">Общие элементы макета должно быть указано в [_Layout.cshtml](layout.md).</span><span class="sxs-lookup"><span data-stu-id="5f6de-114">Common layout elements should be specified in [_Layout.cshtml](layout.md).</span></span> <span data-ttu-id="5f6de-115">Содержимое для повторного использования не макета можно инкапсулировать в частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-115">Non-layout reusable content can be encapsulated into partial views.</span></span>

<span data-ttu-id="5f6de-116">При наличии сложных страницы состоит из нескольких логических частей может быть полезно для работы с каждый фрагмент как свой собственный частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-116">If you have a complex page made up of several logical pieces, it can be helpful to work with each piece as its own partial view.</span></span> <span data-ttu-id="5f6de-117">Каждой части страницы можно просматривать отдельно от остальной части страницы и представления для самой страницы становится гораздо проще, так как он содержит только общую структуру страницы и вызовы для отображения частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-117">Each piece of the page can be viewed in isolation from the rest of the page, and the view for the page itself becomes much simpler since it only contains the overall page structure and calls to render the partial views.</span></span>

<span data-ttu-id="5f6de-118">Совет: Выполните [не повторять самостоятельно принцип](http://deviq.com/don-t-repeat-yourself/) в представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-118">Tip: Follow the [Don't Repeat Yourself Principle](http://deviq.com/don-t-repeat-yourself/) in your views.</span></span>

## <a name="declaring-partial-views"></a><span data-ttu-id="5f6de-119">Объявление частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-119">Declaring Partial Views</span></span>

<span data-ttu-id="5f6de-120">Разделяемые представления создаются как любое другое представление: вы создаете *.cshtml* файл включен в *представления* папки.</span><span class="sxs-lookup"><span data-stu-id="5f6de-120">Partial views are created like any other view: you create a *.cshtml* file within the *Views* folder.</span></span> <span data-ttu-id="5f6de-121">Нет семантические различия между представлением и обычное представление — они просто отображаются по-разному.</span><span class="sxs-lookup"><span data-stu-id="5f6de-121">There's no semantic difference between a partial view and a regular view - they're just rendered differently.</span></span> <span data-ttu-id="5f6de-122">У вас есть представление, которое возвращается непосредственно из контроллера `ViewResult`, и тем же самым представлением можно использовать в качестве частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-122">You can have a view that's returned directly from a controller's `ViewResult`, and the same view can be used as a partial view.</span></span> <span data-ttu-id="5f6de-123">Основное различие между представлением и представлением подготовку к просмотру — не запускать, разделяемые представления *файл _ViewStart.cshtml* (хотя представления Дополнительные сведения о *файл _ViewStart.cshtml* в [макета ](layout.md)).</span><span class="sxs-lookup"><span data-stu-id="5f6de-123">The main difference between how a view and a partial view are rendered is that partial views don't run *_ViewStart.cshtml* (while views do - learn more about *_ViewStart.cshtml* in [Layout](layout.md)).</span></span>

## <a name="referencing-a-partial-view"></a><span data-ttu-id="5f6de-124">Ссылка на частичное представление</span><span class="sxs-lookup"><span data-stu-id="5f6de-124">Referencing a Partial View</span></span>

<span data-ttu-id="5f6de-125">Из в страницу представления, существует несколько способов, в которых можно вывести частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-125">From within a view page, there are several ways in which you can render a partial view.</span></span> <span data-ttu-id="5f6de-126">Проще всего использовать `Html.Partial`, который возвращает `IHtmlString` и можно указывать с помощью префикса вызова с `@`:</span><span class="sxs-lookup"><span data-stu-id="5f6de-126">The simplest is to use `Html.Partial`, which returns an `IHtmlString` and can be referenced by prefixing the call with `@`:</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=9)]

<span data-ttu-id="5f6de-127">`PartialAsync` Метод доступен для частичного представления содержащего асинхронного кода (несмотря на то, что код в представлениях, обычно не рекомендуется):</span><span class="sxs-lookup"><span data-stu-id="5f6de-127">The `PartialAsync` method is available for partial views containing asynchronous code (although code in views is generally discouraged):</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=8)]

<span data-ttu-id="5f6de-128">Можно вывести частичного представления с `RenderPartial`.</span><span class="sxs-lookup"><span data-stu-id="5f6de-128">You can render a partial view with `RenderPartial`.</span></span> <span data-ttu-id="5f6de-129">Этот метод не возвращает результат. выполняет потоковую передачу выводимые данные непосредственно в ответе.</span><span class="sxs-lookup"><span data-stu-id="5f6de-129">This method doesn't return a result; it streams the rendered output directly to the response.</span></span> <span data-ttu-id="5f6de-130">Так как он не возвращает результат, он должен быть вызван в блоке кода Razor (можно также вызвать `RenderPartialAsync` при необходимости):</span><span class="sxs-lookup"><span data-stu-id="5f6de-130">Because it doesn't return a result, it must be called within a Razor code block (you can also call `RenderPartialAsync` if necessary):</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=10-12)]

<span data-ttu-id="5f6de-131">Поскольку потоки результат напрямую, `RenderPartial` и `RenderPartialAsync` работают быстрее, в некоторых сценариях.</span><span class="sxs-lookup"><span data-stu-id="5f6de-131">Because it streams the result directly, `RenderPartial` and `RenderPartialAsync` may perform better in some scenarios.</span></span> <span data-ttu-id="5f6de-132">Однако в большинстве случаев рекомендуется можно использовать `Partial` и `PartialAsync`.</span><span class="sxs-lookup"><span data-stu-id="5f6de-132">However, in most cases it's recommended you use `Partial` and `PartialAsync`.</span></span>

> [!NOTE]
> <span data-ttu-id="5f6de-133">Если вашим представлениям требуется для выполнения кода, рекомендуется использовать [компонент представления](view-components.md) вместо частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-133">If your views need to execute code, the recommended pattern is to use a [view component](view-components.md) instead of a partial view.</span></span>

### <a name="partial-view-discovery"></a><span data-ttu-id="5f6de-134">Частичное представление обнаружения</span><span class="sxs-lookup"><span data-stu-id="5f6de-134">Partial View Discovery</span></span>

<span data-ttu-id="5f6de-135">При задании частичного представления, можно ссылаться в расположение несколькими способами:</span><span class="sxs-lookup"><span data-stu-id="5f6de-135">When referencing a partial view, you can refer to its location in several ways:</span></span>

```text
// Uses a view in current folder with this name
// If none is found, searches the Shared folder
@Html.Partial("ViewName")

// A view with this name must be in the same folder
@Html.Partial("ViewName.cshtml")

// Locate the view based on the application root
// Paths that start with "/" or "~/" refer to the application root
@Html.Partial("~/Views/Folder/ViewName.cshtml")
@Html.Partial("/Views/Folder/ViewName.cshtml")

// Locate the view using relative paths
@Html.Partial("../Account/LoginPartial.cshtml")
```

<span data-ttu-id="5f6de-136">В папках другое представление, могут иметь различные частичного представления, с тем же именем.</span><span class="sxs-lookup"><span data-stu-id="5f6de-136">You can have different partial views with the same name in different view folders.</span></span> <span data-ttu-id="5f6de-137">При обращении к представлениям по имени (без расширения файла), представления, в каждой папке используют частичного представления в той же папке, с ними.</span><span class="sxs-lookup"><span data-stu-id="5f6de-137">When referencing the views by name (without file extension), views in each folder will use the partial view in the same folder with them.</span></span> <span data-ttu-id="5f6de-138">Можно также указать частичного представления по умолчанию для использования, поместив его в *Shared* папки.</span><span class="sxs-lookup"><span data-stu-id="5f6de-138">You can also specify a default partial view to use, placing it in the *Shared* folder.</span></span> <span data-ttu-id="5f6de-139">Общий частичного представления будет использоваться любые представления не имеют собственную версию частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-139">The shared partial view will be used by any views that don't have their own version of the partial view.</span></span> <span data-ttu-id="5f6de-140">У вас есть представлением по умолчанию (в *Shared*), которой заменяется представлением с тем же именем в той же папке, как родительское представление.</span><span class="sxs-lookup"><span data-stu-id="5f6de-140">You can have a default partial view (in *Shared*), which is overridden by a partial view with the same name in the same folder as the parent view.</span></span>

<span data-ttu-id="5f6de-141">Частичные представления могут быть *связанные*.</span><span class="sxs-lookup"><span data-stu-id="5f6de-141">Partial views can be *chained*.</span></span> <span data-ttu-id="5f6de-142">То есть частичного представления может вызывать другое разделяемое представление (пока не формируют цикл).</span><span class="sxs-lookup"><span data-stu-id="5f6de-142">That is, a partial view can call another partial view (as long as you don't create a loop).</span></span> <span data-ttu-id="5f6de-143">В каждом представлении или частичного представления относительные пути задаются всегда относительно этого представления, не корневой или родительский представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-143">Within each view or partial view, relative paths are always relative to that view, not the root or parent view.</span></span>

> [!NOTE]
> <span data-ttu-id="5f6de-144">При объявлении [Razor](razor.md) `section` в частичного представления, он не будет видимым для его родительских элементов; он будет ограничена частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-144">If you declare a [Razor](razor.md) `section` in a partial view, it will not be visible to its parent(s); it will be limited to the partial view.</span></span>

## <a name="accessing-data-from-partial-views"></a><span data-ttu-id="5f6de-145">Доступ к данным из частичных представлений</span><span class="sxs-lookup"><span data-stu-id="5f6de-145">Accessing Data From Partial Views</span></span>

<span data-ttu-id="5f6de-146">При создании экземпляра частичного представления, он получает копию родительского представления `ViewData` словаря.</span><span class="sxs-lookup"><span data-stu-id="5f6de-146">When a partial view is instantiated, it gets a copy of the parent view's `ViewData` dictionary.</span></span> <span data-ttu-id="5f6de-147">Обновления, вносимые в данные в пределах частичного представления, не сохраняются в родительское представление.</span><span class="sxs-lookup"><span data-stu-id="5f6de-147">Updates made to the data within the partial view are not persisted to the parent view.</span></span> <span data-ttu-id="5f6de-148">`ViewData`изменения в разделенном представлении теряется при возврате частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-148">`ViewData` changed in a partial view is lost when the partial view returns.</span></span>

<span data-ttu-id="5f6de-149">Можно передать экземпляр `ViewDataDictionary` для частичного представления:</span><span class="sxs-lookup"><span data-stu-id="5f6de-149">You can pass an instance of `ViewDataDictionary` to the partial view:</span></span>

```csharp
@Html.Partial("PartialName", customViewData)
   ```

<span data-ttu-id="5f6de-150">Можно также передать модель в частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-150">You can also pass a model into a partial view.</span></span> <span data-ttu-id="5f6de-151">Это может быть модели представления страницы, или его часть или пользовательского объекта.</span><span class="sxs-lookup"><span data-stu-id="5f6de-151">This can be the page's view model, or some portion of it, or a custom object.</span></span> <span data-ttu-id="5f6de-152">Можно передать модель в `Partial`,`PartialAsync`, `RenderPartial`, или `RenderPartialAsync`:</span><span class="sxs-lookup"><span data-stu-id="5f6de-152">You can pass a model to `Partial`,`PartialAsync`, `RenderPartial`, or `RenderPartialAsync`:</span></span>

```csharp
@Html.Partial("PartialName", viewModel)
   ```

<span data-ttu-id="5f6de-153">Можно передать экземпляр `ViewDataDictionary` и модели представления для частичного представления:</span><span class="sxs-lookup"><span data-stu-id="5f6de-153">You can pass an instance of `ViewDataDictionary` and a view model to a partial view:</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/Read.cshtml?range=15-16)]

<span data-ttu-id="5f6de-154">Ниже показан разметку *Views/Articles/Read.cshtml* представления, содержащего два частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-154">The markup below shows the *Views/Articles/Read.cshtml* view which contains two partial views.</span></span> <span data-ttu-id="5f6de-155">Передает второй частичного представления в модели и `ViewData` для частичного представления.</span><span class="sxs-lookup"><span data-stu-id="5f6de-155">The second partial view passes in a model and `ViewData` to the partial view.</span></span> <span data-ttu-id="5f6de-156">Вы можете передать новые `ViewData` словаря, сохраняя существующий `ViewData` при использовании перегруженный конструктор `ViewDataDictionary` выделением ниже:</span><span class="sxs-lookup"><span data-stu-id="5f6de-156">You can pass new `ViewData` dictionary while retaining the existing `ViewData` if you use the constructor overload of the `ViewDataDictionary` highlighted below:</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/Read.cshtml)]

<span data-ttu-id="5f6de-157">*Представления/общие/AuthorPartial*:</span><span class="sxs-lookup"><span data-stu-id="5f6de-157">*Views/Shared/AuthorPartial*:</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Shared/AuthorPartial.cshtml)]

<span data-ttu-id="5f6de-158">*ArticleSection* частичного:</span><span class="sxs-lookup"><span data-stu-id="5f6de-158">The *ArticleSection* partial:</span></span>

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/ArticleSection.cshtml)]

<span data-ttu-id="5f6de-159">Во время выполнения, подготавливаются к просмотру частичными репликами в родительское представление, который в свою очередь подготавливается к просмотру в рамках общего *_Layout.cshtml*</span><span class="sxs-lookup"><span data-stu-id="5f6de-159">At runtime, the partials are rendered into the parent view, which itself is rendered within the shared *_Layout.cshtml*</span></span>

![Частичное просмотр выходных данных](partial/_static/output.png)
