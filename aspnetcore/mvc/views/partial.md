---
title: "Разделяемые представления"
author: ardalis
description: "С помощью частичного представления в ASP.NET Core MVC"
keywords: "Partial ASP.NET Core, разделяемые представления"
ms.author: riande
manager: wpickett
ms.date: 03/14/2017
ms.topic: article
ms.assetid: 4be1b12c-b74e-44ff-826b-99ce86e8d464
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/views/partial
ms.openlocfilehash: 8f890009f71d4c1f693ee06dcd448e9803164aca
ms.sourcegitcommit: 78d28178345a0eea91556e4cd1adad98b1446db8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2017
---
# <a name="partial-views"></a>Разделяемые представления

По [Стив Смит](https://ardalis.com/), [Maher JENDOUBI](https://twitter.com/maherjend), и [Рик Андерсон](https://twitter.com/RickAndMSFT)

ASP.NET Core MVC поддерживает частичного представления, которые могут быть полезны при наличии допускающих многократное использование частей веб-страниц, которые вы хотите поделиться между различными представлениями.

[Просмотреть или скачать образец кода](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/views/partial/sample)

## <a name="what-are-partial-views"></a>Что такое частичного представления.

Частичное представление — это представление, отображаемого в другое представление. Выходные данные HTML, созданы при выполнении частичного представления преобразуется в представление вызова (или родительской). Как и представления, разделяемые представления использовать *.cshtml* расширение имени файла.

## <a name="when-should-i-use-partial-views"></a>Когда следует использовать частичные представления

Частичные представления — это эффективный способ разбиение большие представления на более простые компоненты. Они, можно сократить дублирование представления содержимого и просмотр элементов для повторного использования. Общие элементы макета должно быть указано в [_Layout.cshtml](layout.md). Содержимое для повторного использования не макета можно инкапсулировать в частичного представления.

При наличии сложных страницы состоит из нескольких логических частей может быть полезно для работы с каждый фрагмент как свой собственный частичного представления. Каждой части страницы можно просматривать отдельно от остальной части страницы и представления для самой страницы становится гораздо проще, так как он содержит только общую структуру страницы и вызовы для отображения частичного представления.

Совет: Выполните [не повторять самостоятельно принцип](http://deviq.com/don-t-repeat-yourself/) в представления.

## <a name="declaring-partial-views"></a>Объявление частичного представления.

Разделяемые представления создаются как любое другое представление: вы создаете *.cshtml* файл включен в *представления* папки. Нет семантические различия между представлением и обычное представление — они просто отображаются по-разному. У вас есть представление, которое возвращается непосредственно из контроллера `ViewResult`, и тем же самым представлением можно использовать в качестве частичного представления. — Основное различие между просмотру представление и частичного представления, разделяемые представления не выполнен *файл _ViewStart.cshtml* (хотя представления Дополнительные сведения о *файл _ViewStart.cshtml* в [макета ](layout.md)).

## <a name="referencing-a-partial-view"></a>Ссылка на частичное представление

Из в страницу представления, существует несколько способов, в которых можно вывести частичного представления. Проще всего использовать `Html.Partial`, который возвращает `IHtmlString` и можно указывать с помощью префикса вызова с `@`:

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=9)]

`PartialAsync` Метод доступен для частичного представления содержащего асинхронного кода (несмотря на то, что код в представлениях, обычно не рекомендуется):

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=8)]

Можно вывести частичного представления с `RenderPartial`. Этот метод не возвращает результат. выполняет потоковую передачу выводимые данные непосредственно в ответе. Так как он не возвращает результат, он должен быть вызван в блоке кода Razor (можно также вызвать `RenderPartialAsync` при необходимости):

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Home/About.cshtml?range=10-12)]

Поскольку потоки результат напрямую, `RenderPartial` и `RenderPartialAsync` работают быстрее, в некоторых сценариях. Однако в большинстве случаев рекомендуется можно использовать `Partial` и `PartialAsync`.

> [!NOTE]
> Если вашим представлениям требуется для выполнения кода, рекомендуется использовать [компонент представления](view-components.md) вместо частичного представления.

### <a name="partial-view-discovery"></a>Частичное представление обнаружения

При задании частичного представления, можно ссылаться в расположение несколькими способами:

```text
// Uses a view in current folder with this name
// If none is found, searches the Shared folder
@Html.Partial("ViewName")

// A view with this name must be in the same folder
@Html.Partial("ViewName.cshtml")

// Locate the view based on the application root
// Paths that start with "/" or "~/" refer to the application root
@Html.Partial("~/Views/Folder/ViewName.cshtml")
@Html.Partial("/Views/Folder/ViewName.cshtml")

// Locate the view using relative paths
@Html.Partial("../Account/LoginPartial.cshtml")
```

В папках другое представление, могут иметь различные частичного представления, с тем же именем. При обращении к представлениям по имени (без расширения файла), представления, в каждой папке используют частичного представления в той же папке, с ними. Можно также указать частичного представления по умолчанию для использования, поместив его в *Shared* папки. Общий частичного представления будет использоваться любые представления не имеют собственную версию частичного представления. У вас есть представлением по умолчанию (в *Shared*), которой заменяется представлением с тем же именем в той же папке, как родительское представление.

Частичные представления могут быть *связанные*. То есть частичного представления может вызывать другое разделяемое представление (пока не формируют цикл). В каждом представлении или частичного представления относительные пути задаются всегда относительно этого представления, не корневой или родительский представления.

> [!NOTE]
> При объявлении [Razor](razor.md) `section` в частичного представления, он не будет видимым для его родительских элементов; он будет ограничена частичного представления.

## <a name="accessing-data-from-partial-views"></a>Доступ к данным из частичных представлений

При создании экземпляра частичного представления, он получает копию родительского представления `ViewData` словаря. Обновления, вносимые в данные в пределах частичного представления, не сохраняются в родительское представление. `ViewData`изменения в разделенном представлении теряется при возврате частичного представления.

Можно передать экземпляр `ViewDataDictionary` для частичного представления:

```csharp
@Html.Partial("PartialName", customViewData)
   ```

Можно также передать модель в частичного представления. Это может быть модели представления страницы, или его часть или пользовательского объекта. Можно передать модель в `Partial`,`PartialAsync`, `RenderPartial`, или `RenderPartialAsync`:

```csharp
@Html.Partial("PartialName", viewModel)
   ```

Можно передать экземпляр `ViewDataDictionary` и модели представления для частичного представления:

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/Read.cshtml?range=15-16)]

Ниже показан разметку *Views/Articles/Read.cshtml* представления, содержащего два частичного представления. Передает второй частичного представления в модели и `ViewData` для частичного представления. Вы можете передать новые `ViewData` словаря, сохраняя существующий `ViewData` при использовании перегруженный конструктор `ViewDataDictionary` выделением ниже:

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/Read.cshtml)]

*Представления/общие/AuthorPartial*:

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Shared/AuthorPartial.cshtml)]

*ArticleSection* частичного:

[!code-html[Main](partial/sample/src/PartialViewsSample/Views/Articles/ArticleSection.cshtml)]

Во время выполнения, подготавливаются к просмотру частичными репликами в родительское представление, который в свою очередь подготавливается к просмотру в рамках общего *_Layout.cshtml*

![Частичное просмотр выходных данных](partial/_static/output.png)
