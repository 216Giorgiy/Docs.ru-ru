---
title: "Макет"
author: ardalis
description: 
keywords: ASP.NET Core
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 29f12d1f-9734-48bd-bf1a-cee53a8ab700
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/views/layout
ms.openlocfilehash: 25aa5fc730d9076fdcf9d29cb5d9dfa75a246a1a
ms.sourcegitcommit: 9cdbfd0d670d70b9c354216aabee260c52dad5ee
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2017
---
# <a name="layout"></a>Макет

По [Стив Смит](https://ardalis.com/)

Представлений часто используют visual и программных элементов. В этой статье вы узнаете, как использовать распространенных макетов, совместное использование директивы и выполнения общих кода перед отображением представлений в приложении ASP.NET.

## <a name="what-is-a-layout"></a>Что такое разметка

Большинство веб-приложений имеют общий макет, который предоставляет согласованный пользователю при переходе между страницами. Макет обычно включает общие элементы пользовательского интерфейса, такие как заголовок приложения, навигации или элементы меню и нижний колонтитул.

![Пример макета страницы](layout/_static/page-layout.png)

Многие другие страницы в приложении также часто используются общие структуры HTML как скрипты и таблицы стилей. Все эти общие элементы могут определяться в *макета* файл, который можно ссылаться представлением, используется в приложении. Макеты уменьшить повторяющийся код в представлениях, помогая выполните [не повторять самостоятельно (ПРОБНОГО) принцип](http://deviq.com/don-t-repeat-yourself/).

По соглашению макет по умолчанию для приложения ASP.NET с именем `_Layout.cshtml`. Шаблон проекта Visual Studio ASP.NET Core MVC включает в этот файл макета `Views/Shared` папки:

![Папка Views в обозревателе решений](layout/_static/web-project-views.png)

Шаблон верхнего уровня для представления определяются в приложении. Приложения не требуют макет и приложений можно определить несколько макетов с различными представлениями, указав различные макеты.

Пример `_Layout.cshtml`:

[!code-html[Main](../../common/samples/WebApplication1/Views/Shared/_Layout.cshtml?highlight=42,66)]

## <a name="specifying-a-layout"></a>Задать макет

У представлений Razor `Layout` свойство. Отдельные представления задать макет, присвоив этому свойству:

[!code-html[Main](../../common/samples/WebApplication1/Views/_ViewStart.cshtml?highlight=2)]

Макетом, указанным в можно использовать полный путь (пример: `/Views/Shared/_Layout.cshtml`) или часть имени (пример: `_Layout`). Если часть имени, макет файла, используя его обнаружения стандартный процесс выполняет поиск представлений Razor. Папка связанный контроллер просматривается первой, за которым следует `Shared` папки. Процесс обнаружения идентичен тому, который используется для обнаружения [разделяемые представления](partial.md).

По умолчанию, необходимо вызвать метод в каждом макете `RenderBody`. Везде, где вызов `RenderBody` — разместить, содержимое представления будет отображаться.

<a name=layout-sections-label></a>

### <a name="sections"></a>Разделы

Макет можно дополнительно сослаться на один или несколько *разделы*, путем вызова `RenderSection`. Разделы предоставляют способ организации, где должны размещаться определенные элементы страницы. Каждый вызов `RenderSection` можно указать, является ли этот раздел обязательными или необязательными. Если набор необходимых разделов не найден, будет вызвано исключение. Содержимое для отображения в разделе с помощью указания отдельных представлений `@section` синтаксиса Razor. Если представление определяет раздел, должны быть помещены или завершится ошибкой.

Пример `@section` определение в представлении:

```html
@section Scripts {
     <script type="text/javascript" src="/scripts/main.js"></script>
   }
   ```

В приведенном выше коде сценарии проверки добавляются в `scripts` раздел на представление, которое включает форму. Другие представления в одном приложении могут не требовать дополнительных сценариев и поэтому не требуется определение раздела скриптов.

Разделы, определенные в представлении, доступны только в его интерпретации макета страницы. Они не могут ссылаться на частичными репликами, просмотр компонентов или других частей представления системы.

### <a name="ignoring-sections"></a>Пропуск разделов

По умолчанию текст и все разделы на странице содержимого должны все быть помещены на странице макета. Обработчик представлений Razor следит за этим путем отслеживания ли к просмотру в тексте и в каждом разделе.

Чтобы указать обработчик представлений, чтобы игнорировать текст или разделов, вызовите `IgnoreBody` и `IgnoreSection` методы.

В тексте и каждый раздел на странице Razor должна к просмотру или игнорируются.

<a name=viewimports></a>

## <a name="importing-shared-directives"></a>Импорт общих директивы

Представления можно использовать директивы Razor разными способами, например, импорт пространства имен и выполнении [внедрения зависимостей](dependency-injection.md). Директивы совместно используется несколько представлений, которые могут быть указаны в общий `_ViewImports.cshtml` файл. `_ViewImports` Файл поддерживает следующие директивы:

* `@addTagHelper`

* `@removeTagHelper`

* `@tagHelperPrefix`

* `@using`

* `@model`

* `@inherits`

* `@inject`

Файл не поддерживает другие функции Razor, например функций и определения разделов.

Образец `_ViewImports.cshtml` файла:

[!code-html[Main](../../common/samples/WebApplication1/Views/_ViewImports.cshtml)]

`_ViewImports.cshtml` -Файле для приложения ASP.NET Core MVC обычно помещается в `Views` папки. Объект `_ViewImports.cshtml` файл может быть помещен в любую папку, в которой будут применяться только в случае представления в этой папке и ее вложенных папках. `_ViewImports`файлы обрабатываются начиная с корневого уровня, и затем для каждой папки, ведущих к расположение собственно представлению, параметры, указанные на корневом уровне может быть переопределен на уровне папок.

Например, если на корневом уровне `_ViewImports.cshtml` файл определяет `@model` и `@addTagHelper`и другой `_ViewImports.cshtml` указывает другой файл в папке контроллера связанные представления `@model` и добавляет еще один `@addTagHelper`, представление будет иметь доступ к обоих вспомогательных функций тегов и будет использовать последнее `@model`.

При наличии нескольких `_ViewImports.cshtml` файлы запуска представления, в сочетании поведение директив, включенных в `ViewImports.cshtml` файлов будет выглядеть следующим образом:

* `@addTagHelper`, `@removeTagHelper`: выполнения все в порядке

* `@tagHelperPrefix`: один, ближайший к представлению переопределяет все остальные

* `@model`: один, ближайший к представлению переопределяет все остальные

* `@inherits`: один, ближайший к представлению переопределяет все остальные

* `@using`: все включаются; повторяющиеся значения игнорируются

* `@inject`: для каждого свойства один, ближайший к представлению переопределяет все другие пользователи с таким же именем свойства

<a name=viewstart></a>

## <a name="running-code-before-each-view"></a>Выполнение кода до каждого представления

Если имеется код, необходимо запустить перед каждого представления, это должен быть помещен в `_ViewStart.cshtml` файла. По соглашению `_ViewStart.cshtml` файл находится в `Views` папки. Операторы, перечисленные в `_ViewStart.cshtml` выполняются до каждого полного представления (не макеты и не разделяемые представления). Как [ViewImports.cshtml](xref:mvc/views/layout#viewimports), `_ViewStart.cshtml` являются иерархическими. Если `_ViewStart.cshtml` файл определяется в папке контроллера связанные представления, он будет выполняться после того, определен в корне `Views` папку (если таковые имеются).

Образец `_ViewStart.cshtml` файла:

[!code-html[Main](../../common/samples/WebApplication1/Views/_ViewStart.cshtml)]

Данный файл указывает, что все представления будут использовать `_Layout.cshtml` макет.

> [!NOTE]
> Ни `_ViewStart.cshtml` , ни `_ViewImports.cshtml` обычно помещаются `/Views/Shared` папки. Версии этих файлов уровня приложения следует поместить непосредственно в `/Views` папки.
