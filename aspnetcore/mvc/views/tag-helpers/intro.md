---
title: "Вспомогательных функций тегов в ASP.NET Core"
author: rick-anderson
description: "Что такое вспомогательных функций тегов и способ их использования в ASP.NET Core."
keywords: "ASP.NET Core, вспомогательных функций тегов"
ms.author: riande
manager: wpickett
ms.date: 7/14/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/views/tag-helpers/intro
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 06644b8359fb5ccc2e61a17a4c6e20e354d5ceef
ms.sourcegitcommit: 6e83c55eb0450a3073ef2b95fa5f5bcb20dbbf89
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/28/2017
---
# <a name="introduction-to-tag-helpers-in-aspnet-core"></a>Общие сведения о вспомогательных функций тегов в ASP.NET Core 

Автор: [Рик Андерсон](https://twitter.com/RickAndMSFT) (Rick Anderson)

## <a name="what-are-tag-helpers"></a>Что такое вспомогательных функций тегов

Вспомогательных функций тегов включить серверный код принять участие в создании и подготовке к просмотру элементов HTML в файлах Razor. Например, встроенная `ImageTagHelper` можно добавить номер версии имени образа. При каждом изменении образа сервера создается новая уникальный версия изображения, поэтому клиенты гарантированно получить текущее изображение (вместо устаревших кэшированное изображение). Существует множество встроенных вспомогательных функций тегов для общих задач — например для создания формы, ссылки, загрузки средств и пакетов дополнительные - и еще более доступные из открытых репозиториев GitHub и в качестве NuGet. Вспомогательных функций тегов разрабатываются в C#, и они предназначены для HTML-элементов на основе имени элемента, имя атрибута или родительского тега. Например, встроенная `LabelTagHelper` можно выбрать целевую HTML `<label>` элемент при `LabelTagHelper` атрибутов. Если вы знакомы с [вспомогательных методов HTML](http://stephenwalther.com/archive/2009/03/03/chapter-6-understanding-html-helpers), вспомогательных функций тегов уменьшить явную переходы между HTML и C# в представлений Razor. Во многих случаях вспомогательные методы HTML предоставляют альтернативный подход для определенных вспомогательных тег, но это следует отметить, что вспомогательных функций тегов не заменяют вспомогательных методов HTML, а не существует тег вспомогательный класс для каждого вспомогательный метод HTML. [По сравнению с вспомогательных методов HTML вспомогательных функций тегов](#tag-helpers-compared-to-html-helpers) описаны различия более подробно.

## <a name="what-tag-helpers-provide"></a>Предоставления вспомогательных функций тегов

**Процесс разработки понятного имени HTML** в большинстве случаев разметки Razor с помощью вспомогательных функций тегов выглядит как стандартный код HTML. Интерфейсный конструкторы представление о HTML, CSS и JavaScript можно редактировать Razor не зная синтаксиса Razor C#.

**IntelliSense среду с широкими возможностями для создания разметки HTML и Razor** это резко отличается от для вспомогательных методов HTML, описанный подход для создания серверных разметки в представлений Razor. [По сравнению с вспомогательных методов HTML вспомогательных функций тегов](#tag-helpers-compared-to-html-helpers) описаны различия более подробно. [Поддержка IntelliSense для вспомогательных функций тегов](#intellisense-support-for-tag-helpers) объясняет среды IntelliSense. Даже разработчики, возникших с синтаксисом Razor C#, эффективнее с помощью вспомогательных функций тегов, чем написание разметки Razor C#.

**Чтобы сделать вам повысить производительность и воспроизводимых более надежным и надежных и простоты поддержки кода с помощью сведения доступны только на сервере** например, раньше мантра на обновление образов была для изменения имени изображения при изменении изображение. Изображения должны активно кэшироваться для повышения производительности, и если не изменить имя изображения, то существует риск копию устаревших клиентов. Исторически после изображения был изменен, имя была изменена, и каждая ссылка на изображение в веб-приложения не требуется обновлять. Это не только очень трудовые служб с интенсивными вычислениями, кроме того, он подвержен ошибкам (может пропустить ссылку, ввод Неверная строка, и т. д.) Встроенная `ImageTagHelper` это можно сделать для вас автоматически. `ImageTagHelper` Можно добавить версию число имя образа, при каждом изменении образа сервера автоматически создается новая версия уникальным для изображения. Клиенты гарантированно получить текущее изображение. Это устойчивость и труда экономии по существу свободного с помощью `ImageTagHelper`.

Большинство встроенных вспомогательных функций тегов целевой существующих элементов HTML и предоставить серверные атрибуты для элемента. Например `<input>` элемента, используемого во множестве представлений в *представления и учетная запись* папка содержит `asp-for` атрибут, который извлекает имя свойства указанной модели в создаваемом коде HTML. Приведенная ниже разметка Razor:

```html
<label asp-for="Email"></label>
```

Создает следующий код HTML:

```html
<label for="Email">Email</label>
```

`asp-for` Атрибут становятся доступными по `For` свойства `LabelTagHelper`. В разделе [разработки вспомогательных функций тегов](authoring.md) для получения дополнительной информации.

## <a name="managing-tag-helper-scope"></a>Управление вспомогательный тег области

Вспомогательные объекты области тег управляется сочетание `@addTagHelper`, `@removeTagHelper`и «!» символ отказаться от участия.

<a name=add-helper-label></a>

### <a name="addtaghelper-makes-tag-helpers-available"></a>`@addTagHelper`делает доступными вспомогательных функций тегов

При создании нового веб-приложения ASP.NET Core с именем *AuthoringTagHelpers* (с без проверки подлинности), следующие *Views/_ViewImports.cshtml* файл будет добавлен в проект:

[!code-html[Main](../../../mvc/views/tag-helpers/authoring/sample/AuthoringTagHelpers/src/AuthoringTagHelpers/Views/_ViewImportsCopy.cshtml?highlight=2&range=2-3)]

`@addTagHelper` Директива поставляет вспомогательных функций тегов в представлении. В этом случае файл представления является *Views/_ViewImports.cshtml*, который по умолчанию наследуется просмотреть все файлы, в *представления* папка и вложенные каталоги; предоставления вспомогательных функций тегов. Приведенный выше код использует синтаксис подстановочный знак (»\*») позволяет указать, что все вспомогательных функций тегов в указанной сборке (*Microsoft.AspNetCore.Mvc.TagHelpers*) будет доступен для каждого файла представления в *представления* каталога или вложенный каталог. Первый параметр после `@addTagHelper` указывает вспомогательных функций тегов для загрузки (мы используем «\*» для всех вспомогательных функций тегов), и второй параметр «Microsoft.AspNetCore.Mvc.TagHelpers» указывает на сборку, содержащую вспомогательных функций тегов. *Microsoft.AspNetCore.Mvc.TagHelpers* — это сборка встроенных вспомогательных функций тегов ASP.NET Core.

Для предоставления вспомогательных функций тегов в этом проекте все (который создает сборку с именем *AuthoringTagHelpers*), следует ввести следующее:

[!code-html[Main](../../../mvc/views/tag-helpers/authoring/sample/AuthoringTagHelpers/src/AuthoringTagHelpers/Views/_ViewImportsCopy.cshtml?highlight=3)]

Если проект содержит `EmailTagHelper` пространства имен по умолчанию (`AuthoringTagHelpers.TagHelpers.EmailTagHelper`), можно указать полное имя (FQN) тега вспомогательного метода:

```cshtml
@using AuthoringTagHelpers
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper AuthoringTagHelpers.TagHelpers.EmailTagHelper, AuthoringTagHelpers
```

Чтобы добавить тег вспомогательный класс для представления с помощью FQN, сначала добавьте FQN (`AuthoringTagHelpers.TagHelpers.EmailTagHelper`), а затем имя сборки (*AuthoringTagHelpers*). Многие разработчики предпочитают использовать «\*» синтаксисе знаков подстановки. О синтаксисе знаков подстановки можно вставлять символ-шаблон «\*» как суффикс в FQN. Например, любой из следующих директив, добавит `EmailTagHelper`:

```csharp
@addTagHelper AuthoringTagHelpers.TagHelpers.E*, AuthoringTagHelpers
@addTagHelper AuthoringTagHelpers.TagHelpers.Email*, AuthoringTagHelpers
```

Как упоминалось ранее, добавление `@addTagHelper` директиву *Views/_ViewImports.cshtml* файла делает доступными для всех Просмотр файлов в тег вспомогательный *представления* каталога и вложенные каталоги. Можно использовать `@addTagHelper` директив в файлах определенных представлений, чтобы согласиться на предоставление тег модуля поддержки только те представления.

<a name=remove-razor-directives-label></a>

### <a name="removetaghelper-removes-tag-helpers"></a>`@removeTagHelper`Удаляет вспомогательных функций тегов

`@removeTagHelper` Имеет те же два параметра, как `@addTagHelper`, и он удаляет помощник тег, который был добавлен ранее. Например `@removeTagHelper` применяться к определенному представлению Удаляет указанный вспомогательный метод тег из представления. С помощью `@removeTagHelper` в *Views/Folder/_ViewImports.cshtml* файл удаляет указанный вспомогательный метод тег из всех представлений в *папки*.

### <a name="controlling-tag-helper-scope-with-the-viewimportscshtml-file"></a>Управление области вспомогательный тег с *_ViewImports.cshtml* файла

Можно добавить *_ViewImports.cshtml* для любой папки представление и представление модуль применяет директив из обоих этого файла и *Views/_ViewImports.cshtml* файла. При добавлении пустой *Views/Home/_ViewImports.cshtml* в файле *Главная* представления, то бы без изменений из-за *_ViewImports.cshtml* файл аддитивный характер. Любой `@addTagHelper` директив можно добавить *Views/Home/_ViewImports.cshtml* файла (, не входящих в значение по умолчанию *Views/_ViewImports.cshtml* файла) будут предоставлять эти вспомогательных функций тегов для представления только в *Главная* папки.

<a name="opt-out"></a>

### <a name="opting-out-of-individual-elements"></a>Отказ от отдельных элементов

Можно отключить вспомогательный тег на уровне элемента символом отказаться вспомогательный тег («!»). Например `Email` проверка отключена в `<span>` символом отказаться вспомогательный тег:

```csharp
<!span asp-validation-for="Email" class="text-danger"></!span>
```

Необходимо применить тег вспомогательный символ отказаться открывающий и закрывающий теги. (В редакторе Visual Studio автоматически добавляет символ отказа закрывающий тег при добавлении одного открывающий тег). После добавления символа отказа элемента и атрибуты тега вспомогательный больше не отображаются в отдельных шрифт.

<a name=prefix-razor-directives-label></a>

### <a name="using-taghelperprefix-to-make-tag-helper-usage-explicit"></a>С помощью `@tagHelperPrefix` вносить вспомогательный тег использования явное

`@tagHelperPrefix` Директивы можно указать строку префикса тега для включения поддержка вспомогательных функций тегов и явно объявить использование вспомогательного тег. Например, можно добавить следующую разметку, чтобы *Views/_ViewImports.cshtml* файла:

```html
@tagHelperPrefix th:
```
На приведенном ниже рисунке кода присвоено префикс тега вспомогательный `th:`, так что только элементы, с помощью префикса `th:` поддержка вспомогательных функций тегов (включен в тег вспомогательные элементы имеют различение шрифта). `<label>` И `<input>` элементы имеют префикс тега вспомогательный и включен в тег вспомогательный, при `<span>` не содержит элемент.

![изображение](intro/_static/thp.png)

Те же правила иерархии, которые применяются к `@addTagHelper` также применяются к `@tagHelperPrefix`.

## <a name="intellisense-support-for-tag-helpers"></a>Поддержка IntelliSense для вспомогательных функций тегов

При создании нового веб-приложения ASP.NET в Visual Studio, он добавляет пакет NuGet «Microsoft.AspNetCore.Razor.Tools». Это пакет, который добавляет тег вспомогательные средства.

Следует рассмотреть возможность записи HTML `<label>` элемента. Как только вы введете `<l` в редакторе Visual Studio IntelliSense отображает соответствующие элементы:

![изображение](intro/_static/label.png)

Не только получить Справка в формате HTML, но значок («@» символ с «<>», в нем).

![изображение](intro/_static/tagSym.png)

идентифицирует элемент как целевой, вспомогательных функций тегов. Чистый HTML-элементы (такие как `fieldset`) отображается значок «<>».

Чистый HTML-код `<label>` тег отображает HTML-тега (с цветовую тему по умолчанию Visual Studio) для brown шрифта атрибуты красным цветом, и атрибут значения синим цветом.

![изображение](intro/_static/LableHtmlTag.png)

После ввода `<label`, IntelliSense выводит списки доступных атрибутов HTML и CSS и атрибуты целевые вспомогательный тег:

![изображение](intro/_static/labelattr.png)

Завершение операторов IntelliSense позволяет вводить клавишу tab, чтобы завершить инструкцию со значением:

![изображение](intro/_static/stmtcomplete.png)

Как только вводится в атрибут вспомогательной функции тегов, изменить шрифты тегов и атрибутов. Используется по умолчанию Visual Studio «Blue» или «Light» цветовая тема, шрифт является фиолетовый полужирным шрифтом. Если вы используете «Темной» темой шрифт является полужирным сине-зеленый. Изображения в этом документе были выполнены с помощью тему по умолчанию.

![изображение](intro/_static/labelaspfor2.png)

Visual Studio можно ввести *CompleteWord* ярлык (Ctrl + Пробел является [по умолчанию](https://docs.microsoft.com/visualstudio/ide/default-keyboard-shortcuts-in-visual-studio) внутри двойных кавычек ("»), и теперь вы находитесь в C#, так же, как будет находиться в классе C#. IntelliSense отображает все методы и свойства по модели страницы. Методы и свойства недоступны, так как тип свойства `ModelExpression`. На рисунке ниже, я редактирования `Register` представления, поэтому `RegisterViewModel` доступен.

![изображение](intro/_static/intellemail.png)

IntelliSense выводит списки свойств и методов, доступных для модели на странице. Широкие возможности среды IntelliSense помогает выбрать класс CSS:

![изображение](intro/_static/iclass.png)

![изображение](intro/_static/intel3.png)

## <a name="tag-helpers-compared-to-html-helpers"></a>Вспомогательных функций тегов по сравнению с вспомогательных методов HTML

Вспомогательных функций тегов прикрепить к элементам HTML в представлений Razor, пока [вспомогательных методов HTML](http://stephenwalther.com/archive/2009/03/03/chapter-6-understanding-html-helpers) , вызываются как методы смешивается с HTML в представлений Razor. Рассмотрим следующую разметку Razor, которая создает метку HTML с «заголовок» класса CSS.

```html
@Html.Label("FirstName", "First Name:", new {@class="caption"})
```

В (`@`) символ дает Razor находится в начале кода. Следующие два параметра («FirstName» и «имя:») представляют собой строки, поэтому [IntelliSense](https://docs.microsoft.com/visualstudio/ide/using-intellisense) не может им помочь. Последний аргумент:

```html
new {@class="caption"}
```

Анонимный объект, используемый для представления атрибутов. Поскольку **класса** является зарезервированным ключевым словом в C# используется `@` символ для принудительного C# для интерпретации "@class=» как символ (имя свойства). Для интерфейса конструктора (кто-то знакомы с HTML, CSS, JavaScript и другие клиентские технологии, но не знакомы с C# и Razor), большую часть строки является внешней. С помощью IntelliSense не должен быть создан всю строку.

С помощью `LabelTagHelper`, же разметки могут быть написаны как:

![изображение](intro/_static/label2.png)

Тег вспомогательный версией, как вы введете `<l` в редакторе Visual Studio IntelliSense отображает соответствующие элементы:

![изображение](intro/_static/label.png)

IntelliSense помогает писать всю строку. `LabelTagHelper` Также по умолчанию используется значение параметра содержимое `asp-for` («FirstName») значения атрибута «Имя»; Он преобразует свойства в стиле Camel предложения, состоящие из имени свойства с места, где происходит каждой новой буквы верхнего регистра. В следующую разметку:

![изображение](intro/_static/label2.png)

приводит к возникновению ошибки:

```html
<label class="caption" for="FirstName">First Name</label>
```

Стиле Camel к содержимому предложения регистр не используется, если добавить содержимое `<label>`. Пример:

![изображение](intro/_static/1stName.png)

приводит к возникновению ошибки:

```html
<label class="caption" for="FirstName">Name First</label>
```

На следующем рисунке кода показана часть формы *Views/Account/Register.cshtml* представления Razor, созданных из прежних версий шаблона MVC 4.5.x ASP.NET, входящий в состав Visual Studio 2015.

![изображение](intro/_static/regCS.png)

В редакторе Visual Studio отображает код C# с серым фоном. Например `AntiForgeryToken` вспомогательный метод HTML:

```html
@Html.AntiForgeryToken()
```

отображается с серым фоном. Большая часть разметку в представлении регистр — C#. Сравните это с эквивалентный подход, с помощью вспомогательных функций тегов:

![изображение](intro/_static/regTH.png)

Разметка гораздо более понятным и удобным для чтения, редактирование и обслуживание, чем подход вспомогательные методы HTML. Код C# уменьшается до, как минимум, необходимо знать о сервере. В редакторе Visual Studio отображает разметки мишенью вспомогательный тег различение шрифтом.

Рассмотрим *электронной почты* группы:

[!code-csharp[Main](intro/sample/Register.cshtml?range=12-18)]

Каждый из атрибутов «asp-» имеет значение «Email», но не является строкой «Email». В этом контексте «Email» является C# выражение свойство модели для `RegisterViewModel`.

В редакторе Visual Studio помогает в написании **все** разметки в подход вспомогательный тег формы регистра, пока Visual Studio предоставляет отсутствует Справка для большей части кода в подход вспомогательные методы HTML. [Поддержка IntelliSense для вспомогательных функций тегов](#intellisense-support-for-tag-helpers) переходит в сведения о работе с вспомогательных функций тегов в редакторе Visual Studio.

## <a name="tag-helpers-compared-to-web-server-controls"></a>По сравнению с веб-сервера управления вспомогательных функций тегов

* Вспомогательных функций тегов не являетесь его владельцем элемента, с которыми они связаны. они просто участвовать в визуализации элемента и содержимого. ASP.NET [веб-элементы управления](https://msdn.microsoft.com/library/7698y1f0.aspx) объявляются и вызывается на странице.

* [Элементы управления сервера веб-](https://msdn.microsoft.com/library/zsyt68f1.aspx) имеют нетривиальной сроки, которые могут затруднить разработки и отладки.

* Серверные элементы управления позволяют добавить функциональные возможности клиентские элементы объектной модели документа (DOM) с помощью клиентского элемента управления. Вспомогательных функций тегов имеют не DOM.

* Серверные веб-элементы включают автоматическое обнаружение браузера. Вспомогательных функций тегов не имеют сведений о браузере.

* Несколько вспомогательных функций тегов может действовать в том же элементе (см. [вспомогательный тег предотвращение конфликтов](https://docs.microsoft.com/aspnet/core/mvc/views/tag-helpers/authoring#avoiding-tag-helper-conflicts) ), хотя обычно не удается составить элементов управления веб-сервера.

* Вспомогательных функций тегов можно изменять тег и содержимое HTML-элементов, которые они относятся, но не изменяйте ничего на странице. Элемент управления имеет более обобщенным области и можно выполнять действия, которые влияют на другие части страницы; Включение непредвиденные побочные эффекты.

* Элемент управления использовать преобразователь типов для преобразования строк в объекты. С помощью вспомогательных функций тегов вы работаете, изначально в C#, поэтому преобразование типов не требуется.

* Веб-элементы управления используйте [System.ComponentModel](https://docs.microsoft.com/dotnet/api/system.componentmodel) для реализации поведения компонентов и элементов управления во время выполнения и во время разработки. `System.ComponentModel`включает базовые классы и интерфейсы для реализации атрибутов и преобразователей типов, привязки к источникам данных и лицензирования компонентов. Сравните это вспомогательных функций тегов, который обычно являются производными от `TagHelper`и `TagHelper` базовый класс предоставляет только два метода, `Process` и `ProcessAsync`.

## <a name="customizing-the-tag-helper-element-font"></a>Настройка шрифта элемента вспомогательный тега

Можно настроить шрифт и цветовая схема из **средства** > **параметры** > **среды** > **шрифтов Цвета и**:

![изображение](intro/_static/fontoptions2.png)

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Создание вспомогательных функций тегов](authoring.md)
* [Работа с формами](../working-with-forms.md)
* [TagHelperSamples на GitHub](https://github.com/dpaquette/TagHelperSamples) содержит вспомогательные тег образцов для работы с [начальной загрузки](http://getbootstrap.com/).

<!--
* [Working with Forms ](xref:mvc/views/working-with-forms)
-->
