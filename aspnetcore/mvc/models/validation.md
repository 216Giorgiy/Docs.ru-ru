---
title: "Проверка модели в ASP.NET Core MVC"
author: rachelappel
description: "Дополнительные сведения о проверке модели в ASP.NET Core MVC."
keywords: "ASP.NET Core, MVC, проверка"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 3a8676dd-7ed8-4a05-bca2-44e288ab99ee
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/models/validation
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a3f3f7010d7744d59ce2dd88b323418423b3ae08
ms.sourcegitcommit: 9ecd4e9fb0c40c3693dab079eab1ff94b461c922
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2017
---
# <a name="introduction-to-model-validation-in-aspnet-core-mvc"></a><span data-ttu-id="50f3f-104">Общие сведения о проверке модели в ASP.NET Core MVC</span><span class="sxs-lookup"><span data-stu-id="50f3f-104">Introduction to model validation in ASP.NET Core MVC</span></span>

<span data-ttu-id="50f3f-105">По [Рэйчел Аппель](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="50f3f-105">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-validation"></a><span data-ttu-id="50f3f-106">Общие сведения о проверке модели</span><span class="sxs-lookup"><span data-stu-id="50f3f-106">Introduction to model validation</span></span>

<span data-ttu-id="50f3f-107">Прежде чем приложение сохраняет данные в базе данных, приложение должно проверить данные.</span><span class="sxs-lookup"><span data-stu-id="50f3f-107">Before an app stores data in a database, the app must validate the data.</span></span> <span data-ttu-id="50f3f-108">Данные необходимо проверить наличие потенциальных угроз безопасности, проверить его соответствующим образом форматируется с помощью типа и размера, что она должна соответствовать правил.</span><span class="sxs-lookup"><span data-stu-id="50f3f-108">Data must be checked for potential security threats, verified that it is appropriately formatted by type and size, and it must conform to your rules.</span></span> <span data-ttu-id="50f3f-109">Проверка не требуется, хотя он может быть сложно реализовать и избыточность.</span><span class="sxs-lookup"><span data-stu-id="50f3f-109">Validation is necessary although it can be redundant and tedious to implement.</span></span> <span data-ttu-id="50f3f-110">В MVC проверка выполняется на клиенте и сервере.</span><span class="sxs-lookup"><span data-stu-id="50f3f-110">In MVC, validation happens on both the client and server.</span></span>

<span data-ttu-id="50f3f-111">К счастью .NET абстрагированы проверки в атрибутов проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-111">Fortunately, .NET has abstracted validation into validation attributes.</span></span> <span data-ttu-id="50f3f-112">Эти атрибуты содержат код проверки, тем самым уменьшая объем кода, который необходимо написать.</span><span class="sxs-lookup"><span data-stu-id="50f3f-112">These attributes contain validation code, thereby reducing the amount of code you must write.</span></span>

<span data-ttu-id="50f3f-113">[Просмотреть или загрузить пример из GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span><span class="sxs-lookup"><span data-stu-id="50f3f-113">[View or download sample from GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span></span>

## <a name="validation-attributes"></a><span data-ttu-id="50f3f-114">Атрибуты проверки</span><span class="sxs-lookup"><span data-stu-id="50f3f-114">Validation Attributes</span></span>

<span data-ttu-id="50f3f-115">Атрибуты проверки — это способ для настройки проверки модели, поэтому она аналогична концептуально проверки для полей в таблицах базы данных.</span><span class="sxs-lookup"><span data-stu-id="50f3f-115">Validation attributes are a way to configure model validation so it's similar conceptually to validation on fields in database tables.</span></span> <span data-ttu-id="50f3f-116">Сюда входят ограничения, такие как назначение типов данных или обязательных полей.</span><span class="sxs-lookup"><span data-stu-id="50f3f-116">This includes constraints such as assigning data types or required fields.</span></span> <span data-ttu-id="50f3f-117">Другие виды проверки включают применение шаблонов данных для применения бизнес-правил, например кредитной карты, номер телефона или адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="50f3f-117">Other types of validation include applying patterns to data to enforce business rules, such as a credit card, phone number, or email address.</span></span> <span data-ttu-id="50f3f-118">Атрибуты проверки сделать применения этих требований гораздо проще и удобнее в использовании.</span><span class="sxs-lookup"><span data-stu-id="50f3f-118">Validation attributes make enforcing these requirements much simpler and easier to use.</span></span>

<span data-ttu-id="50f3f-119">Ниже приведен аннотируемого `Movie` модели из приложения, которое хранит сведения о фильмах и телепередачи.</span><span class="sxs-lookup"><span data-stu-id="50f3f-119">Below is an annotated `Movie` model from an app that stores information about movies and TV shows.</span></span> <span data-ttu-id="50f3f-120">Большинство свойств являются обязательными, и требования к длине имеют несколько свойств строки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-120">Most of the properties are required and several string properties have length requirements.</span></span> <span data-ttu-id="50f3f-121">Кроме того, есть ограничения числового диапазона на месте для `Price` значение $999,99, а также настраиваемый атрибут проверки от 0.</span><span class="sxs-lookup"><span data-stu-id="50f3f-121">Additionally, there is a numeric range restriction in place for the `Price` property from 0 to $999.99, along with a custom validation attribute.</span></span>

[!code-csharp[Main](validation/sample/Movie.cs?range=6-29)]

<span data-ttu-id="50f3f-122">Просто прочтя модели раскроется правил о данных для этого приложения, упрощая процесс для обслуживания кода.</span><span class="sxs-lookup"><span data-stu-id="50f3f-122">Simply reading through the model reveals the rules about data for this app, making it easier to maintain the code.</span></span> <span data-ttu-id="50f3f-123">Ниже приведены несколько популярных встроенной проверке атрибутов.</span><span class="sxs-lookup"><span data-stu-id="50f3f-123">Below are several popular built-in validation attributes:</span></span>

* <span data-ttu-id="50f3f-124">`[CreditCard]`: Проверяет свойство имеет формат кредитной карты.</span><span class="sxs-lookup"><span data-stu-id="50f3f-124">`[CreditCard]`: Validates the property has a credit card format.</span></span>

* <span data-ttu-id="50f3f-125">`[Compare]`: Проверяет два свойства в модели совпадения.</span><span class="sxs-lookup"><span data-stu-id="50f3f-125">`[Compare]`: Validates two properties in a model match.</span></span>

* <span data-ttu-id="50f3f-126">`[EmailAddress]`: Проверяет свойство имеет формат электронной почты.</span><span class="sxs-lookup"><span data-stu-id="50f3f-126">`[EmailAddress]`: Validates the property has an email format.</span></span>

* <span data-ttu-id="50f3f-127">`[Phone]`: Проверяет свойство имеет формат телефона.</span><span class="sxs-lookup"><span data-stu-id="50f3f-127">`[Phone]`: Validates the property has a telephone format.</span></span>

* <span data-ttu-id="50f3f-128">`[Range]`: Проверяет его значение свойства находится в указанном диапазоне.</span><span class="sxs-lookup"><span data-stu-id="50f3f-128">`[Range]`: Validates the property value falls within the given range.</span></span>

* <span data-ttu-id="50f3f-129">`[RegularExpression]`: Проверяет, что данные соответствуют указанному регулярному выражению.</span><span class="sxs-lookup"><span data-stu-id="50f3f-129">`[RegularExpression]`: Validates that the data matches the specified regular expression.</span></span>

* <span data-ttu-id="50f3f-130">`[Required]`: Делает свойство обязательное.</span><span class="sxs-lookup"><span data-stu-id="50f3f-130">`[Required]`: Makes a property required.</span></span>

* <span data-ttu-id="50f3f-131">`[StringLength]`: Осуществляет проверку на строковое свойство максимум данной максимальной длины.</span><span class="sxs-lookup"><span data-stu-id="50f3f-131">`[StringLength]`: Validates that a string property has at most the given maximum length.</span></span>

* <span data-ttu-id="50f3f-132">`[Url]`: Проверяет свойство имеет формат URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="50f3f-132">`[Url]`: Validates the property has a URL format.</span></span>

<span data-ttu-id="50f3f-133">MVC поддерживает любой атрибут, который является производным от `ValidationAttribute` для целей проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-133">MVC supports any attribute that derives from `ValidationAttribute` for validation purposes.</span></span> <span data-ttu-id="50f3f-134">Множество полезных проверки атрибутов можно найти в [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) пространства имен.</span><span class="sxs-lookup"><span data-stu-id="50f3f-134">Many useful validation attributes can be found in the [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) namespace.</span></span>

<span data-ttu-id="50f3f-135">Возможны случаи, в которых требуется больше возможностей, чем встроенные атрибуты.</span><span class="sxs-lookup"><span data-stu-id="50f3f-135">There may be instances where you need more features than built-in attributes provide.</span></span> <span data-ttu-id="50f3f-136">В тех случаях, можно создать собственные настраиваемые атрибуты проверки путем наследования от `ValidationAttribute` или изменение модели для реализации `IValidatableObject`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-136">For those times, you can create custom validation attributes by deriving from `ValidationAttribute` or changing your model to implement `IValidatableObject`.</span></span>

## <a name="notes-on-the-use-of-the-required-attribute"></a><span data-ttu-id="50f3f-137">При использовании необходимого атрибута</span><span class="sxs-lookup"><span data-stu-id="50f3f-137">Notes on the use of the Required attribute</span></span>

<span data-ttu-id="50f3f-138">[Типы значений](/dotnet/csharp/language-reference/keywords/value-types), не допускающие значение null (например, `decimal`, `int`, `float` и `DateTime`), являются обязательными и не требуют атрибута `Required`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-138">Non-nullable [value types](/dotnet/csharp/language-reference/keywords/value-types) (such as `decimal`, `int`, `float`, and `DateTime`) are inherently required and don't need the `Required` attribute.</span></span> <span data-ttu-id="50f3f-139">Приложение не выполняет проверки на стороне сервера проверки для запретом типов, помеченных `Required`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-139">The app performs no server-side validation checks for non-nullable types that are marked `Required`.</span></span>

<span data-ttu-id="50f3f-140">Привязка модели MVC, которая не связаны с проверки и атрибуты проверки, отклоняет отправки формы поля, содержащего отсутствует значение или пробелов, не допускающим типа.</span><span class="sxs-lookup"><span data-stu-id="50f3f-140">MVC model binding, which isn't concerned with validation and validation attributes, rejects a form field submission containing a missing value or whitespace for a non-nullable type.</span></span> <span data-ttu-id="50f3f-141">В случае отсутствия `BindRequired` атрибутов для целевого свойства привязки модели игнорирует отсутствующих данных для типов допускают значение NULL, где отсутствует поле формы из входящих данных формы.</span><span class="sxs-lookup"><span data-stu-id="50f3f-141">In the absence of a `BindRequired` attribute on the target property, model binding ignores missing data for non-nullable types, where the form field is absent from the incoming form data.</span></span>

<span data-ttu-id="50f3f-142">[Атрибута BindRequired](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (см. также [Настройка поведения привязки модели с атрибутами](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) полезна для обеспечения завершения данных формы.</span><span class="sxs-lookup"><span data-stu-id="50f3f-142">The [BindRequired attribute](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (also see [Customize model binding behavior with attributes](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) is useful to ensure form data is complete.</span></span> <span data-ttu-id="50f3f-143">При применении к свойству, система привязки модели требуется значение для этого свойства.</span><span class="sxs-lookup"><span data-stu-id="50f3f-143">When applied to a property, the model binding system requires a value for that property.</span></span> <span data-ttu-id="50f3f-144">При применении к типу, система привязки модели необходимо задать значения для всех свойств объекта этого типа.</span><span class="sxs-lookup"><span data-stu-id="50f3f-144">When applied to a type, the model binding system requires values for all of the properties of that type.</span></span>

<span data-ttu-id="50f3f-145">При использовании [Nullable\<T > тип](/dotnet/csharp/programming-guide/nullable-types/) (например, `decimal?` или `System.Nullable<decimal>`) и пометить его `Required`, флажок проверки на стороне сервера выполняется как бы стандартного допускает значения NULL типа (для свойства Пример, `string`).</span><span class="sxs-lookup"><span data-stu-id="50f3f-145">When you use a [Nullable\<T> type](/dotnet/csharp/programming-guide/nullable-types/) (for example, `decimal?` or `System.Nullable<decimal>`) and mark it `Required`, a server-side validation check is performed as if the property were a standard nullable type (for example, a `string`).</span></span>

<span data-ttu-id="50f3f-146">Проверка на стороне клиента требуется значение для поля формы, которое соответствует свойству модели, помеченной `Required` и для свойства запретом типа, который еще не отмечен как `Required`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-146">Client-side validation requires a value for a form field that corresponds to a model property that you've marked `Required` and for a non-nullable type property that you haven't marked `Required`.</span></span> <span data-ttu-id="50f3f-147">`Required`можно использовать для управления сообщение об ошибке проверки на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="50f3f-147">`Required` can be used to control the client-side validation error message.</span></span>

## <a name="model-state"></a><span data-ttu-id="50f3f-148">Состояние модели</span><span class="sxs-lookup"><span data-stu-id="50f3f-148">Model State</span></span>

<span data-ttu-id="50f3f-149">Состояние модели представляет ошибок проверки в введенные значения формы HTML.</span><span class="sxs-lookup"><span data-stu-id="50f3f-149">Model state represents validation errors in submitted HTML form values.</span></span>

<span data-ttu-id="50f3f-150">MVC по-прежнему Проверка полей, пока не достигнет максимальное количество ошибок (по умолчанию — 200).</span><span class="sxs-lookup"><span data-stu-id="50f3f-150">MVC will continue validating fields until reaches the maximum number of errors (200 by default).</span></span> <span data-ttu-id="50f3f-151">Это число можно настроить, вставив следующий код в `ConfigureServices` метод в *файла Startup.cs* файла:</span><span class="sxs-lookup"><span data-stu-id="50f3f-151">You can configure this number by inserting the following code into the `ConfigureServices` method in the *Startup.cs* file:</span></span>

[!code-csharp[Main](validation/sample/Startup.cs?range=27)]

## <a name="handling-model-state-errors"></a><span data-ttu-id="50f3f-152">Состояние модели обработки ошибок</span><span class="sxs-lookup"><span data-stu-id="50f3f-152">Handling Model State Errors</span></span>

<span data-ttu-id="50f3f-153">Проверка модели, происходит перед каждой вызываемого действия контроллера, и ответственность метода действия для проверки `ModelState.IsValid` и реагировать соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="50f3f-153">Model validation occurs prior to each controller action being invoked, and it is the action method’s responsibility to inspect `ModelState.IsValid` and react appropriately.</span></span> <span data-ttu-id="50f3f-154">Во многих случаях соответствующие реакции является возврат каких-либо ответа с ошибкой, в идеале с подробными сведениями о причине, причину ошибки проверки модели.</span><span class="sxs-lookup"><span data-stu-id="50f3f-154">In many cases, the appropriate reaction is to return some kind of error response, ideally detailing the reason why model validation failed.</span></span>

<span data-ttu-id="50f3f-155">Некоторые приложения выберет следовать стандартного соглашения для обработки ошибок проверки модели, при которых фильтр может быть необходимо реализовать такую политику.</span><span class="sxs-lookup"><span data-stu-id="50f3f-155">Some apps will choose to follow a standard convention for dealing with model validation errors, in which case a filter may be an appropriate place to implement such a policy.</span></span> <span data-ttu-id="50f3f-156">Следует проверить поведение свои действия с состояниями допустимые и недопустимые модели.</span><span class="sxs-lookup"><span data-stu-id="50f3f-156">You should test how your actions behave with valid and invalid model states.</span></span>

## <a name="manual-validation"></a><span data-ttu-id="50f3f-157">Ручная проверка</span><span class="sxs-lookup"><span data-stu-id="50f3f-157">Manual validation</span></span>

<span data-ttu-id="50f3f-158">После завершения привязки модели и проверки, можно повторить его части.</span><span class="sxs-lookup"><span data-stu-id="50f3f-158">After model binding and validation are complete, you may want to repeat parts of it.</span></span> <span data-ttu-id="50f3f-159">Например пользователь может быть введен текст в поле, ожидается целое число, или необходимо вычислить значение для свойства модели.</span><span class="sxs-lookup"><span data-stu-id="50f3f-159">For example, a user may have entered text in a field expecting an integer, or you may need to compute a value for a model's property.</span></span>

<span data-ttu-id="50f3f-160">Необходимо вручную выполнить проверку.</span><span class="sxs-lookup"><span data-stu-id="50f3f-160">You may need to run validation manually.</span></span> <span data-ttu-id="50f3f-161">Чтобы сделать это, вызовите `TryValidateModel` метода, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="50f3f-161">To do so, call the `TryValidateModel` method, as shown here:</span></span>

[!code-csharp[Main](validation/sample/MoviesController.cs?range=52)]

## <a name="custom-validation"></a><span data-ttu-id="50f3f-162">Пользовательской проверки</span><span class="sxs-lookup"><span data-stu-id="50f3f-162">Custom validation</span></span>

<span data-ttu-id="50f3f-163">Для большинства задач проверки работы атрибутов проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-163">Validation attributes work for most validation needs.</span></span> <span data-ttu-id="50f3f-164">Тем не менее некоторые правила проверки относятся только к вашей организации, они не являются просто требуется проверка универсальных данных, таких как обеспечение поля или соответствует диапазон значений.</span><span class="sxs-lookup"><span data-stu-id="50f3f-164">However, some validation rules are specific to your business, as they're not just generic data validation such as ensuring a field is required or that it conforms to a range of values.</span></span> <span data-ttu-id="50f3f-165">В этих сценариях настраиваемых атрибутов проверки — это эффективное решение.</span><span class="sxs-lookup"><span data-stu-id="50f3f-165">For these scenarios, custom validation attributes are a great solution.</span></span> <span data-ttu-id="50f3f-166">Создание собственных настраиваемых атрибутов проверки в MVC можно легко.</span><span class="sxs-lookup"><span data-stu-id="50f3f-166">Creating your own custom validation attributes in MVC is easy.</span></span> <span data-ttu-id="50f3f-167">Наследовать только от `ValidationAttribute`и Переопределите `IsValid` метод.</span><span class="sxs-lookup"><span data-stu-id="50f3f-167">Just inherit from the `ValidationAttribute`, and override the `IsValid` method.</span></span> <span data-ttu-id="50f3f-168">`IsValid` Метод принимает два параметра: первый — объект с именем *значение* , а второй — `ValidationContext` объект с именем *validationContext*.</span><span class="sxs-lookup"><span data-stu-id="50f3f-168">The `IsValid` method accepts two parameters, the first is an object named *value* and the second is a `ValidationContext` object named *validationContext*.</span></span> <span data-ttu-id="50f3f-169">*Значение* ссылается на фактическое значение из поля, проверка вашего пользовательского проверяющего элемента управления.</span><span class="sxs-lookup"><span data-stu-id="50f3f-169">*Value* refers to the actual value from the field that your custom validator is validating.</span></span>

<span data-ttu-id="50f3f-170">В следующем образце бизнес-правило том, что пользователи не могут устанавливать жанр *классический* к фильму, выпущенные после выхода 1960.</span><span class="sxs-lookup"><span data-stu-id="50f3f-170">In the following sample, a business rule states that users may not set the genre to *Classic* for a movie released after 1960.</span></span> <span data-ttu-id="50f3f-171">`[ClassicMovie]` Атрибут сначала проверяет жанр и если это classic, затем выполняется проверка является более поздней, чем 1960 даты выпуска.</span><span class="sxs-lookup"><span data-stu-id="50f3f-171">The `[ClassicMovie]` attribute checks the genre first, and if it is a classic, then it checks the release date to see that it is later than 1960.</span></span> <span data-ttu-id="50f3f-172">Если он освобождается после 1960, проверка завершается с ошибками.</span><span class="sxs-lookup"><span data-stu-id="50f3f-172">If it is released after 1960, validation fails.</span></span> <span data-ttu-id="50f3f-173">Атрибут принимает целочисленный параметр, представляющее год, можно использовать для проверки данных.</span><span class="sxs-lookup"><span data-stu-id="50f3f-173">The attribute accepts an integer parameter representing the year that you can use to validate data.</span></span> <span data-ttu-id="50f3f-174">Можно записать значение параметра в конструктор атрибута, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="50f3f-174">You can capture the value of the parameter in the attribute's constructor, as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=9-29)]

<span data-ttu-id="50f3f-175">`movie` Переменной выше представляет `Movie` объект, содержащий данные из отправки формы для проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-175">The `movie` variable above represents a `Movie` object that contains the data from the form submission to validate.</span></span> <span data-ttu-id="50f3f-176">В этом случае код проверки проверяет дату и жанр в `IsValid` метод `ClassicMovieAttribute` класса согласно правилам.</span><span class="sxs-lookup"><span data-stu-id="50f3f-176">In this case, the validation code checks the date and genre in the `IsValid` method of the `ClassicMovieAttribute` class as per the rules.</span></span> <span data-ttu-id="50f3f-177">По окончании успешной проверки `IsValid` возвращает `ValidationResult.Success` кода, и если проверка завершается неудачно, `ValidationResult` с сообщением об ошибке.</span><span class="sxs-lookup"><span data-stu-id="50f3f-177">Upon successful validation `IsValid` returns a `ValidationResult.Success` code, and when validation fails, a `ValidationResult` with an error message.</span></span> <span data-ttu-id="50f3f-178">Когда пользователь изменяет `Genre` поля и отправляет форму, `IsValid` метод `ClassicMovieAttribute` будет проверить, является ли фильма классические.</span><span class="sxs-lookup"><span data-stu-id="50f3f-178">When a user modifies the `Genre` field and submits the form, the `IsValid` method of the `ClassicMovieAttribute` will verify whether the movie is a classic.</span></span> <span data-ttu-id="50f3f-179">Как и все встроенные атрибут применять `ClassicMovieAttribute` к свойству, такие как `ReleaseDate` для обеспечения проверки происходит, как показано в предыдущем примере кода.</span><span class="sxs-lookup"><span data-stu-id="50f3f-179">Like any built-in attribute, apply the `ClassicMovieAttribute` to a property such as `ReleaseDate` to ensure validation happens, as shown in the previous code sample.</span></span> <span data-ttu-id="50f3f-180">Поскольку пример работает только с `Movie` типов, лучшим вариантом является использование `IValidatableObject` как показано в следующем абзаце.</span><span class="sxs-lookup"><span data-stu-id="50f3f-180">Since the example works only with `Movie` types, a better option is to use `IValidatableObject` as shown in the following paragraph.</span></span>

<span data-ttu-id="50f3f-181">Кроме того, этот же код может быть переведена в модель, реализовав `Validate` метод `IValidatableObject` интерфейса.</span><span class="sxs-lookup"><span data-stu-id="50f3f-181">Alternatively, this same code could be placed in the model by implementing the `Validate` method on the `IValidatableObject` interface.</span></span> <span data-ttu-id="50f3f-182">Хотя настраиваемых атрибутов проверки подходят для проверки отдельных свойств, реализация `IValidatableObject` можно использовать для реализации проверки на уровне класса, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="50f3f-182">While custom validation attributes work well for validating individual properties, implementing `IValidatableObject` can be used to implement class-level validation as seen here.</span></span>

[!code-csharp[Main](validation/sample/MovieIValidatable.cs?range=32-40)]

## <a name="client-side-validation"></a><span data-ttu-id="50f3f-183">Проверки на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="50f3f-183">Client side validation</span></span>

<span data-ttu-id="50f3f-184">Проверки на стороне клиента является большое удобство для пользователей.</span><span class="sxs-lookup"><span data-stu-id="50f3f-184">Client side validation is a great convenience for users.</span></span> <span data-ttu-id="50f3f-185">Он сохраняет время, в противном случае они бы проводят ожидание кругового пути на сервере.</span><span class="sxs-lookup"><span data-stu-id="50f3f-185">It saves time they would otherwise spend waiting for a round trip to the server.</span></span> <span data-ttu-id="50f3f-186">Бизнес-терминологией даже несколько долей секунды, умноженные сотни раз в день до добавляет ожидается большое количество времени, затрат и трудностей.</span><span class="sxs-lookup"><span data-stu-id="50f3f-186">In business terms, even a few fractions of seconds multiplied hundreds of times each day adds up to be a lot of time, expense, and frustration.</span></span> <span data-ttu-id="50f3f-187">Простой и непосредственный проверки позволяет пользователям работать более продуктивно и создавать более высокое качество входных и выходных данных.</span><span class="sxs-lookup"><span data-stu-id="50f3f-187">Straightforward and immediate validation enables users to work more efficiently and produce better quality input and output.</span></span>

<span data-ttu-id="50f3f-188">Необходимо иметь представление с правильной ссылки на скрипты JavaScript на месте для проверки на стороне клиента для работы, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="50f3f-188">You must have a view with the proper JavaScript script references in place for client side validation to work as you see here.</span></span>

[!code-cshtml[Main](validation/sample/Views/Shared/_Layout.cshtml?range=37)]

[!code-cshtml[Main](validation/sample/Views/Shared/_ValidationScriptsPartial.cshtml)]

<span data-ttu-id="50f3f-189">[Ненавязчивой проверки jQuery](https://github.com/aspnet/jquery-validation-unobtrusive) сценарий — пользовательского интерфейса библиотеки Microsoft и лежит популярный [jQuery проверки](https://jqueryvalidation.org/) подключаемого модуля.</span><span class="sxs-lookup"><span data-stu-id="50f3f-189">The [jQuery Unobtrusive Validation](https://github.com/aspnet/jquery-validation-unobtrusive) script is a custom Microsoft front-end library that builds on the popular [jQuery Validate](https://jqueryvalidation.org/) plugin.</span></span> <span data-ttu-id="50f3f-190">Без jQuery ненавязчивой проверки будет иметь ту же логику проверки в двух местах кода: один раз в атрибутах проверки стороны сервера для свойств модели, а затем снова на клиентские скрипты (примеры для jQuery проверки элемента [ `validate()` ](https://jqueryvalidation.org/validate/) метод показывает, как сложных это может стать).</span><span class="sxs-lookup"><span data-stu-id="50f3f-190">Without jQuery Unobtrusive Validation, you would have to code the same validation logic in two places: once in the server side validation attributes on model properties, and then again in client side scripts (the examples for jQuery Validate's [`validate()`](https://jqueryvalidation.org/validate/) method shows how complex this could become).</span></span> <span data-ttu-id="50f3f-191">Вместо этого в MVC [вспомогательных функций тегов](xref:mvc/views/tag-helpers/intro) и [вспомогательных методов HTML](xref:mvc/views/overview) могут использовать атрибуты проверки и метаданные из свойства модели для визуализации HTML 5 типа [атрибуты данных](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) в элементы формы, которые требуется проверить.</span><span class="sxs-lookup"><span data-stu-id="50f3f-191">Instead, MVC's [Tag Helpers](xref:mvc/views/tag-helpers/intro) and [HTML helpers](xref:mvc/views/overview) are able to use the validation attributes and type metadata from model properties to render HTML 5 [data- attributes](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) in the form elements that need validation.</span></span> <span data-ttu-id="50f3f-192">MVC создает `data-` встроенных и пользовательских атрибутов.</span><span class="sxs-lookup"><span data-stu-id="50f3f-192">MVC generates the `data-` attributes for both built-in and custom attributes.</span></span> <span data-ttu-id="50f3f-193">ненавязчивой проверки jQuery разбор демонстрируется `data-` атрибуты и передает логику проверки, эффективно «копирование» логику проверки стороны сервера клиенту jQuery.</span><span class="sxs-lookup"><span data-stu-id="50f3f-193">jQuery Unobtrusive Validation then parses thes `data-` attributes and passes the logic to jQuery Validate, effectively "copying" the server side validation logic to the client.</span></span> <span data-ttu-id="50f3f-194">Для отображения ошибок проверки на стороне клиента с помощью соответствующего тега вспомогательные методы, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="50f3f-194">You can display validation errors on the client using the relevant tag helpers as shown here:</span></span>

[!code-cshtml[Main](validation/sample/Views/Movies/Create.cshtml?highlight=4,5&range=19-25)]

<span data-ttu-id="50f3f-195">Выше вспомогательных функций тегов визуализацию HTML ниже.</span><span class="sxs-lookup"><span data-stu-id="50f3f-195">The tag helpers above render the HTML below.</span></span> <span data-ttu-id="50f3f-196">Обратите внимание, что `data-` выходных атрибутов в документ HTML, соответствующие атрибуты проверки для `ReleaseDate` свойства.</span><span class="sxs-lookup"><span data-stu-id="50f3f-196">Notice that the `data-` attributes in the HTML output correspond to the validation attributes for the `ReleaseDate` property.</span></span> <span data-ttu-id="50f3f-197">`data-val-required` Атрибута ниже содержит сообщение об ошибке для отображения, если пользователь не заполните поле даты выпуска.</span><span class="sxs-lookup"><span data-stu-id="50f3f-197">The `data-val-required` attribute below contains an error message to display if the user doesn't fill in the release date field.</span></span> <span data-ttu-id="50f3f-198">ненавязчивой проверки jQuery передает это значение jQuery проверки [ `required()` ](https://jqueryvalidation.org/required-method/) метод, который затем отображает это сообщение в соответствующем  **\<span >** элемента.</span><span class="sxs-lookup"><span data-stu-id="50f3f-198">jQuery Unobtrusive Validation passes this value to the jQuery Validate [`required()`](https://jqueryvalidation.org/required-method/) method, which then displays that message in the accompanying **\<span>** element.</span></span>

```html
<form action="/Movies/Create" method="post">
    <div class="form-horizontal">
        <h4>Movie</h4>
        <div class="text-danger"></div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="ReleaseDate">ReleaseDate</label>
            <div class="col-md-10">
                <input class="form-control" type="datetime"
                data-val="true" data-val-required="The ReleaseDate field is required."
                id="ReleaseDate" name="ReleaseDate" value="" />
                <span class="text-danger field-validation-valid"
                data-valmsg-for="ReleaseDate" data-valmsg-replace="true"></span>
            </div>
        </div>
    </div>
</form>
```

<span data-ttu-id="50f3f-199">Таким образом проверка на стороне клиента предотвращает отправку, пока формы является допустимым.</span><span class="sxs-lookup"><span data-stu-id="50f3f-199">Thus, client-side validation prevents submission until the form is valid.</span></span> <span data-ttu-id="50f3f-200">Кнопки "Отправить" запускает JavaScript, который отправляет форму или отображаются сообщения об ошибках.</span><span class="sxs-lookup"><span data-stu-id="50f3f-200">The Submit button runs JavaScript that either submits the form or displays error messages.</span></span>

<span data-ttu-id="50f3f-201">MVC определяет значения атрибутов типа на основе типа данных .NET, возможно переопределено с помощью свойства `[DataType]` атрибуты.</span><span class="sxs-lookup"><span data-stu-id="50f3f-201">MVC determines type attribute values based on the .NET data type of a property, possibly overridden using `[DataType]` attributes.</span></span> <span data-ttu-id="50f3f-202">Базовый `[DataType]` атрибута не выполняет проверку real серверную.</span><span class="sxs-lookup"><span data-stu-id="50f3f-202">The base `[DataType]` attribute does no real server-side validation.</span></span> <span data-ttu-id="50f3f-203">Браузеры выберите собственные сообщения об ошибках и отобразить эти ошибки, однако их следует, однако пакет ненавязчивой проверки jQuery можно переопределить сообщения и отображать их согласованно с другими разделами.</span><span class="sxs-lookup"><span data-stu-id="50f3f-203">Browsers choose their own error messages and display those errors however they wish, however the jQuery Validation Unobtrusive package can override the messages and display them consistently with others.</span></span> <span data-ttu-id="50f3f-204">Это происходит, наиболее очевидно, что если пользователи применять `[DataType]` подклассов, такие как `[EmailAddress]`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-204">This happens most obviously when users apply `[DataType]` subclasses such as `[EmailAddress]`.</span></span>

### <a name="adding-validation-to-dynamic-forms"></a><span data-ttu-id="50f3f-205">Добавление проверки для динамических форм:</span><span class="sxs-lookup"><span data-stu-id="50f3f-205">Adding Validation to Dynamic Forms:</span></span>

<span data-ttu-id="50f3f-206">Поскольку ненавязчивой проверки jQuery передает логики проверки и параметры проверки jQuery при первой загрузке страницы, динамически создаваемых формы не будет автоматически работают проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-206">Because jQuery Unobtrusive Validation passes validation logic and parameters to jQuery Validate when the page first loads, dynamically generated forms will not automatically exhibit validation.</span></span> <span data-ttu-id="50f3f-207">Вместо этого необходимо сообщить jQuery ненавязчивой проверки для синтаксического анализа динамическая форма сразу же после его создания.</span><span class="sxs-lookup"><span data-stu-id="50f3f-207">Instead, you must tell jQuery Unobtrusive Validation to parse the dynamic form immediately after creating it.</span></span> <span data-ttu-id="50f3f-208">В следующем примере кода показано, как можно настроить проверки на стороне клиента в форме добавлен с помощью AJAX.</span><span class="sxs-lookup"><span data-stu-id="50f3f-208">For example, the code below shows how you might set up client side validation on a form added via AJAX.</span></span>

```js
$.get({
    url: "https://url/that/returns/a/form",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Could not add form. " + errorThrown);
    },
    success: function(newFormHTML) {
        var container = document.getElementById("form-container");
        container.insertAdjacentHTML("beforeend", newFormHTML);
        var forms = container.getElementsByTagName("form");
        var newForm = forms[forms.length - 1];
        $.validator.unobtrusive.parse(newForm);
    }
})
```

<span data-ttu-id="50f3f-209">`$.validator.unobtrusive.parse()` Метод принимает jQuery селектор для одного аргумента.</span><span class="sxs-lookup"><span data-stu-id="50f3f-209">The `$.validator.unobtrusive.parse()` method accepts a jQuery selector for its one argument.</span></span> <span data-ttu-id="50f3f-210">Этот метод указывает jQuery ненавязчивой проверки для синтаксического анализа `data-` атрибуты формы внутри этого выбора.</span><span class="sxs-lookup"><span data-stu-id="50f3f-210">This method tells jQuery Unobtrusive Validation to parse the `data-` attributes of forms within that selector.</span></span> <span data-ttu-id="50f3f-211">Значения этих атрибутов передаются подключаемого модуля проверки jQuery, чтобы видно, правила проверки желаемую стороне формы.</span><span class="sxs-lookup"><span data-stu-id="50f3f-211">The values of those attributes are then passed to the jQuery Validate plugin so that the form exhibits the desired client side validation rules.</span></span>

### <a name="adding-validation-to-dynamic-controls"></a><span data-ttu-id="50f3f-212">Добавление проверки для динамических элементов управления:</span><span class="sxs-lookup"><span data-stu-id="50f3f-212">Adding Validation to Dynamic Controls:</span></span>

<span data-ttu-id="50f3f-213">Можно также обновить правила проверки в форме, когда отдельные элементы управления, такие как `<input/>`s и `<select/>`s, создаются динамически.</span><span class="sxs-lookup"><span data-stu-id="50f3f-213">You can also update the validation rules on a form when individual controls, such as `<input/>`s and `<select/>`s, are dynamically generated.</span></span> <span data-ttu-id="50f3f-214">Невозможно передать селекторы для этих элементов для `parse()` непосредственно из-за форму уже проверен и не будут обновлены.</span><span class="sxs-lookup"><span data-stu-id="50f3f-214">You cannot pass selectors for these elements to the `parse()` method directly because the surrounding form has already been parsed and will not update.</span></span>  <span data-ttu-id="50f3f-215">Вместо этого сначала удалите существующие данные проверки, и повторной обработки всей формы, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="50f3f-215">Instead, you first remove the existing validation data, then reparse the entire form, as shown below:</span></span>

```js
$.get({
    url: "https://url/that/returns/a/control",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Could not add form. " + errorThrown);
    },
    success: function(newInputHTML) {
        var form = document.getElementById("my-form");
        form.insertAdjacentHTML("beforeend", newInputHTML);
        form.removeData("validator")    // Added by the raw jQuery Validate
            .removeData("unobtrusiveValidation");   // Added by jQuery Unobtrusive Validation
        $.validator.unobtrusive.parse(form);
    }
})
```

## <a name="iclientmodelvalidator"></a><span data-ttu-id="50f3f-216">IClientModelValidator</span><span class="sxs-lookup"><span data-stu-id="50f3f-216">IClientModelValidator</span></span>

<span data-ttu-id="50f3f-217">Можно создать пользовательский атрибут, логика стороны клиента и [ненавязчивой проверки](http://jqueryvalidation.org/documentation/) будет выполняться на клиентском компьютере автоматически в процессе проверки.</span><span class="sxs-lookup"><span data-stu-id="50f3f-217">You may create client side logic for your custom attribute, and [unobtrusive validation](http://jqueryvalidation.org/documentation/) will execute it on the client for you automatically as part of validation.</span></span> <span data-ttu-id="50f3f-218">Первым шагом является контролировать, какие данные атрибуты добавляются путем реализации `IClientModelValidator` интерфейс, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="50f3f-218">The first step is to control what data- attributes are added by implementing the `IClientModelValidator` interface as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=30-42)]

<span data-ttu-id="50f3f-219">Созданные поля атрибутов, которые реализуют этот интерфейс можно добавить атрибуты HTML.</span><span class="sxs-lookup"><span data-stu-id="50f3f-219">Attributes that implement this interface can add HTML attributes to generated fields.</span></span> <span data-ttu-id="50f3f-220">Анализ результатов для `ReleaseDate` элемент показывает код HTML, который аналогичен предыдущему примеру, за исключением того, теперь является `data-val-classicmovie` атрибут, который был определен в `AddValidation` метод `IClientModelValidator`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-220">Examining the output for the `ReleaseDate` element reveals HTML that is similar to the previous example, except now there is a `data-val-classicmovie` attribute that was defined in the `AddValidation` method of `IClientModelValidator`.</span></span>

```html
<input class="form-control" type="datetime"
    data-val="true"
    data-val-classicmovie="Classic movies must have a release year earlier than 1960."
    data-val-classicmovie-year="1960"
    data-val-required="The ReleaseDate field is required."
    id="ReleaseDate" name="ReleaseDate" value="" />
```

<span data-ttu-id="50f3f-221">Проверки ненавязчивого использует данные в `data-` атрибуты для отображения сообщений об ошибках.</span><span class="sxs-lookup"><span data-stu-id="50f3f-221">Unobtrusive validation uses the data in the `data-` attributes to display error messages.</span></span> <span data-ttu-id="50f3f-222">Тем не менее, не знает о правилах jQuery, или сообщения до момента добавления элемента jQuery `validator` объекта.</span><span class="sxs-lookup"><span data-stu-id="50f3f-222">However, jQuery doesn't know about rules or messages until you add them to jQuery's `validator` object.</span></span> <span data-ttu-id="50f3f-223">Это показано в следующем примере, который добавляет метод с именем `classicmovie` с кодом проверки пользовательских клиентских jQuery `validator` объекта.</span><span class="sxs-lookup"><span data-stu-id="50f3f-223">This is shown in the example below that adds a method named `classicmovie` containing custom client validation code to the jQuery `validator` object.</span></span>

[!code-javascript[Main](validation/sample/Views/Movies/Create.cshtml?range=71-93)]

<span data-ttu-id="50f3f-224">Теперь jQuery содержит данные для выполнения пользовательской проверки JavaScript, а также сообщение об ошибке для отображения, если этот код проверки возвращает значение false.</span><span class="sxs-lookup"><span data-stu-id="50f3f-224">Now jQuery has the information to execute the custom JavaScript validation as well as the error message to display if that validation code returns false.</span></span>

## <a name="remote-validation"></a><span data-ttu-id="50f3f-225">Удаленной проверки</span><span class="sxs-lookup"><span data-stu-id="50f3f-225">Remote validation</span></span>

<span data-ttu-id="50f3f-226">Удаленной проверки является компонент используется для проверки данных на стороне клиента к данным на сервере.</span><span class="sxs-lookup"><span data-stu-id="50f3f-226">Remote validation is a great feature to use when you need to validate data on the client against data on the server.</span></span> <span data-ttu-id="50f3f-227">Например приложение может потребоваться проверить электронной почты или имя пользователя уже используется, и он большой объем данных для этого необходимо выполнить запрос.</span><span class="sxs-lookup"><span data-stu-id="50f3f-227">For example, your app may need to verify whether an email or user name is already in use, and it must query a large amount of data to do so.</span></span> <span data-ttu-id="50f3f-228">Загрузка больших наборов данных для проверки одного или нескольких полей потребляет слишком много ресурсов.</span><span class="sxs-lookup"><span data-stu-id="50f3f-228">Downloading large sets of data for validating one or a few fields consumes too many resources.</span></span> <span data-ttu-id="50f3f-229">Он также может предоставлять конфиденциальную информацию.</span><span class="sxs-lookup"><span data-stu-id="50f3f-229">It may also expose sensitive information.</span></span> <span data-ttu-id="50f3f-230">Альтернативой является выполнение кругового пути запроса для проверки поля.</span><span class="sxs-lookup"><span data-stu-id="50f3f-230">An alternative is to make a round-trip request to validate a field.</span></span>

<span data-ttu-id="50f3f-231">Можно реализовать удаленной проверки в два этапа.</span><span class="sxs-lookup"><span data-stu-id="50f3f-231">You can implement remote validation in a two step process.</span></span> <span data-ttu-id="50f3f-232">Во-первых, следует пометить модели с помощью `[Remote]` атрибута.</span><span class="sxs-lookup"><span data-stu-id="50f3f-232">First, you must annotate your model with the `[Remote]` attribute.</span></span> <span data-ttu-id="50f3f-233">`[Remote]` Атрибут принимает несколько перегрузок, которые можно использовать для перенаправления на стороне клиента JavaScript соответствующий код вызова.</span><span class="sxs-lookup"><span data-stu-id="50f3f-233">The `[Remote]` attribute accepts multiple overloads you can use to direct client side JavaScript to the appropriate code to call.</span></span> <span data-ttu-id="50f3f-234">В приведенном ниже примере указывает на `VerifyEmail` метод действия `Users` контроллера.</span><span class="sxs-lookup"><span data-stu-id="50f3f-234">The example below points to the `VerifyEmail` action method of the `Users` controller.</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=7-8)]

<span data-ttu-id="50f3f-235">Второй шаг размещения кода проверки в соответствующий метод действия, как определено в `[Remote]` атрибута.</span><span class="sxs-lookup"><span data-stu-id="50f3f-235">The second step is putting the validation code in the corresponding action method as defined in the `[Remote]` attribute.</span></span> <span data-ttu-id="50f3f-236">Согласно jQuery проверки [ `remote()` ](https://jqueryvalidation.org/remote-method/) документации по методу:</span><span class="sxs-lookup"><span data-stu-id="50f3f-236">According to the jQuery Validate [`remote()`](https://jqueryvalidation.org/remote-method/) method documentation:</span></span>

> <span data-ttu-id="50f3f-237">Строку JSON, который должен быть требуется ответ serverside `"true"` для допустимых элементов и может быть `"false"`, `undefined`, или `null` для недопустимые элементы, используя сообщение об ошибке по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="50f3f-237">The serverside response must be a JSON string that must be `"true"` for valid elements, and can be `"false"`, `undefined`, or `null` for invalid elements, using the default error message.</span></span> <span data-ttu-id="50f3f-238">Если ответ serverside представляет собой строку, например.</span><span class="sxs-lookup"><span data-stu-id="50f3f-238">If the serverside response is a string, eg.</span></span> <span data-ttu-id="50f3f-239">`"That name is already taken, try peter123 instead"`, эта строка будет отображаться как пользовательское сообщение об ошибке вместо используемого по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="50f3f-239">`"That name is already taken, try peter123 instead"`, this string will be displayed as a custom error message in place of the default.</span></span>

<span data-ttu-id="50f3f-240">Определение `VerifyEmail()` метода следует таким правилам, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="50f3f-240">The definition of the `VerifyEmail()` method follows these rules, as shown below.</span></span> <span data-ttu-id="50f3f-241">Он возвращает ошибку проверки сообщения, если сообщение электронной почты, или `true` Если сообщение электронной почты свободен и помещает результат в `JsonResult` объекта.</span><span class="sxs-lookup"><span data-stu-id="50f3f-241">It returns a validation error message if the email is taken, or `true` if the email is free, and wraps the result in a `JsonResult` object.</span></span> <span data-ttu-id="50f3f-242">Затем на стороне клиента можно использовать возвращаемое значение для продолжения или отображения ошибки, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="50f3f-242">The client side can then use the returned value to proceed or display the error if needed.</span></span>

[!code-csharp[Main](validation/sample/UsersController.cs?range=19-28)]

<span data-ttu-id="50f3f-243">Теперь при вводе сообщения электронной почты, JavaScript, в представлении вызывает удаленный ли сообщение электронной почты, переведены в и, если да, отображается сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="50f3f-243">Now when users enter an email, JavaScript in the view makes a remote call to see if that email has been taken and, if so, displays the error message.</span></span> <span data-ttu-id="50f3f-244">В противном случае пользователь может отправить форму обычным образом.</span><span class="sxs-lookup"><span data-stu-id="50f3f-244">Otherwise, the user can submit the form as usual.</span></span>

<span data-ttu-id="50f3f-245">`AdditionalFields` Свойство `[Remote]` атрибут полезен для проверки комбинаций полей данных на сервере.</span><span class="sxs-lookup"><span data-stu-id="50f3f-245">The `AdditionalFields` property of the `[Remote]` attribute is useful for validating combinations of fields against data on the server.</span></span>  <span data-ttu-id="50f3f-246">Например если `User` модели выше имеет два дополнительных свойства вызывается `FirstName` и `LastName`, может потребоваться убедитесь, что нет существующих пользователей уже есть этой пары имен.</span><span class="sxs-lookup"><span data-stu-id="50f3f-246">For example, if the `User` model from above had two additional properties called `FirstName` and `LastName`, you might want to verify that no existing users already have that pair of names.</span></span>  <span data-ttu-id="50f3f-247">Определить новые свойства, как показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="50f3f-247">You define the new properties as shown in the following code:</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=10-13)]

<span data-ttu-id="50f3f-248">`AdditionalFields`могли быть заданы явно на строки `"FirstName"` и `"LastName"`, но с помощью [ `nameof` ](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) оператор, как это упрощает позже рефакторинга.</span><span class="sxs-lookup"><span data-stu-id="50f3f-248">`AdditionalFields` could have been set explicitly to the strings `"FirstName"` and `"LastName"`, but using the [`nameof`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) operator like this simplifies later refactoring.</span></span>  <span data-ttu-id="50f3f-249">Метод действия для выполнения проверки необходимо затем принять два аргумента, один для значения `FirstName` и один для значения `LastName`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-249">The action method to perform the validation must then accept two arguments, one for the value of `FirstName` and one for the value of `LastName`.</span></span>


[!code-csharp[Main](validation/sample/UsersController.cs?range=30-39)]

<span data-ttu-id="50f3f-250">Теперь при вводе имени и фамилии, JavaScript:</span><span class="sxs-lookup"><span data-stu-id="50f3f-250">Now when users enter a first and last name, JavaScript:</span></span>

* <span data-ttu-id="50f3f-251">Вызывает удаленный для просмотра, если этой пары имен были выполнены.</span><span class="sxs-lookup"><span data-stu-id="50f3f-251">Makes a remote call to see if that pair of names has been taken.</span></span>
* <span data-ttu-id="50f3f-252">Если после создания пары отображается сообщение об ошибке.</span><span class="sxs-lookup"><span data-stu-id="50f3f-252">If the pair has been taken, an error message is displayed.</span></span> 
* <span data-ttu-id="50f3f-253">Если не выполнено, пользователь может отправить форму.</span><span class="sxs-lookup"><span data-stu-id="50f3f-253">If not taken, the user can submit the form.</span></span>

<span data-ttu-id="50f3f-254">Если необходимо проверить два или более дополнительных полей с `[Remote]` атрибут, можно предоставлять их как список с разделителями запятыми.</span><span class="sxs-lookup"><span data-stu-id="50f3f-254">If you need to validate two or more additional fields with the `[Remote]` attribute, you provide them as a comma-delimited list.</span></span>  <span data-ttu-id="50f3f-255">Например, чтобы добавить `MiddleName` в модель свойство `[Remote]` атрибута, как показано в следующем коде:</span><span class="sxs-lookup"><span data-stu-id="50f3f-255">For example, to add a  `MiddleName` property to the model, set the `[Remote]` attribute as shown in the following code:</span></span>

```cs
[Remote(action: "VerifyName", controller: "Users", AdditionalFields = nameof(FirstName) + "," + nameof(LastName))]
public string MiddleName { get; set; }
```

<span data-ttu-id="50f3f-256">`AdditionalFields`, как и все аргументы атрибута должно быть константное выражение.</span><span class="sxs-lookup"><span data-stu-id="50f3f-256">`AdditionalFields`, like all attribute arguments, must be a constant expression.</span></span>  <span data-ttu-id="50f3f-257">Таким образом, не должны использовать [интерполируются строка](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/interpolated-strings) или вызвать [ `string.Join()` ](https://msdn.microsoft.com/en-us/library/system.string.join(v=vs.110).aspx) для инициализации `AdditionalFields`.</span><span class="sxs-lookup"><span data-stu-id="50f3f-257">Therefore, you must not use an [interpolated string](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/interpolated-strings) or call [`string.Join()`](https://msdn.microsoft.com/en-us/library/system.string.join(v=vs.110).aspx) to initialize `AdditionalFields`.</span></span> <span data-ttu-id="50f3f-258">Для каждого дополнительные поля, добавляемого `[Remote]` атрибут, необходимо добавить другого аргумента соответствующего метода действия контроллера.</span><span class="sxs-lookup"><span data-stu-id="50f3f-258">For every additional field that you add to the `[Remote]` attribute, you must add another argument to the corresponding controller action method.</span></span>
